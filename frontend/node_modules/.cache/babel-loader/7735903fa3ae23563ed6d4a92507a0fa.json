{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import{Link as RouterLink}from\"react-router-dom\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import Link from\"@material-ui/core/Link\";import Grid from\"@material-ui/core/Grid\";import Box from\"@material-ui/core/Box\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import{i18n}from\"../../translate/i18n\";import api from\"../../services/api\";import{nomeEmpresa}from\"../../../package.json\";import{AuthContext}from\"../../context/Auth/AuthContext\";//import logo from \"../../assets/logo.png\";\nconst Copyright=()=>{return/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",style:{color:\"white\"},align:\"center\"},\"Copyright \",/*#__PURE__*/React.createElement(Link,{style:{color:\"white\"},href:\"#\"},nomeEmpresa),\" \",new Date().getFullYear(),\".\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{style:{backgroundColor:'#FFD700',color:'#000',padding:'4px 8px',borderRadius:'4px',fontSize:'12px',fontWeight:'bold',display:'inline-block',minWidth:'60px',textAlign:'center',marginTop:'8px'}},\"BASIC\"));};const useStyles=makeStyles(theme=>({root:{width:\"100vw\",height:\"100vh\",background:\"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e40af 100%)\",backgroundRepeat:\"no-repeat\",backgroundSize:\"100% 100%\",backgroundPosition:\"center\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\"},paper:{backgroundColor:theme.palette.login,//DARK MODE PLW DESIGN//\ndisplay:\"flex\",flexDirection:\"column\",alignItems:\"center\",padding:\"55px 30px\",borderRadius:\"12.5px\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)},powered:{color:\"white\"}}));const Login=()=>{const classes=useStyles();const[user,setUser]=useState({email:\"\",password:\"\"});const{handleLogin}=useContext(AuthContext);const[viewregister,setviewregister]=useState('disabled');const handleChangeInput=e=>{setUser({...user,[e.target.name]:e.target.value});};useEffect(()=>{fetchviewregister();},[]);const fetchviewregister=async()=>{try{var _responsev$data;const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),5000);// 5 segundos timeout\nconst responsev=await api.get(\"/settings/viewregister\",{signal:controller.signal});clearTimeout(timeoutId);const viewregisterX=responsev===null||responsev===void 0?void 0:(_responsev$data=responsev.data)===null||_responsev$data===void 0?void 0:_responsev$data.value;// console.log(viewregisterX);\nsetviewregister(viewregisterX);}catch(error){console.error('Error retrieving viewregister',error);// Si hay error 401, 404 o timeout, establecer como disabled por defecto\nsetviewregister('disabled');}};const handlSubmit=e=>{e.preventDefault();handleLogin(user);};const logo=`${process.env.REACT_APP_BACKEND_URL||'http://127.0.0.1:8080'}/public/logotipos/login.png`;const randomValue=Math.random();// Generate a random number\nconst logoWithRandom=`${logo}?r=${randomValue}`;return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{style:{margin:\"0 auto\",width:\"80%\"},src:logoWithRandom,alt:`${process.env.REACT_APP_NAME_SYSTEM||'Whaticket'}`})),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,noValidate:true,onSubmit:handlSubmit},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:i18n.t(\"login.form.email\"),name:\"email\",value:user.email,onChange:handleChangeInput,autoComplete:\"email\",autoFocus:true}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:i18n.t(\"login.form.password\"),type:\"password\",id:\"password\",value:user.password,onChange:handleChangeInput,autoComplete:\"current-password\"}),/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,style:{textAlign:\"right\"}},/*#__PURE__*/React.createElement(Link,{component:RouterLink,to:\"/forgetpsw\",variant:\"body2\"},i18n.t(\"login.forgotPassword\")))),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit},i18n.t(\"login.buttons.submit\")),viewregister===\"enabled\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Link,{href:\"#\",variant:\"body2\",component:RouterLink,to:\"/signup\"},i18n.t(\"login.buttons.register\"))))))),/*#__PURE__*/React.createElement(Box,{mt:8},/*#__PURE__*/React.createElement(Copyright,null))));};export default Login;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\laragon\\\\www\\\\whaticket03\\\\waticketsaas\\\\frontend\\\\src\\\\pages\\\\Schedules\\\\index.js\";\nimport React, { useState, useEffect, useReducer, useCallback, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport ScheduleModal from \"../../components/ScheduleModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\nimport moment from \"moment\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport \"moment/locale/es\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport \"./Schedules.css\"; // Importe o arquivo CSS\n\n// Defina a função getUrlParam antes de usá-la\nfunction getUrlParam(paramName) {\n  const searchParams = new URLSearchParams(window.location.search);\n  return searchParams.get(paramName);\n}\nconst eventTitleStyle = {\n  fontSize: \"14px\",\n  // Defina um tamanho de fonte menor\n  overflow: \"hidden\",\n  // Oculte qualquer conteúdo excedente\n  whiteSpace: \"nowrap\",\n  // Evite a quebra de linha do texto\n  textOverflow: \"ellipsis\" // Exiba \"...\" se o texto for muito longo\n};\nconst localizer = momentLocalizer(moment);\nvar defaultMessages = {\n  date: \"Fecha\",\n  time: \"Hora\",\n  event: \"Evento\",\n  allDay: \"Día Completo\",\n  week: \"Semana\",\n  work_week: \"Agendamientos\",\n  day: \"Día\",\n  month: \"Mes\",\n  previous: \"Anterior\",\n  next: \"Siguiente\",\n  yesterday: \"Ayer\",\n  tomorrow: \"Mañana\",\n  today: \"Hoy\",\n  agenda: \"Agenda\",\n  noEventsInRange: \"No hay agendamientos en este período.\",\n  showMore: function showMore(total) {\n    return \"+\" + total + \" más\";\n  }\n};\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_SCHEDULES\") {\n    // Si es la primera página, reemplazar completamente\n    if (action.payload.pageNumber === 1) {\n      return action.payload.schedules;\n    }\n    // Si es paginación, concatenar\n    return [...state, ...action.payload.schedules];\n  }\n  if (action.type === \"UPDATE_SCHEDULES\") {\n    const schedule = action.payload;\n    const scheduleIndex = state.findIndex(s => s.id === schedule.id);\n    if (scheduleIndex !== -1) {\n      state[scheduleIndex] = schedule;\n      return [...state];\n    } else {\n      return [schedule, ...state];\n    }\n  }\n  if (action.type === \"DELETE_SCHEDULE\") {\n    const scheduleId = action.payload;\n    return state.filter(s => s.id !== scheduleId);\n  }\n  if (action.type === \"RESET\") {\n    return [];\n  }\n  return state;\n};\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  }\n}));\nconst Schedules = () => {\n  const classes = useStyles();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [deletingSchedule, setDeletingSchedule] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [schedules, dispatch] = useReducer(reducer, []);\n  const [scheduleModalOpen, setScheduleModalOpen] = useState(false);\n  const [contactId, setContactId] = useState(+getUrlParam(\"contactId\"));\n  const [viewMode, setViewMode] = useState(\"calendar\"); // \"calendar\" o \"table\"\n\n  const fetchSchedules = useCallback(async () => {\n    try {\n      const {\n        data\n      } = await api.get(\"/schedules/\", {\n        params: {\n          searchParam,\n          pageNumber\n        }\n      });\n      dispatch({\n        type: \"LOAD_SCHEDULES\",\n        payload: {\n          schedules: data.schedules,\n          pageNumber\n        }\n      });\n      setHasMore(data.hasMore);\n      setLoading(false);\n    } catch (err) {\n      toastError(err);\n    }\n  }, [searchParam, pageNumber]);\n  const handleOpenScheduleModalFromContactId = useCallback(() => {\n    if (contactId) {\n      handleOpenScheduleModal();\n    }\n  }, [contactId]);\n  const socketManager = useContext(SocketContext);\n  useEffect(() => {\n    dispatch({\n      type: \"RESET\"\n    });\n    setPageNumber(1);\n  }, [searchParam]);\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      fetchSchedules();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber, contactId, fetchSchedules, handleOpenScheduleModalFromContactId]);\n  useEffect(() => {\n    handleOpenScheduleModalFromContactId();\n    const socket = socketManager.getSocket(user.companyId);\n    socket.on(`company${user.companyId}-schedule`, data => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({\n          type: \"UPDATE_SCHEDULES\",\n          payload: data.schedule\n        });\n      }\n      if (data.action === \"delete\") {\n        dispatch({\n          type: \"DELETE_SCHEDULE\",\n          payload: +data.scheduleId\n        });\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [handleOpenScheduleModalFromContactId, socketManager, user]);\n  const cleanContact = () => {\n    setContactId(\"\");\n  };\n  const handleOpenScheduleModal = () => {\n    setSelectedSchedule(null);\n    setScheduleModalOpen(true);\n  };\n  const handleCloseScheduleModal = () => {\n    setSelectedSchedule(null);\n    setScheduleModalOpen(false);\n  };\n  const handleSearch = event => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n  const handleEditSchedule = schedule => {\n    setSelectedSchedule(schedule);\n    setScheduleModalOpen(true);\n  };\n  const handleDeleteSchedule = async scheduleId => {\n    try {\n      // Buscar el schedule para verificar su estado\n      const schedule = schedules.find(s => s.id === scheduleId);\n      if (schedule && schedule.isReminderSystem) {\n        // Si es del sistema de recordatorios, usar la lógica de cancelar\n        await api.post(`/schedules/${scheduleId}/cancel-reminder`);\n        toast.success(\"Reunión cancelada exitosamente\");\n      } else {\n        // Cancelar agendamiento normal (sin eliminar)\n        await api.post(`/schedules/${scheduleId}/cancel`);\n        toast.success(\"Agendamiento cancelado exitosamente\");\n      }\n      setDeletingSchedule(null);\n      setSearchParam(\"\");\n      setPageNumber(1);\n      dispatch({\n        type: \"RESET\"\n      });\n      setPageNumber(1);\n      await fetchSchedules();\n\n      // Forzar actualización de página para eliminar residuos\n      window.location.reload();\n    } catch (err) {\n      toastError(err);\n    }\n  };\n  const loadMore = () => {\n    setPageNumber(prevState => prevState + 1);\n  };\n  const handleScroll = e => {\n    if (!hasMore || loading) return;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n  const truncate = (str, len) => {\n    if (str.length > len) {\n      return str.substring(0, len) + \"...\";\n    }\n    return str;\n  };\n  const getScheduleStatus = schedule => {\n    const now = new Date();\n    const scheduleDate = new Date(schedule.sendAt);\n\n    // Verificar estado específico del agendamiento\n    if (schedule.status === \"CANCELADO\") {\n      return {\n        text: \"Cancelado\",\n        color: \"gray\"\n      };\n    } else if (schedule.sentAt) {\n      return {\n        text: \"Enviado\",\n        color: \"green\"\n      };\n    } else if (scheduleDate < now) {\n      return {\n        text: \"Vencido\",\n        color: \"red\"\n      };\n    } else {\n      return {\n        text: \"Pendiente\",\n        color: \"orange\"\n      };\n    }\n  };\n  return /*#__PURE__*/React.createElement(MainContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ConfirmationModal, {\n    title: deletingSchedule && (deletingSchedule.isReminderSystem ? \"¿Cancelar reunión?\" : \"¿Cancelar agendamiento?\"),\n    open: confirmModalOpen,\n    onClose: () => setConfirmModalOpen(false),\n    onConfirm: () => handleDeleteSchedule(deletingSchedule.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }\n  }, deletingSchedule && deletingSchedule.isReminderSystem ? \"¿Estás seguro de que deseas cancelar esta reunión? Se eliminarán todos los recordatorios asociados.\" : \"¿Estás seguro de que deseas cancelar este agendamiento? Se enviará un mensaje de cancelación al contacto.\"), /*#__PURE__*/React.createElement(ScheduleModal, {\n    open: scheduleModalOpen,\n    onClose: handleCloseScheduleModal,\n    reload: fetchSchedules,\n    \"aria-labelledby\": \"form-dialog-title\",\n    scheduleId: selectedSchedule && selectedSchedule.id,\n    contactId: contactId,\n    cleanContact: cleanContact,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(MainHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }\n  }, \"Agendamientos (\", schedules.length, \")\"), /*#__PURE__*/React.createElement(MainHeaderButtonsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    placeholder: i18n.t(\"contacts.searchPlaceholder\"),\n    type: \"search\",\n    value: searchParam,\n    onChange: handleSearch,\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(SearchIcon, {\n        style: {\n          color: \"gray\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 19\n        }\n      }))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: () => setViewMode(viewMode === \"calendar\" ? \"table\" : \"calendar\"),\n    style: {\n      marginRight: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 11\n    }\n  }, viewMode === \"calendar\" ? \"Vista Tabla\" : \"Vista Calendario\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleOpenScheduleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 11\n    }\n  }, \"Nuevo Agendamiento\"))), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.mainPaper,\n    variant: \"outlined\",\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }\n  }, viewMode === \"calendar\" ? /*#__PURE__*/React.createElement(Calendar, {\n    messages: defaultMessages,\n    formats: {\n      agendaDateFormat: \"DD/MM ddd\",\n      weekdayFormat: \"dddd\"\n    },\n    localizer: localizer,\n    events: schedules.map(schedule => ({\n      title: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"event-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: eventTitleStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 17\n        }\n      }, schedule.contact.name), /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n        onClick: () => {\n          setDeletingSchedule(schedule);\n          setConfirmModalOpen(true);\n        },\n        className: \"delete-icon\",\n        style: {\n          opacity: schedule.sentAt || new Date(schedule.sendAt) < new Date() ? 0.3 : 1,\n          cursor: schedule.sentAt || new Date(schedule.sendAt) < new Date() ? 'not-allowed' : 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(EditIcon, {\n        onClick: () => {\n          handleEditSchedule(schedule);\n          setScheduleModalOpen(true);\n        },\n        className: \"edit-icon\",\n        style: {\n          opacity: new Date(schedule.sendAt) < new Date() ? 0.3 : 1,\n          cursor: new Date(schedule.sendAt) < new Date() ? 'not-allowed' : 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }\n      })),\n      start: new Date(schedule.sendAt),\n      end: new Date(schedule.sendAt)\n    })),\n    startAccessor: \"start\",\n    endAccessor: \"end\",\n    style: {\n      height: 500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(Table, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 17\n    }\n  }, \"Fecha\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 17\n    }\n  }, \"Hora\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 17\n    }\n  }, \"Contacto\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 17\n    }\n  }, \"Conexi\\xF3n\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 17\n    }\n  }, \"Mensaje\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 17\n    }\n  }, \"Estado\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 17\n    }\n  }, \"Acciones\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 13\n    }\n  }, schedules.map(schedule => {\n    var _schedule$contact, _schedule$whatsapp;\n    const status = getScheduleStatus(schedule);\n    const scheduleDate = new Date(schedule.sendAt);\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: schedule.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 21\n      }\n    }, scheduleDate.toLocaleDateString('es-ES', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 21\n      }\n    }, scheduleDate.toLocaleTimeString('es-ES', {\n      hour: '2-digit',\n      minute: '2-digit'\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 21\n      }\n    }, ((_schedule$contact = schedule.contact) === null || _schedule$contact === void 0 ? void 0 : _schedule$contact.name) || 'N/A'), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 21\n      }\n    }, ((_schedule$whatsapp = schedule.whatsapp) === null || _schedule$whatsapp === void 0 ? void 0 : _schedule$whatsapp.name) || 'N/A'), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 21\n      }\n    }, truncate(schedule.body, 50)), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: status.color,\n        fontWeight: 'bold',\n        padding: '4px 8px',\n        borderRadius: '4px',\n        backgroundColor: status.color === 'green' ? '#e8f5e8' : status.color === 'red' ? '#ffe8e8' : '#fff3e0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 23\n      }\n    }, status.text)), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => handleEditSchedule(schedule),\n      disabled: scheduleDate < new Date() || schedule.status === \"CANCELADO\",\n      size: \"small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => {\n        setDeletingSchedule(schedule);\n        setConfirmModalOpen(true);\n      },\n      disabled: schedule.sentAt || scheduleDate < new Date() || schedule.status === \"CANCELADO\",\n      size: \"small\",\n      title: schedule.status === \"CANCELADO\" ? \"Ya cancelado\" : \"Cancelar agendamiento\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 25\n      }\n    }))));\n  })))));\n};\nexport default Schedules;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useCallback","useContext","toast","makeStyles","Paper","Button","TextField","InputAdornment","MainContainer","MainHeader","Title","api","i18n","MainHeaderButtonsWrapper","ScheduleModal","ConfirmationModal","toastError","moment","SocketContext","AuthContext","Calendar","momentLocalizer","SearchIcon","DeleteOutlineIcon","EditIcon","Table","TableBody","TableCell","TableHead","TableRow","IconButton","getUrlParam","paramName","searchParams","URLSearchParams","window","location","search","get","eventTitleStyle","fontSize","overflow","whiteSpace","textOverflow","localizer","defaultMessages","date","time","event","allDay","week","work_week","day","month","previous","next","yesterday","tomorrow","today","agenda","noEventsInRange","showMore","total","reducer","state","action","type","payload","pageNumber","schedules","schedule","scheduleIndex","findIndex","s","id","scheduleId","filter","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","Schedules","classes","user","loading","setLoading","setPageNumber","hasMore","setHasMore","selectedSchedule","setSelectedSchedule","deletingSchedule","setDeletingSchedule","confirmModalOpen","setConfirmModalOpen","searchParam","setSearchParam","dispatch","scheduleModalOpen","setScheduleModalOpen","contactId","setContactId","viewMode","setViewMode","fetchSchedules","data","params","err","handleOpenScheduleModalFromContactId","handleOpenScheduleModal","socketManager","delayDebounceFn","setTimeout","clearTimeout","socket","getSocket","companyId","on","disconnect","cleanContact","handleCloseScheduleModal","handleSearch","target","value","toLowerCase","handleEditSchedule","handleDeleteSchedule","find","isReminderSystem","post","success","reload","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","truncate","str","len","length","substring","getScheduleStatus","now","Date","scheduleDate","sendAt","status","text","color","sentAt","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","open","onClose","onConfirm","placeholder","t","onChange","InputProps","startAdornment","position","style","variant","onClick","marginRight","className","onScroll","messages","formats","agendaDateFormat","weekdayFormat","events","map","contact","name","opacity","cursor","start","end","startAccessor","endAccessor","height","size","align","_schedule$contact","_schedule$whatsapp","key","toLocaleDateString","year","toLocaleTimeString","hour","minute","whatsapp","body","fontWeight","borderRadius","backgroundColor","disabled"],"sources":["C:/laragon/www/whaticket03/waticketsaas/frontend/src/pages/Schedules/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useCallback, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport ScheduleModal from \"../../components/ScheduleModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\nimport toastError from \"../../errors/toastError\";\nimport moment from \"moment\";\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport \"moment/locale/es\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport \"./Schedules.css\"; // Importe o arquivo CSS\n\n// Defina a função getUrlParam antes de usá-la\nfunction getUrlParam(paramName) {\n  const searchParams = new URLSearchParams(window.location.search);\n  return searchParams.get(paramName);\n}\n\nconst eventTitleStyle = {\n  fontSize: \"14px\", // Defina um tamanho de fonte menor\n  overflow: \"hidden\", // Oculte qualquer conteúdo excedente\n  whiteSpace: \"nowrap\", // Evite a quebra de linha do texto\n  textOverflow: \"ellipsis\", // Exiba \"...\" se o texto for muito longo\n};\n\nconst localizer = momentLocalizer(moment);\nvar defaultMessages = {\n  date: \"Fecha\",\n  time: \"Hora\",\n  event: \"Evento\",\n  allDay: \"Día Completo\",\n  week: \"Semana\",\n  work_week: \"Agendamientos\",\n  day: \"Día\",\n  month: \"Mes\",\n  previous: \"Anterior\",\n  next: \"Siguiente\",\n  yesterday: \"Ayer\",\n  tomorrow: \"Mañana\",\n  today: \"Hoy\",\n  agenda: \"Agenda\",\n  noEventsInRange: \"No hay agendamientos en este período.\",\n  showMore: function showMore(total) {\n    return \"+\" + total + \" más\";\n  }\n};\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_SCHEDULES\") {\n    // Si es la primera página, reemplazar completamente\n    if (action.payload.pageNumber === 1) {\n      return action.payload.schedules;\n    }\n    // Si es paginación, concatenar\n    return [...state, ...action.payload.schedules];\n  }\n\n  if (action.type === \"UPDATE_SCHEDULES\") {\n    const schedule = action.payload;\n    const scheduleIndex = state.findIndex((s) => s.id === schedule.id);\n\n    if (scheduleIndex !== -1) {\n      state[scheduleIndex] = schedule;\n      return [...state];\n    } else {\n      return [schedule, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_SCHEDULE\") {\n    const scheduleId = action.payload;\n    return state.filter((s) => s.id !== scheduleId);\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n\n  return state;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nconst Schedules = () => {\n  const classes = useStyles();\n\n  const { user } = useContext(AuthContext);\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [deletingSchedule, setDeletingSchedule] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [schedules, dispatch] = useReducer(reducer, []);\n  const [scheduleModalOpen, setScheduleModalOpen] = useState(false);\n  const [contactId, setContactId] = useState(+getUrlParam(\"contactId\"));\n  const [viewMode, setViewMode] = useState(\"calendar\"); // \"calendar\" o \"table\"\n\n\n  const fetchSchedules = useCallback(async () => {\n    try {\n      const { data } = await api.get(\"/schedules/\", {\n        params: { searchParam, pageNumber },\n      });\n\n      dispatch({ type: \"LOAD_SCHEDULES\", payload: { schedules: data.schedules, pageNumber } });\n      setHasMore(data.hasMore);\n      setLoading(false);\n    } catch (err) {\n      toastError(err);\n    }\n  }, [searchParam, pageNumber]);\n\n  const handleOpenScheduleModalFromContactId = useCallback(() => {\n    if (contactId) {\n      handleOpenScheduleModal();\n    }\n  }, [contactId]);\n\n  const socketManager = useContext(SocketContext);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      fetchSchedules();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [\n    searchParam,\n    pageNumber,\n    contactId,\n    fetchSchedules,\n    handleOpenScheduleModalFromContactId,\n  ]);\n\n  useEffect(() => {\n    handleOpenScheduleModalFromContactId();\n    const socket = socketManager.getSocket(user.companyId);\n\n    socket.on(`company${user.companyId}-schedule`, (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_SCHEDULES\", payload: data.schedule });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_SCHEDULE\", payload: +data.scheduleId });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, [handleOpenScheduleModalFromContactId, socketManager, user]);\n\n  const cleanContact = () => {\n    setContactId(\"\");\n  };\n\n  const handleOpenScheduleModal = () => {\n    setSelectedSchedule(null);\n    setScheduleModalOpen(true);\n  };\n\n  const handleCloseScheduleModal = () => {\n    setSelectedSchedule(null);\n    setScheduleModalOpen(false);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleEditSchedule = (schedule) => {\n    setSelectedSchedule(schedule);\n    setScheduleModalOpen(true);\n  };\n\n  const handleDeleteSchedule = async (scheduleId) => {\n    try {\n      // Buscar el schedule para verificar su estado\n      const schedule = schedules.find(s => s.id === scheduleId);\n      \n      if (schedule && schedule.isReminderSystem) {\n        // Si es del sistema de recordatorios, usar la lógica de cancelar\n        await api.post(`/schedules/${scheduleId}/cancel-reminder`);\n        toast.success(\"Reunión cancelada exitosamente\");\n      } else {\n        // Cancelar agendamiento normal (sin eliminar)\n        await api.post(`/schedules/${scheduleId}/cancel`);\n        toast.success(\"Agendamiento cancelado exitosamente\");\n      }\n      \n      setDeletingSchedule(null);\n      setSearchParam(\"\");\n      setPageNumber(1);\n\n      dispatch({ type: \"RESET\" });\n      setPageNumber(1);\n      await fetchSchedules();\n      \n      // Forzar actualización de página para eliminar residuos\n      window.location.reload();\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  const truncate = (str, len) => {\n    if (str.length > len) {\n      return str.substring(0, len) + \"...\";\n    }\n    return str;\n  };\n\n  const getScheduleStatus = (schedule) => {\n    const now = new Date();\n    const scheduleDate = new Date(schedule.sendAt);\n    \n    // Verificar estado específico del agendamiento\n    if (schedule.status === \"CANCELADO\") {\n      return { text: \"Cancelado\", color: \"gray\" };\n    } else if (schedule.sentAt) {\n      return { text: \"Enviado\", color: \"green\" };\n    } else if (scheduleDate < now) {\n      return { text: \"Vencido\", color: \"red\" };\n    } else {\n      return { text: \"Pendiente\", color: \"orange\" };\n    }\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingSchedule &&\n          (deletingSchedule.isReminderSystem \n            ? \"¿Cancelar reunión?\" \n            : \"¿Cancelar agendamiento?\")\n        }\n        open={confirmModalOpen}\n        onClose={() => setConfirmModalOpen(false)}\n        onConfirm={() => handleDeleteSchedule(deletingSchedule.id)}\n      >\n        {deletingSchedule && deletingSchedule.isReminderSystem \n          ? \"¿Estás seguro de que deseas cancelar esta reunión? Se eliminarán todos los recordatorios asociados.\"\n          : \"¿Estás seguro de que deseas cancelar este agendamiento? Se enviará un mensaje de cancelación al contacto.\"\n        }\n      </ConfirmationModal>\n      <ScheduleModal\n        open={scheduleModalOpen}\n        onClose={handleCloseScheduleModal}\n        reload={fetchSchedules}\n        aria-labelledby=\"form-dialog-title\"\n        scheduleId={selectedSchedule && selectedSchedule.id}\n        contactId={contactId}\n        cleanContact={cleanContact}\n      />\n      <MainHeader>\n        <Title>Agendamientos ({schedules.length})</Title>\n        <MainHeaderButtonsWrapper>\n          <TextField\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\n            type=\"search\"\n            value={searchParam}\n            onChange={handleSearch}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon style={{ color: \"gray\" }} />\n                </InputAdornment>\n              ),\n            }}\n          />\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => setViewMode(viewMode === \"calendar\" ? \"table\" : \"calendar\")}\n            style={{ marginRight: 8 }}\n          >\n            {viewMode === \"calendar\" ? \"Vista Tabla\" : \"Vista Calendario\"}\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleOpenScheduleModal}\n          >\n            Nuevo Agendamiento\n          </Button>\n        </MainHeaderButtonsWrapper>\n      </MainHeader>\n      <Paper className={classes.mainPaper} variant=\"outlined\" onScroll={handleScroll}>\n        {viewMode === \"calendar\" ? (\n          <Calendar\n            messages={defaultMessages}\n            formats={{\n            agendaDateFormat: \"DD/MM ddd\",\n            weekdayFormat: \"dddd\"\n        }}\n            localizer={localizer}\n            events={schedules.map((schedule) => ({\n                          title: (\n              <div className=\"event-container\">\n                <div style={eventTitleStyle}>{schedule.contact.name}</div>\n                <DeleteOutlineIcon\n                  onClick={() => {\n                    setDeletingSchedule(schedule);\n                    setConfirmModalOpen(true);\n                  }}\n                  className=\"delete-icon\"\n                  style={{ \n                    opacity: (schedule.sentAt || new Date(schedule.sendAt) < new Date()) ? 0.3 : 1,\n                    cursor: (schedule.sentAt || new Date(schedule.sendAt) < new Date()) ? 'not-allowed' : 'pointer'\n                  }}\n                />\n                <EditIcon\n                  onClick={() => {\n                    handleEditSchedule(schedule);\n                    setScheduleModalOpen(true);\n                  }}\n                  className=\"edit-icon\"\n                  style={{ \n                    opacity: new Date(schedule.sendAt) < new Date() ? 0.3 : 1,\n                    cursor: new Date(schedule.sendAt) < new Date() ? 'not-allowed' : 'pointer'\n                  }}\n                />\n              </div>\n            ),\n              start: new Date(schedule.sendAt),\n              end: new Date(schedule.sendAt),\n            }))}\n            startAccessor=\"start\"\n            endAccessor=\"end\"\n            style={{ height: 500 }}\n          />\n        ) : (\n          <Table size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell align=\"center\">Fecha</TableCell>\n                <TableCell align=\"center\">Hora</TableCell>\n                <TableCell align=\"center\">Contacto</TableCell>\n                <TableCell align=\"center\">Conexión</TableCell>\n                <TableCell align=\"center\">Mensaje</TableCell>\n                <TableCell align=\"center\">Estado</TableCell>\n                <TableCell align=\"center\">Acciones</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {schedules.map((schedule) => {\n                const status = getScheduleStatus(schedule);\n                const scheduleDate = new Date(schedule.sendAt);\n                return (\n                  <TableRow key={schedule.id}>\n                    <TableCell align=\"center\">\n                      {scheduleDate.toLocaleDateString('es-ES', { \n                        day: '2-digit', \n                        month: '2-digit', \n                        year: 'numeric' \n                      })}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {scheduleDate.toLocaleTimeString('es-ES', { \n                        hour: '2-digit', \n                        minute: '2-digit' \n                      })}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {schedule.contact?.name || 'N/A'}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {schedule.whatsapp?.name || 'N/A'}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {truncate(schedule.body, 50)}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <span style={{ \n                        color: status.color, \n                        fontWeight: 'bold',\n                        padding: '4px 8px',\n                        borderRadius: '4px',\n                        backgroundColor: status.color === 'green' ? '#e8f5e8' : \n                                       status.color === 'red' ? '#ffe8e8' : '#fff3e0'\n                      }}>\n                        {status.text}\n                      </span>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      <IconButton\n                        onClick={() => handleEditSchedule(schedule)}\n                        disabled={scheduleDate < new Date() || schedule.status === \"CANCELADO\"}\n                        size=\"small\"\n                      >\n                        <EditIcon />\n                      </IconButton>\n                      <IconButton\n                        onClick={() => {\n                          setDeletingSchedule(schedule);\n                          setConfirmModalOpen(true);\n                        }}\n                        disabled={schedule.sentAt || scheduleDate < new Date() || schedule.status === \"CANCELADO\"}\n                        size=\"small\"\n                        title={schedule.status === \"CANCELADO\" ? \"Ya cancelado\" : \"Cancelar agendamiento\"}\n                      >\n                        <DeleteOutlineIcon />\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        )}\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default Schedules;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import*as Yup from\"yup\";import{Formik,Form,Field}from\"formik\";import{toast}from\"react-toastify\";import{makeStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import{Button,TextField,Dialog,DialogActions,DialogContent,DialogTitle,CircularProgress,MenuItem}from\"@material-ui/core\";import api from\"../../services/api\";import toastError from\"../../errors/toastError\";// Estilos personalizados\nconst useStyles=makeStyles(theme=>({btnWrapper:{position:\"relative\"},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}}));// Esquema de validación con Yup\nconst HubNotificaMeSchema=Yup.object().shape({nome:Yup.string().required(\"Nombre es obligatorio\"),token:Yup.string().required(\"Token es obligatorio\"),tipo:Yup.string().oneOf([\"Facebook\",\"Instagram\",\"Webchat\"],\"Tipo inválido\").required(\"Tipo es obligatorio\")});const HubNotificaMeDialog=_ref=>{let{open,onClose,hubnotificameId}=_ref;const classes=useStyles();const initialState={nome:\"\",token:\"\",tipo:\"\"};const[hubnotificame,setHubNotificaMe]=useState(initialState);// Cargar datos si hay un ID\nuseEffect(()=>{const fetchData=async()=>{try{if(!hubnotificameId)return;// envia el formulario hacia la siguiente dirección\nconst{data}=await api.get(`/hub-notificame/${hubnotificameId}`);setHubNotificaMe({nome:data.nome,token:data.token,tipo:data.tipo});}catch(err){toastError(err);}};fetchData();},[hubnotificameId,open]);// Manejar cierre del modal\nconst handleClose=()=>{setHubNotificaMe(initialState);onClose();};// Guardar datos\nconst handleSaveHubNotificaMe=async values=>{try{await api.post(\"/hub-notificame\",values);toast.success(\"¡Token agregado correctamente!\");handleClose();}catch(err){toastError(err);}};return/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose,maxWidth:\"xs\",fullWidth:true},/*#__PURE__*/React.createElement(DialogTitle,null,\"Agregar Token\"),/*#__PURE__*/React.createElement(Formik,{initialValues:hubnotificame,enableReinitialize:true,validationSchema:HubNotificaMeSchema,onSubmit:handleSaveHubNotificaMe},_ref2=>{let{touched,errors,isSubmitting}=_ref2;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:\"Nombre\",name:\"nome\",error:touched.nome&&Boolean(errors.nome),helperText:touched.nome&&errors.nome,variant:\"outlined\",margin:\"dense\",fullWidth:true}),/*#__PURE__*/React.createElement(Field,{as:TextField,label:\"Token\",name:\"token\",error:touched.token&&Boolean(errors.token),helperText:touched.token&&errors.token,variant:\"outlined\",margin:\"dense\",fullWidth:true}),/*#__PURE__*/React.createElement(Field,{as:TextField,select:true,label:\"Tipo\",name:\"tipo\",error:touched.tipo&&Boolean(errors.tipo),helperText:touched.tipo&&errors.tipo,variant:\"outlined\",margin:\"dense\",fullWidth:true},/*#__PURE__*/React.createElement(MenuItem,{value:\"Facebook\"},\"Facebook\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"Instagram\"},\"Instagram\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"Webchat\"},\"WebChat\"))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"secondary\",disabled:isSubmitting,variant:\"outlined\"},\"Cancelar\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"primary\",disabled:isSubmitting,variant:\"contained\",className:classes.btnWrapper},\"Agregar\",isSubmitting&&/*#__PURE__*/React.createElement(CircularProgress,{size:24,className:classes.buttonProgress}))));}));};export default HubNotificaMeDialog;","map":null,"metadata":{},"sourceType":"module"}
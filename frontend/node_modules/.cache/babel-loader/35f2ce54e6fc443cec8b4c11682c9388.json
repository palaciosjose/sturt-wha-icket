{"ast":null,"code":"import { useRef, useEffect, useCallback } from 'react';\n\n/**\r\n * Hook personalizado para manejar el foco en modales\r\n * Evita problemas de aria-hidden y asegura accesibilidad correcta\r\n */\nconst useModalFocus = open => {\n  const modalRef = useRef(null);\n  const previousActiveElement = useRef(null);\n\n  // Guardar el elemento activo antes de abrir el modal\n  useEffect(() => {\n    if (open) {\n      previousActiveElement.current = document.activeElement;\n    }\n  }, [open]);\n\n  // Restaurar el foco al cerrar el modal\n  const handleClose = useCallback(() => {\n    // Asegurar que el foco se libere del modal\n    if (modalRef.current) {\n      const activeElement = modalRef.current.querySelector(':focus');\n      if (activeElement) {\n        activeElement.blur();\n      }\n    }\n\n    // Peque침o delay para asegurar que el foco se libere completamente\n    setTimeout(() => {\n      // Restaurar el foco al elemento anterior si existe\n      if (previousActiveElement.current && previousActiveElement.current.focus && document.contains(previousActiveElement.current)) {\n        previousActiveElement.current.focus();\n      } else {\n        // Si no hay elemento anterior v치lido, liberar el foco\n        if (document.activeElement && document.activeElement.blur) {\n          document.activeElement.blur();\n        }\n      }\n    }, 0);\n  }, []);\n\n  // Manejar el evento onExited del Dialog\n  const handleExited = useCallback(() => {\n    // Asegurar que el foco se libere completamente al cerrar\n    if (document.activeElement && document.activeElement.blur) {\n      document.activeElement.blur();\n    }\n\n    // Limpiar la referencia del elemento anterior\n    previousActiveElement.current = null;\n  }, []);\n  return {\n    modalRef,\n    handleClose,\n    handleExited\n  };\n};\nexport default useModalFocus;","map":{"version":3,"names":["useRef","useEffect","useCallback","useModalFocus","open","modalRef","previousActiveElement","current","document","activeElement","handleClose","querySelector","blur","setTimeout","focus","contains","handleExited"],"sources":["C:/laragon/www/whaticket03/waticketsaas/frontend/src/hooks/useModalFocus.js"],"sourcesContent":["import { useRef, useEffect, useCallback } from 'react';\r\n\r\n/**\r\n * Hook personalizado para manejar el foco en modales\r\n * Evita problemas de aria-hidden y asegura accesibilidad correcta\r\n */\r\nconst useModalFocus = (open) => {\r\n  const modalRef = useRef(null);\r\n  const previousActiveElement = useRef(null);\r\n\r\n  // Guardar el elemento activo antes de abrir el modal\r\n  useEffect(() => {\r\n    if (open) {\r\n      previousActiveElement.current = document.activeElement;\r\n    }\r\n  }, [open]);\r\n\r\n  // Restaurar el foco al cerrar el modal\r\n  const handleClose = useCallback(() => {\r\n    // Asegurar que el foco se libere del modal\r\n    if (modalRef.current) {\r\n      const activeElement = modalRef.current.querySelector(':focus');\r\n      if (activeElement) {\r\n        activeElement.blur();\r\n      }\r\n    }\r\n\r\n    // Peque침o delay para asegurar que el foco se libere completamente\r\n    setTimeout(() => {\r\n      // Restaurar el foco al elemento anterior si existe\r\n      if (previousActiveElement.current && \r\n          previousActiveElement.current.focus && \r\n          document.contains(previousActiveElement.current)) {\r\n        previousActiveElement.current.focus();\r\n      } else {\r\n        // Si no hay elemento anterior v치lido, liberar el foco\r\n        if (document.activeElement && document.activeElement.blur) {\r\n          document.activeElement.blur();\r\n        }\r\n      }\r\n    }, 0);\r\n  }, []);\r\n\r\n  // Manejar el evento onExited del Dialog\r\n  const handleExited = useCallback(() => {\r\n    // Asegurar que el foco se libere completamente al cerrar\r\n    if (document.activeElement && document.activeElement.blur) {\r\n      document.activeElement.blur();\r\n    }\r\n    \r\n    // Limpiar la referencia del elemento anterior\r\n    previousActiveElement.current = null;\r\n  }, []);\r\n\r\n  return {\r\n    modalRef,\r\n    handleClose,\r\n    handleExited\r\n  };\r\n};\r\n\r\nexport default useModalFocus; "],"mappings":"AAAA,SAASA,MAAM,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;;AAEtD;AACA;AACA;AACA;AACA,MAAMC,aAAa,GAAIC,IAAI,IAAK;EAC9B,MAAMC,QAAQ,GAAGL,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMM,qBAAqB,GAAGN,MAAM,CAAC,IAAI,CAAC;;EAE1C;EACAC,SAAS,CAAC,MAAM;IACd,IAAIG,IAAI,EAAE;MACRE,qBAAqB,CAACC,OAAO,GAAGC,QAAQ,CAACC,aAAa;IACxD;EACF,CAAC,EAAE,CAACL,IAAI,CAAC,CAAC;;EAEV;EACA,MAAMM,WAAW,GAAGR,WAAW,CAAC,MAAM;IACpC;IACA,IAAIG,QAAQ,CAACE,OAAO,EAAE;MACpB,MAAME,aAAa,GAAGJ,QAAQ,CAACE,OAAO,CAACI,aAAa,CAAC,QAAQ,CAAC;MAC9D,IAAIF,aAAa,EAAE;QACjBA,aAAa,CAACG,IAAI,CAAC,CAAC;MACtB;IACF;;IAEA;IACAC,UAAU,CAAC,MAAM;MACf;MACA,IAAIP,qBAAqB,CAACC,OAAO,IAC7BD,qBAAqB,CAACC,OAAO,CAACO,KAAK,IACnCN,QAAQ,CAACO,QAAQ,CAACT,qBAAqB,CAACC,OAAO,CAAC,EAAE;QACpDD,qBAAqB,CAACC,OAAO,CAACO,KAAK,CAAC,CAAC;MACvC,CAAC,MAAM;QACL;QACA,IAAIN,QAAQ,CAACC,aAAa,IAAID,QAAQ,CAACC,aAAa,CAACG,IAAI,EAAE;UACzDJ,QAAQ,CAACC,aAAa,CAACG,IAAI,CAAC,CAAC;QAC/B;MACF;IACF,CAAC,EAAE,CAAC,CAAC;EACP,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMI,YAAY,GAAGd,WAAW,CAAC,MAAM;IACrC;IACA,IAAIM,QAAQ,CAACC,aAAa,IAAID,QAAQ,CAACC,aAAa,CAACG,IAAI,EAAE;MACzDJ,QAAQ,CAACC,aAAa,CAACG,IAAI,CAAC,CAAC;IAC/B;;IAEA;IACAN,qBAAqB,CAACC,OAAO,GAAG,IAAI;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLF,QAAQ;IACRK,WAAW;IACXM;EACF,CAAC;AACH,CAAC;AAED,eAAeb,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module"}
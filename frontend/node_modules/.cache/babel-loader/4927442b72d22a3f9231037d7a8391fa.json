{"ast":null,"code":"import axios from\"axios\";import{clearAuthData,validateAndCleanAuth}from\"../utils/clearAuthData\";const api=axios.create({baseURL:process.env.REACT_APP_BACKEND_URL,withCredentials:true});// ‚úÖ INTERCEPTOR MEJORADO PARA MANEJO AUTOM√ÅTICO DE TOKENS\napi.interceptors.request.use(config=>{// Solo verificar token si NO es una ruta de autenticaci√≥n\nif(!config.url.includes('/auth/')&&!config.url.includes('/login')){// Verificar token antes de cada request\nif(!validateAndCleanAuth()){// Si el token es inv√°lido, cancelar el request\nreturn Promise.reject(new Error(\"Token inv√°lido - redirigiendo al login\"));}}return config;},error=>{return Promise.reject(error);});// Interceptor para manejar errores de autenticaci√≥n\napi.interceptors.response.use(response=>response,error=>{if(error.response&&(error.response.status===401||error.response.status===403)){console.log(\"üîÑ Error de autenticaci√≥n detectado - limpieza autom√°tica\");// ‚úÖ LIMPIEZA AUTOM√ÅTICA COMPLETA\nclearAuthData();return Promise.reject(error);}return Promise.reject(error);});export const openApi=axios.create({baseURL:process.env.REACT_APP_BACKEND_URL});export default api;","map":null,"metadata":{},"sourceType":"module"}
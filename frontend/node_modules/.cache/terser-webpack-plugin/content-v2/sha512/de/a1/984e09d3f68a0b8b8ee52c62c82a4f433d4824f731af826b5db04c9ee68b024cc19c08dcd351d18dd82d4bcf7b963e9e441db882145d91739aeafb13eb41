{"code":"(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{379:function(e,a,t){e.exports=t.p+\"static/media/wa-background.2675a051.png\"},380:function(e,a,t){e.exports=t.p+\"static/media/wa-background-dark.8244f042.png\"},447:function(e,a,t){e.exports=t.p+\"static/media/planilha.549edeba.xlsx\"},573:function(e,a,t){},621:function(e,a,t){e.exports=t.p+\"static/media/sound.9fd5812c.mp3\"},624:function(e,a,t){e.exports=t.p+\"static/media/chat_notify.2529c259.mp3\"},656:function(e){e.exports=JSON.parse('{\"a\":\"watoolx.com\"}')},694:function(e,a,t){e.exports=t.p+\"static/media/n8n.5c788b8d.png\"},695:function(e,a){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAADICAMAAAApx+PaAAABrVBMVEUAAAB2dnZ1dXV2dnZ2dnZ2dnZ1dXWYmJh2dnZ7e3t1dXV2dnaHh4d2dnZ2dnb/8fF2dnZ1dXV9fX11dXV3d3d1dXV2dnZ4eHh1dXWFhYV1dXV1dXXvbxB8fHx9fX12dnZ1dXV1dXV2dnZ1dXV3d3d1dXV3d3d3d3d3d3d1dXV9fX12dnZ2dnZ2dnZ4eHh4eHh1dXV1dXV2dnZ7e3t2dnZ1dXV3d3eEhIT0lxp3d3fyjRd2dnZ1dXV2dnZ3d3d2dnZ2dnb/jiD0kxl2dnZ2dnZ2dnZ2dnZ3d3d2dnbtbw52dnZ2dnb0lhp1dXV4eHh3d3d2dnZ2dnZ3d3d4eHj1jBv1hRvEmHj1lxr0lRp4eHh8fHzsbg7zlhn0lxryhxbxgxX0lxrtbg/1lxp3d3fucBDvdA/tcA7wehLtbg7tbg70lhrtbg7vcxDxgRPvdxHtbg/tbQ7zlxv0lhr0lxvubg/tbw/zmBv2mBz2mRzwcA94eHjsbg7zlxvtbg7tbg7tbg72lxrubg/ubg7scBDwfRLzlxrtbQ/1lhv0mBr0lxz2lxz1lhzsbQ51dXXzlhptsIrZAAAAjHRSTlMAy7fZp62fA6Af9qYGzvwB0t4R0GqJcRs/C/qVPhQP/e7qm+KOYzE7NuYY88JUKiXxxoEi1btQCPtH3KqleXZgDQretLCSfFxL/oRY6r9AJ+xtNC4dEgT25DMh9vLv49rQhGxBM/v58u7Tua/x6+jgv6yfh1RGQTUoJCDm2cmhk5JzaV/gxZp6YVlRSVahGaQAAAzRSURBVHja7NcxCoJgGADQ72rdodShQLyBCrq4OojwnbkhgggbW37fu8ULAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP6u6pauCs5kajOznYLTuPb50l+DU7iMdb7V4yUo39bkp2YLCjev+W2dg4Ldhjwy3IJCVd0jj931rVD7kr8te1CcJ3tn2pTIEQbgV10dZREWEBAobrkVwQN0PeOxGm9jLjebc3NU5fqQfMhVSaUqqUoqNa+/OUw3dM9MDwuzUM6oPJ8WxIbh6e73mN7dn7++eTVf/wwD7hVv/Lhy04mVQfl2n3D/e3LTDSf/umHA/eCnT2665ZNB+XYvePuHGzP8MOjM3nne+OfFjTle/DMI7Xeb/3ZuzLPzHwy4s7Qv0wbl2z3lnT9Xbl6XlT8Hndk7yLufndz0wsmgM3vnIEdjemBwsObOQY7G9MDgYM3d48/3bvrDytfQG04JBtwO3+30SfrJ92DI0bCKvZQ/cFAGA1bTiENX0JmAMk4K+s+0f9aTKDwZP5YAYDPSIAP3FPnNj97vg/L3PpZlMGQYBQrjB9ugJR/HBhdF6MgYNhiBfnM2hE0moQF5NAr3FFmWv3j6Ya9b+9M35W6kcxIbIVCzjAS/VdI34thi6kFIl+WvdlZ6cf7+t7JsQjolGZCAk0TCsEXSA8gobT8Q6bLcQ2j/8G9ZNiGds7sNDB8Sxq2R/lYcGSl4MNIbof3k9Xb2RjDvLH1phhJ5tOxzYYuleWixiYRVC6Sz4OKaeRl8Pnf+gKQrof01qrenX8qdpOtX8PbhzAVSEsy6tIaI8QWwRHqQ7utZIDwo6UpoN12mybIJ6YzQZhIJIzFesx09uwZrpGdQ4RIepHRZNlW+vSA7uxnpnOgyEvbcoMIi6X5UiD1U6fKbXZdvK09lhnnpIM0gYdMG0lOkeQAPVnrX5dvOt7J56eJXjYmY9dLXSU/mIUvvqnz7kATz3qQ7q6iwMJB+68gCpHzr2HPtXTpMhDstdcn7vOjsUnrseQxehXOivA3GPO5e+v049y0L0PLtRacyrXfpkOJtTzjPNvgVVOQik2RWXOwFiq+WHqqlPA5EDHvG5gzFus8iaWxQmc2Q7u9irsG5MhOyCsNkyDyl2E56MDPqK7gcnqHIYZ1PJa+CdmKSp0LaT0ieA7sgCwihXey59kn6oot/tZPY4LFKuQ85jlSwvfT6ZgI5lWch0HNdVQ21IAFEsMEjZbNBgSlj6eVd5JT8MaC8hQrPNFeFCmlQM4sNfGAXZDWdy7cXtOfau3T+XSQkUbr7CLVc1NpJz6VRS+ElEPhYcVQzNG9eej0VRw3JA6CQd68CgzUX88CJuejUsAuyCC/fTgx6rv2UvkC/HkG6e7yNDFH6sQP1hLdAhSSMVQialR6tosARDe+k8oxHgTMk3jA8RoUy2AVZpF1ndmXnA7m/0s9oK0yQPsNXVCGMlHjNSHqG79sFBxeny9IopSRSnqyZk170oAFjoDCNCgfqni7FA5xx+pltgywglm+859pn6V5etPlU0l82NY7nQgDOs8cuWtF7RelvNUWPTC0CuINTPiSEc9BiCinDc14AZ27GgRQqPbikUCHv5qMcC9KlUyS41o5/DcWuAkOIfLJKSTqWeJf2CgjsNX6wDXIH6MEaWqb1Xbqb6IzopQ9Rkee6sO0XpMc8dHZMSa0BM1RqIQqUK/o4nWMLcY9Lb/GILP+2JZsfCbPz0GSuoJpaKZaXUGbZ/g8t8qjwFtgGuQPkYA05GtNn6fzsxJp+e8+OORA9MWAskteVnFy6OidIqL/O66QmotKcezIKDCliUvo83Wj2JWAEn9CUEBqsosI0NCnGEZGEpCVt6pIG+yB3wVdPaZnWf+kj2OBUzN6jG+k5EDKhM530WIIE+1VQkwuTxU81Z2nqPwEq3MPmpI8h/zNTS9f6IQA4K5q9e4o8crDEjQ22D/ZBNkFfpfOCZ9eoTpe0ccBDNkyd9IDhubpntHRWCZsDDdGSGelBF1mn20Yp6Cxr4rLfXia6d9UlWrG5F9gHa6WXSBosSBdJkVG4dD50KQpathO8dC6QF7tBy4wZ6VsspxcvyxVTIjwqTAAh6iKfbqvVjGEjJO10qt9S6XW+VEXp+c3RJ+mKp7q2P+ekYXFYK93poFNGzz7zUUaFAOgom5H+mKUTGg5RoQYAIYdqVmToBXnJ9rAIhFF69M5GWCp9HhU2DaRLU0vIuZhJsdXLpedZiaylRhMAtkqzQtGQNCGdRSAtIZI6zDCpu+xqSZ6+3LwwFvRXwUZYKj1DQ64oPe9DA4a4dL7YztsceTtudUTjEuhZNiE9bNBBZTXmOjQ4IJljnaSWyqvT7mY+N8S7DhUn2AhLpa8TKV5Bes2BHaTzKRNtEzQuWxX2BQisdS89xkK60XUtM9N4yPzvtyo3DLIMYh3shJXSnQWqUi/9pQspyeHxyNjokkuUzpN3cQnxxRmh/VCBVPfSn7NtQ8ca/+zDrMW0xyrLKssmRmjwtxNWSedL9UgvPeRBwl4OKKEDn5H0rXYrnS3OI9K76Wmle1Eh0+a6Tvl1eFo5XVJiM3K2NWtKdbATFkqXRmiepZd+iULSLa23jell0DNBMwW2F4gx/bRL6axTvAECQ3wMupeXm9Vbin+IeBHg0oYHr6ySzpTsgl56Fdl2ydjXSecHGLZAAyucc6yRlxey90SX0lmpvyaGphIN37zfvtncQQ5VI0w1r/8YbIV10s9oqL7WS5doleYUj1sMGdXp62LEZtn0r2i4TLNoQjoJ00k3cMRbqgG61ddLqjx9gyR6dMcPx8BWWCb9PEkDN+ilF1FcW8G4gXTYJXaLoMVbYnk1eEi0lUBLxIz0KdaFEQsPLKoCiitWU1cg5+S56CHtKtkLq6TXKjQ/DwrSacdmX1i8ovRLFgfU+FUZwb5RBAg6zEinH2dS0k1ZF3kW1J9+blzT6F8iGSCZYHb7Jy2skR6dQUJ4GgTpXhQWRw0NpYeSBvdTVuMkZd9WHb2szIMKadbcXbY9g9s6dZ+2G7hBBkwgoiOkuaE6nCbrHeyFFdKf+x3CuSYqnadZrhwwDh2idP5do2MVOLkEu8nGd+GRCc2ZOXPSr8UjWPVROqyk6eazcEW5whanYDNuR/roIqU8XcukPNgkvgEE3ckZaqWSB0p9IY5tpIdo0efacALFGQhTHaHW/KJRpHAITRaX0Yx0PnFwfxuazE8ioaY9GKAPJew6L8Fm3Ip0YyqHYCg9h5S91SCEss/Shm1YStmBBM9CNgTO7IYHCY6yqn6jnG4FJfCuphxoWnpoCQmFDSVMOKdTLvG86xFSXF5NckEJgs2wTvpSGQTpXAIljBSPX5ROnbqwBdfpmtPldZR4a7TTlCnpMJ9g7zGSZm+zLAHnuvUkcPJIqYLdsEq6Z4t9Z0LvPTaJWirlgCidslpBPaVVULMgzLZYxJx0OPegwCMnqPGIkd9dQMIm2A1LpLuqGa5cXOkQnUU16RwI0hlXPtTiuwItmRKq2YsCkb7evXSInqKW8ILb6DQOFrVtRMI82I3bll4Zqe7XtkGDeD9dCiT5rvzYC6J0jnTgQU6a7SCc4CP1DtNKFSNdSOfUllDFmiBy2mAnP0M6sO34Q+4Xf4Ah0QkVRSe0oaj8OAqMemY0iegqVDeCZMcnv83GC4IaKb8w6ymhwzN7lJfAiInAaTqMF77xl27WylsAgvGQ2ekGZc2bTPufkHieWA4w5eofK8wbPHcO9uPz3+V+8Pvn0HekmATd44RX4+YvGHndQmp7MWirIzCvjfuv3+Re+e2vu/S39Ytou1Nrt88bn34g98KXn9r5P23KThne0w2H4IHzyzc9OP/mF7AtzuMq4jVoqP/f3h20RBWFYQC+kdEiMVpEmy8wsigUgqBFBBG4CLdKbdxK6MpZOJugRBeu7v3PgiPIMIIz9x7xfPo8f+GDmft+973nfJy0WhgftP0cjJt67by5mO/ytaee0Pw+3W8Xt39S9Z09zyctnM3lmc+e3t6PB7LBfh1vtYvZOqv9dq73k5c1G9vNpb/fuq7GV9x3Z2/ULmK011RvrZvY/Pnh9audd0uX+/dnmdLGbTs6bOd1eNQkcNGjnbHhx71PfNutOqZNHzQ0Y+lHw5TxXDEtzzVsT1+udFPW/Z/PiDliWjSZbH/prqx+rufkxnrEjTHtNN1T0KfvTx6vrqy/eLT29cEv4voM/c9x7TGN0kMfVbxzpbdIH9MoOPTdkyQxjWJD/58nplFm6P8S7FzpK/JXY1hUZKvGMFykqsZQRGSqxlBGZKrGUEakqsZQROSqxlBC2Lk+PJGsGkMBka0aw3CRrxrDUJGxGsMwoRoDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQue6vJdUy+5+yQAAAABJRU5ErkJggg==\"},696:function(e,a,t){e.exports=t.p+\"static/media/webhook.e5374d73.png\"},697:function(e,a){e.exports=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QCYRXhpZgAASUkqAAgAAAAFABoBBQABAAAASgAAABsBBQABAAAAUgAAACgBAwABAAAAAgAAADEBAgALAAAAWgAAAGmHBAABAAAAZgAAAAAAAABgAAAAAQAAAGAAAAABAAAAUGhvdG9TY2FwZQAAAwABoAMAAQAAAAEAAAACoAQAAQAAAAMBAAADoAQAAQAAAFcAAAAAAAAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgAVwEDAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/HOrei+H9e8SXo07w7ol3f3BGRBZWzSuf+AqCaqV/Vp/wQH/AGfPhx8F/wDgl18KtY8J+ErC21Txb4eXXNf1OG1UT31xcu8gaWTG59sZSMZPCxgCv9kvHDxfh4PcO0MesL9YqVqns4x5uRL3XJyb5ZPS1rJat7o/Pcty95hVceaySufy5f8AClPjJ/0SbxL/AOCK4/8AiKT/AIUp8ZP+iTeJv/BFcf8AxFf2v+RH/do8iL+7X8tf8Tw5t/0JIf8Ag+X/AMqPb/1ap/8APx/d/wAE/ig/4Up8ZP8Aok3ib/wRXH/xFH/ClPjJ/wBEm8Tf+CK4/wDiK/tf8iL+7R5EX92j/ieHNv8AoSQ/8Hy/+VB/q1T/AOfj+7/gn8UH/ClPjJ/0SbxN/wCCK4/+Io/4Up8ZP+iTeJv/AARXH/xFf2v+RF/do8iL+7R/xPDm3/Qkh/4Pl/8AKg/1ap/8/H93/BP4oP8AhSnxk/6JN4m/8EVx/wDEVS1z4c/ELwxafb/EngTWdPg/57X2mSxJ+bKBX9tnkRf3ap+IPDmg+JNIuNC8Q6Na39ldwtFdWd5brLFNGwwVdGBDAjggjmqh9OLMlNc+SQ5etq7vby/dCfDULaVPw/4J/ENRXu//AAU/+DvhD4Af8FC/jF8H/h/pkdjoeiePb+PSLCEYS1tnkMkcKjsqK4QeyivCK/vjIs2o59kuGzKimoV6cKiT3SnFSSfnZny1Wm6VRwfR2CiiivVICiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr+vH/gjZ/yiu+An/ZM9M/9FCv5Dq/rx/4I2f8AKK74Cf8AZM9M/wDRQr+I/puf8kllX/X+f/ps+l4b/jz9P1PpeimtIqnBNBlUDPav837n146im+anrR50f94fnSugHUU3zo/7w/Ojzo/7w/OjmQ7MdSP0/GjzFxnNNZg3AouI/ke/4LZ/8pX/AI6/9j3cf+gR18t19Sf8Fs/+Ur/x1/7Hu4/9Ajrif2G/+Cev7TP/AAUT8d6x8OP2YPDenanquhaSNS1GLUtXis1S3Mqxbg0hAY7nUYHPNf7acG5zlXD/AIVZZmGY1o0aFPC4dynN2jFOnBat7atL5n5viKc6uOnCCu3J/meI0V+h0f8Awa8f8Fbn+98MvCS/73ja1/oaJP8Ag14/4K3J934Z+Em/3fG1r/U1y/8AEb/CK/8AyPMN/wCDY/5lf2Zj/wDn0/uPzxor339uz/gml+1d/wAE4tV8OaL+1L4W0zTLjxXb3M2jLputQ3gkSBo1kLGInbgypjPXPtXgVffZLnmUcR5bDMMsrxrUJ35ZwalF2bTs1o7NNeqOSpTqUZuE1ZroFFFFeqQFFFFABRRRQAUUV+gf/BGb/giBpH/BVzwB4y+IOs/tF3PgqLwjrVvYGytfDC3zXfmwmXfva4j8vGMY2tn1r5bjLjLh/gLIp5xnVV08PBxTkoyk7ydlpFN6t9vU3w+Gq4qr7Omrs/PyitDxZoieGvFWp+HEmMg0/UJrYSMuC3luVzjt0rPr6ShWhiKMakNpJNejMWmnYKKKK1EFFFaPhbwj4r8c61H4c8FeGNR1jUZlZorDS7KS4mcKCzEJGCxAAJPHAFZ1a1KhTdSrJRitW27JLu2xpNuyM6itHxT4Q8WeB9XbQPGvhfUdHv0RWey1Sykt5lUjIJSQBgD2OKzqKValiKaqUpKUXqmndP0aBpp2YUUUVoIK/rx/4I25/wCHVvwEx/0TPTf/AEUK/kOr+vH/AII2f8orvgJ/2TPTP/RQr+I/puf8kllX/X+f/ps+l4b/AI8/T9TqP2pdB+LOra5p0vg231KfTltcPFphYlZ9xyzKvP3duCeBg9O/pPwytPFFj8OtMtPFzu+ppaf6SZm3Pu5wGPOWAwCeeQaj+KXxs+EHwU0yPXPjB8UNA8L2crFYbnX9WhtFkYdVUyMNx9hk1503/BSX9gZCVP7YHw749PFNsf8A2ev82cu4TzKrj6uYYanWqKpZWUZSgrdrLf8AI+4xvEWE+oUsDWdOHs23e6UnfvdnkvjDSvi+3iC5Pimx1uS681tzyJKynk/cIG0r6bePSsgeHPGB+7oGpH1/0WT/AAr3D/h5L+wJnj9sD4eD/uaLf/4qgf8ABSP9gZun7YPw8/8ACptv/i6+WxHg3nNarKp/tOrvrCT/AEPqMP4qYChSjBQoaK2kkjxIeFPG2P8AkWtWx6/Y5P8ACmN4Y8Yr18PaoPUm0k/wr3RP+Cjv7A7/AHP2w/h1+Piy1/8Ai67j4UftCfAv46Rzz/Bn4weGvFK2pH2r+wNagujDnpvEbEr+NcNfwfzHCUnVr1K8Yrq4NL73oddLxTw9eXLTpUpPspJv8D5bttM+JEc6jT7DXBKRhPJhm3H2GBmvqj4IR+MIvhnpqeOmnOo7H8z7USZQm9tgfPO7bjOefXmrPxI+Mnwm+D9raX3xX+JmgeGoL+4EFjNr+rw2i3Ev9xDKyhmxzgc1u6fqNjq1lFqWmXkVxbzxrJBPBIHSRCMhlYcEEc5FetkXCM+Hn9Y9rUnGasub4dGr26Nr8Dx884pWewVF0YQcXd8vxbdfI/kl/wCC2f8Aylf+Ov8A2Pdx/wCgR1xH7Dv/AAUH/aZ/4J3eO9Y+I/7MHibT9L1XXdJGm6jLqOkRXivbiVZdoWUEKdyKcjniu3/4LZ/8pX/jr/2Pdx/6BHXy3X+7fBmT5Xn/AIV5ZgMxoxrUamFw6lCaTjJKnBq6ej1SZ+J4ipOljpzg7NSf5n7hf8ERP+C5X/BQb9uD/goP4a/Z3/aC8d6Df+GdT0fVLi7t7Dwxb2srSQWjyx4kjAI+ZRkd66L/AIL7/wDBan9u/wDYL/bds/gJ+zZ4z0LStAPgix1WVb7w5BdzPcTTXKPl5QcLiJMAAd/Wvh//AINiDj/grz4L/wCxc1z/ANN8tdX/AMHXT+Z/wVKgHZfhlpAH/f68NfzHivDbgOP0n6OSRy2isI8E6jpci5HPmkubl2vtqe1HGYr+xXV53zc1r31toeka1+xp/wAFE/8Ag4P/AGSvD/7a3i79qX4e6xdeDYNYsbDwjB4cksbu2uEZHltXaBGRpJFjgdCeMSrnGTX5EyI8TmORSrKcMCMEGv19/wCDST9sUeAv2hvGX7GHifVdun+O9M/tnw3DI/yjU7RMTIo/vSWxLH2tBXx1/wAFk/2KNc/ZW/4KdeNvgl4S8OStp/irXU1nwTaW8R/f2uoyF44Yh32TtLbgesVfpPhvxFjuEfE/N+AcfyU8LSgsRg1GEKcVRlJynFcqSfK5at63hNtnHjKMMRgqeKjdyektb69P68zov2B/+CJPxX/bi/ZQ8Xftl3Xxp8PeAvBXhGa9W4vNfsp5WuY7S2We5mQR8CNA23OeWVhjitb9lj/ggn8fP2uP2B779u74YfFDSJra3tdWksfBcek3M2p38tk8ieRF5YKmSVo8KPVgK/QX/gr9q2j/APBKb/ghL4B/YB8EX8UHiPxrZ2+iao9u2GmVcXmsXA9VkncRH/Zusdq9v/4N1PHmhfC7/giBpHxN8T7v7N8O3XifU9QKAFhDBd3ErkZ77UNfkfEfjf4nQ4GxPF+W10qFbMVQwsHTg70IxqXu3G7dSSir3unFqLR30ctwX1mOHmtVC8nfrp+R+dPwW/4NMf29fiH4Eg8V/Ev4peBPA+oXUIkj8PX1zcXlzDkZ2zNBGYkb2R5MfpXyh/wUK/4JC/tof8E1723vvjz4Mtb3wzf3P2fTvGfhu4a502aUgkRMzIjwyEAkLKi7sHbu2nHSftJ/8F1f+Ck3x7+O978YNA/af8W+C7Aag0uheFvCutSWlhp9uGzHC0UeFuSFwGeUOXOc8EAfs7/wTd/aCb/gvB/wSQ8Z/DD9qLTrK48SKbrwt4i1CC1WNZrtII57PU0jA2xyAyROQuF8yFioVSFH1Wfcc+PvhXTwnEnFdTD4jL6s4RrUqUeWVDn/AJZWTk47XcppvTqpGFLC5XjuajQTU0tG+p/OR8E/gf8AFr9o74naV8G/gf4E1DxJ4m1q48nTdJ02HfJI3UsScBEUZZnYhVUEsQATX6dfD7/g0U/ba8Q+CU1zx58f/h54d1iWAOmhg3d35TEfclmSMKrDuUEg9Ca+k/8Ag1R/ZP0T4Wfs5/FD9r/WPBran4zufEt34b0+CBEM8dpYxRSywQs5AVpriTackA+RHkjBr5z/AGnfhH/wdD/tDfH6++N3/CAfFPwsn9pNPoHh3wr48tbSw0mAN+7hSKG8VJCFwGdwWcgls5xVcV+MvFXEfH2NyHhzNsJlmHwVlKtiXDmrVHvGEZ3XLF3TaV1a7eqQUMuoUcLGrWpym5dF0XmfC/7fP/BMX9rj/gm94ytvDP7SHgaOLT9Sdl0TxTo85uNM1IqMssc21SrgcmORUfHO3GCf1z/4M78H9nP4zg/9Dpp//pG9e+eIfgl+03+3z/wRC8XfC/8A4KS/B59C+K2jeH9Rmtp7tbbfcX9hE09jqSC3ZkiaTCxyBSM5mACq4FeB/wDBneQv7Ovxm9B410//ANJGr894/wDFHMfETwCzjC5p7N4zA4mjTqTovmpVE6i5KkGm1aXLLZ20urXsurCYKGEzSnKF+WSbV91psz5T+E3/AAa8ft7ftKanrfxR8beI/C/w203VNZu7jS9P8TPPLqMsLTOUke3hjIhDAg7XcOM8oK8F/wCChX/BCP8Abn/4J2eE5Pil8QNF0nxV4JhlVLrxX4PuZJ4bIswVPtMUkaSQgsQu/aY8kDfkgHt/+Cnn/Bd79uH49/tV+JYfgV+0J4o8A+BPDmt3Fh4V0rwhq8mntcQQylBdXMkJV5pJdu/axKIGCqOCW/TH/g3x/wCCi/jP/gqJ+zZ8Qv2W/wBss2/i3WfDFlFa32oX9sgOuaNepLHsuFUBXkQxujPgFlkjJywZj9pmnGP0iPDrhrDcX5zLD1cB+79rhYRtOlTnZR9+1+bVJvnklJ7NXtzww+U4us8PTup62l0bP55Php8MviD8ZPHml/C/4V+D7/X/ABDrd2trpWj6XbNLPcyt0VVXnpkk9AASSACa/Tj4Rf8ABpN+3l428HQ+IviX8XvAHg3ULmESJoU9zc3s8BIzsmeGPylYd9jyD3r63/4N1P8Agmz4M/Zy/aJ/aM+MPiOzivrzwB8SdR+H3hHULobntre2ImuJxno8sUtoNw5ADjOGOfzf/wCCgX/BeL9u/wDaR/aW17xT8H/2jPFvgTwTp2szReD9A8J6xJp6paRuVjluDCVaeVwA7eYWUFiqgKBX0mYeJXiT4ncb4jIfD2tSw+HwtOnOriKseduVSKlGEYtSS3a+G94yfMkknjDB4PBYZVcWm3JuyXkcJ/wUP/4Iwfttf8E2rWLxX8ZfClhrPhC4uRBB408K3D3Ngsrfdjm3oklux6DzECseFZjX3H/wbGf8Euvixf8AxM8Gf8FP28d6DH4Us5Nc0seH5Fn+3ySG3ltPMU7PL273J+9nCmvrP/gh7+27qP8AwWR/YX+In7Nv7bFjZ+J9Y8Pxx6N4jvXt0jOr6bexSeRPIqAKlwjQyjegHMcbjDZNfDf/AAQO8W/tF/s/f8FkJf2BLn43+J5fBHhbWfFtjfeFBrEw0y4uLSK5j+0fZt3lhi8SvkDOcGvhOJvEDxJ4o8PeJOFs2nSoZllsW8RKMbwxGGlCXNyKz5ZyvF81krNaRd0dVHC4Oji6Nemm4T27qXn5H1X/AMFjf+DfP9ob/goP+2LrP7VHw3+NngvQ9KuPDlja/wBm60l39pD20JVj+6iZcHjHNfz5yoY5GjIwVODX6zf8HIf7b/7ZPwQ/4KV6x8Mvg3+1R8QfCnh1PCGlSronh3xdd2VqHkhYyN5cMirlj1OOa/Jh3eRzJIxLMcknua/ZPo04DjfDeH+Fr5xi6dXCVKNL6tCMOWVKK5rqcrLmb92zu9n3POziWGeKkqcWpJu77+glFFFf0YeQFf14/wDBG0Z/4JW/AQf9Uz0z/wBFCv5Dq/rx/wCCNn/KK74Cf9kz0z/0UK/iP6bn/JJZV/1/n/6bPpeG/wCPP0/U8E/4LM/8Erv2gv22viRoHxl+BOt6LcTaP4dGl3Ph/VbtreSTE8solikIKHPm4KsUxsByeg+FG/4IN/8ABSlf+aP6S3PbxbY//Ha/fwqCckUFQTX8jcK+O/HPCGSUsqwfspUqd1Hng20m27XUo31b31OPOPDvh/OsfPGVnNTlvyyVr7dUz+f9v+CEX/BSxenwV00/Txdp/wD8epP+HE//AAUr/wCiKad/4V2n/wDx6v6Adq+lIY1Pavo/+JnvEb/n3h//AAXP/wCWHl/8Qm4Z/nqf+BL/AORP5/8A/hxN/wAFLT934J6d/wCFdp//AMer7Q/4I3/8Eof2ov2QPjxf/Hb48alpuj28nh2fTbfQdM1UXMty8skTZnKAxhF8vIAYktt6AHP6YeUnpShVHQV4PE3j5x1xVklbK8VGjGlVVpckGm1ppeUpJbdr9mejlPhxw/k+Phi6Lm5Qd1eStf5JH5t/8FtP+Ca/7U/7Y/xZ8HfEn9n+yttas9O0F9NvtIu9XitfscgnaUTr5zKrCQOFbHI8leCMY+w/2DPgT44/Zn/ZG8D/AAN+I/iGLU9a8P6QYb64t2LRozSvIIUY8ssauIwcDIQHA6V7CUUnJFI6gDIFfBZnxxnebcKYTh6vyfV8NJyhaNpXd/ilfW3M9kvO7R9FhOH8Bgs4rZnT5vaVUk7vTpsvkv0P5Hf+C2f/AClf+Ov/AGPdx/6BHXy3X1J/wWz/AOUr/wAdf+x7uP8A0COvluv9l/DX/k3mUf8AYLh//TUD4/Gf73U/xP8AM/QP/g2K/wCUu/gv/sXNc/8ASCWup/4Ot/8AlKcn/ZM9I/8ARt3XyL/wTp/bj8T/APBOz9qbSP2pPCHgSw8SX2kafe2selaldPDDILiBoWYsgJGAxI9xWn/wU0/4KD+LP+CmH7Sa/tJeM/h1p3he9Xw7a6SdN0y8kniKQNKwk3SAHJ80gj2r81xHBHEkvpF0+KVRX1GOD9k580b+05pO3Lfm2a1tbzO2OJo/2Q6F/e5r28jzr9lT9oLxR+yn+0j4J/aN8Gsx1Dwd4jttSjiV9vnxxuPNgJ/uyRl4z7Oa/qE+On7CnwV/4KGftE/s0/8ABQzR9QtLrTvA5OuREpk6vYT2wutP5wf9Td+VKAezyDqa/lv079nD9oTWfh5b/F3RvgV4xvPCd3LJFbeJ7TwzdSafLIjbHRbhYzGWVgQRuyDwa/o1/Yy+NPxJ/wCCaf8Awb06L8Y/2l4JLXxD4U8EX11oek6plJg1zdTf2RZyK3zBiJrZduMopwR8pr8f+lZh4VsZlObcP4mP9oSnUwXLCSc5RrQlFxaV2uVuUXfZ1OjsehkbtGpTqr3LKWu2n9fgfk7/AMHKv7Ya/tP/APBSDWfAHh3VfP8ADnwqtB4a09Y3yjXqt5l9Jjs3nkwn1Fstfqx/wbyfDrSPi/8A8EMNP+FGvyvHY+J5PFOk3skY+ZYri6uYXI99rmv5rfEniHWfF3iLUPFniPUJbvUdUvZbu/u5my880jl3dj3JZiT7mv6Mv+CHnijxB4I/4N3tV8aeFNUlsdU0fQ/Gt7pt7DjfBcRPdvHIuQRlWUEZ9KX0h+EqfBvgXkeQ4JpOjiaEFLvP2dXmn85tyfqGU4j6xmdSrLqn+aPxF/aT/wCCWn7c37Mvxxv/AIG+Kv2cPF+p3cWotb6PqeheHbm7tNZj3YjmtpIkZZFcFTtzuUnawVgRX7s/8EfP2bdU/wCCM3/BKLxj8Yv2sPL0fW7wXnjHxJpcs677CNLZI7axJBwZ2Ea/KM/vJwnJHPxp8DP+DwL4w+FPANtoPx9/ZC0jxfrttbiNtf0PxW2krdsBgPJbtbThWbgsUYLnOEAwB8hf8FP/APguf+1d/wAFNdLh+HPiXT9P8F+ALe6W5XwfoE8kgu5VJKPdzvhrgrnKqFSMEBtm4Ajs4l4Z8fvF2hhOF+I8BRweCp1ISr14VIy9sofyRUnJX1aTives20lYVGtleAcq9GTlJrRW2P01/wCDU/8AaZ034t/st/Fb9m658TjTvF2n+NLvxDC0O3zVtNRhiTz41fIby7iGQnIIHmRgj5ufk79sb9vX/g5J/Yt+NGo/CP4k/FrxTcwR6k9voHiLTvhvps1jrcW4+VLbypZFWLLgmPO9ScMARX5x/s0ftP8Axx/ZA+L2mfHP9nvx5deH/EelOfKurfDJNE2N8E0bfLLE4ADIwIOAeoBH6y/C/wD4PE/iLpXhSGx+Mn7EOj65rUUQEup+H/GcmnQTsB18iW1uDHnrxI30qeLPCHijhTxBxue5LkWGzjB420pUa3s1OjUS1cJVNFGTu3a972aXKmLD5hRr4SNKpVdOUeqvqvkeQftGftnf8HL3wY/Zhtv2g/2i/G3ibw/4C8SztpTy6n4U0WGdRNGQontxbefbpINyq0irkjHG5d31l/wZ2gN+zn8Z1I4PjXTsj/tzavz5/wCCnP8AwX+/aw/4KQeEJfg4/h7TPAHw9nmSW88MaJcPcTaiyMHQXV04UyqrKGCIka5ALBiARlf8Erf+C2vxS/4JWfDrxf4A+HXwT0HxT/wlurwX813rWoTxfZ2iiMYVViHzA5zkkV28SeFnG3EPgnjMuhkuEweY4itTl7LDclOPs4TTiqkrqLnFOW0mrbWbaFRx2GpZlGbqSlBJ6u71t0M3/gqD/wAEkP2r/wBkH9rHxT4e0P4IeJde8Gaxr1zeeC/EOg6NNe29zZzSs8ULvCrCOdAwjZGwSV3AFWUn9XP+DZr/AIJ6/FL9hr4EfED9qT9qTw7P4P1HxrDbCz0jXF+zz6dpFmssjXFwrYMJkaRjsfDKkIYgbq+Vv2U/+DuD49/C/wADQeC/2mv2dLD4h3Vonl2/iTTfEB0u7lQfd+0IYJkmfGBvXy84yQSST4r/AMFKf+Djn9q39vjwBffBDwT4Qsvhj4G1RDHrOm6TqL3d/qkR6wz3bJH+5PeOONN3KsWUkV5nEPD/ANIvxC4co8D5rgKOHw16ca2LVSMlUhTaaagpcybcVJrlV5L7CbKpVcowlZ4mnJt9I22ufpF/wbz/ALffw8/ai+Ln7T3w4XUYorzxL8XtT8eeH7Kc7ZLrS73y7ZioPJ8sW9vu9PPFfjz/AMFAv+CSn7X/AOxx+0vrnwwT4H+Kdf8AD9zq8zeDPEeh6HPeW+q2bOTDhoVYLMEKh4jhlYHgqVY+BfAL4/8Axf8A2X/i1o/xx+BXjm88PeJtDufOsNSsnwRkYaN1PyyRupKtGwKspIIINfrZ8JP+Dw74paF4Nh0r42fsV6P4i1uGELJq/h/xjJpkNw4GNxt5LW4KE9SRIRnoBXu4nw/8TPCLjjE51wLgoY7CYunThUoTmqc4TpRUYyUpOKa3el/iknFWTM1isHj8MqeJlyyi3Z2vufS//Bu/+xH4w/4Jkfsa/Ef9qX9sSybwXe+K44dU1HTtY/dy6Ro2nwzOklwvWORjNOxjPzKoQEBiVH57/wDBDn4+2/xj/wCDg22+NN/CbVviHrni/UIYHxmNrq1vbtYz9FGPwrz7/gpp/wAF+f2uP+Cj/hOT4QXWk6d4C+H00ySXnhfQLh5pdRKMGQXdy4UzKrAMEVY0yASrFVI+O/gt8Y/iL+z38WNA+N3wl8QyaV4k8M6nFf6RfxqG8qZDkZUghlIyrKeGViDkE118L+DvGub5NxNm/E7hTzPOKUqahF3hRjyNQi2r315U7OVoxWrbZNbMMNTqUadG7hTd79z9Kf8Ag6H/AGcfjnr/APwU7sPFvhf4TeINWsPF3g7Tbfw/c6VpUtyt9cwCRJYI/LU7pV+UlPvbWU4wQa/LXUdOv9I1CfSdVspba6tZmiubeeMo8UikhkZTyCCCCDyCK/Z/wb/weJ+PrLwBDYfEL9hrSdU8URW4WXVdM8bvZ2c0uMeZ9ne0leMd9vmt6ZFfkR8fPizc/Hn43+Lvjde+GNP0Wfxd4jvNYuNK0lXFtayXMzSukYdmYKGc4ya+18B4eJmTZHT4d4lyqOGo4OkoU6qqwn7VqTXwxbcVy216vtey5s0+p1KjrUZ3cndq2xyNFFFf0AeUFf14/wDBGtlP/BK/4CBTnHwz03/0UK/kOr96f+CLv/Bwd+wj8EP2JPBX7Mn7WHjzV/CHiLwRYyacupTeHbq9sr63E8jwGNrNJXUrEyIwdFGUJBINfyN9L7hLiPijg3AyyjCzxEqNZuUacXOSjKDXNyxTbSaSdlpdHv5BiKNDESVSVrrr6n7P0V8Rzf8ABxj/AMEbIHKN+2NCSOpTwTrjD8xZVG//AAcd/wDBGhOv7Yq/h4E14/8AtjX+eX/ENPEb/oTYr/wnrf8AyB9Z9cwf/PyP3o+4KK+HD/wchf8ABGVev7YZ/DwBr5/9sKaP+Dkb/gjGen7YL/8AhvfEH/yBT/4hn4j/APQmxf8A4T1v/kA+uYP/AJ+R+9H3LRXw4P8Ag5C/4Iyt0/bDP4+ANfH/ALYU9f8Ag47/AOCM7dP2xV/HwJrw/wDbGl/xDTxG/wChNi//AAnrf/IB9cwn/PyP3o+4KR+n418Sx/8ABxj/AMEbJWwv7ZEA928E64P52VYXxI/4OWP+CQvgrQJtT0X9onUfE13GhaLStA8F6n50xxkANcQRRD0+Zx1q6Xhh4k1qipwybFXf/UPVX4uFhPG4NLWpH70fgn/wWz/5Sv8Ax1/7Hu4/9Ajr5br0n9sb9oO6/av/AGqfiD+0jdaSbD/hNPFl7qsNgz7mtYZZSYoiw+8Uj2KT3IzXm1f7N8EZdiso4Ny7A4mPLUpUKMJLtKNOMWvk0fneJnGpiJyjs2/zCjOOaKK+nauYn6o/8E1f+DmfXf2Gv2atA/Zc8d/slaX4l0bwtbPBoupaBrx0ydkeR5WNxG8MyyyF3YmRSmc5Kk5J8H/4Ky/8Fu/j3/wVJOmeCNQ8I2vgjwBot4buy8KafqD3T3VztKrPdTlUErKpYIFRFXe3BJyPiaivyjLPBDwyyji2XEuGwCWMcnPmcpySnK7lKMJScVJtt3S0e1junmWMqYdUXL3dg6Cvv79kb/gvb8Qv2TP+Ce+o/wDBP7R/2ddG1nTdR0zWrKTxJc69LDOi6j529hEsZX5PNOBnnb2r4Bor67izgrhrjjA0sHnVD21OnONSKcpRtOKaUrxcXom9HprsYYfE1sLJypuzasFFFFfUpWRgFFFFMAooooAKKKKACiiigAooooAKKKKACiiigAooopMAAxRgdcUUUWQXYUUUU7IAoooosguwwPSiiilZAFFFFMAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/Z\"},770:function(e,a,t){e.exports=t(961)},960:function(e,a,t){},961:function(e,a,t){\"use strict\";t.r(a);var n=t(0),r=t.n(n),l=t(41),o=t.n(l),s=t(1151),i=(t(546),t(514)),c=t(698),d=t(702),m=t(1147),u=t(976);var p=r.a.createContext({toggleColorMode:()=>{}}),g=t(701),E=t(465);class b{constructor(e){this.socketManager=e,this.rawSocket=e.currentSocket,this.callbacks=[],this.joins=[],this.rawSocket.on(\"connect\",()=>{var e;if((null===(e=this.rawSocket.io.opts.query)||void 0===e?void 0:e.r)&&!this.rawSocket.recovered){const e=()=>{for(const e of this.joins)console.debug(\"refreshing join\",e),this.rawSocket.emit(\"join\"+e.event,...e.params);this.rawSocket.off(\"ready\",e)};for(const a of this.callbacks)this.rawSocket.off(a.event,a.callback),this.rawSocket.on(a.event,a.callback);this.rawSocket.on(\"ready\",e)}})}on(e,a){return\"ready\"===e||\"connect\"===e?this.socketManager.onReady(a):(this.callbacks.push({event:e,callback:a}),this.rawSocket.on(e,a))}off(e,a){const t=this.callbacks.findIndex(t=>t.event===e&&t.callback===a);return this.callbacks.splice(t,1),this.rawSocket.off(e,a)}emit(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return e.startsWith(\"join\")&&this.joins.push({event:e.substring(4),params:t}),this.rawSocket.emit(e,...t)}disconnect(){for(const e of this.joins)this.rawSocket.emit(\"leave\"+e.event,...e.params);this.joins=[];for(const e of this.callbacks)this.rawSocket.off(e.event,e.callback);this.callbacks=[]}}class f{on(){}off(){}emit(){}disconnect(){}}const h={currentCompanyId:-1,currentUserId:-1,currentSocket:null,socketReady:!1,getSocket:function(e){var a=this;let t=null;if(localStorage.getItem(\"userId\")&&(t=localStorage.getItem(\"userId\")),!e&&!this.currentSocket)return new f;if(e&&\"string\"!==typeof e&&(e=\"\"+e),e!==this.currentCompanyId||t!==this.currentUserId){this.currentSocket&&(console.warn(\"closing old socket - company or user changed\"),this.currentSocket.removeAllListeners(),this.currentSocket.disconnect(),this.currentSocket=null,this.currentCompanyId=null,this.currentUserId=null);let n=localStorage.getItem(\"token\");if(!n)return console.warn(\"No token found, returning dummy socket\"),new f;if(Object(E.a)(n))return console.warn(\"Expired token, reload after refresh\"),setTimeout(()=>{window.location.reload()},1e3),new f;this.currentCompanyId=e,this.currentUserId=t,this.currentSocket=Object(g.a)(\"http://localhost:8080\",{transports:[\"websocket\"],pingTimeout:18e3,pingInterval:18e3,query:{token:n}}),this.currentSocket.io.on(\"reconnect_attempt\",()=>{this.currentSocket.io.opts.query.r=1,n=localStorage.getItem(\"token\"),Object(E.a)(n)?(console.warn(\"Token expirado - redirigiendo al login\"),localStorage.removeItem(\"token\"),window.location.href=\"/login\"):console.warn(\"Reconectando socket...\")}),this.currentSocket.on(\"disconnect\",e=>{if(console.warn(\"socket disconnected because: \"+e),e.startsWith(\"io server disconnect\"))return console.warn(\"Socket desconectado por el servidor\"),n=localStorage.getItem(\"token\"),Object(E.a)(n)?(console.warn(\"Token expirado - redirigiendo al login\"),localStorage.removeItem(\"token\"),void(window.location.href=\"/login\")):void console.warn(\"Intentando reconectar socket...\")}),this.currentSocket.on(\"connect\",(function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];console.debug(\"socket connected\",a)})),this.currentSocket.onAny((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.debug(\"Event: \",{socket:a.currentSocket,event:e,args:n})})),this.onReady(()=>{this.socketReady=!0})}return new b(this)},onReady:function(e){this.socketReady?e():this.currentSocket.once(\"ready\",()=>{e()})},onConnect:function(e){this.onReady(e)}},v=Object(n.createContext)(),y=0,x=1,C=2,A=3,S={level:A,enableConsole:!0,enableServiceWorker:!1,enableSocket:!1,enableWhatsApp:!1,enableTransferModal:!1,enableDashboard:!1},O=()=>{try{const e=localStorage.getItem(\"loggerConfig\");if(e){const a=JSON.parse(e);return{...S,...a}}return S}catch(e){return S}},w=function(e,a,t){const n=O();if(e>n.level)return;const r=void 0===n[\"enable\"+a]||n[\"enable\"+a];if(!r)return;if(!n.enableConsole)return;const l=(new Date).toISOString().split(\"T\")[1].split(\".\")[0],o=`[${l}] [${a}]`;for(var s=arguments.length,i=new Array(s>3?s-3:0),c=3;c<s;c++)i[c-3]=arguments[c];switch(e){case y:console.error(o,t,...i);break;case x:console.warn(o,t,...i);break;case C:console.info(o,t,...i);break;case A:console.log(o,t,...i);break;default:console.log(o,t,...i)}},k={error:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(y,\"General\",e,...t)},warn:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(x,\"General\",e,...t)},info:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(C,\"General\",e,...t)},debug:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(A,\"General\",e,...t)},sw:{error:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(y,\"ServiceWorker\",e,...t)},warn:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(x,\"ServiceWorker\",e,...t)},info:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(C,\"ServiceWorker\",e,...t)},debug:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(A,\"ServiceWorker\",e,...t)}},socket:{error:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(y,\"Socket\",e,...t)},warn:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(x,\"Socket\",e,...t)},info:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(C,\"Socket\",e,...t)},debug:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(A,\"Socket\",e,...t)}},whatsapp:{error:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(y,\"WhatsApp\",e,...t)},warn:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(x,\"WhatsApp\",e,...t)},info:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(C,\"WhatsApp\",e,...t)},debug:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(A,\"WhatsApp\",e,...t)}},transferModal:{error:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(y,\"TransferModal\",e,...t)},warn:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(x,\"TransferModal\",e,...t)},info:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(C,\"TransferModal\",e,...t)},debug:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(A,\"TransferModal\",e,...t)}},dashboard:{error:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(y,\"Dashboard\",e,...t)},warn:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(x,\"Dashboard\",e,...t)},info:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(C,\"Dashboard\",e,...t)},debug:function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return w(A,\"Dashboard\",e,...t)}},config:{get:O,set:e=>{try{const a={...O(),...e};return localStorage.setItem(\"loggerConfig\",JSON.stringify(a)),a.enableConsole||T(),!0}catch(a){return console.error(\"Error saving logger config:\",a),!1}},reset:()=>{try{return localStorage.removeItem(\"loggerConfig\"),!0}catch(e){return console.error(\"Error resetting logger config:\",e),!1}}}},T=()=>{if(!O().enableConsole){const e=console.log,a=console.warn,t=console.error,n=console.info;console.log=()=>{},console.warn=()=>{},console.error=()=>{},console.info=()=>{},setTimeout(()=>{console.log=e,console.warn=a,console.error=t,console.info=n},100)}},I=O();console.log(\"\\ud83d\\udd27 DEBUG: Configuraci\\xf3n del logger cargada:\",I),console.log(\"\\ud83d\\udd27 DEBUG: enableConsole =\",I.enableConsole),console.log(\"\\ud83d\\udd27 DEBUG: level =\",I.level),I.enableConsole?(console.log(\"\\u2705 LOGS HABILITADOS - Sistema funcionando\"),k.debug(\"\\ud83d\\ude80 Sistema de logging inicializado\"),k.debug(\"\\ud83d\\udccb Configuraci\\xf3n actual:\",I),k.sw.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Service Worker inicializado\"),k.socket.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Socket inicializado\"),k.whatsapp.debug(\"\\ud83e\\uddea LOG DE PRUEBA - WhatsApp inicializado\"),k.transferModal.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Transfer Modal inicializado\"),k.dashboard.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Dashboard inicializado\")):(console.log(\"\\u274c LOGS DESHABILITADOS - Revisar configuraci\\xf3n\"),T());var j=k,N=t(42),M=t(78),P=t(9),R=t(6),D=t(225),L=t(72),q=t(1183),W=t(969),F=t(966),B=t(1096),z=t(1117),U=t(1118),H=t(135),V=t(706),G=t(1100),_=t(626),K=t.n(_),Q=t(625),Y=t.n(Q),X=t(631),J=t.n(X),Z=t(629),$=t.n(Z),ee=t(965),ae=t(1083),te=t(1084),ne=t(1085),re=t(1087),le=t(605),oe=t.n(le),se=t(255),ie=t.n(se),ce=t(607),de=t.n(ce),me=t(612),ue=t.n(me),pe=t(609),ge=t.n(pe),Ee=t(602),be=t.n(Ee),fe=t(608),he=t.n(fe),ve=t(374),ye=t.n(ve),xe=t(604),Ce=t.n(xe),Ae=t(610),Se=t.n(Ae),Oe=t(603),we=t.n(Oe),ke=t(376),Te=t.n(ke),Ie=t(319),je=t.n(Ie),Ne=t(606),Me=t.n(Ne),Pe=t(375),Re=t.n(Pe),De=t(611),Le=t.n(De),qe=t(613),We=t.n(qe),Fe=t(454),Be=t(599);const ze={pt:{translations:{signup:{title:\"Cadastre-se\",toasts:{success:\"Usu\\xe1rio criado com sucesso! Fa\\xe7a seu login!!!.\",fail:\"Erro ao criar usu\\xe1rio. Verifique os dados informados.\"},form:{name:\"Nome\",email:\"Email\",password:\"Senha\"},buttons:{submit:\"Cadastrar\",login:\"J\\xe1 tem uma conta? Entre!\"}},login:{title:\"Login\",form:{email:\"Email\",password:\"Senha\"},buttons:{submit:\"Entrar\",register:\"Registre-se, agora mesmo!\"}},plans:{form:{name:\"Nome\",users:\"Usu\\xe1rios\",connections:\"Conex\\xf5es\",campaigns:\"Campanhas\",schedules:\"Agendamentos\",enabled:\"Habilitadas\",disabled:\"Desabilitadas\",clear:\"Cancelar\",delete:\"Excluir\",save:\"Salvar\",yes:\"Sim\",no:\"N\\xe3o\",money:\"$\"}},companies:{title:\"Cadastrar Empresa\",form:{name:\"Nome da Empresa\",plan:\"Plano\",token:\"Token\",submit:\"Cadastrar\",success:\"Empresa criada com sucesso!\"}},auth:{toasts:{success:\"Login efetuado com sucesso!\"},token:\"Token\"},dashboard:{charts:{perDay:{title:\"Atendimentos hoje: \"}}},connections:{title:\"Conex\\xf5es\",toasts:{deleted:\"Conex\\xe3o com o WhatsApp exclu\\xedda com sucesso!\"},confirmationModal:{deleteTitle:\"Deletar\",deleteMessage:\"Voc\\xea tem certeza? Essa a\\xe7\\xe3o n\\xe3o pode ser revertida.\",disconnectTitle:\"Desconectar\",disconnectMessage:\"Tem certeza? Voc\\xea precisar\\xe1 ler o QR Code novamente.\"},buttons:{add:\"Adicionar WhatsApp\",disconnect:\"desconectar\",tryAgain:\"Tentar novamente\",qrcode:\"QR CODE\",newQr:\"Novo QR CODE\",connecting:\"Conectando\"},toolTips:{disconnected:{title:\"Falha ao iniciar sess\\xe3o do WhatsApp\",content:\"Certifique-se de que seu celular esteja conectado \\xe0 internet e tente novamente, ou solicite um novo QR Code\"},qrcode:{title:\"Esperando leitura do QR Code\",content:\"Clique no bot\\xe3o 'QR CODE' e leia o QR Code com o seu celular para iniciar a sess\\xe3o\"},connected:{title:\"Conex\\xe3o estabelecida!\"},timeout:{title:\"A conex\\xe3o com o celular foi perdida\",content:\"Certifique-se de que seu celular esteja conectado \\xe0 internet e o WhatsApp esteja aberto, ou clique no bot\\xe3o 'Desconectar' para obter um novo QR Code\"}},table:{name:\"Nome\",number:\"N\\xfamero\",status:\"Status\",lastUpdate:\"\\xdaltima atualiza\\xe7\\xe3o\",default:\"Padr\\xe3o\",actions:\"A\\xe7\\xf5es\",session:\"Sess\\xe3o\"}},whatsappModal:{title:{add:\"Adicionar WhatsApp\",edit:\"Editar WhatsApp\"},tabs:{general:\"Geral\",messages:\"Mensagens\",assessments:\"Avalia\\xe7\\xf5es\",integrations:\"Integra\\xe7\\xf5es\",schedules:\"Hor\\xe1rio de expediente\"},form:{name:\"Nome\",default:\"Padr\\xe3o\",sendIdQueue:\"Fila\",timeSendQueue:\"Redirecionar para fila em X minutos\",queueRedirection:\"Redirecionamento de Fila\",outOfHoursMessage:\"Mensagem de fora de expediente\",queueRedirectionDesc:\"Selecione uma fila para os contatos que n\\xe3o possuem fila serem redirecionados\",prompt:\"Prompt\",expiresTicket:\"Encerrar chats abertos ap\\xf3s x minutos\",expiresInactiveMessage:\"Mensagem de encerramento por inatividade\",greetingMessage:\"Mensagem de sauda\\xe7\\xe3o\",complationMessage:\"Mensagem de conclus\\xe3o\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\"},success:\"WhatsApp salvo com sucesso.\"},qrCode:{message:\"Leia o QrCode para iniciar a sess\\xe3o\"},contacts:{title:\"Contatos\",toasts:{deleted:\"Contato exclu\\xeddo com sucesso!\",deletedAll:\"Todos contatos exclu\\xeddos com sucesso!\"},searchPlaceholder:\"Pesquisar...\",confirmationModal:{deleteTitle:\"Deletar \",deleteAllTitle:\"Deletar Todos\",importTitle:\"Importar contatos\",deleteMessage:\"Tem certeza que deseja deletar este contato? Todos os tickets relacionados ser\\xe3o perdidos.\",deleteAllMessage:\"Tem certeza que deseja deletar todos os contatos? Todos os tickets relacionados ser\\xe3o perdidos.\",importMessage:\"Esta a\\xe7\\xe3o ir\\xe1 importar os contatos salvos na agenda do WhatsApp. Alguns modelos podem n\\xe3o permitir essa funcionalidade ou de acordo com sua configura\\xe7\\xe3o de privacidade! Verifique em at\\xe9 1 hora o resultado.\",importTitlte:\"Importar contatos\"},buttons:{import:\"Importar Contatos\",importSheet:\"Import. Excel\",add:\"Adicionar Contato\",export:\"Exportar Contatos\",delete:\"Excluir Todos Contatos\"},table:{name:\"Nome\",whatsapp:\"WhatsApp\",email:\"Email\",actions:\"A\\xe7\\xf5es\"}},queueIntegrationModal:{title:{add:\"Adicionar projeto\",edit:\"Editar projeto\"},form:{id:\"ID\",type:\"Tipo\",name:\"Nome\",projectName:\"Nome do Projeto\",language:\"Linguagem\",jsonContent:\"JsonContent\",urlN8N:\"URL\",typebotSlug:\"Typebot - Slug\",typebotExpires:\"Tempo em minutos para expirar uma conversa\",typebotKeywordFinish:\"Palavra para finalizar o ticket\",typebotKeywordRestart:\"Palavra para reiniciar o fluxo\",typebotRestartMessage:\"Mensagem ao reiniciar a conversa\",typebotUnknownMessage:\"Mensagem de op\\xe7\\xe3o inv\\xe1lida\",typebotDelayMessage:\"Intervalo (ms) entre mensagens\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\",test:\"Testar Bot\"},messages:{testSuccess:\"Integra\\xe7\\xe3o testada com sucesso!\",addSuccess:\"Integra\\xe7\\xe3o adicionada com sucesso.\",editSuccess:\"Integra\\xe7\\xe3o editada com sucesso.\"}},sideMenu:{name:\"Menu Lateral Inicial\",note:\"Se habilitado, o menu lateral ir\\xe1 iniciar fechado\",options:{enabled:\"Aberto\",disabled:\"Fechado\"}},promptModal:{form:{name:\"Nome\",prompt:\"Prompt\",voice:\"Voz\",max_tokens:\"M\\xe1ximo de Tokens na resposta\",temperature:\"Temperatura\",apikey:\"API Key\",max_messages:\"M\\xe1ximo de mensagens no Hist\\xf3rico\",voiceKey:\"Chave da API de Voz\",voiceRegion:\"Regi\\xe3o de Voz\"},success:\"Prompt salvo com sucesso!\",title:{add:\"Adicionar Prompt\",edit:\"Editar Prompt\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\"}},prompts:{title:\"Prompts\",table:{name:\"Nome\",queue:\"Setor/Fila\",max_tokens:\"M\\xe1ximo Tokens Resposta\",actions:\"A\\xe7\\xf5es\"},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Voc\\xea tem certeza? Essa a\\xe7\\xe3o n\\xe3o pode ser revertida!\"},buttons:{add:\"Adicionar Prompt\"}},contactModal:{title:{add:\"Adicionar contato\",edit:\"Editar contato\"},form:{mainInfo:\"Dados do contato\",extraInfo:\"Informa\\xe7\\xf5es adicionais\",name:\"Nome\",number:\"N\\xfamero do Whatsapp\",email:\"Email\",extraName:\"Nome do campo\",extraValue:\"Valor\",whatsapp:\"Conex\\xe3o Origem: \"},buttons:{addExtraInfo:\"Adicionar informa\\xe7\\xe3o\",okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\"},success:\"Contato salvo com sucesso.\"},queueModal:{title:{add:\"Adicionar fila\",edit:\"Editar fila\"},confirmationModal:{deleteTitle:\"Excluir\"},form:{name:\"Nome\",color:\"Cor\",greetingMessage:\"Mensagem de sauda\\xe7\\xe3o\",complationMessage:\"Mensagem de conclus\\xe3o\",outOfHoursMessage:\"Mensagem de fora de expediente\",ratingMessage:\"Mensagem de avalia\\xe7\\xe3o\",token:\"Token\",orderQueue:\"Ordem da fila (Bot)\",integrationId:\"Integra\\xe7\\xe3o\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\",attach:\"Anexar Arquivo\"}},userModal:{title:{add:\"Adicionar usu\\xe1rio\",edit:\"Editar usu\\xe1rio\"},form:{name:\"Nome\",email:\"Email\",password:\"Senha\",profile:\"Perfil\",whatsapp:\"Conex\\xe3o Padr\\xe3o\",allTicket:\"Ticket Sem Fila [Invis\\xedvel]\",allTicketEnabled:\"Habilitado\",allTicketDesabled:\"Desabilitado\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\"},success:\"Usu\\xe1rio salvo com sucesso.\"},scheduleModal:{title:{add:\"Novo Agendamento\",edit:\"Editar Agendamento\"},form:{body:\"Mensagem\",contact:\"Contato\",sendAt:\"Data de Agendamento\",sentAt:\"Data de Envio\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\"},success:\"Agendamento salvo com sucesso.\"},tagModal:{title:{add:\"Nova Tag\",edit:\"Editar Tag\"},form:{name:\"Nome\",color:\"Cor\"},buttons:{okAdd:\"Adicionar\",okEdit:\"Salvar\",cancel:\"Cancelar\"},success:\"Tag salvo com sucesso.\"},chat:{noTicketMessage:\"Selecione um ticket para come\\xe7ar a conversar.\"},uploads:{titles:{titleUploadMsgDragDrop:\"ARRASTE E SOLTE ARQUIVOS NO CAMPO ABAIXO\",titleFileList:\"Lista de arquivo(s)\"}},ticketsManager:{buttons:{newTicket:\"Novo\",closeallTicket:\"Fechar\"}},ticketsQueueSelect:{placeholder:\"Filas\"},tickets:{inbox:{closedAllTickets:\"Fechar todos os tickets?\",closedAll:\"Fechar Todos\",newTicket:\"Novo Ticket\",yes:\"SIM\",no:\"N\\xc3O\",open:\"Abertos\",resolverd:\"Resolvidos\"},toasts:{deleted:\"O atendimento que voc\\xea estava foi deletado.\"},notification:{message:\"Mensagem de\"},tabs:{open:{title:\"Abertas\"},closed:{title:\"Resolvidos\"},search:{title:\"Busca\"}},search:{placeholder:\"Buscar atendimento e mensagens\",filterConnections:\"Filtro por conex\\xf5es\",filterContacts:\"Filtro por contato\",filterConections:\"Filtro por Conex\\xe3o\",filterConectionsOptions:{open:\"Aberto\",closed:\"Fechado\",pending:\"Pendente\"},filterUsers:\"Filtro por Usuarios\",ticketsPerPage:\"Tickets por p\\xe1gina\"},buttons:{showAll:\"Todos\"}},transferTicketModal:{title:\"Transferir Ticket\",fieldLabel:\"Digite para buscar usu\\xe1rios\",fieldQueueLabel:\"Transferir para fila\",fieldQueuePlaceholder:\"Selecione uma fila\",noOptions:\"Nenhum usu\\xe1rio encontrado com esse nome\",buttons:{ok:\"Transferir\",cancel:\"Cancelar\"}},ticketsList:{pendingHeader:\"Aguardando\",assignedHeader:\"Atendendo\",noTicketsTitle:\"Nada aqui!\",noTicketsMessage:\"Nenhum atendimento encontrado com esse status ou termo pesquisado\",buttons:{accept:\"Aceitar\",closed:\"Finalizar\",transfer:\"Transferir\",reopen:\"Reabrir\"}},newTicketModal:{title:\"Criar Ticket\",fieldLabel:\"Digite para pesquisar o contato\",add:\"Adicionar\",buttons:{ok:\"Salvar\",cancel:\"Cancelar\"}},mainDrawer:{listItems:{dashboard:\"Dashboard\",connections:\"Conex\\xf5es\",tickets:\"Atendimentos\",quickMessages:\"Respostas R\\xe1pidas\",contacts:\"Contatos\",queues:\"Filas & Chatbot\",tags:\"Tags\",administration:\"Administra\\xe7\\xe3o\",users:\"Usu\\xe1rios\",settings:\"Configura\\xe7\\xf5es\",helps:\"Ajuda\",messagesAPI:\"API\",schedules:\"Agendamentos\",campaigns:\"Campanhas\",annoucements:\"Informativos\",chats:\"Chat Interno\",financeiro:\"Financeiro\",files:\"Lista de arquivos\",prompts:\"Open.Ai\",reports:\"Relat\\xf3rios\",queueIntegration:\"Integra\\xe7\\xf5es\"},appBar:{notRegister:\"Sem notifica\\xe7\\xf5es\",user:{profile:\"Perfil\",logout:\"Salir\"}}},queueIntegration:{title:\"Integra\\xe7\\xf5es\",table:{id:\"ID\",type:\"Tipo\",name:\"Nome\",projectName:\"Nome do Projeto\",language:\"Linguagem\",lastUpdate:\"Ultima atualiza\\xe7\\xe3o\",actions:\"A\\xe7\\xf5es\"},buttons:{add:\"Adicionar Projeto\"},searchPlaceholder:\"Pesquisar...\",confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Voc\\xea tem certeza? Essa a\\xe7\\xe3o n\\xe3o pode ser revertida! e ser\\xe1 removida das filas e conex\\xf5es vinculadas\"}},reports:{title:\"Relat\\xf3rios de Atendimentos\",table:{id:\"Ticket\",user:\"Usu\\xe1rio\",dateOpen:\"Data Abertura\",dateClose:\"Data Fechamento\",NPS:\"NPS\",status:\"Status\",whatsapp:\"Conex\\xe3o\",queue:\"Fila\",actions:\"A\\xe7\\xf5es\",lastMessage:\"\\xdalt. Mensagem\",contact:\"Cliente\",supportTime:\"Tempo de Atendimento\"},buttons:{filter:\"Aplicar Filtro\"},searchPlaceholder:\"Pesquisar...\"},files:{title:\"Lista de arquivos\",table:{name:\"Nome\",contacts:\"Contatos\",actions:\"A\\xe7\\xe3o\"},toasts:{deleted:\"Lista exclu\\xedda com sucesso!\",deletedAll:\"Todas as listas foram exclu\\xeddas com sucesso!\"},buttons:{add:\"Adicionar\",deleteAll:\"Deletar Todos\"},confirmationModal:{deleteTitle:\"Deletar\",deleteAllTitle:\"Deletar Todos\",deleteMessage:\"Tem certeza que deseja deletar esta lista?\",deleteAllMessage:\"Tem certeza que deseja deletar todas as listas?\"}},messagesAPI:{title:\"API\",textMessage:{number:\"N\\xfamero\",body:\"Mensagem\",token:\"Token cadastrado\"},mediaMessage:{number:\"N\\xfamero\",body:\"Nome do arquivo\",media:\"Arquivo\",token:\"Token cadastrado\"}},notifications:{noTickets:\"Nenhuma notifica\\xe7\\xe3o.\"},quickMessages:{title:\"Respostas R\\xe1pidas\",searchPlaceholder:\"Pesquisar...\",noAttachment:\"Sem anexo\",confirmationModal:{deleteTitle:\"Exclus\\xe3o\",deleteMessage:\"Esta a\\xe7\\xe3o \\xe9 irrevers\\xedvel! Deseja prosseguir?\"},buttons:{add:\"Adicionar\",attach:\"Anexar Arquivo\",cancel:\"Cancelar\",edit:\"Editar\"},toasts:{success:\"Atalho adicionado com sucesso!\",deleted:\"Atalho removido com sucesso!\"},dialog:{title:\"Mensagem R\\xe1pida\",shortcode:\"Atalho\",message:\"Resposta\",save:\"Salvar\",cancel:\"Cancelar\",geral:\"Permitir editar\",add:\"Adicionar\",edit:\"Editar\",visao:\"Permitir vis\\xe3o\"},table:{shortcode:\"Atalho\",message:\"Mensagem\",actions:\"A\\xe7\\xf5es\",mediaName:\"Nome do Arquivo\",status:\"Global\"}},messageVariablesPicker:{label:\"Variav\\xe9is dispon\\xedveis\",vars:{contactFirstName:\"Primeiro Nome\",contactName:\"Nome\",greeting:\"Sauda\\xe7\\xe3o\",protocolNumber:\"Protocolo\",date:\"Data\",hour:\"Hora\"}},contactLists:{title:\"Listas de Contatos\",table:{name:\"Nome\",contacts:\"Contatos\",actions:\"A\\xe7\\xf5es\"},buttons:{add:\"Nova Lista\"},dialog:{name:\"Nome\",company:\"Empresa\",okEdit:\"Editar\",okAdd:\"Adicionar\",add:\"Adicionar\",edit:\"Editar\",cancel:\"Cancelar\"},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\"},toasts:{deleted:\"Registro exclu\\xeddo\"}},contactListItems:{title:\"Contatos\",searchPlaceholder:\"Pesquisa\",buttons:{add:\"Novo\",lists:\"Listas\",import:\"Importar\"},dialog:{name:\"Nome\",number:\"N\\xfamero\",whatsapp:\"Whatsapp\",email:\"E-mail\",okEdit:\"Editar\",okAdd:\"Adicionar\",add:\"Adicionar\",edit:\"Editar\",cancel:\"Cancelar\"},table:{name:\"Nome\",number:\"N\\xfamero\",whatsapp:\"Whatsapp\",email:\"E-mail\",actions:\"A\\xe7\\xf5es\"},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\",importMessage:\"Deseja importar os contatos desta planilha? \",importTitlte:\"Importar\"},toasts:{deleted:\"Registro exclu\\xeddo\"}},campaigns:{title:\"Campanhas\",searchPlaceholder:\"Pesquisa\",buttons:{add:\"Nova Campanha\",contactLists:\"Listas de Contatos\"},table:{name:\"Nome\",whatsapp:\"Conex\\xe3o\",contactList:\"Lista de Contatos\",status:\"Status\",scheduledAt:\"Agendamento\",completedAt:\"Conclu\\xedda\",confirmation:\"Confirma\\xe7\\xe3o\",actions:\"A\\xe7\\xf5es\"},dialog:{new:\"Nova Campanha\",update:\"Editar Campanha\",readonly:\"Apenas Visualiza\\xe7\\xe3o\",form:{name:\"Nome\",message1:\"Mensagem 1\",message2:\"Mensagem 2\",message3:\"Mensagem 3\",message4:\"Mensagem 4\",message5:\"Mensagem 5\",confirmationMessage1:\"Mensagem de Confirma\\xe7\\xe3o 1\",confirmationMessage2:\"Mensagem de Confirma\\xe7\\xe3o 2\",confirmationMessage3:\"Mensagem de Confirma\\xe7\\xe3o 3\",confirmationMessage4:\"Mensagem de Confirma\\xe7\\xe3o 4\",confirmationMessage5:\"Mensagem de Confirma\\xe7\\xe3o 5\",messagePlaceholder:\"Conte\\xfado da mensagem\",whatsapp:\"Conex\\xe3o\",status:\"Status\",scheduledAt:\"Agendamento\",confirmation:\"Confirma\\xe7\\xe3o\",contactList:\"Lista de Contato\",tagList:\"Lista de Tags\",fileList:\"Lista de Arquivos\"},buttons:{add:\"Adicionar\",edit:\"Atualizar\",okadd:\"Ok\",cancel:\"Cancelar Disparos\",restart:\"Reiniciar Disparos\",close:\"Fechar\",attach:\"Anexar Arquivo\"}},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\"},toasts:{success:\"Opera\\xe7\\xe3o realizada com sucesso\",cancel:\"Campanha cancelada\",restart:\"Campanha reiniciada\",deleted:\"Registro exclu\\xeddo\"}},announcements:{active:\"Ativo\",inactive:\"Inativo\",title:\"Informativos\",searchPlaceholder:\"Pesquisa\",buttons:{add:\"Novo Informativo\",contactLists:\"Listas de Informativos\"},table:{priority:\"Prioridade\",title:\"Title\",text:\"Texto\",mediaName:\"Arquivo\",status:\"Status\",actions:\"A\\xe7\\xf5es\"},dialog:{edit:\"Edi\\xe7\\xe3o de Informativo\",add:\"Novo Informativo\",update:\"Editar Informativo\",readonly:\"Apenas Visualiza\\xe7\\xe3o\",form:{priority:\"Prioridade\",title:\"Title\",text:\"Texto\",mediaPath:\"Arquivo\",status:\"Status\"},buttons:{add:\"Adicionar\",edit:\"Atualizar\",okadd:\"Ok\",cancel:\"Cancelar\",close:\"Fechar\",attach:\"Anexar Arquivo\"}},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\"},toasts:{success:\"Opera\\xe7\\xe3o realizada com sucesso\",deleted:\"Registro exclu\\xeddo\"}},campaignsConfig:{title:\"Configura\\xe7\\xf5es de Campanhas\"},queues:{title:\"Filas & Chatbot\",table:{id:\"ID\",name:\"Nome\",color:\"Cor\",greeting:\"Mensagem de sauda\\xe7\\xe3o\",actions:\"A\\xe7\\xf5es\",orderQueue:\"Ordena\\xe7\\xe3o da fila (bot)\"},buttons:{add:\"Adicionar fila\"},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Voc\\xea tem certeza? Essa a\\xe7\\xe3o n\\xe3o pode ser revertida! Os atendimentos dessa fila continuar\\xe3o existindo, mas n\\xe3o ter\\xe3o mais nenhuma fila atribu\\xedda.\"}},queueSelect:{inputLabel:\"Filas\"},users:{title:\"Usu\\xe1rios\",table:{id:\"ID\",name:\"Nome\",status:\"Status\",email:\"Email\",profile:\"Perfil\",actions:\"A\\xe7\\xf5es\"},status:{online:\"Usu\\xe1rios online\",offline:\"Usu\\xe1rios offline\"},buttons:{add:\"Adicionar usu\\xe1rio\"},toasts:{deleted:\"Usu\\xe1rio exclu\\xeddo com sucesso.\"},confirmationModal:{deleteTitle:\"Excluir\",deleteMessage:\"Todos os dados do usu\\xe1rio ser\\xe3o perdidos. Os atendimento abertos deste usu\\xe1rio ser\\xe3o movidos para a fila.\"}},helps:{title:\"Central de Ajuda\"},schedules:{title:\"Agendamentos\",confirmationModal:{deleteTitle:\"Voc\\xea tem certeza que quer excluir este Agendamento?\",deleteMessage:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\"},table:{contact:\"Contato\",body:\"Mensagem\",sendAt:\"Data de Agendamento\",sentAt:\"Data de Envio\",status:\"Status\",actions:\"A\\xe7\\xf5es\"},buttons:{add:\"Novo Agendamento\"},toasts:{deleted:\"Agendamento exclu\\xeddo com sucesso.\"}},tags:{title:\"Tags\",confirmationModal:{deleteTitle:\"Voc\\xea tem certeza que quer excluir esta Tag?\",deleteMessage:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\",deleteAllMessage:\"Tem certeza que deseja deletar todas as Tags?\",deleteAllTitle:\"Deletar Todos\"},table:{name:\"Nome\",color:\"Cor\",tickets:\"Registros Tagdos\",actions:\"A\\xe7\\xf5es\"},buttons:{add:\"Nova Tag\",deleteAll:\"Deletar Todas\"},toasts:{deletedAll:\"Todas Tags exclu\\xeddas com sucesso!\",deleted:\"Tag exclu\\xeddo com sucesso.\"}},settings:{success:\"Configura\\xe7\\xf5es salvas com sucesso.\",title:\"Configura\\xe7\\xf5es\",settings:{userCreation:{name:\"Cria\\xe7\\xe3o de usu\\xe1rio\",options:{enabled:\"Ativado\",disabled:\"Desativado\"}}}},messagesList:{header:{assignedTo:\"Atribu\\xeddo \\xe0:\",buttons:{return:\"Retornar\",resolve:\"Resolver\",reopen:\"Reabrir\",accept:\"Aceitar\"}}},messagesInput:{placeholderOpen:\"Digite uma mensagem\",placeholderClosed:\"Reabra ou aceite esse ticket para enviar uma mensagem.\",signMessage:\"Assinar\"},contactDrawer:{header:\"Dados do contato\",buttons:{edit:\"Editar contato\"},extraInfo:\"Outras informa\\xe7\\xf5es\"},fileModal:{title:{add:\"Adicionar lista de arquivos\",edit:\"Editar lista de arquivos\"},buttons:{okAdd:\"Salvar\",okEdit:\"Editar\",cancel:\"Cancelar\",fileOptions:\"Adicionar arquivo\"},form:{name:\"Nome da lista de arquivos\",message:\"Detalhes da lista\",fileOptions:\"Lista de arquivos\",extraName:\"Mensagem para enviar com arquivo\",extraValue:\"Valor da op\\xe7\\xe3o\"},success:\"Lista de arquivos salva com sucesso!\"},ticketOptionsMenu:{schedule:\"Agendamento\",delete:\"Deletar\",transfer:\"Transferir\",registerAppointment:\"Observa\\xe7\\xf5es do Contato\",appointmentsModal:{title:\"Observa\\xe7\\xf5es do Contato\",textarea:\"Observa\\xe7\\xe3o\",placeholder:\"Insira aqui a informa\\xe7\\xe3o que deseja registrar\"},confirmationModal:{title:\"Deletar o ticket\",titleFrom:\"do contato \",message:\"Aten\\xe7\\xe3o! Todas as mensagens relacionadas ao ticket ser\\xe3o perdidas.\"},buttons:{delete:\"Excluir\",cancel:\"Cancelar\"}},confirmationModal:{buttons:{confirm:\"Ok\",cancel:\"Cancelar\"}},messageOptionsMenu:{delete:\"Deletar\",reply:\"Responder\",edit:\"Editar Mensagem\",forward:\"Encaminhar\",toForward:\"Encaminhar\",react:\"Reagir\",confirmationModal:{title:\"Apagar mensagem?\",message:\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida.\"}},backendErrors:{ERR_NO_OTHER_WHATSAPP:\"Deve haver pelo menos um WhatsApp padr\\xe3o.\",ERR_NO_DEF_WAPP_FOUND:\"Nenhum WhatsApp padr\\xe3o encontrado. Verifique a p\\xe1gina de conex\\xf5es.\",ERR_WAPP_NOT_INITIALIZED:\"Esta sess\\xe3o do WhatsApp n\\xe3o foi inicializada. Verifique a p\\xe1gina de conex\\xf5es.\",ERR_WAPP_CHECK_CONTACT:\"N\\xe3o foi poss\\xedvel verificar o contato do WhatsApp. Verifique a p\\xe1gina de conex\\xf5es\",ERR_WAPP_INVALID_CONTACT:\"Este n\\xe3o \\xe9 um n\\xfamero de Whatsapp v\\xe1lido.\",ERR_WAPP_DOWNLOAD_MEDIA:\"N\\xe3o foi poss\\xedvel baixar m\\xeddia do WhatsApp. Verifique a p\\xe1gina de conex\\xf5es.\",ERR_INVALID_CREDENTIALS:\"Erro de autentica\\xe7\\xe3o. Por favor, tente novamente.\",ERR_SENDING_WAPP_MSG:\"Erro ao enviar mensagem do WhatsApp. Verifique a p\\xe1gina de conex\\xf5es.\",ERR_DELETE_WAPP_MSG:\"N\\xe3o foi poss\\xedvel excluir a mensagem do WhatsApp.\",ERR_OTHER_OPEN_TICKET:\"J\\xe1 existe um t\\xedquete aberto para este contato.\",ERR_SESSION_EXPIRED:\"Sess\\xe3o expirada. Por favor entre.\",ERR_USER_CREATION_DISABLED:\"A cria\\xe7\\xe3o do usu\\xe1rio foi desabilitada pelo administrador.\",ERR_NO_PERMISSION:\"Voc\\xea n\\xe3o tem permiss\\xe3o para acessar este recurso.\",ERR_DUPLICATED_CONTACT:\"J\\xe1 existe um contato com este n\\xfamero.\",ERR_NO_SETTING_FOUND:\"Nenhuma configura\\xe7\\xe3o encontrada com este ID.\",ERR_NO_CONTACT_FOUND:\"Nenhum contato encontrado com este ID.\",ERR_NO_TICKET_FOUND:\"Nenhum t\\xedquete encontrado com este ID.\",ERR_NO_USER_FOUND:\"Nenhum usu\\xe1rio encontrado com este ID.\",ERR_NO_WAPP_FOUND:\"Nenhum WhatsApp encontrado com este ID.\",ERR_CREATING_MESSAGE:\"Erro ao criar mensagem no banco de dados.\",ERR_CREATING_TICKET:\"Erro ao criar t\\xedquete no banco de dados.\",ERR_FETCH_WAPP_MSG:\"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.\",ERR_QUEUE_COLOR_ALREADY_EXISTS:\"Esta cor j\\xe1 est\\xe1 em uso, escolha outra.\",ERR_WAPP_GREETING_REQUIRED:\"A mensagem de sauda\\xe7\\xe3o \\xe9 obrigat\\xf3rio quando h\\xe1 mais de uma fila.\"},hardcodedElements:{atendimento:\"ATENDIMENTOS\",tarefas:\"TAREFAS\",gerencia:\"GER\\xcaNCIA\",campanhas:\"CAMPANHAS\",listagem:\"LISTAGEM\",configuracoes:\"CONFIGURA\\xc7\\xd5ES\",administracao:\"ADMINISTRA\\xc7\\xc3O\",semFila:\"SEM FILA\",sair:\"SAIR\",sayHelloToNewContact:\"Ol\\xe1! Como posso ajud\\xe1-lo?\",admin:\"ADMIN\",filas:\"FILAS\",todos:\"TODOS\",hey:\"hey\"}}},en:{translations:{signup:{title:\"Sign up\",toasts:{success:\"User created successfully! Please login!\",fail:\"Error creating user. Check the reported data.\"},form:{name:\"Name\",email:\"Email\",password:\"Password\"},buttons:{submit:\"Register\",login:\"Already have an account? Log in!\"}},login:{title:\"Login\",form:{email:\"Email\",password:\"Password\"},buttons:{submit:\"Enter\",register:\"Don't have an account? Register!\"}},auth:{toasts:{success:\"Login successfully!\"}},dashboard:{charts:{perDay:{title:\"Tickets today: \"}}},connections:{title:\"Connections\",toasts:{deleted:\"WhatsApp connection deleted sucessfully!\"},confirmationModal:{deleteTitle:\"Delete\",deleteMessage:\"Are you sure? It cannot be reverted.\",disconnectTitle:\"Disconnect\",disconnectMessage:\"Are you sure? You'll need to read QR Code again.\"},buttons:{add:\"Add WhatsApp\",disconnect:\"Disconnect\",tryAgain:\"Try Again\",qrcode:\"QR CODE\",newQr:\"New QR CODE\",connecting:\"Connectiing\"},toolTips:{disconnected:{title:\"Failed to start WhatsApp session\",content:\"Make sure your cell phone is connected to the internet and try again, or request a new QR Code\"},qrcode:{title:\"Waiting for QR Code read\",content:\"Click on 'QR CODE' button and read the QR Code with your cell phone to start session\"},connected:{title:\"Connection established\"},timeout:{title:\"Connection with cell phone has been lost\",content:\"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode\"}},table:{name:\"Name\",status:\"Status\",lastUpdate:\"Last Update\",default:\"Default\",actions:\"Actions\",session:\"Session\"}},whatsappModal:{title:{add:\"Add WhatsApp\",edit:\"Edit WhatsApp\"},form:{name:\"Name\",default:\"Default\"},buttons:{okAdd:\"Add\",okEdit:\"Save\",cancel:\"Cancel\"},success:\"WhatsApp saved successfully.\"},qrCode:{message:\"Read QrCode to start the session\"},contacts:{title:\"Contacts\",toasts:{deleted:\"Contact deleted sucessfully!\"},searchPlaceholder:\"Search ...\",confirmationModal:{deleteTitle:\"Delete\",importTitlte:\"Import contacts\",deleteMessage:\"Are you sure you want to delete this contact? All related tickets will be lost.\",importMessage:\"Do you want to import all contacts from the phone?\"},buttons:{import:\"Import Contacts\",add:\"Add Contact\"},table:{name:\"Name\",whatsapp:\"WhatsApp\",email:\"Email\",actions:\"Actions\"}},contactModal:{title:{add:\"Add contact\",edit:\"Edit contact\"},form:{mainInfo:\"Contact details\",extraInfo:\"Additional information\",name:\"Name\",number:\"Whatsapp number\",email:\"Email\",extraName:\"Field name\",extraValue:\"Value\"},buttons:{addExtraInfo:\"Add information\",okAdd:\"Add\",okEdit:\"Save\",cancel:\"Cancel\"},success:\"Contact saved successfully.\"},queueModal:{title:{add:\"Add queue\",edit:\"Edit queue\"},form:{name:\"Name\",color:\"Color\",greetingMessage:\"Greeting Message\"},buttons:{okAdd:\"Add\",okEdit:\"Save\",cancel:\"Cancel\"}},userModal:{title:{add:\"Add user\",edit:\"Edit user\"},form:{name:\"Name\",email:\"Email\",password:\"Password\",profile:\"Profile\"},buttons:{okAdd:\"Add\",okEdit:\"Save\",cancel:\"Cancel\"},success:\"User saved successfully.\"},chat:{noTicketMessage:\"Select a ticket to start chatting.\"},ticketsManager:{buttons:{newTicket:\"New\"}},ticketsQueueSelect:{placeholder:\"Queues\"},tickets:{toasts:{deleted:\"The ticket you were on has been deleted.\"},notification:{message:\"Message from\"},tabs:{open:{title:\"Inbox\"},closed:{title:\"Resolved\"},search:{title:\"Search\"}},search:{placeholder:\"Search tickets and messages.\"},buttons:{showAll:\"All\"}},transferTicketModal:{title:\"Transfer Ticket\",fieldLabel:\"Type to search for users\",noOptions:\"No user found with this name\",buttons:{ok:\"Transfer\",cancel:\"Cancel\"}},ticketsList:{pendingHeader:\"Queue\",assignedHeader:\"Working on\",noTicketsTitle:\"Nothing here!\",noTicketsMessage:\"No tickets found with this status or search term.\",buttons:{accept:\"Accept\"}},newTicketModal:{title:\"Create Ticket\",fieldLabel:\"Type to search for a contact\",add:\"Add\",buttons:{ok:\"Save\",cancel:\"Cancel\"}},mainDrawer:{listItems:{dashboard:\"Dashboard\",connections:\"Connections\",tickets:\"Tickets\",contacts:\"Contacts\",queues:\"Queues\",administration:\"Administration\",users:\"Users\",settings:\"Settings\"},appBar:{user:{profile:\"Profile\",logout:\"Logout\"}}},notifications:{noTickets:\"No notifications.\"},queues:{title:\"Queues\",table:{name:\"Name\",color:\"Color\",greeting:\"Greeting message\",actions:\"Actions\"},buttons:{add:\"Add queue\"},confirmationModal:{deleteTitle:\"Delete\",deleteMessage:\"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned.\"}},queueSelect:{inputLabel:\"Queues\"},users:{title:\"Users\",table:{name:\"Name\",email:\"Email\",profile:\"Profile\",actions:\"Actions\"},buttons:{add:\"Add user\"},toasts:{deleted:\"User deleted sucessfully.\"},confirmationModal:{deleteTitle:\"Delete\",deleteMessage:\"All user data will be lost. Users' open tickets will be moved to queue.\"}},settings:{success:\"Settings saved successfully.\",title:\"Settings\",settings:{userCreation:{name:\"User creation\",options:{enabled:\"Enabled\",disabled:\"Disabled\"}}}},messagesList:{header:{assignedTo:\"Assigned to:\",buttons:{return:\"Return\",resolve:\"Resolve\",reopen:\"Reopen\",accept:\"Accept\"}}},messagesInput:{placeholderOpen:\"Type a message\",placeholderClosed:\"Reopen or accept this ticket to send a message.\",signMessage:\"Sign\"},contactDrawer:{header:\"Contact details\",buttons:{edit:\"Edit contact\"},extraInfo:\"Other information\"},ticketOptionsMenu:{delete:\"Delete\",transfer:\"Transfer\",confirmationModal:{title:\"Delete ticket #\",titleFrom:\"from contact \",message:\"Attention! All ticket's related messages will be lost.\"},buttons:{delete:\"Delete\",cancel:\"Cancel\"}},confirmationModal:{buttons:{confirm:\"Ok\",cancel:\"Cancel\"}},messageOptionsMenu:{delete:\"Delete\",reply:\"Reply\",confirmationModal:{title:\"Delete message?\",message:\"This action cannot be reverted.\"}},backendErrors:{ERR_NO_OTHER_WHATSAPP:\"There must be at lest one default WhatsApp connection.\",ERR_NO_DEF_WAPP_FOUND:\"No default WhatsApp found. Check connections page.\",ERR_WAPP_NOT_INITIALIZED:\"This WhatsApp session is not initialized. Check connections page.\",ERR_WAPP_CHECK_CONTACT:\"Could not check WhatsApp contact. Check connections page.\",ERR_WAPP_INVALID_CONTACT:\"This is not a valid whatsapp number.\",ERR_WAPP_DOWNLOAD_MEDIA:\"Could not download media from WhatsApp. Check connections page.\",ERR_INVALID_CREDENTIALS:\"Authentication error. Please try again.\",ERR_SENDING_WAPP_MSG:\"Error sending WhatsApp message. Check connections page.\",ERR_DELETE_WAPP_MSG:\"Couldn't delete message from WhatsApp.\",ERR_OTHER_OPEN_TICKET:\"There's already an open ticket for this contact.\",ERR_SESSION_EXPIRED:\"Session expired. Please login.\",ERR_USER_CREATION_DISABLED:\"User creation was disabled by administrator.\",ERR_NO_PERMISSION:\"You don't have permission to access this resource.\",ERR_DUPLICATED_CONTACT:\"A contact with this number already exists.\",ERR_NO_SETTING_FOUND:\"No setting found with this ID.\",ERR_NO_CONTACT_FOUND:\"No contact found with this ID.\",ERR_NO_TICKET_FOUND:\"No ticket found with this ID.\",ERR_NO_USER_FOUND:\"No user found with this ID.\",ERR_NO_WAPP_FOUND:\"No WhatsApp found with this ID.\",ERR_CREATING_MESSAGE:\"Error while creating message on database.\",ERR_CREATING_TICKET:\"Error while creating ticket on database.\",ERR_FETCH_WAPP_MSG:\"Error fetching the message in WhtasApp, maybe it is too old.\",ERR_QUEUE_COLOR_ALREADY_EXISTS:\"This color is already in use, pick another one.\",ERR_WAPP_GREETING_REQUIRED:\"Greeting message is required if there is more than one queue.\"}}},es:{translations:{common:{close:\"Cerrar\"},signup:{title:\"Registrarse\",toasts:{success:\"\\xa1Usuario creado exitosamente! \\xa1Inicie sesi\\xf3n!\",fail:\"Error al crear usuario. Verifique los datos ingresados.\"},form:{name:\"Nombre\",email:\"Correo electr\\xf3nico\",password:\"Contrase\\xf1a\"},buttons:{submit:\"Registrarse\",login:\"\\xbfYa tienes una cuenta? \\xa1Inicia sesi\\xf3n!\"}},login:{title:\"Iniciar sesi\\xf3n\",form:{email:\"Correo electr\\xf3nico\",password:\"Contrase\\xf1a\"},buttons:{submit:\"Iniciar sesi\\xf3n\",register:\" \\xa1Crea tu cuenta en solo unos clics!\"},forgotPassword:\"\\xbfOlvid\\xf3 su contrase\\xf1a?\"},plans:{form:{name:\"Nombre\",users:\"Usuarios\",connections:\"Conexiones\",queues:\"Filas\",value:\"Valor\",campaigns:\"Campa\\xf1as\",schedules:\"Programaciones\",internalChat:\"Chat Interno\",externalApi:\"API Externa\",kanban:\"Kanban\",openAi:\"Agente AI\",integrations:\"Integraciones\",internalUse:\"Uso Interno\",internalPlan:\"Plano Interno\",enabled:\"Habilitadas\",disabled:\"Deshabilitadas\",clear:\"Cancelar\",delete:\"Eliminar\",save:\"Guardar\",yes:\"S\\xed\",no:\"No\",money:\"$\"},messages:{loadError:\"No se pudo cargar la lista de registros\",saveSuccess:\"\\xa1Operaci\\xf3n realizada con \\xe9xito!\",saveError:\"No se pudo realizar la operaci\\xf3n. Verifique si ya existe un plan con el mismo nombre o si los campos fueron completados correctamente\",deleteSuccess:\"\\xa1Operaci\\xf3n realizada con \\xe9xito!\",deleteError:\"No se pudo realizar la operaci\\xf3n\",deleteTitle:\"Eliminaci\\xf3n de Registro\",deleteMessage:\"\\xbfDesea realmente eliminar este registro?\"}},companies:{title:\"Registrar Empresa\",form:{name:\"Nombre\",email:\"Correo electr\\xf3nico\",phone:\"Tel\\xe9fono\",plan:\"Plan\",status:\"Estado\",campaigns:\"Campa\\xf1as\",dueDate:\"Fecha de Vencimiento\",recurrence:\"Recurrencia\",token:\"Token\",submit:\"Registrar\",success:\"\\xa1Empresa creada exitosamente!\"},table:{name:\"Nombre\",email:\"Correo electr\\xf3nico\",phone:\"Tel\\xe9fono\",plan:\"Plan\",campaigns:\"Campa\\xf1as\",status:\"Estado\",createdAt:\"Creada En\",dueDate:\"Vencimiento\"},buttons:{clear:\"Limpiar\",delete:\"Eliminar\",save:\"Guardar\",addDueDate:\"+ Vencimiento\",user:\"Usuario\"},messages:{loadError:\"No se pudo cargar la lista de registros\",saveSuccess:\"\\xa1Operaci\\xf3n realizada con \\xe9xito!\",saveError:\"No se pudo realizar la operaci\\xf3n. Verifique si ya existe una empresa con el mismo nombre o si los campos fueron completados correctamente\",deleteSuccess:\"\\xa1Operaci\\xf3n realizada con \\xe9xito!\",deleteError:\"No se pudo realizar la operaci\\xf3n\",deleteTitle:\"Eliminaci\\xf3n de Registro\",deleteMessage:\"\\xbfDesea realmente eliminar este registro?\"},values:{yes:\"S\\xed\",no:\"No\",enabled:\"Habilitadas\",disabled:\"Deshabilitadas\",monthly:\"Mensual\"}},auth:{toasts:{success:\"\\xa1Inicio de sesi\\xf3n exitoso!\"},token:\"Token\"},dashboard:{charts:{perDay:{title:\"Atenciones de hoy: \"}},filters:{filterType:\"Tipo de filtro\",dateFilter:\"Filtro de fecha\",periodFilter:\"Filtro por per\\xedodo\",selectPeriod:\"Seleccionar per\\xedodo\",initialDate:\"Fecha inicial\",finalDate:\"Fecha final\",start:\"Inicio\",end:\"Fin\",filter:\"FILTRAR\",period:\"Per\\xedodo\",noSelection:\"Sin selecci\\xf3n\",last3Days:\"\\xdaltimos 3 d\\xedas\",last7Days:\"\\xdaltimos 7 d\\xedas\",last15Days:\"\\xdaltimos 15 d\\xedas\",last30Days:\"\\xdaltimos 30 d\\xedas\",last60Days:\"\\xdaltimos 60 d\\xedas\",last90Days:\"\\xdaltimos 90 d\\xedas\"},cards:{activeConnections:\"Conexiones Activas\",companies:\"Empresas\",inConversati:\"En Conversaci\\xf3n\",inConversation:\"En Conversaci\\xf3n\",waiting:\"En Espera\",finished:\"Finalizadas\",newContacts:\"Nuevos Contactos\",avgConversationTime:\"Tiempo Promedio de Conversaci\\xf3n\",avgWaitTime:\"Tiempo Promedio de Espera\",totalConversationsByUsers:\"Total de Conversaciones por Usuarios\",totalAttendances:\"Total de Atendimientos\"},errors:{errorGettingConversationInfo:\"Error al obtener informaci\\xf3n de conversaciones\",parameterizeFilter:\"Por favor, configure los filtros antes de buscar\",loadData:\"Error al cargar datos del dashboard\"},table:{name:\"Nombre\",assessments:\"Evaluaciones\",avgServiceTime:\"T.M. de Atenci\\xf3n\",status:\"Estado (Actual)\"}},connections:{title:\"Conexiones\",toasts:{deleted:\"\\xa1Conexi\\xf3n con WhatsApp eliminada exitosamente!\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"\\xbfEst\\xe1s seguro? Esta acci\\xf3n no se puede deshacer.\",disconnectTitle:\"Desconectar\",disconnectMessage:\"\\xbfEst\\xe1s seguro? Deber\\xe1s volver a leer el c\\xf3digo QR.\"},buttons:{add:\"Agregar WhatsApp\",disconnect:\"desconectar\",tryAgain:\"Intentar de nuevo\",qrcode:\"C\\xd3DIGO QR\",newQr:\"Nuevo C\\xd3DIGO QR\",connecting:\"Conectando\",restart:\"Reiniciar conexiones\"},toolTips:{disconnected:{title:\"Error al iniciar sesi\\xf3n en WhatsApp\",content:\"Aseg\\xfarate de que tu tel\\xe9fono est\\xe9 conectado a internet e int\\xe9ntalo nuevamente, o solicita un nuevo c\\xf3digo QR\"},qrcode:{title:\"Esperando lectura del c\\xf3digo QR\",content:\"Haz clic en el bot\\xf3n 'C\\xd3DIGO QR' y lee el c\\xf3digo QR con tu tel\\xe9fono para iniciar sesi\\xf3n\"},connected:{title:\"\\xa1Conexi\\xf3n establecida!\"},timeout:{title:\"Se perdi\\xf3 la conexi\\xf3n con el tel\\xe9fono\",content:\"Aseg\\xfarate de que tu tel\\xe9fono est\\xe9 conectado a internet y WhatsApp est\\xe9 abierto, o haz clic en el bot\\xf3n 'Desconectar' para obtener un nuevo c\\xf3digo QR\"}},table:{name:\"Nombre\",number:\"N\\xfamero\",status:\"Estado\",lastUpdate:\"\\xdaltima actualizaci\\xf3n\",default:\"Predeterminado\",actions:\"Acciones\",session:\"Sesi\\xf3n\"},whatsappModal:{title:{add:\"Agregar WhatsApp\",edit:\"Editar WhatsApp\"},tabs:{general:\"General\",messages:\"Mensajes\",assessments:\"Evaluaciones\",integrations:\"Integraciones\",schedules:\"Horario de expediente\"},form:{name:\"Nombre\",default:\"Predeterminado\",sendIdQueue:\"Fila\",timeSendQueue:\"Redireccionar a cola en X minutos\",queueRedirection:\"Redirecci\\xf3n de cola\",outOfHoursMessage:\"Mensaje de fuera de expediente\",queueRedirectionDesc:\"Seleccione una fila para redirigir los contactos que no tienen fila\",prompt:\"Prompt\",expiresTicket:\"Cerrar chats abiertos despu\\xe9s de X minutos\",expiresInactiveMessage:\"Mensaje de cierre por inactividad\",greetingMessage:\"Mensaje de saludo\",complationMessage:\"Mensaje de conclusi\\xf3n\",timeToTransfer:\"Transferir despu\\xe9s de X (minutos)\",transferQueue:\"Cola de transferencia\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"},success:\"WhatsApp guardado con \\xe9xito.\"},qrCode:{message:\"Lea el c\\xf3digo QR para iniciar sesi\\xf3n\"}},whatsappModal:{title:{add:\"Agregar WhatsApp\",edit:\"Editar WhatsApp\"},tabs:{general:\"General\",messages:\"Mensajes\",assessments:\"Evaluaciones\",integrations:\"Integraciones\",schedules:\"Horario de expediente\"},form:{name:\"Nombre\",default:\"Predeterminado\",sendIdQueue:\"Fila\",timeSendQueue:\"Redireccionar a cola en X minutos\",queueRedirection:\"Redirecci\\xf3n de cola\",outOfHoursMessage:\"Mensaje de fuera de expediente\",queueRedirectionDesc:\"Seleccione una fila para redirigir los contactos que no tienen fila\",prompt:\"Prompt\",expiresTicket:\"Cerrar chats abiertos despu\\xe9s de X minutos\",expiresInactiveMessage:\"Mensaje de cierre por inactividad\",greetingMessage:\"Mensaje de saludo\",complationMessage:\"Mensaje de conclusi\\xf3n\",timeToTransfer:\"Transferir despu\\xe9s de X (minutos)\",transferQueue:\"Cola de transferencia\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"},success:\"WhatsApp guardado con \\xe9xito.\"},contacts:{title:\"Contactos\",toasts:{deleted:\"Contacto eliminado con \\xe9xito!\",deletedAll:\"Todos los contactos eliminados con \\xe9xito!\",exported:\"Contactos exportados con \\xe9xito!\"},searchPlaceholder:\"Buscar...\",confirmationModal:{deleteTitle:\"Eliminar \",deleteAllTitle:\"Eliminar Todos\",importTitle:\"Importar agenda de contactos telef\\xf3nico\",exportTitle:\"Exportar contactos\",deleteMessage:\"\\xbfSeguro que desea eliminar este contacto? Se perder\\xe1n todos los tickets relacionados.\",deleteAllMessage:\"\\xbfSeguro que desea eliminar todos los contactos? Se perder\\xe1n todos los tickets relacionados.\",exportMessage:\"\\xbfEst\\xe1 seguro que desea exportar los contactos seleccionados?\",exportAllMessage:\"\\xbfEst\\xe1 seguro que desea exportar todos los contactos?\",importMessage:\"\\xbfDesea importar todos los contactos del tel\\xe9fono?\",importAgendaMessage:\"Existen {count} contactos en su agenda \\xbfDesea importarlos?\"},buttons:{import:\"IMPORTAR AGENDA\",importSheet:\"Importar\",add:\"Agregar\",export:\"Exportar\",delete:\"BORRAR\",deleteAll:\"Eliminar Todos Contactos\",downloadTemplate:\"Descargar Plantilla\"},table:{name:\"Nombre\",whatsapp:\"WhatsApp\",email:\"Correo electr\\xf3nico\",lastInteraction:\"\\xdaltima Interacci\\xf3n\",status:\"Estado\",actions:\"Acciones\"},messages:{selectToExport:\"Para exportar contactos necesitas seleccionar al menos 1 contacto\",processingExport:\"Procesando {count} contactos... Esto puede tomar unos segundos.\",exportSuccess:\"Contactos exportados exitosamente\",exportError:\"Error al exportar los contactos. Intente nuevamente.\",checkingAgenda:\"Verificando agenda de contactos...\",importingContacts:\"Importando {count} contactos... Esto puede tomar varios minutos.\",importSuccess:\"Contactos importados exitosamente\",importError:\"Error al importar los contactos. Intente nuevamente.\",agendaEmpty:\"No se encontraron contactos en la agenda del tel\\xe9fono.\"}},queueIntegrationModal:{title:{add:\"Agregar proyecto\",edit:\"Editar proyecto\"},form:{id:\"ID\",type:\"Tipo\",name:\"Nombre\",projectName:\"Nombre del Proyecto\",language:\"Lenguaje\",jsonContent:\"JsonContent\",urlN8N:\"URL\",typebotSlug:\"Typebot - Slug\",typebotExpires:\"Tiempo en minutos para expirar una conversaci\\xf3n\",typebotKeywordFinish:\"Palabra para finalizar el ticket\",typebotKeywordRestart:\"Palabra para reiniciar el flujo\",typebotRestartMessage:\"Mensaje al reiniciar la conversaci\\xf3n\",typebotUnknownMessage:\"Mensaje de opci\\xf3n inv\\xe1lida\",typebotDelayMessage:\"Intervalo (ms) entre mensajes\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\",test:\"Probar Bot\"},messages:{testSuccess:\"Integraci\\xf3n probada con \\xe9xito!\",addSuccess:\"Integraci\\xf3n agregada con \\xe9xito.\",editSuccess:\"Integraci\\xf3n editada con \\xe9xito.\"}},sideMenu:{name:\"Men\\xfa Lateral Inicial\",note:\"Si est\\xe1 habilitado, el men\\xfa lateral se iniciar\\xe1 cerrado\",options:{enabled:\"Abierto\",disabled:\"Cerrado\"}},promptModal:{form:{name:\"Nombre\",prompt:\"Prompt\",voice:\"Voz\",max_tokens:\"M\\xe1ximo de Tokens en la respuesta\",temperature:\"Temperatura\",apikey:\"API Key\",max_messages:\"M\\xe1ximo de mensajes en el Historial\",voiceKey:\"Clave de la API de Voz\",voiceRegion:\"Regi\\xf3n de Voz\"},success:\"Prompt guardado con \\xe9xito!\",title:{add:\"Agregar Prompt\",edit:\"Editar Prompt\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"}},prompts:{title:\"Prompts\",table:{name:\"Nombre\",queue:\"Sector/Cola\",max_tokens:\"M\\xe1ximo Tokens Respuesta\",actions:\"Acciones\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"\\xbfEst\\xe1 seguro? \\xa1Esta acci\\xf3n no se puede deshacer!\"},buttons:{add:\"Agregar Prompt\"}},contactModal:{title:{add:\"Agregar contacto\",edit:\"Editar contacto\"},form:{mainInfo:\"Datos del contacto\",extraInfo:\"Informaci\\xf3n adicional\",name:\"Nombre\",number:\"N\\xfamero de Whatsapp\",email:\"Email\",extraName:\"Nombre del campo\",extraValue:\"Valor\",whatsapp:\"Conexi\\xf3n Origen: \"},buttons:{addExtraInfo:\"Agregar informaci\\xf3n\",okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"},success:\"Contacto guardado con \\xe9xito.\"},queueModal:{title:{add:\"Agregar cola\",edit:\"Editar cola\"},confirmationModal:{deleteTitle:\"Eliminar\"},tabs:{queueData:\"Datos de la cola\",serviceHours:\"Horario de servicio\"},form:{name:\"Nombre\",color:\"Color\",greetingMessage:\"Mensaje de saludo\",complationMessage:\"Mensaje de conclusi\\xf3n\",outOfHoursMessage:\"Mensaje de fuera de horario\",ratingMessage:\"Mensaje de evaluaci\\xf3n\",token:\"Token\",orderQueue:\"Orden de la cola (Bot)\",integrationId:\"Integraci\\xf3n\",noIntegration:\"Sin integraci\\xf3n\",prompt:\"Prompt\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\",attach:\"Adjuntar archivo\"},toasts:{deleted:\"Archivo eliminado correctamente.\"},schedules:{title:\"Agendamientos\",confirmationModal:{deleteTitle:\"\\xbfEst\\xe1s seguro de que quieres eliminar este Agendamiento?\",deleteMessage:\"Esta acci\\xf3n no se puede deshacer.\"},table:{contact:\"Contacto\",body:\"Mensaje\",sendAt:\"Fecha de Agendamiento\",sentAt:\"Fecha de Env\\xedo\",status:\"Estado\",actions:\"Acciones\"},buttons:{add:\"Nuevo Agendamiento\"},toasts:{deleted:\"Agendamiento eliminado con \\xe9xito.\"},saveSuccess:\"Horarios guardados correctamente.\",saveButton:\"Guardar horarios\"}},userModal:{title:{add:\"Agregar usuario\",edit:\"Editar usuario\"},form:{name:\"Nombre\",email:\"Email\",password:\"Contrase\\xf1a\",profile:\"Perfil\",whatsapp:\"Conexi\\xf3n Predeterminada\",allTicket:\"Ticket Sin Cola [Invisible]\",allTicketEnabled:\"Habilitado\",allTicketDesabled:\"Deshabilitado\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"},success:\"Usuario guardado con \\xe9xito.\"},scheduleModal:{title:{add:\"Nuevo Agendamiento\",edit:\"Editar Agendamiento\"},form:{body:\"Mensaje\",contact:\"Contacto\",sendAt:\"Fecha de Agendamiento\",sentAt:\"Fecha de Env\\xedo\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"},success:\"Agendamiento guardado con \\xe9xito.\",toasts:{deleted:\"Archivo eliminado con \\xe9xito.\"},confirmationModal:{deleteTitle:\"Eliminar archivo\",deleteMessage:\"\\xbfEst\\xe1s seguro de que quieres eliminar este archivo?\"}},tagModal:{title:{add:\"Nueva Etiqueta\",edit:\"Editar Etiqueta\"},form:{name:\"Nombre\",color:\"Color\"},buttons:{okAdd:\"Agregar\",okEdit:\"Guardar\",cancel:\"Cancelar\"},success:\"Etiqueta guardada con \\xe9xito.\"},chat:{noTicketMessage:\"Seleccione un ticket para comenzar a conversar.\",buttons:{new:\"Nuevo\"}},uploads:{titles:{titleUploadMsgDragDrop:\"ARRASTRE Y SUELTE ARCHIVOS EN EL CAMPO ABAJO\",titleFileList:\"Lista de archivo(s)\"}},ticketsQueueSelect:{placeholder:\"Departamentos\"},ticketsManager:{buttons:{newTicket:\"Nuevo\",closeallTicket:\"Cerrar\"}},tickets:{inbox:{closedAllTickets:\"\\xbfCerrar todos los tickets?\",closedAll:\"Cerrar Todos\",newTicket:\"Nuevo Ticket\",yes:\"S\\xcd\",no:\"NO\",open:\"Abiertos\",resolved:\"Resueltos\"},toasts:{deleted:\"La atenci\\xf3n en la que estaba ha sido eliminada.\"},notification:{message:\"Mensaje de\"},tabs:{open:{title:\"Abiertas\"},closed:{title:\"Resueltos\"},search:{title:\"B\\xfasqueda\"}},search:{placeholder:\"Buscar atenci\\xf3n y mensajes\",filterConnections:\"Filtro por conexiones\",filterContacts:\"Filtro por contacto\",filterConections:\"Filtro por Conexi\\xf3n\",filterConectionsOptions:{open:\"Abierto\",closed:\"Cerrado\",pending:\"Pendiente\"},filterUsers:\"Filtro por Usuarios\",ticketsPerPage:\"Tickets por p\\xe1gina\"},buttons:{showAll:\"Todos\"}},transferTicketModal:{title:\"Transferir Ticket\",fieldLabel:\"Escribe para buscar usuarios\",fieldQueueLabel:\"Transferir a departamento\",fieldQueuePlaceholder:\"Seleccione un departamento\",noOptions:\"No se encontraron usuarios con ese nombre\",buttons:{ok:\"Transferir\",cancel:\"Cancelar\"}},ticketsList:{pendingHeader:\"Pendiente\",assignedHeader:\"Atendiendo\",noTicketsTitle:\"\\xa1Nada aqu\\xed!\",noTicketsMessage:\"No se encontraron tickets con este estado o t\\xe9rmino de b\\xfasqueda\",buttons:{accept:\"Aceptar\",closed:\"Finalizar\",transfer:\"Transferir\",reopen:\"Reabrir\"}},newTicketModal:{title:\"Crear Ticket\",fieldLabel:\"Escribe para buscar el contacto\",add:\"Agregar\",buttons:{ok:\"Guardar\",cancel:\"Cancelar\"}},mainDrawer:{listItems:{dashboard:\"Tablero\",connections:\"Conexiones\",tickets:\"Tickets\",quickMessages:\"Respuestas R\\xe1pidas\",contacts:\"Contactos\",queues:\"Departamentos\",tags:\"Etiquetas\",administration:\"Administraci\\xf3n\",users:\"Usuarios\",settings:\"Configuraciones\",helps:\"Ayuda\",messagesAPI:\"API\",schedules:\"Agendamientos\",campaigns:\"Campa\\xf1as\",annoucements:\"Anuncios\",chats:\"Chat Interno\",financeiro:\"Financiero\",files:\"Lista de archivos\",prompts:\"Agente AI\",queueIntegration:\"Integraciones\"},appBar:{notRegister:\"Sin notificaciones\",user:{profile:\"Perfil\",logout:\"Salir\"}}},queueIntegration:{title:\"Integraciones\",table:{id:\"ID\",type:\"Tipo\",name:\"Nombre\",projectName:\"Nombre del Proyecto\",language:\"Idioma\",lastUpdate:\"\\xdaltima actualizaci\\xf3n\",actions:\"Acciones\"},buttons:{add:\"Agregar Proyecto\"},searchPlaceholder:\"Buscar...\",confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"\\xbfEst\\xe1s seguro? \\xa1Esta acci\\xf3n no se puede deshacer! y se eliminar\\xe1 de los departamentos y conexiones vinculadas\"}},files:{title:\"Lista de archivos\",table:{name:\"Nombre\",contacts:\"Contactos\",actions:\"Acci\\xf3n\"},toasts:{deleted:\"\\xa1Lista eliminada correctamente!\",deletedAll:\"\\xa1Todas las listas se han eliminado correctamente!\"},buttons:{add:\"Agregar\",deleteAll:\"Eliminar Todos\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteAllTitle:\"Eliminar Todos\",deleteMessage:\"\\xbfEst\\xe1s seguro de que deseas eliminar esta lista?\",deleteAllMessage:\"\\xbfEst\\xe1s seguro de que deseas eliminar todas las listas?\"}},messagesAPI:{title:\"API de Mensajes\",documentation:{title:\"Documentaci\\xf3n para env\\xedo de mensajes\",methods:\"M\\xe9todos de Env\\xedo\",instructions:\"Instrucciones\",importantNotes:\"Observaciones importantes\",textMessages:\"Mensajes de Texto\",mediaMessages:\"Mensajes Multimedia\",endpoint:\"Endpoint\",method:\"M\\xe9todo\",headers:\"Headers\",body:\"Body\",formData:\"FormData\",testSend:\"Prueba de Env\\xedo\",send:\"Enviar\"},instructions:{tokenRequired:\"Antes de enviar mensajes, es necesario registrar el token vinculado a la conexi\\xf3n que enviar\\xe1 los mensajes. Para realizar el registro acceda al men\\xfa 'Conexiones', haga clic en el bot\\xf3n editar de la conexi\\xf3n e inserte el token en el campo correspondiente.\",numberFormat:\"El n\\xfamero para env\\xedo no debe tener m\\xe1scara o caracteres especiales y debe estar compuesto por:\",countryCode:\"C\\xf3digo del pa\\xeds\",areaCode:\"DDD\",number:\"N\\xfamero\"},apiInfo:{textMessageInfo:\"A continuaci\\xf3n se muestra la lista de informaci\\xf3n necesaria para el env\\xedo de mensajes de texto:\",mediaMessageInfo:\"A continuaci\\xf3n se muestra la lista de informaci\\xf3n necesaria para el env\\xedo de mensajes multimedia:\",authorization:\"Authorization (Bearer token) y Content-Type (application/json)\",multipartForm:\"Authorization (Bearer token) y Content-Type (multipart/form-data)\",exampleBody:'{ \"number\": \"51959858768\", \"body\": \"Su mensaje\" }',exampleNumber:\"51959858768\",exampleFile:\"archivo\"},textMessage:{number:\"N\\xfamero\",body:\"Mensaje\",token:\"Token registrado\"},mediaMessage:{number:\"N\\xfamero\",body:\"Nombre del archivo\",media:\"Archivo\",token:\"Token registrado\"},messages:{success:\"Mensaje enviado exitosamente\",noPermission:\"Esta empresa no tiene permiso para acceder a esta p\\xe1gina. Estamos redirigi\\xe9ndolo.\"}},notifications:{noTickets:\"No hay notificaciones.\",noRecords:\"Sin registros\"},quickMessages:{title:\"Respuestas R\\xe1pidas\",searchPlaceholder:\"Buscar...\",noAttachment:\"Sin adjunto\",confirmationModal:{deleteTitle:\"Eliminaci\\xf3n\",deleteMessage:\"\\xa1Esta acci\\xf3n es irreversible! \\xbfQuieres continuar?\"},buttons:{add:\"Agregar\",attach:\"Adjuntar Archivo\",cancel:\"Cancelar\",edit:\"Editar\"},toasts:{success:\"\\xa1Atajo agregado correctamente!\",deleted:\"\\xa1Atajo eliminado correctamente!\"},dialog:{title:\"Mensaje R\\xe1pido\",shortcode:\"Atajo\",message:\"Respuesta\",save:\"Guardar\",cancel:\"Cancelar\",geral:\"Permitir editar\",add:\"Agregar\",edit:\"Editar\",visao:\"Permitir vista\"},table:{shortcode:\"Atajo\",message:\"Mensaje\",actions:\"Acciones\",mediaName:\"Nombre del Archivo\",status:\"Estado\"}},messageVariablesPicker:{label:\"Variables disponibles\",vars:{contactFirstName:\"Primer Nombre\",contactName:\"Nombre\",greeting:\"Saludo\",protocolNumber:\"Protocolo\",date:\"Fecha\",hour:\"Hora\"}},contactLists:{title:\"Listas de Contactos\",table:{name:\"Nombre\",contacts:\"Contactos\",actions:\"Acciones\"},buttons:{add:\"Nueva Lista\"},dialog:{name:\"Nombre\",company:\"Empresa\",okEdit:\"Editar\",okAdd:\"Agregar\",add:\"Agregar\",edit:\"Editar\",cancel:\"Cancelar\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"Esta acci\\xf3n no se puede deshacer.\"},toasts:{deleted:\"Registro eliminado\"}},contactListItems:{title:\"Contactos\",searchPlaceholder:\"B\\xfasqueda\",buttons:{add:\"Nuevo\",lists:\"Listas\",import:\"Importar\"},dialog:{name:\"Nombre\",number:\"N\\xfamero\",whatsapp:\"Whatsapp\",email:\"Correo electr\\xf3nico\",okEdit:\"Editar\",okAdd:\"Agregar\",add:\"Agregar\",edit:\"Editar\",cancel:\"Cancelar\"},table:{name:\"Nombre\",number:\"N\\xfamero\",whatsapp:\"Whatsapp\",email:\"Correo electr\\xf3nico\",actions:\"Acciones\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"Esta acci\\xf3n no se puede deshacer.\",importMessage:\"\\xbfDesea importar los contactos de esta hoja de c\\xe1lculo?\",importTitle:\"Importar\"},toasts:{deleted:\"Registro eliminado\"}},campaigns:{title:\"Campa\\xf1as\",searchPlaceholder:\"B\\xfasqueda\",buttons:{add:\"Nueva Campa\\xf1a\",contactLists:\"Listas de Contactos\"},table:{name:\"Nombre\",whatsapp:\"Conexi\\xf3n\",contactList:\"Lista de Contactos\",status:\"Estado\",scheduledAt:\"Programada\",completedAt:\"Completada\",confirmation:\"Confirmaci\\xf3n\",actions:\"Acciones\"},placeholders:{notDefined:\"No definido\",notDefinedMale:\"No definido\",noScheduling:\"Sin programaci\\xf3n\",notCompleted:\"No completada\"},dialog:{new:\"Nueva Campa\\xf1a\",update:\"Editar Campa\\xf1a\",readonly:\"Solo Lectura\",form:{name:\"Nombre\",message1:\"Mensaje 1\",message2:\"Mensaje 2\",message3:\"Mensaje 3\",message4:\"Mensaje 4\",message5:\"Mensaje 5\",confirmationMessage1:\"Mensaje de Confirmaci\\xf3n 1\",confirmationMessage2:\"Mensaje de Confirmaci\\xf3n 2\",confirmationMessage3:\"Mensaje de Confirmaci\\xf3n 3\",confirmationMessage4:\"Mensaje de Confirmaci\\xf3n 4\",confirmationMessage5:\"Mensaje de Confirmaci\\xf3n 5\",messagePlaceholder:\"Contenido del mensaje\",messageVariables:\"Variables disponibles: {{firstName}}, {{name}}, {{ms}}, {{protocol}}, {{hora}}\",whatsapp:\"Conexi\\xf3n\",status:\"Estado\",scheduledAt:\"Programada\",confirmation:\"Confirmaci\\xf3n\",contactList:\"Lista de Contacto\",tagList:\"Lista de Etiquetas\",fileList:\"Lista de Archivos\"},buttons:{add:\"Agregar\",edit:\"Actualizar\",okadd:\"Ok\",cancel:\"Cancelar\",restart:\"Reiniciar Campa\\xf1as\",close:\"Cerrar\",attach:\"Adjuntar Archivo\"}},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"Esta acci\\xf3n no se puede deshacer.\"},toasts:{success:\"Operaci\\xf3n realizada correctamente\",cancel:\"Campa\\xf1a cancelada\",restart:\"Campa\\xf1as reiniciadas\",deleted:\"Registro eliminado\"},report:{title:\"Informe de\",status:\"Estado\",validContacts:\"Contactos V\\xe1lidos\",delivered:\"Entregados\",confirmationRequested:\"Confirmaciones Solicitadas\",confirmations:\"Confirmaciones\",connection:\"Conexi\\xf3n\",contactList:\"Lista de Contactos\",scheduling:\"Programaci\\xf3n\",conclusion:\"Conclusi\\xf3n\",statusValues:{inactive:\"Inactiva\",scheduled:\"Programada\",inProgress:\"En Progreso\",cancelled:\"Cancelada\",finished:\"Finalizada\"}}},announcements:{active:\"Activo\",inactive:\"Inactivo\",title:\"Informativos\",searchPlaceholder:\"B\\xfasqueda\",buttons:{add:\"Nuevo Informativo\",contactLists:\"Listas de Informativos\"},table:{priority:\"Prioridad\",title:\"T\\xedtulo\",text:\"Texto\",mediaName:\"Archivo\",status:\"Estado\",actions:\"Acciones\"},dialog:{edit:\"Editar Informativo\",add:\"Nuevo Informativo\",update:\"Editar Informativo\",readonly:\"Solo Lectura\",form:{priority:\"Prioridad\",title:\"T\\xedtulo\",text:\"Texto\",mediaPath:\"Archivo\",status:\"Estado\"},buttons:{add:\"Agregar\",edit:\"Actualizar\",okadd:\"Ok\",cancel:\"Cancelar\",close:\"Cerrar\",attach:\"Adjuntar Archivo\"}},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"Esta acci\\xf3n no se puede deshacer.\"},toasts:{success:\"Operaci\\xf3n realizada correctamente\",deleted:\"Registro eliminado\"}},campaignsConfig:{title:\"Configuraciones de Campa\\xf1as\",intervals:\"Configuraci\\xf3n de Intervalos\",form:{randomTriggerInterval:\"Tiempo entre mensajes (segundos)\",longerIntervalAfter:\"Aplicar intervalo mayor despu\\xe9s de X mensajes\",greaterTriggerInterval:\"Intervalo mayor entre mensajes (segundos)\",noInterval:\"Sin intervalo\",notDefined:\"No definido\",seconds:\"segundos\",second:\"segundo\"},buttons:{addVariable:\"AGREGAR VARIABLE\",saveConfigurations:\"GUARDAR CONFIGURACIONES\",close:\"CERRAR\",add:\"AGREGAR\"},variables:{shortcut:\"Atajo\",content:\"Contenido\"},messages:{saveSuccess:\"Configuraciones guardadas correctamente\"},help:{intervals:\"Configura los tiempos de env\\xedo para evitar bloqueos de WhatsApp\",variables:\"Crea variables personalizadas para usar en tus mensajes de campa\\xf1a\",example:\"Ejemplo: Atajo 'empresa' = Contenido 'Mi Empresa S.A.' \\u2192 Usar {empresa} en mensajes\"}},queues:{title:\"Departamentos\",table:{id:\"ID\",name:\"Nombre\",color:\"Color\",greeting:\"Mensaje de bienvenida\",actions:\"Acciones\",orderQueue:\"Orden de la cola (bot)\"},buttons:{add:\"Agregar departamento\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"\\xbfEst\\xe1s seguro? \\xa1Esta acci\\xf3n no se puede deshacer! Los tickets de este departamento seguir\\xe1n existiendo pero ya no tendr\\xe1n ning\\xfan departamento asignado.\"}},queueOptions:{title:\"Opciones\",add:\"Agregar\",placeholder:{title:\"T\\xedtulo de la opci\\xf3n\",message:\"Escriba el texto de la opci\\xf3n\"},undefinedTitle:\"T\\xedtulo no definido\"},queueSelect:{inputLabel:\"Departamentos\"},users:{title:\"Usuarios\",table:{id:\"ID\",status:\"Estado\",name:\"Nombre\",email:\"Email\",profile:\"Perfil\",department:\"Departamento\",actions:\"Acciones\"},buttons:{add:\"Agregar usuario\"},toasts:{deleted:\"Usuario eliminado correctamente.\"},confirmationModal:{deleteTitle:\"Eliminar\",deleteMessage:\"Todos los datos del usuario se perder\\xe1n. Los tickets abiertos de este usuario se mover\\xe1n al departamento.\"}},helps:{title:\"Centro de Ayuda\",form:{title:\"T\\xedtulo\",videoCode:\"C\\xf3digo del Video\",description:\"Descripci\\xf3n\"},table:{title:\"T\\xedtulo\",description:\"Descripci\\xf3n\",video:\"Video\"},buttons:{clear:\"Limpiar\",delete:\"Eliminar\",save:\"Guardar\"},messages:{loadError:\"No se pudo cargar la lista de registros\",saveSuccess:\"\\xa1Operaci\\xf3n realizada con \\xe9xito!\",saveError:\"No se pudo realizar la operaci\\xf3n. Verifique si ya existe una ayuda con el mismo nombre o si los campos fueron completados correctamente\",deleteSuccess:\"\\xa1Operaci\\xf3n realizada con \\xe9xito!\",deleteError:\"No se pudo realizar la operaci\\xf3n\",deleteTitle:\"Eliminaci\\xf3n de Registro\",deleteMessage:\"\\xbfDesea realmente eliminar este registro?\"}},uploader:{title:\"Cargar Logo\",selectOption:\"Seleccionar opci\\xf3n\",fileInput:\"Seleccionar archivo\",sendFile:\"Enviar archivo\",options:{signup:\"P\\xe1gina de registro\",login:\"P\\xe1gina de inicio de sesi\\xf3n\",internal:\"Interno\",favicon:\"Favicon\",favicon256:\"Favicon 256x256\",appleTouch:\"Apple Touch Icon\"},messages:{noPermission:\"No tienes permisos para acceder a esta p\\xe1gina\",invalidFormat:\"Formato de archivo no v\\xe1lido. Solo se permiten PNG, ICO y SVG\",chooseFile:\"Por favor, selecciona un archivo\",chooseDestination:\"Por favor, selecciona un destino\",fileSent:\"Archivo enviado correctamente\"}},tags:{title:\"Etiquetas\",confirmationModal:{deleteTitle:\"\\xbfEst\\xe1s seguro que quieres eliminar esta Etiqueta?\",deleteMessage:\"Esta acci\\xf3n no se puede deshacer.\",deleteAllMessage:\"\\xbfEst\\xe1s seguro que quieres eliminar todas las Etiquetas?\",deleteAllTitle:\"Eliminar Todas\"},table:{name:\"Nombre\",color:\"Color\",tickets:\"Tickets Etiquetados\",actions:\"Acciones\"},buttons:{add:\"Nueva Etiqueta\",deleteAll:\"Eliminar Todas\"},toasts:{deletedAll:\"\\xa1Todas las Etiquetas se han eliminado correctamente!\",deleted:\"Etiqueta eliminada correctamente.\"}},settings:{success:\"Configuraciones guardadas correctamente.\",title:\"Configuraciones\",settings:{userCreation:{name:\"Creaci\\xf3n de usuario\",options:{enabled:\"Habilitado\",disabled:\"Deshabilitado\"}}},tabs:{options:\"Opciones\",schedules:\"Horarios\",logo:\"Logo\",companies:\"Empresas\",registerCompany:\"Registrar Empresa\",plans:\"Planes\",help:\"Ayuda\"},options:{userRating:\"Calificaci\\xf3n de Usuario\",scheduleType:\"Tipo de Horario\",ignoreGroupMessages:\"Ignorar Mensajes de Grupo\",acceptCall:\"Aceptar Llamadas\",chatbotType:\"Tipo de Chatbot\",sendGreetingAccepted:\"Enviar Saludo al Aceptar\",sendTransferMessage:\"Enviar Mensaje de Transferencia\",sendGreetingOneQueue:\"Enviar Saludo con Un Departamento\",globalSettings:\"Configuraciones Globales\",registrationAllowed:\"Registro Permitido\",registrationVisible:\"Registro Visible\",trialTime:\"Tiempo de Prueba\"},states:{disabled:\"Deshabilitado\",enabled:\"Habilitado\",activated:\"Activado\",deactivated:\"Desactivado\",accept:\"Aceptar\",notAccept:\"No Aceptar\",text:\"Texto\",updating:\"Actualizando...\",yes:\"S\\xed\",no:\"No\",queue:\"Departamento\",company:\"Empresa\"}},messagesList:{header:{assignedTo:\"Asignado a:\",buttons:{return:\"Volver\",resolve:\"Resolver\",reopen:\"Reabrir\",accept:\"Aceptar\"}},reactions:{you:\"T\\xfa\",contact:\"Contacto\",reacted:\"reaccion\\xf3\"}},messagesInput:{placeholderOpen:\"Escribe un mensaje\",placeholderClosed:\"Reabra o acepte este ticket para enviar un mensaje.\",signMessage:\"Firmar\"},contactDrawer:{header:\"Datos del contacto\",buttons:{edit:\"Editar contacto\"},extraInfo:\"Informaci\\xf3n adicional\"},fileModal:{title:{add:\"Agregar lista de archivos\",edit:\"Editar lista de archivos\"},buttons:{okAdd:\"Guardar\",okEdit:\"Editar\",cancel:\"Cancelar\",fileOptions:\"Agregar archivo\"},form:{name:\"Nombre de la lista de archivos\",message:\"Detalles de la lista\",fileOptions:\"Lista de archivos\",extraName:\"Mensaje para enviar con archivo\",extraValue:\"Valor de la opci\\xf3n\"},success:\"Lista de archivos guardada correctamente!\"},ticketOptionsMenu:{schedule:\"Programaci\\xf3n\",delete:\"Eliminar\",transfer:\"Transferir\",registerAppointment:\"Observaciones del Contacto\",appointmentsModal:{title:\"Observaciones del Contacto\",textarea:\"Observaci\\xf3n\",placeholder:\"Inserta aqu\\xed la informaci\\xf3n que deseas registrar\"},confirmationModal:{title:\"Eliminar el ticket\",titleFrom:\"del contacto \",message:\"\\xa1Atenci\\xf3n! Todos los mensajes relacionados con el ticket se perder\\xe1n.\"},buttons:{delete:\"Eliminar\",cancel:\"Cancelar\"}},messageOptionsMenu:{forward:\"Reenviar\",edit:\"Editar\",react:\"Reaccionar\",reply:\"Responder\",delete:\"Eliminar\",reactionSuccess:\"Reacci\\xf3n agregada exitosamente\",confirmationModal:{title:\"\\xbfEliminar mensaje?\",message:\"Esta acci\\xf3n no se puede deshacer.\"},editMessageModal:{title:\"Editar mensaje\"}},backendErrors:{ERR_NO_OTHER_WHATSAPP:\"Debe haber al menos un WhatsApp predeterminado.\",ERR_NO_DEF_WAPP_FOUND:\"No se encontr\\xf3 ning\\xfan WhatsApp predeterminado. Comprueba la p\\xe1gina de conexiones.\",ERR_WAPP_NOT_INITIALIZED:\"Esta sesi\\xf3n de WhatsApp no se ha inicializado. Comprueba la p\\xe1gina de conexiones.\",ERR_WAPP_CHECK_CONTACT:\"No se pudo verificar el contacto de WhatsApp. Comprueba la p\\xe1gina de conexiones\",ERR_WAPP_INVALID_CONTACT:\"Este no es un n\\xfamero de WhatsApp v\\xe1lido.\",ERR_WAPP_DOWNLOAD_MEDIA:\"No se pudo descargar medios de WhatsApp. Comprueba la p\\xe1gina de conexiones.\",ERR_INVALID_CREDENTIALS:\"Error de autenticaci\\xf3n. Por favor, int\\xe9ntalo de nuevo.\",ERR_SENDING_WAPP_MSG:\"Error al enviar mensaje de WhatsApp. Comprueba la p\\xe1gina de conexiones.\",ERR_DELETE_WAPP_MSG:\"No se pudo eliminar el mensaje de WhatsApp.\",ERR_OTHER_OPEN_TICKET:\"Ya hay un ticket abierto para este contacto.\",ERR_SESSION_EXPIRED:\"Sesi\\xf3n expirada. Por favor, inicia sesi\\xf3n.\",ERR_USER_CREATION_DISABLED:\"La creaci\\xf3n de usuarios ha sido deshabilitada por el administrador.\",ERR_NO_PERMISSION:\"No tienes permiso para acceder a este recurso.\",ERR_DUPLICATED_CONTACT:\"Ya existe un contacto con este n\\xfamero.\",ERR_NO_SETTING_FOUND:\"No se encontr\\xf3 ninguna configuraci\\xf3n con esta ID.\",ERR_NO_CONTACT_FOUND:\"No se encontr\\xf3 ning\\xfan contacto con esta ID.\",ERR_NO_TICKET_FOUND:\"No se encontr\\xf3 ning\\xfan ticket con esta ID.\",ERR_NO_USER_FOUND:\"No se encontr\\xf3 ning\\xfan usuario con esta ID.\",ERR_NO_WAPP_FOUND:\"No se encontr\\xf3 ning\\xfan WhatsApp con esta ID.\",ERR_CREATING_MESSAGE:\"Error al crear mensaje en la base de datos.\",ERR_CREATING_TICKET:\"Error al crear ticket en la base de datos.\",ERR_FETCH_WAPP_MSG:\"Error al obtener mensaje de WhatsApp, puede que sea muy antiguo.\",ERR_QUEUE_COLOR_ALREADY_EXISTS:\"Este color ya est\\xe1 en uso, elige otro.\",ERR_WAPP_GREETING_REQUIRED:\"El saludo es obligatorio cuando hay m\\xe1s de un departamento.\"},welcome:{message:\"\\xa1Hola {name}, Bienvenido a {company}!\",activeUntil:\"Activo hasta {date}\"},version:\"Versi\\xf3n: {version}\",logout:\"Salir\",time:{hoursAgo:\"{hours} h atr\\xe1s\",minutesAgo:\"{minutes} min atr\\xe1s\",daysAgo:\"{days} d\\xedas atr\\xe1s\"},confirmationModal:{buttons:{cancel:\"Cancelar\",confirm:\"Confirmar\"}},hardcodedElements:{atendimento:\"Atenciones\",tarefas:\"Tareas\",gerencia:\"Gesti\\xf3n\",campanhas:\"Campa\\xf1as\",listagem:\"Env\\xedo de mensajes\",configuracoes:\"Configuraciones\",administracao:\"Administraci\\xf3n\",semFila:\"Sin departamento\",sair:\"Salir\",sayHelloToNewContact:\"\\xa1Hola! \\xbfEn qu\\xe9 puedo ayudarte?\",admin:\"Administrador\",filas:\"Filas\",todos:\"Todos\",hey:\"hey\"},financial:{title:\"Facturas\",table:{id:\"ID\",details:\"Detalles\",value:\"Valor\",dueDate:\"Fecha Venc.\",status:\"Estado\",action:\"Acci\\xf3n\"},status:{paid:\"Pagado\",overdue:\"Vencido\",open:\"En Abierto\"},buttons:{pay:\"PAGAR\",paid:\"PAGADO\"},messages:{noInvoices:\"No hay facturas para mostrar\",paymentSuccess:\"Pago procesado exitosamente\",paymentError:\"Error al procesar el pago\"}},kanban:{open:\"En Abierto\"}}}};Fe.a.use(Be.a).init({debug:!1,defaultNS:[\"translations\"],fallbackLng:\"es\",lng:\"es\",ns:[\"translations\"],resources:ze,detection:{order:[\"localStorage\",\"navigator\"],caches:[\"localStorage\"]},interpolation:{escapeValue:!1}}),Fe.a.changeLanguage(\"es\");var Ue=t(191),He=t.n(Ue);const Ve=()=>{try{localStorage.removeItem(\"token\"),localStorage.removeItem(\"userId\"),localStorage.removeItem(\"companyId\"),localStorage.removeItem(\"user\"),localStorage.removeItem(\"cshow\"),document.cookie.split(\";\").forEach(e=>{document.cookie=e.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=\"+(new Date).toUTCString()+\";path=/\")}),console.log(\"\\ud83e\\uddf9 Datos de autenticaci\\xf3n limpiados autom\\xe1ticamente\"),window.location.href=\"/login\"}catch(e){console.error(\"Error limpiando datos de autenticaci\\xf3n:\",e)}},Ge=()=>{const e=localStorage.getItem(\"token\"),a=window.location.pathname;return!![\"/login\",\"/forget-password\",\"/signup\"].includes(a)||(e?!!(e=>{if(!e)return!1;try{const a=e.split(\".\");if(3!==a.length)return!1;const t=JSON.parse(atob(a[1])),n=Date.now()/1e3;return!(t.exp&&t.exp<n)||(console.log(\"\\u23f0 Token expirado autom\\xe1ticamente\"),!1)}catch(a){return console.log(\"\\u274c Token inv\\xe1lido detectado autom\\xe1ticamente\"),!1}})(e)||(console.log(\"\\ud83d\\udd04 Token inv\\xe1lido detectado - limpieza autom\\xe1tica\"),Ve(),!1):(console.log(\"\\ud83d\\udd04 No hay token - redirigiendo al login\"),Ve(),!1))},_e=He.a.create({baseURL:\"http://localhost:8080\",withCredentials:!0});_e.interceptors.request.use(e=>e.url.includes(\"/auth/\")||e.url.includes(\"/login\")||Ge()?e:Promise.reject(new Error(\"Token inv\\xe1lido - redirigiendo al login\")),e=>Promise.reject(e)),_e.interceptors.response.use(e=>e,e=>(!e.response||401!==e.response.status&&403!==e.response.status||(console.log(\"\\ud83d\\udd04 Error de autenticaci\\xf3n detectado - limpieza autom\\xe1tica\"),Ve()),Promise.reject(e)));const Ke=He.a.create({baseURL:\"http://localhost:8080\"});var Qe=_e,Ye=t(25);var Xe=e=>{var a,t;const n=null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error;return n?Fe.a.exists(\"backendErrors.\"+n)?void P.b.error(Fe.a.t(\"backendErrors.\"+n),{toastId:n,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:\"light\"}):void P.b.error(n,{toastId:n,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:\"light\"}):Object(Ye.isString)(e)?void P.b.error(e):void P.b.error(\"An error occurred!\")};const Je=(e,a)=>{if(\"LOAD_WHATSAPPS\"===a.type){return[...a.payload]}if(\"UPDATE_WHATSAPPS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"UPDATE_SESSION\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n].status=t.status,e[n].updatedAt=t.updatedAt,e[n].qrcode=t.qrcode,e[n].retries=t.retries,[...e]):[...e]}if(\"DELETE_WHATSAPPS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]};var Ze=()=>{const[e,a]=Object(n.useReducer)(Je,[]),[t,r]=Object(n.useState)(!0),l=Object(n.useRef)(!0),o=Object(n.useContext)(v);Object(n.useEffect)(()=>()=>{l.current=!1},[]);const s=async()=>{if(l.current)try{r(!0),j.whatsapp.debug(\"\\ud83d\\udd04 REFRESCANDO DATOS DE WHATSAPP...\");const{data:e}=await Qe.get(\"/whatsapp/?session=0\");l.current&&(a({type:\"REFRESH_WHATSAPPS\",payload:e}),j.whatsapp.debug(\"\\u2705 DATOS REFRESCADOS:\",e.length,\"conexiones\"))}catch(e){l.current&&(j.whatsapp.error(\"\\u274c ERROR AL REFRESCAR:\",e),Xe(e))}finally{l.current&&r(!1)}};return Object(n.useEffect)(()=>{if(l.current){r(!0);(async()=>{try{j.whatsapp.debug(\"\\ud83d\\udd04 CARGANDO CONEXIONES...\");const{data:e}=await Qe.get(\"/whatsapp/?session=0\");l.current&&(a({type:\"LOAD_WHATSAPPS\",payload:e}),j.whatsapp.debug(\"\\u2705 CONEXIONES CARGADAS:\",e.length),r(!1))}catch(e){l.current&&(j.whatsapp.error(\"\\u274c ERROR AL CARGAR CONEXIONES:\",e),r(!1),Xe(e))}})()}},[]),Object(n.useEffect)(()=>{if(l.current){const e=localStorage.getItem(\"companyId\"),t=o.getSocket(e);return t.on(`company-${e}-whatsapp`,e=>{l.current&&(j.whatsapp.debug(\"\\ud83d\\udce1 EVENTO WHATSAPP RECIBIDO:\",e.action),\"update\"===e.action&&(j.whatsapp.debug(\"\\ud83d\\udd04 ACTUALIZANDO CONEXI\\xd3N:\",e.whatsapp.id),a({type:\"UPDATE_WHATSAPPS\",payload:e.whatsapp})),\"delete\"===e.action&&(j.whatsapp.debug(\"\\ud83d\\uddd1\\ufe0f ELIMINANDO CONEXI\\xd3N:\",e.whatsappId),a({type:\"DELETE_WHATSAPPS\",payload:e.whatsappId})),\"refresh\"===e.action&&(j.whatsapp.debug(\"\\ud83d\\udd04 EVENTO DE REFRESCO RECIBIDO\"),s()))}),t.on(`company-${e}-whatsappSession`,e=>{l.current&&\"update\"===e.action&&(j.whatsapp.debug(\"\\ud83d\\udd04 ACTUALIZANDO SESI\\xd3N:\",e.session.id),a({type:\"UPDATE_SESSION\",payload:e.session}))}),()=>{l.current&&t.disconnect()}}},[o]),{whatsApps:e,loading:t,refreshWhatsApps:s}};const $e=Object(n.createContext)(),ea=e=>{let{children:a}=e;const{loading:t,whatsApps:n}=Ze();return r.a.createElement($e.Provider,{value:{whatsApps:n,loading:t}},a)};var aa=t(32),ta=t.n(aa);var na=()=>{const e=Object(M.useHistory)(),[a,t]=Object(n.useState)(!1),[r,l]=Object(n.useState)(!0),[o,s]=Object(n.useState)({});Qe.interceptors.request.use(e=>{const a=localStorage.getItem(\"token\");return a&&(e.headers.Authorization=\"Bearer \"+a,t(!0)),e},e=>{Promise.reject(e)}),Qe.interceptors.response.use(e=>e,async e=>{var a,n;const r=e.config;if(403===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&!r._retry){r._retry=!0;const{data:e}=await Qe.post(\"/auth/refresh_token\");return e&&(localStorage.setItem(\"token\",e.token),Qe.defaults.headers.Authorization=\"Bearer \"+e.token),Qe(r)}return 401===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&(localStorage.removeItem(\"token\"),localStorage.removeItem(\"companyId\"),Qe.defaults.headers.Authorization=void 0,t(!1)),Promise.reject(e)});const i=Object(n.useContext)(v);Object(n.useEffect)(()=>{const e=localStorage.getItem(\"token\");(async()=>{if(e)try{const{data:e}=await Qe.post(\"/auth/refresh_token\");Qe.defaults.headers.Authorization=\"Bearer \"+e.token,t(!0),s(e.user)}catch(a){Xe(a)}l(!1)})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\");if(e){const a=i.getSocket(e);return a.on(`company-${e}-user`,e=>{\"update\"===e.action&&e.user.id===o.id&&s(e.user)}),()=>{a.disconnect()}}},[i,o]);return{isAuth:a,user:o,loading:r,handleLogin:async a=>{l(!0);try{const{data:i}=await Qe.post(\"/auth/login\",a),{user:{companyId:c,id:d,company:m}}=i;if(Object(Ye.has)(m,\"settings\")&&Object(Ye.isArray)(m.settings)){const e=m.settings.find(e=>\"campaignsEnabled\"===e.key);e&&\"true\"===e.value&&localStorage.setItem(\"cshow\",null)}ta.a.locale(\"es\");const u=i.user.company.dueDate,p=ta()(u).format(\"DD/MM/yyyy\");var n=ta()(u).diff(ta()(ta()()).format()),r=ta()(ta()().format()).isBefore(u),o=ta.a.duration(n).asDays();!0===r?(localStorage.setItem(\"token\",i.token),localStorage.setItem(\"companyId\",c),localStorage.setItem(\"userId\",d),localStorage.setItem(\"companyDueDate\",p),Qe.defaults.headers.Authorization=\"Bearer \"+i.token,s(i.user),t(!0),P.b.success(Fe.a.t(\"auth.toasts.success\")),Math.round(o)<5&&P.b.warn(`Sua assinatura vence em ${Math.round(o)} ${1===Math.round(o)?\"dia\":\"dias\"} `),e.push(\"/tickets\"),l(!1)):(Xe(`Opss! Sua assinatura venceu ${p}.\\nEntre em contato com o Suporte para mais informa\\xe7\\xf5es! `),l(!1))}catch(i){Xe(i),l(!1)}},handleLogout:async()=>{l(!0);try{await Qe.delete(\"/auth/logout\"),t(!1),s({}),localStorage.removeItem(\"token\"),localStorage.removeItem(\"companyId\"),localStorage.removeItem(\"userId\"),localStorage.removeItem(\"cshow\"),Qe.defaults.headers.Authorization=void 0,l(!1),e.push(\"/login\")}catch(a){Xe(a),l(!1)}},getCurrentUserInfo:async()=>{try{const{data:e}=await Qe.get(\"/auth/me\");return e}catch(e){Xe(e)}}}};const ra=Object(n.createContext)(),la=e=>{let{children:a}=e;const{loading:t,user:n,isAuth:l,handleLogin:o,handleLogout:s}=na();return r.a.createElement(ra.Provider,{value:{loading:t,user:n,isAuth:l,handleLogin:o,handleLogout:s}},a)};var oa=t(600),sa=t.n(oa);var ia={user:{static:[]},admin:{static:[\"dashboard:view\",\"drawer-admin-items:view\",\"tickets-manager:showall\",\"user-modal:editProfile\",\"user-modal:editQueues\",\"ticket-options:deleteTicket\",\"contacts-page:deleteContact\",\"connections-page:actionButtons\",\"connections-page:addConnection\",\"connections-page:editOrDeleteConnection\"]}};const ca=e=>{let{role:a,perform:t,data:n,yes:r,no:l}=e;return((e,a,t)=>{const n=ia[e];if(!n)return!1;const r=n.static;if(r&&r.includes(a))return!0;const l=n.dynamic;if(l){const e=l[a];return!!e&&e(t)}return!1})(a,t,n)?r():l()};ca.defaultProps={yes:()=>null,no:()=>null};var da=t(601),ma=t.n(da),ua=t(1086),pa=t(1088),ga=t(1089),Ea=t(1090);var ba=()=>({getPlanList:async e=>{const{data:a}=await Ke.request({url:\"/plans/list\",method:\"GET\",params:e});return a},list:async e=>{const{data:a}=await Qe.request({url:\"/plans/all\",method:\"GET\",params:e});return a},save:async e=>{const{data:a}=await Qe.request({url:\"/plans\",method:\"POST\",data:e});return a},update:async e=>{const{data:a}=await Qe.request({url:\"/plans/\"+e.id,method:\"PUT\",data:e});return a},finder:async e=>{const{data:a}=await Qe.request({url:\"/plans/\"+e,method:\"GET\"});return a},remove:async e=>{const{data:a}=await Qe.request({url:\"/plans/\"+e,method:\"DELETE\"});return a},getPlanCompany:async(e,a)=>{const{data:t}=await Qe.request({url:\"/companies/listPlan/\"+a,method:\"GET\",params:e});return t},register:async e=>{const{data:a}=await Qe.request({url:\"/plans/register\",method:\"GET\",params:e});return a}}),fa=t(320);const ha=Object(D.a)(e=>({ListSubheader:{height:26,marginTop:\"-15px\",marginBottom:\"-10px\"},logoutButton:{borderRadius:10,marginTop:10,backgroundColor:e.palette.sair.main,color:\"white\"}}));function va(e){const{icon:a,primary:t,to:n,className:l}=e,o=r.a.useMemo(()=>r.a.forwardRef((e,a)=>r.a.createElement(N.b,Object.assign({to:n,ref:a},e))),[n]);return r.a.createElement(\"li\",null,r.a.createElement(ee.a,{button:!0,dense:!0,component:o,className:l},a?r.a.createElement(ae.a,null,a):null,r.a.createElement(te.a,{primary:t})))}const ya=(e,a)=>{if(\"LOAD_CHATS\"===a.type){const t=a.payload,n=[];return Object(Ye.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_CHATS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_CHAT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[];if(\"CHANGE_CHAT\"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};var xa=e=>{const a=ha(),{drawerClose:t,collapsed:l}=e,{whatsApps:o}=Object(n.useContext)($e),{user:s,handleLogout:i}=Object(n.useContext)(ra),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(!1),[y,x]=Object(n.useState)(!1),[C,A]=Object(n.useState)(!1),[S,O]=Object(n.useState)(!1),w=Object(n.useRef)(!0),[k,T]=Object(n.useState)(!0),[I,j]=Object(n.useState)(1),[N]=Object(n.useState)(\"\"),[M,P]=Object(n.useReducer)(ya,[]),{getPlanCompany:R}=ba(),D=Object(n.useContext)(v);Object(n.useEffect)(()=>{P({type:\"RESET\"}),j(1)},[N]),Object(n.useEffect)(()=>()=>{w.current=!1},[]),Object(n.useEffect)(()=>{!async function(){if(w.current){const e=s.companyId;if(e){const a=await R(void 0,e);w.current&&(u(a.plan.useCampaigns),g(a.plan.useKanban),b(a.plan.useOpenAi),h(a.plan.useIntegrations),x(a.plan.useSchedules),A(a.plan.useInternalChat),O(a.plan.useExternalApi))}}}()},[]),Object(n.useEffect)(()=>{if(w.current){const e=setTimeout(()=>{w.current&&L()},500);return()=>clearTimeout(e)}},[N,I]),Object(n.useEffect)(()=>{if(w.current){const e=localStorage.getItem(\"companyId\"),a=D.getSocket(e),t=e=>{w.current&&(\"new-message\"===e.action&&P({type:\"CHANGE_CHAT\",payload:e}),\"update\"===e.action&&P({type:\"CHANGE_CHAT\",payload:e}))};return a.on(`company-${e}-chat`,t),()=>{a&&w.current&&a.off(`company-${e}-chat`,t)}}},[D]),Object(n.useEffect)(()=>{if(w.current){let e=0;if(M.length>0)for(let a of M)for(let t of a.users)t.userId===s.id&&(e+=t.unreads);T(!(e>0))}},[M,s.id]),Object(n.useEffect)(()=>{w.current&&localStorage.getItem(\"cshow\")&&u(!0)},[]),Object(n.useEffect)(()=>{if(w.current){const e=setTimeout(()=>{if(w.current&&o.length>0){o.filter(e=>\"qrcode\"===e.status||\"PAIRING\"===e.status||\"DISCONNECTED\"===e.status||\"TIMEOUT\"===e.status||\"OPENING\"===e.status).length>0?d(!0):d(!1)}},2e3);return()=>clearTimeout(e)}},[o]);const L=async()=>{try{const{data:e}=await Qe.get(\"/chats/\",{params:{searchParam:N,pageNumber:I}});w.current&&P({type:\"LOAD_CHATS\",payload:e.records})}catch(e){w.current&&Xe(e)}};return r.a.createElement(\"div\",{onClick:t},r.a.createElement(ca,{role:s.profile,perform:\"drawer-service-items:view\",style:{overflowY:\"scroll\"},no:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{hidden:l,style:{position:\"relative\",fontSize:\"17px\",textAlign:\"left\",paddingLeft:20},inset:!0,color:\"inherit\"},r.a.createElement(H.a,{variant:\"overline\",style:{fontWeight:\"normal\"}},\"  \",Fe.a.t(\"hardcodedElements.atendimento\"),\" \")),r.a.createElement(r.a.Fragment,null,r.a.createElement(va,{to:\"/tickets\",primary:Fe.a.t(\"mainDrawer.listItems.tickets\"),icon:r.a.createElement(ie.a,null)}),r.a.createElement(va,{to:\"/quick-messages\",primary:Fe.a.t(\"mainDrawer.listItems.quickMessages\"),icon:r.a.createElement(ye.a,null)}),p&&r.a.createElement(va,{to:\"/kanban\",primary:\"Kanban\",icon:r.a.createElement(sa.a,null)}),r.a.createElement(va,{to:\"/todolist\",primary:Fe.a.t(\"hardcodedElements.tarefas\"),icon:r.a.createElement(ma.a,null)}),r.a.createElement(va,{to:\"/contacts\",primary:Fe.a.t(\"mainDrawer.listItems.contacts\"),icon:r.a.createElement(be.a,null)}),y&&r.a.createElement(r.a.Fragment,null,r.a.createElement(va,{to:\"/schedules\",primary:Fe.a.t(\"mainDrawer.listItems.schedules\"),icon:r.a.createElement(ua.a,null)})),r.a.createElement(va,{to:\"/tags\",primary:Fe.a.t(\"mainDrawer.listItems.tags\"),icon:r.a.createElement(we.a,null)}),C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(va,{to:\"/chats\",primary:Fe.a.t(\"mainDrawer.listItems.chats\"),icon:r.a.createElement(re.a,{color:\"secondary\",variant:\"dot\",invisible:k},r.a.createElement(Re.a,null))})),r.a.createElement(va,{to:\"/helps\",primary:Fe.a.t(\"mainDrawer.listItems.helps\"),icon:r.a.createElement(Ce.a,null)})))}),r.a.createElement(ca,{role:s.profile,perform:\"drawer-admin-items:view\",yes:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{hidden:l,style:{position:\"relative\",fontSize:\"17px\",textAlign:\"left\",paddingLeft:20},inset:!0,color:\"inherit\"},r.a.createElement(H.a,{variant:\"overline\",style:{fontWeight:\"normal\"}},\"  \",Fe.a.t(\"hardcodedElements.gerencia\"),\" \")),r.a.createElement(va,{small:!0,to:\"/\",primary:\"Dashboard\",icon:r.a.createElement(oe.a,null)}))}),r.a.createElement(ca,{role:s.profile,perform:\"drawer-admin-items:view\",yes:()=>r.a.createElement(r.a.Fragment,null,m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{hidden:l,style:{position:\"relative\",fontSize:\"17px\",textAlign:\"left\",paddingLeft:20},inset:!0,color:\"inherit\"},r.a.createElement(H.a,{variant:\"overline\",style:{fontWeight:\"normal\"}},\"  \",Fe.a.t(\"hardcodedElements.campanhas\"),\" \")),r.a.createElement(va,{small:!0,to:\"/campaigns\",primary:Fe.a.t(\"hardcodedElements.listagem\"),icon:r.a.createElement(je.a,null)}),r.a.createElement(va,{small:!0,to:\"/contact-lists\",primary:Fe.a.t(\"Listas de Contatos\"),icon:r.a.createElement(Te.a,null)}),r.a.createElement(va,{small:!0,to:\"/campaigns-config\",primary:Fe.a.t(\"hardcodedElements.configuracoes\"),icon:r.a.createElement(je.a,null)})),r.a.createElement(ne.a,{hidden:l,style:{position:\"relative\",fontSize:\"17px\",textAlign:\"left\",paddingLeft:20},inset:!0,color:\"inherit\"},r.a.createElement(H.a,{variant:\"overline\",style:{fontWeight:\"normal\"}},\"  \",Fe.a.t(\"hardcodedElements.administracao\"),\" \")),s.super&&r.a.createElement(va,{to:\"/announcements\",primary:Fe.a.t(\"mainDrawer.listItems.annoucements\"),icon:r.a.createElement(Me.a,null)}),r.a.createElement(va,{to:\"/hub-notificame\",primary:\"Meta\",icon:r.a.createElement(fa.a,{color:\"#607d8b\",size:24})}),E&&r.a.createElement(va,{to:\"/prompts\",primary:Fe.a.t(\"mainDrawer.listItems.prompts\"),icon:r.a.createElement(pa.a,null)}),f&&r.a.createElement(va,{to:\"/queue-integration\",primary:Fe.a.t(\"mainDrawer.listItems.queueIntegration\"),icon:r.a.createElement(ga.a,null)}),r.a.createElement(va,{to:\"/connections\",primary:Fe.a.t(\"mainDrawer.listItems.connections\"),icon:r.a.createElement(re.a,{badgeContent:c?\"!\":0,color:\"error\"},r.a.createElement(de.a,null))}),r.a.createElement(va,{to:\"/files\",primary:Fe.a.t(\"mainDrawer.listItems.files\"),icon:r.a.createElement(Ea.a,null)}),r.a.createElement(va,{to:\"/queues\",primary:Fe.a.t(\"mainDrawer.listItems.queues\"),icon:r.a.createElement(he.a,null)}),r.a.createElement(va,{to:\"/users\",primary:Fe.a.t(\"mainDrawer.listItems.users\"),icon:r.a.createElement(ge.a,null)}),S&&r.a.createElement(r.a.Fragment,null,r.a.createElement(va,{to:\"/messages-api\",primary:Fe.a.t(\"mainDrawer.listItems.messagesAPI\"),icon:r.a.createElement(Se.a,null)})),r.a.createElement(va,{to:\"/financeiro\",primary:Fe.a.t(\"mainDrawer.listItems.financeiro\"),icon:r.a.createElement(Le.a,null)}),r.a.createElement(va,{to:\"/settings\",primary:Fe.a.t(\"mainDrawer.listItems.settings\"),icon:r.a.createElement(ue.a,null)}),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null),r.a.createElement(H.a,{style:{fontSize:\"12px\",padding:\"10px\",textAlign:\"right\",fontWeight:\"bold\"}},\"Watoolx\",\" \",r.a.createElement(\"span\",{style:{backgroundColor:\"#FFD700\",color:\"#000\",padding:\"2px 6px\",borderRadius:\"3px\",fontSize:\"10px\",fontWeight:\"bold\",display:\"inline-block\",minWidth:\"50px\",textAlign:\"center\",marginLeft:\"4px\"}},\"BASIC\"))))}),r.a.createElement(F.a,null),r.a.createElement(\"li\",null,r.a.createElement(ee.a,{button:!0,dense:!0,onClick:()=>{i()},className:a.logoutButton},r.a.createElement(ae.a,null,r.a.createElement(We.a,null)),r.a.createElement(te.a,{primary:Fe.a.t(\"hardcodedElements.sair\")}))))},Ca=t(450),Aa=t(377),Sa=t(972),Oa=t(397),wa=t.n(Oa),ka=t(395),Ta=t(396),Ia=t(1181),ja=t(717),Na=t(1112),Ma=t(1113),Pa=t(469),Ra=t(468),Da=t(974),La=t(1172);const qa=Object(n.createContext)(),Wa=e=>{let{children:a}=e;const[t,l]=Object(n.useState)({id:null,code:null}),o=Object(M.useHistory)();return Object(n.useEffect)(()=>{null!==t.id&&o.push(\"/tickets/\"+t.uuid)},[t]),r.a.createElement(qa.Provider,{value:{currentTicket:t,setCurrentTicket:l}},a)};var Fa=t(712),Ba=t(1091);const za=Object(D.a)(e=>({button:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}}));var Ua=e=>{let{loading:a,children:t,...n}=e;const l=za();return r.a.createElement(Fa.a,Object.assign({className:l.button,disabled:a},n),t,a&&r.a.createElement(Ba.a,{size:24,className:l.buttonProgress}))},Ha=t(614);const Va=[\"a\",\"abbr\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"base\",\"bdi\",\"bdo\",\"big\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"cite\",\"code\",\"col\",\"colgroup\",\"data\",\"datalist\",\"dd\",\"del\",\"details\",\"dfn\",\"dialog\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"keygen\",\"label\",\"legend\",\"li\",\"link\",\"main\",\"map\",\"mark\",\"marquee\",\"menu\",\"menuitem\",\"meta\",\"meter\",\"nav\",\"noscript\",\"object\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"param\",\"picture\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"script\",\"section\",\"select\",\"small\",\"source\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"title\",\"tr\",\"track\",\"u\",\"ul\",\"var\",\"video\",\"wbr\",\"circle\",\"clipPath\",\"defs\",\"ellipse\",\"foreignObject\",\"g\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"stop\",\"svg\",\"text\",\"tspan\"],Ga=[\"a\",\"b\",\"strong\",\"em\",\"u\",\"code\",\"del\"],_a=e=>{let{children:a,...t}=e;return r.a.createElement(\"a\",Object.assign({},t,{target:\"_blank\",rel:\"noopener noreferrer\"}),a)};var Ka=e=>{let{children:a,message:t}=e,n=null===t||void 0===t?void 0:t.mediaType;const l=/\\*(.*?)\\*/g,o=/~(.*?)~/g;a&&l.test(a)&&(a=a.replace(l,\"**$1**\")),a&&o.test(a)&&(a=a.replace(o,\"~~$1~~\"));const s=r.a.useMemo(()=>{const e={disableParsingRawHTML:!0,forceInline:!0,overrides:{a:{component:_a}}};return Va.forEach(a=>{Ga.includes(a)||(e.overrides[a]=e=>e.children||null)}),e},[]);if(!a)return null;const i=a.match(/(?<=FN:)(.*)(?=\\n)|(?<=TEL;.*:)(.*)(?=\\n)/g),c=i?i[0]:\"\",d=i?i[1]:\"\",m={backgroundColor:\"rgb(74 222 128)\",border:\"1.5px solid green\",borderRadius:\"4px\",width:\"300px\",display:\"flex\",alignItems:\"center\",padding:\"5px 0\"},u={marginLeft:\"10px\"},p={marginLeft:\"10px\"},g={margin:\"2px\"};return\"contactMessage\"===n?r.a.createElement(\"div\",{style:m},r.a.createElement(Ia.a,{style:u,src:t.contact.profilePicUrl,alt:\"contact_image\"}),r.a.createElement(\"div\",{style:p},r.a.createElement(\"p\",{style:g},r.a.createElement(\"strong\",null,\"Nome:\"),\" \",c),r.a.createElement(\"p\",{style:g},r.a.createElement(\"strong\",null,\"N\\xfamero:\"),\" \",d))):r.a.createElement(Ha.a,{options:s},a)},Qa=t(620),Ya=t.n(Qa),Xa=t(325),Ja=t.n(Xa),Za=t(982);const $a=Object(Za.a)(e=>({tag:{padding:\"1px 5px\",borderRadius:\"3px\",fontSize:\"0.8em\",fontWeight:\"bold\",color:\"#FFF\",marginRight:\"5px\",whiteSpace:\"nowrap\"}}));var et=e=>{let{tag:a}=e;const t=$a();return r.a.createElement(\"div\",{className:t.tag,style:{backgroundColor:a.color,marginTop:\"2px\"}},a.name.toUpperCase())},at=t(1092),tt=t(1095),nt=t(1102),rt=t(1103),lt=t(1104),ot=t(1105),st=t(1106),it=t(1107),ct=t(1108),dt=t(703);const mt=Object(D.a)(e=>({messageMedia:{objectFit:\"cover\",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8}}));var ut=e=>{let{imageUrl:a}=e;const t=mt(),[l,o]=Object(n.useState)(!0),[s,i]=Object(n.useState)(\"\");return Object(n.useEffect)(()=>{if(!a)return;(async()=>{const{data:e,headers:t}=await Qe.get(a,{responseType:\"blob\"}),n=window.URL.createObjectURL(new Blob([e],{type:t[\"content-type\"]}));i(n),o(!1)})()},[a]),r.a.createElement(dt.a,{className:t.messageMedia,smallSrcSet:l?a:s,medium:l?a:s,large:l?a:s,alt:\"image\"})},pt=t(323),gt=t.n(pt),Et=t(1094),bt=t(1093);var ft=e=>{let{title:a,children:t,open:n,onClose:l,onConfirm:o}=e;return r.a.createElement(at.a,{open:n,onClose:()=>l(!1),\"aria-labelledby\":\"confirm-dialog\"},r.a.createElement(bt.a,{id:\"confirm-dialog\"},a),r.a.createElement(Et.a,{dividers:!0},r.a.createElement(H.a,null,t)),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{variant:\"contained\",onClick:()=>l(!1),color:\"default\"},Fe.a.t(\"confirmationModal.buttons.cancel\")),r.a.createElement(Fa.a,{variant:\"contained\",onClick:()=>{l(!1),o()},color:\"secondary\"},Fe.a.t(\"confirmationModal.buttons.confirm\"))))},ht=t(1101);const vt=Object(n.createContext)(),yt=e=>{let{children:a}=e;const[t,l]=Object(n.useState)(null);return r.a.createElement(vt.Provider,{value:{replyingMessage:t,setReplyingMessage:l}},a)};var xt=t(473),Ct=t(719),At=t(256),St=t.n(At),Ot=t(91),wt=t.n(Ot),kt=t(379),Tt=t.n(kt),It=t(380),jt=t.n(It);const Nt=Object(D.a)(e=>({messagesList:{backgroundSize:\"370px\",backgroundImage:\"light\"===e.mode?`url(${Tt.a})`:`url(${jt.a})`,display:\"flex\",justifyContent:\"center\",flexGrow:1,padding:\"20px 20px 20px 20px\",overflowY:\"scroll\",\"@media (max-width: 600px)\":{paddingBottom:\"90px\"},...e.scrollbarStyles,minHeight:\"150px\",minWidth:\"500px\"},textContentItem:{overflowWrap:\"break-word\",padding:\"3px 80px 6px 6px\"},messageRight:{fontSize:\"13px\",marginLeft:20,marginTop:2,minWidth:100,maxWidth:510,height:\"auto\",display:\"block\",position:\"relative\",whiteSpace:\"pre-wrap\",alignSelf:\"flex-end\",borderRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0},inputmsg:{backgroundColor:\"light\"===e.mode?\"#FFF\":\"#1c1c1c\",display:\"flex\",width:\"100%\",margin:\"10px 0px 10px 20px\",borderRadius:\"10px\"},timestamp:{fontSize:11,position:\"absolute\",bottom:0,right:5,color:\"#999\"},titleBackground:{color:\"#ffff\",backgroundColor:\"#1e3a8a\",marginLeft:\"3px\"},emojiBox:{position:\"absolute\",bottom:63,width:40,borderTop:\"1px solid #e8e8e8\",zIndex:1}}));var Mt=e=>{let{open:a,onClose:t,onSave:l,message:o}=e;const s=Nt(),[i,c]=Object(n.useState)(null),d=Object(n.useRef)(null),m=Object(n.useRef)(null);Object(n.useEffect)(()=>{a&&c(null===o||void 0===o?void 0:o.body)},[a,o]);return Object(n.useEffect)(()=>{if(a&&a&&m.current&&d.current){const e=m.current.getBoundingClientRect(),a=d.current.getBoundingClientRect(),t={top:a.height>e.height?0:e.height-a.height,left:e.width-a.width};d.current.style.top=t.top+\"px\",d.current.style.left=t.left+\"px\"}},[a]),r.a.createElement(at.a,{open:a,onClose:()=>t(!1),\"aria-labelledby\":\"edit-message-dialog\",PaperProps:{style:{zIndex:1}},ref:m},r.a.createElement(bt.a,{id:\"edit-message-dialog\",className:s.titleBackground},r.a.createElement(W.a,{edge:\"start\",color:\"inherit\",onClick:()=>t(!1),\"aria-label\":\"close\"},r.a.createElement(St.a,null)),\"Editar Mensagem\"),r.a.createElement(Et.a,{style:{padding:\"0px\"}},r.a.createElement(ja.a,null,r.a.createElement(ja.a,{className:s.messagesList},r.a.createElement(ja.a,{component:\"div\",className:\"\"+s.messageRight,style:{fontStyle:\"italic\",backgroundColor:\"#d9fdd3\"}},r.a.createElement(ja.a,{className:s.textContentItem},r.a.createElement(ja.a,{component:\"div\",style:{color:\"#212B36\"}},r.a.createElement(Ka,null,null===o||void 0===o?void 0:o.body))))),r.a.createElement(xt.a,{component:\"form\",style:{p:\"2px 4px\",display:\"flex\",alignItems:\"center\",borderRadius:\"0px\",backgroundColor:\"#f0f2f5\"}},r.a.createElement(ja.a,{className:\"\"+s.inputmsg},r.a.createElement(Ct.a,{style:{padding:\"15px 0px 15px 15px\",flex:1},multiline:!0,maxRows:6,placeholder:\"Search Google Maps\",value:i,onChange:e=>c(e.target.value),inputProps:{\"aria-label\":\"search google maps\"}})),r.a.createElement(W.a,{color:\"primary\",\"aria-label\":\"directions\",onClick:()=>(async e=>{if(e)try{const a={read:1,fromMe:!0,mediaUrl:\"\",body:e,quotedMsg:null};await Qe.post(\"/messages/edit/\"+o.id,a),t(!1)}catch(a){}})(i)},r.a.createElement(wt.a,{style:{width:\"35px\",height:\"35px\",color:\"#00A884\"}}))))))};const Pt=Object(n.createContext)(),Rt=e=>{let{children:a}=e;const[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)([]),[i,c]=Object(n.useState)(!1);return r.a.createElement(Pt.Provider,{value:{showSelectMessageCheckbox:t,setShowSelectMessageCheckbox:l,selectedMessages:o,setSelectedMessages:s,forwardMessageModalOpen:i,setForwardMessageModalOpen:c}},a)};var Dt=t(970),Lt=t(1097),qt=t(1179),Wt=t(21),Ft=t(8),Bt=t(46),zt=t.n(Bt);const Ut=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}})),Ht=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),number:Wt.d().min(8,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\")});var Vt=e=>{let{open:a,onClose:t,contactId:l,initialValues:o,onSave:s}=e;const i=Ut(),c=Object(n.useRef)(!0),d={name:\"\",number:\"\",email:\"\"},[m,u]=Object(n.useState)(d);Object(n.useEffect)(()=>()=>{c.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(o&&u(e=>({...e,...o})),l)try{const{data:e}=await Qe.get(\"/contacts/\"+l);c.current&&u(e)}catch(e){Xe(e)}})()},[l,a,o]);const p=()=>{t(),u(d)};return r.a.createElement(\"div\",{className:i.root},r.a.createElement(at.a,{open:a,onClose:p,maxWidth:\"lg\",scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"contactModal.title.edit\"):\"\"+Fe.a.t(\"contactModal.title.add\")),r.a.createElement(Ft.e,{initialValues:m,enableReinitialize:!0,validationSchema:Ht,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(l)await Qe.put(\"/contacts/\"+l,e),p();else{const{data:a}=await Qe.post(\"/contacts\",e);s&&s(a),p()}P.b.success(Fe.a.t(\"contactModal.success\"))}catch(a){Xe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(H.a,{variant:\"subtitle1\",gutterBottom:!0},Fe.a.t(\"contactModal.form.mainInfo\")),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.name\"),name:\"name\",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:\"outlined\",margin:\"dense\",className:i.textField}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.number\"),name:\"number\",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:\"5541998608485\",variant:\"outlined\",margin:\"dense\"}),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.email\"),name:\"email\",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:\"Email address\",fullWidth:!0,margin:\"dense\",variant:\"outlined\"})),r.a.createElement(H.a,{style:{marginBottom:8,marginTop:12},variant:\"subtitle1\"},Fe.a.t(\"contactModal.form.whatsapp\"),\" \",(null===m||void 0===m?void 0:m.whatsapp)?null===m||void 0===m?void 0:m.whatsapp.name:\"\"),r.a.createElement(H.a,{style:{marginBottom:8,marginTop:12},variant:\"subtitle1\"},Fe.a.t(\"contactModal.form.extraInfo\")),r.a.createElement(Ft.c,{name:\"extraInfo\"},e=>{let{push:t,remove:n}=e;return r.a.createElement(r.a.Fragment,null,a.extraInfo&&a.extraInfo.length>0&&a.extraInfo.map((e,a)=>r.a.createElement(\"div\",{className:i.extraAttr,key:a+\"-info\"},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.extraName\"),name:`extraInfo[${a}].name`,variant:\"outlined\",margin:\"dense\",className:i.textField}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.extraValue\"),name:`extraInfo[${a}].value`,variant:\"outlined\",margin:\"dense\",className:i.textField}),r.a.createElement(W.a,{size:\"small\",onClick:()=>n(a)},r.a.createElement(zt.a,null)))),r.a.createElement(\"div\",{className:i.extraAttr},r.a.createElement(Fa.a,{style:{flex:1,marginTop:8},variant:\"outlined\",color:\"primary\",onClick:()=>t({name:\"\",value:\"\"})},\"+ \"+Fe.a.t(\"contactModal.buttons.addExtraInfo\"))))})),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:p,color:\"secondary\",disabled:o,variant:\"outlined\"},Fe.a.t(\"contactModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:o,variant:\"contained\",className:i.btnWrapper},l?\"\"+Fe.a.t(\"contactModal.buttons.okEdit\"):\"\"+Fe.a.t(\"contactModal.buttons.okAdd\"),o&&r.a.createElement(Ba.a,{size:24,className:i.buttonProgress}))))})))},Gt=t(1098),_t=t(1099);var Kt=e=>{let{messages:a,onClose:t,modalOpen:l}=e;const[o,s]=Object(n.useState)([]),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(\"\"),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)({}),[b,f]=Object(n.useState)(!1),[h,v]=Object(n.useState)(!1),[y,x]=Object(n.useState)(\"\"),[C,A]=Object(n.useState)(!0),S=Object(n.useCallback)(()=>{t(),m(\"\"),p(null),v(!1)},[t]);Object(n.useEffect)(()=>{const e=e=>{\"Escape\"===e.key&&l&&S()};return document.addEventListener(\"keydown\",e),()=>{document.removeEventListener(\"keydown\",e)}},[l,S]),Object(n.useEffect)(()=>{if(!l||d.length<3)return void c(!1);c(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"contacts\",{params:{searchParam:d}});s(e.contacts),c(!1)}catch(e){c(!1),Xe(e)}})()},500);return()=>clearTimeout(e)},[d,l]);const O=e=>new Promise(a=>setTimeout(a,e)),w=Object(Lt.a)({trim:!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,{open:b,initialValues:g,onClose:()=>{f(!1)}}),r.a.createElement(at.a,{open:l,onClose:S},r.a.createElement(bt.a,{id:\"form-dialog-title\"},Fe.a.t(\"messageOptionsMenu.forward\"),\" mensaje\"),r.a.createElement(Et.a,{dividers:!0},r.a.createElement(qt.a,{options:o,loading:i,style:{width:300},clearOnBlur:!0,autoHighlight:!0,freeSolo:!0,clearOnEscape:!0,getOptionLabel:e=>e.number?`${e.name} - ${e.number}`:\"\"+e.name,renderOption:e=>e.number?`${e.name} - ${e.number}`:\"Nenhum contato encontrado com o nome \"+e.name,filterOptions:(e,a)=>{const t=w(e,a);return\"\"!==a.inputValue&&!i&&d.length>=3&&t.push({name:\"\"+a.inputValue}),t},onChange:(e,a)=>((e,a)=>{(null===a||void 0===a?void 0:a.number)?p(a):(null===a||void 0===a?void 0:a.name)&&(E({name:a.name}),f(!0))})(0,a),renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{label:Fe.a.t(\"newTicketModal.fieldLabel\"),variant:\"outlined\",autoFocus:!0,onChange:e=>m(e.target.value),onKeyPress:e=>{!i&&u&&e.key},InputProps:{...e.InputProps,endAdornment:r.a.createElement(r.a.Fragment,null,i?r.a.createElement(Ba.a,{color:\"inherit\",size:20}):null,e.InputProps.endAdornment)}}))})),r.a.createElement(tt.a,null,h&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ba.a,{color:\"inherit\",size:20}),r.a.createElement(H.a,{variant:\"body1\",color:\"textSecondary\"},\"Enviando \",y,\"...\")),r.a.createElement(Gt.a,{style:{marginRight:7,color:\"gray\"},label:Fe.a.t(\"messagesInput.signMessage\"),labelPlacement:\"start\",control:r.a.createElement(_t.a,{size:\"small\",checked:C,onChange:e=>{A(e.target.checked)},name:\"showAllTickets\",color:\"primary\"})}),r.a.createElement(Fa.a,{variant:\"outlined\",onClick:S,disabled:h,color:\"secondary\"},Fe.a.t(\"transfersList.buttons.cancel\")),r.a.createElement(Ua,{variant:\"contained\",type:\"button\",disabled:!u||h,onClick:()=>(async e=>{const t=[];for(const r of a){v(!0);try{x(r.id);const a=await Qe.post(\"/message/forward\",{messageId:r.id,contactId:e.id,signMessage:C});t.push(a),O(900)}catch(n){Xe(n)}}v(!1),S()})(u),color:\"primary\",loading:i},Fe.a.t(\"messageOptionsMenu.forward\")))))};const Qt=Object(D.a)(e=>({iconButton:{padding:\"4px\"},gridContainer:{padding:\"10px\",justifyContent:\"center\"},addCircleButton:{padding:\"8px\",fontSize:\"2rem\",backgroundColor:\"rgb(242 242 247);\"},popoverContent:{maxHeight:\"300px\",overflowY:\"auto\",\"&::-webkit-scrollbar\":{width:\"0.4em\",height:\"0.4em\"},\"&::-webkit-scrollbar-thumb\":{backgroundColor:\"rgba(0,0,0,.1)\",borderRadius:\"50px\"},\"&::-webkit-scrollbar-track\":{boxShadow:\"inset 0 0 6px rgba(0,0,0,0.00)\",webkitBoxShadow:\"inset 0 0 6px rgba(0,0,0,0.00)\"}},hideScrollbar:{maxHeight:\"300px\",overflow:\"hidden\"}}));var Yt=e=>{let{message:a,menuOpen:t,handleClose:l,anchorEl:o}=e;const s=Qt(),{setReplyingMessage:i}=Object(n.useContext)(vt),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(null),[E,b]=Object(n.useState)(null),{showSelectMessageCheckbox:f,setShowSelectMessageCheckbox:h,selectedMessages:v,forwardMessageModalOpen:y,setForwardMessageModalOpen:x}=Object(n.useContext)(Pt),C=()=>{g(null),l()},A=()=>{b(null),l()};Object(n.useEffect)(()=>()=>{g(null),b(null)},[]);const S=async e=>{try{await Qe.post(`/messages/${a.id}/reactions`,{type:e}),P.b.success(Fe.a.t(\"messageOptionsMenu.reactionSuccess\"))}catch(t){Xe(t)}C(),A(),l()},O=[\"\\ud83d\\ude00\",\"\\ud83d\\ude02\",\"\\u2764\\ufe0f\",\"\\ud83d\\udc4d\",\"\\ud83c\\udf89\",\"\\ud83d\\ude22\",\"\\ud83d\\ude2e\",\"\\ud83d\\ude21\",\"\\ud83d\\udc4f\",\"\\ud83d\\udd25\",\"\\ud83e\\udd73\",\"\\ud83d\\ude0e\",\"\\ud83e\\udd29\",\"\\ud83d\\ude1c\",\"\\ud83e\\udd14\",\"\\ud83d\\ude44\",\"\\ud83d\\ude34\",\"\\ud83d\\ude07\",\"\\ud83e\\udd2f\",\"\\ud83d\\udca9\",\"\\ud83e\\udd17\",\"\\ud83e\\udd2b\",\"\\ud83e\\udd2d\",\"\\ud83e\\udd13\",\"\\ud83e\\udd2a\",\"\\ud83e\\udd25\",\"\\ud83e\\udd21\",\"\\ud83e\\udd20\",\"\\ud83e\\udd22\",\"\\ud83e\\udd27\",\"\\ud83d\\ude37\",\"\\ud83e\\udd15\",\"\\ud83e\\udd12\",\"\\ud83d\\udc7b\",\"\\ud83d\\udc80\",\"\\u2620\\ufe0f\",\"\\ud83d\\udc7d\",\"\\ud83d\\udc7e\",\"\\ud83e\\udd16\",\"\\ud83c\\udf83\",\"\\ud83d\\ude3a\",\"\\ud83d\\ude38\",\"\\ud83d\\ude39\",\"\\ud83d\\ude3b\",\"\\ud83d\\ude3c\",\"\\ud83d\\ude3d\",\"\\ud83d\\ude40\",\"\\ud83d\\ude3f\",\"\\ud83d\\ude3e\",\"\\ud83d\\ude48\",\"\\ud83d\\ude49\",\"\\ud83d\\ude4a\",\"\\ud83d\\udc35\",\"\\ud83d\\udc12\",\"\\ud83e\\udd8d\",\"\\ud83d\\udc36\",\"\\ud83d\\udc15\",\"\\ud83d\\udc29\",\"\\ud83d\\udc3a\",\"\\ud83e\\udd8a\",\"\\ud83e\\udd9d\",\"\\ud83d\\udc31\",\"\\ud83d\\udc08\",\"\\ud83e\\udd81\",\"\\ud83d\\udc2f\",\"\\ud83d\\udc05\",\"\\ud83d\\udc06\",\"\\ud83d\\udc34\",\"\\ud83d\\udc0e\",\"\\ud83e\\udd84\"];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kt,{modalOpen:y,messages:v,onClose:e=>{x(!1),h(!1)}}),r.a.createElement(ft,{title:Fe.a.t(\"messageOptionsMenu.confirmationModal.title\"),open:c,onClose:d,onConfirm:async()=>{try{await Qe.delete(\"/messages/\"+a.id)}catch(e){Xe(e)}}},Fe.a.t(\"messageOptionsMenu.confirmationModal.message\")),r.a.createElement(Mt,{title:Fe.a.t(\"messageOptionsMenu.editMessageModal.title\"),open:m,onClose:u,onSave:async()=>{try{await Qe.put(\"/messages/\"+a.id)}catch(e){Xe(e)}},message:a},Fe.a.t(\"messageOptionsMenu.confirmationModal.message\")),r.a.createElement(V.a,{anchorEl:o,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:t,onClose:l},r.a.createElement(G.a,{onClick:()=>{h(!f),l()}},Fe.a.t(\"messageOptionsMenu.forward\")),a.fromMe&&r.a.createElement(G.a,{onClick:e=>{u(!0),l()}},Fe.a.t(\"messageOptionsMenu.edit\")),a.fromMe&&r.a.createElement(G.a,{onClick:e=>{d(!0),l()}},Fe.a.t(\"messageOptionsMenu.delete\")),r.a.createElement(G.a,{onClick:()=>{i(a),l()}},Fe.a.t(\"messageOptionsMenu.reply\")),r.a.createElement(G.a,{onClick:e=>{e.currentTarget&&(g(e.currentTarget),l())}},Fe.a.t(\"messageOptionsMenu.react\"))),r.a.createElement(Sa.a,{open:Boolean(p)&&p,anchorEl:p,onClose:C,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},PaperProps:{style:{width:\"auto\",maxWidth:\"380px\",borderRadius:\"50px\"}}},r.a.createElement(\"div\",{className:s.hideScrollbar},r.a.createElement(ht.a,{container:!0,spacing:1,className:s.gridContainer},O.slice(0,6).map(e=>r.a.createElement(ht.a,{item:!0,key:e},r.a.createElement(W.a,{className:s.iconButton,onClick:()=>S(e)},e))),r.a.createElement(ht.a,{item:!0},r.a.createElement(W.a,{className:s.addCircleButton,onClick:e=>{e.currentTarget&&(b(e.currentTarget),C())}},r.a.createElement(gt.a,null)))))),r.a.createElement(Sa.a,{open:Boolean(E)&&E,anchorEl:E,onClose:A,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"},PaperProps:{style:{width:\"auto\",maxWidth:\"400px\",borderRadius:\"6px\"}}},r.a.createElement(\"div\",{className:s.popoverContent},r.a.createElement(ht.a,{container:!0,spacing:1,className:s.gridContainer},O.map(e=>r.a.createElement(ht.a,{item:!0,key:e},r.a.createElement(W.a,{className:s.iconButton,onClick:()=>S(e)},e)))))))};var Xt=e=>{let{image:a,link:t,description:l}=e;Object(n.useEffect)(()=>{},[a,t,l]);const o=async()=>{try{window.open(t)}catch(e){Xe(e)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(\"div\",{style:{minWidth:\"250px\"}},r.a.createElement(\"div\",null,r.a.createElement(\"div\",{style:{float:\"left\"}},r.a.createElement(\"img\",{src:a,alt:\"loc\",onClick:o,style:{width:\"100px\"}})),l&&r.a.createElement(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\"}},r.a.createElement(H.a,{style:{marginTop:\"12px\",marginLeft:\"15px\",marginRight:\"15px\",float:\"left\"},variant:\"subtitle1\",color:\"primary\",gutterBottom:!0},r.a.createElement(\"div\",{dangerouslySetInnerHTML:{__html:l.replace(\"\\\\n\",\"<br />\")}}))),r.a.createElement(\"div\",{style:{display:\"block\",content:\"\",clear:\"both\"}}),r.a.createElement(\"div\",null,r.a.createElement(F.a,null),r.a.createElement(Fa.a,{fullWidth:!0,color:\"primary\",onClick:o,disabled:!t},\"Visualizar\")))))},Jt=t(718),Zt=t(981);const $t=Object(D.a)(e=>({online:{fontSize:11,color:\"#25d366\"},offline:{fontSize:11,color:\"#e1306c\"}})),en=Object(Lt.a)({trim:!0});var an=e=>{var a;let{modalOpen:t,onClose:l,initialContact:o}=e;const s=$t(),[i,c]=Object(n.useState)([]),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(\"\"),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(\"\"),[h,v]=Object(n.useState)(\"\"),[y,x]=Object(n.useState)({}),[C,A]=Object(n.useState)([]),[S,O]=Object(n.useState)(!1),{user:w}=Object(n.useContext)(ra),{companyId:k,whatsappId:T}=w;Object(n.useEffect)(()=>{void 0!==(null===o||void 0===o?void 0:o.id)&&(c([o]),E(o))},[o]),Object(n.useEffect)(()=>{let e=!0;m(!0);const a=setTimeout(()=>{e&&(null!==T&&void 0!==T&&v(T),1===w.queues.length&&f(w.queues[0].id),(async()=>{try{const{data:a}=await Qe.get(\"/whatsapp\",{params:{companyId:k,session:0}});e&&A(a)}catch(a){console.error(\"Error fetching whatsapps:\",a)}})(),m(!1))},500);return()=>{e=!1,clearTimeout(a)}},[k,w.queues,T]),Object(n.useEffect)(()=>{if(!t||u.length<3)return void m(!1);let e=!0;m(!0);const a=setTimeout(()=>{(async()=>{try{const{data:a}=await Qe.get(\"contacts\",{params:{searchParam:u}});e&&(c(a.contacts),m(!1))}catch(a){e&&(m(!1),Xe(a))}})()},500);return()=>{e=!1,clearTimeout(a)}},[u,t]);const I=()=>{l(),p(\"\"),E(null)},j=async e=>{if(e)if(\"\"!==b||\"admin\"===w.profile){m(!0);try{const a=\"\"!==b?b:null,t=\"\"!==h?h:null,{data:n}=await Qe.post(\"/tickets\",{contactId:e,queueId:a,whatsappId:t,userId:w.id,status:\"open\"});l(n)}catch(a){const e=JSON.parse(a.response.data.error);e.userId!==(null===w||void 0===w?void 0:w.id)?m(!1):(m(!1),l(e))}m(!1)}else P.b.error(\"Selecione uma fila\")},N=(e,a)=>{const t=en(e,a);return\"\"!==a.inputValue&&!d&&u.length>=3&&t.push({name:\"\"+a.inputValue}),t},M=e=>e.number?r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"}},e.name,\" - \",e.number)):`${Fe.a.t(\"newTicketModal.add\")} ${e.name}`,R=e=>e.number?`${e.name} - ${e.number}`:\"\"+e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,{open:S,initialValues:y,onClose:()=>{O(!1)},onSave:e=>{j(e.id)}}),r.a.createElement(at.a,{open:t,onClose:I},r.a.createElement(bt.a,{id:\"form-dialog-title\"},Fe.a.t(\"newTicketModal.title\")),r.a.createElement(Et.a,{dividers:!0},r.a.createElement(ht.a,{style:{width:300},container:!0,spacing:2},void 0===o||void 0===o.id?r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(qt.a,{fullWidth:!0,options:i,loading:d,clearOnBlur:!0,autoHighlight:!0,freeSolo:!0,clearOnEscape:!0,getOptionLabel:R,renderOption:M,filterOptions:N,onChange:(e,a)=>((e,a)=>{(null===a||void 0===a?void 0:a.number)?E(a):(null===a||void 0===a?void 0:a.name)&&(x({name:a.name}),O(!0))})(0,a),renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{label:Fe.a.t(\"newTicketModal.fieldLabel\"),variant:\"outlined\",autoFocus:!0,onChange:e=>p(e.target.value),onKeyPress:e=>{!d&&g&&\"Enter\"===e.key&&j(g.id)},InputProps:{...e.InputProps,endAdornment:r.a.createElement(r.a.Fragment,null,d?r.a.createElement(Ba.a,{color:\"inherit\",size:20}):null,e.InputProps.endAdornment)}}))})):null,r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Zt.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:\"outlined\",value:b,onChange:e=>{f(e.target.value)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(\"\"===b)return\"Selecione uma fila\";return w.queues.find(e=>e.id===b).name}},(null===(a=w.queues)||void 0===a?void 0:a.length)>0&&w.queues.map((e,a)=>r.a.createElement(G.a,{dense:!0,key:a,value:e.id},r.a.createElement(te.a,{primary:e.name}))))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Zt.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:\"outlined\",value:h,onChange:e=>{v(e.target.value)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(\"\"===h)return\"Selecione uma Conex\\xe3o\";return C.find(e=>e.id===h).name}},(null===C||void 0===C?void 0:C.length)>0&&C.map((e,a)=>r.a.createElement(G.a,{dense:!0,key:a,value:e.id},r.a.createElement(te.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"}},e.name,\" \\xa0 \",r.a.createElement(\"p\",{className:\"CONNECTED\"===e.status?s.online:s.offline},\"(\",e.status,\")\")))}))))))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:I,color:\"secondary\",disabled:d,variant:\"outlined\"},Fe.a.t(\"newTicketModal.buttons.cancel\")),r.a.createElement(Ua,{variant:\"contained\",type:\"button\",disabled:!g,onClick:()=>j(g.id),color:\"primary\",loading:d},Fe.a.t(\"newTicketModal.buttons.ok\")))))};var tn=e=>{let{contact:a,numbers:t}=e;const l=Object(M.useHistory)(),{user:o}=Object(n.useContext)(ra),s=Object(L.a)(),[i,c]=Object(n.useState)({name:\"\",number:0,profilePicUrl:\"\"}),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!0),[g,E]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=setTimeout(async()=>{try{let e={name:a,number:t.replace(/\\D/g,\"\"),email:\"\"};const{data:n}=await Qe.post(\"/contacts\",e);n.alreadyExists?c(n.existingContact):c(e),n.invalido&&p(!1)}catch(e){Xe(e)}},1500);return()=>clearTimeout(e)},[a,t]);const b=async e=>{try{let a=i.id;if(!a){const e={name:i.name,number:i.number,email:\"\"},{data:t}=await Qe.post(\"/contacts\",e);a=t.existingContact.id}const{data:t}=await Qe.post(\"/tickets\",{contactId:a,queueId:e,userId:o.id,status:\"open\"});l.push(\"/tickets/\"+t.uuid)}catch(a){Xe(a)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{open:d,onClose:()=>m(!1)},r.a.createElement(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",backgroundColor:s.palette.background.paper,padding:\"20px\",outline:\"none\"}},r.a.createElement(\"h2\",null,\"Selecione a Fila\"),o.queues.map(e=>r.a.createElement(\"div\",{key:e.id},r.a.createElement(Fa.a,{onClick:()=>(async e=>{m(!1),\"\"!==e&&await b(e)})(e.id)},e.name))))),r.a.createElement(\"div\",{style:{minWidth:\"250px\"}},r.a.createElement(an,{modalOpen:g,initialContact:i,onClose:e=>{(e=>{E(!1),void 0!==e&&void 0!==e.uuid&&l.push(\"/tickets/\"+e.uuid)})(e)}}),r.a.createElement(ht.a,{container:!0,spacing:1},r.a.createElement(ht.a,{item:!0,xs:1},r.a.createElement(Ia.a,{src:i.profilePicUrl})),r.a.createElement(ht.a,{item:!0,xs:9},r.a.createElement(H.a,{style:{marginTop:\"12px\",marginLeft:\"10px\",color:s.palette.text.vcard},variant:\"subtitle1\",gutterBottom:!0},i.name)),r.a.createElement(ht.a,{item:!0,xs:9},r.a.createElement(H.a,{style:{marginLeft:\"10px\",color:s.palette.text.vcard},variant:\"body2\",gutterBottom:!0},r.a.createElement(\"strong\",null,\"Nome:\"),\" \",i.name),r.a.createElement(H.a,{style:{marginLeft:\"10px\",color:s.palette.text.vcard},variant:\"body2\",gutterBottom:!0},r.a.createElement(H.a,{variant:\"body2\",component:\"span\"},r.a.createElement(\"strong\",null,\"Telefone:\"),\" \",i.number))),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(F.a,null),r.a.createElement(Fa.a,{fullWidth:!0,color:\"theme.palette.text.vcard\",onClick:()=>{E(!0)},disabled:!i.number||!u},u?\"Conversar (Novo Ticket)\":\"CONTATO FORA DO WHATSAPP\")))))},nn=t(1175);var rn=e=>{let{message:a}=e;const[t,l]=r.a.useState(!1),{showSelectMessageCheckbox:o,setSelectedMessages:s,selectedMessages:i}=Object(n.useContext)(Pt);return r.a.useEffect(()=>{const e=i.some(e=>e.id===a.id);l(e)},[i,a]),o?r.a.createElement(nn.a,{color:\"primary\",checked:t,onChange:e=>((e,a)=>{let t=[...i];if(e.target.checked)l(!0),t.push(a);else{const e=t.findIndex(e=>e.id===a.id);-1!==e&&t.splice(e,1),l(!1)}s(t)})(e,a)}):null};const ln=Object(D.a)(e=>({messagesListWrapper:{overflow:\"hidden\",position:\"relative\",display:\"flex\",flexDirection:\"column\",flexGrow:1,width:\"100%\",minWidth:300,minHeight:200},messagesList:{backgroundImage:\"light\"===e.mode?`url(${Tt.a})`:`url(${jt.a})`,display:\"flex\",flexDirection:\"column\",flexGrow:1,padding:\"20px 20px 20px 20px\",overflowY:\"scroll\",...e.scrollbarStyles},circleLoading:{color:Pa.a[500],position:\"absolute\",opacity:\"70%\",top:0,left:\"50%\",marginTop:12},messageLeft:{marginRight:20,marginTop:2,minWidth:100,maxWidth:600,height:\"auto\",display:\"block\",position:\"relative\",whiteSpace:\"pre-wrap\",backgroundColor:\"#3b82f6\",color:\"#ffffff\",alignSelf:\"flex-start\",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:\"0 1px 1px #b3b3b3\"},quotedContainerLeft:{margin:\"-3px -80px 6px -6px\",overflow:\"hidden\",backgroundColor:\"#f0f0f0\",borderRadius:\"7.5px\",display:\"flex\",position:\"relative\"},quotedMsg:{padding:10,maxWidth:300,height:\"auto\",display:\"block\",whiteSpace:\"pre-wrap\",overflow:\"hidden\"},quotedSideColorLeft:{flex:\"none\",width:\"4px\",backgroundColor:\"#6bcbef\"},messageRight:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:\"auto\",display:\"block\",position:\"relative\",whiteSpace:\"pre-wrap\",backgroundColor:\"#10b981\",color:\"#ffffff\",alignSelf:\"flex-end\",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:\"0 1px 1px #b3b3b3\"},quotedContainerRight:{margin:\"-3px -80px 6px -6px\",overflowY:\"hidden\",backgroundColor:\"#cfe9ba\",borderRadius:\"7.5px\",display:\"flex\",position:\"relative\"},quotedMsgRight:{padding:10,maxWidth:300,height:\"auto\",whiteSpace:\"pre-wrap\"},quotedSideColorRight:{flex:\"none\",width:\"4px\",backgroundColor:\"#35cd96\"},messageActionsButton:{display:\"none\",position:\"relative\",color:\"#999\",zIndex:1,backgroundColor:\"inherit\",opacity:\"90%\",\"&:hover, &.Mui-focusVisible\":{backgroundColor:\"inherit\"}},messageContactName:{display:\"flex\",color:\"#6bcbef\",fontWeight:500},textContentItem:{overflowWrap:\"break-word\",padding:\"3px 80px 6px 6px\"},textContentItemEdited:{overflowWrap:\"break-word\",padding:\"3px 120px 6px 6px\"},textContentItemDeleted:{fontStyle:\"italic\",color:\"rgba(0, 0, 0, 0.36)\",overflowWrap:\"break-word\",padding:\"3px 80px 6px 6px\"},forwardMessage:{fontSize:12,fontStyle:\"italic\",position:\"absolute\",top:0,left:5,color:\"#999\",display:\"flex\",alignItems:\"center\"},messageMedia:{objectFit:\"cover\",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8},timestamp:{fontSize:11,position:\"absolute\",bottom:0,right:5,color:\"#999\",display:\"flex\",alignItems:\"center\"},dailyTimestamp:{alignItems:\"center\",textAlign:\"center\",alignSelf:\"center\",width:\"110px\",backgroundColor:\"#e1f3fb\",margin:\"10px\",borderRadius:\"10px\",boxShadow:\"0 1px 1px #b3b3b3\"},dailyTimestampText:{color:\"#808888\",padding:8,alignSelf:\"center\",marginLeft:\"0px\"},ackIcons:{fontSize:18,verticalAlign:\"middle\",marginLeft:4},deletedIcon:{fontSize:18,verticalAlign:\"middle\",marginRight:4},ackDoneAllIcon:{color:Pa.a[500],fontSize:18,verticalAlign:\"middle\",marginLeft:4},downloadMedia:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"inherit\",padding:10}})),on=(e,a)=>{if(\"LOAD_MESSAGES\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...n,...e]}if(\"ADD_MESSAGE\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.push(t),[...e]}if(\"UPDATE_MESSAGE\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n&&(e[n]=t),[...e]}if(\"RESET\"===a.type)return[]};var sn=e=>{let{ticket:a,ticketId:t,isGroup:l}=e;const o=ln(),[s,i]=Object(n.useReducer)(on,[]),[c,d]=Object(n.useState)(1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),E=Object(n.useRef)(),[b,f]=Object(n.useState)({}),[h,y]=Object(n.useState)(null),x=Boolean(h),C=Object(n.useRef)(t),A=Object(n.useContext)(v),{setReplyingMessage:S}=Object(n.useContext)(vt),{showSelectMessageCheckbox:O}=Object(n.useContext)(Pt);Object(n.useEffect)(()=>{i({type:\"RESET\"}),d(1),C.current=t},[t]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{(async()=>{if(void 0!==t)try{const{data:e}=await Qe.get(\"/messages/\"+t,{params:{pageNumber:c}});C.current===t&&(i({type:\"LOAD_MESSAGES\",payload:e.messages}),u(e.hasMore),g(!1)),1===c&&e.messages.length>1&&w()}catch(e){g(!1),Xe(e)}})()},500);return()=>{clearTimeout(e)}},[c,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),t=A.getSocket(e);return t.on(\"ready\",()=>t.emit(\"joinChatBox\",\"\"+a.id)),t.on(`company-${e}-appMessage`,e=>{\"create\"===e.action&&e.message.ticketId===C.current&&(i({type:\"ADD_MESSAGE\",payload:e.message}),w()),\"update\"===e.action&&e.message.ticketId===C.current&&i({type:\"UPDATE_MESSAGE\",payload:e.message})}),()=>{t.disconnect()}},[t,a,A]);const w=()=>{E.current&&E.current.scrollIntoView({})},k=(e,a)=>{y(null),S(a)},T=(e,a)=>{y(e.currentTarget),f(a)},I=e=>{if(\"locationMessage\"===e.mediaType&&e.body.split(\"|\").length>=2){let a=e.body.split(\"|\"),t=a[0],n=a[1],l=null;return a.length>2&&(l=e.body.split(\"|\")[2]),r.a.createElement(Xt,{image:t,link:n,description:l})}if(\"contactMessage\"===e.mediaType){let a=e.body.split(\"\\n\"),t=[],n=\"\";for(let e=0;e<a.length;e++){let r=a[e].split(\":\");for(let e=0;e<r.length;e++)-1!==r[e].indexOf(\"+\")&&t.push({number:r[e]}),-1!==r[e].indexOf(\"FN\")&&(n=r[e+1])}return r.a.createElement(tn,{contact:n,numbers:t[0].number})}return\"image\"===e.mediaType?r.a.createElement(ut,{imageUrl:e.mediaUrl}):\"audio\"===e.mediaType?r.a.createElement(\"audio\",{controls:!0},r.a.createElement(\"source\",{src:e.mediaUrl,type:\"audio/mp3\"})):\"video\"===e.mediaType?r.a.createElement(\"video\",{className:o.messageMedia,src:e.mediaUrl,controls:!0}):r.a.createElement(r.a.Fragment,null,r.a.createElement(\"div\",{className:o.downloadMedia},r.a.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",padding:\"12px\",backgroundColor:\"#f8f9fa\",borderRadius:\"8px\",border:\"1px solid #e9ecef\",marginBottom:\"8px\",maxWidth:\"300px\"}},(a=>{let t=e.body||\"document\";if(e.body&&e.body.includes(\".\"))t=e.body;else if(e.mediaUrl){const a=e.mediaUrl.split(\"/\").pop();if(a&&a.includes(\".\")){const e=a.split(\".\");t=e.length>2&&/^\\d+$/.test(e[0])?e.slice(1).join(\".\"):a}}const n=null===(a=t.split(\".\").pop())||void 0===a?void 0:a.toLowerCase();let l;return l=[\"doc\",\"docx\"].includes(n)?{bg:\"#2b579a\",text:\"W\"}:[\"xls\",\"xlsx\",\"csv\"].includes(n)?{bg:\"#217346\",text:\"\\ud83d\\udcca\"}:[\"pdf\"].includes(n)?{bg:\"#dc3545\",text:\"PDF\"}:[\"ppt\",\"pptx\"].includes(n)?{bg:\"#d24726\",text:\"P\"}:[\"txt\"].includes(n)?{bg:\"#6c757d\",text:\"T\"}:{bg:\"#6c757d\",text:\"\\ud83d\\udcc4\"},r.a.createElement(\"div\",{style:{width:\"40px\",height:\"40px\",borderRadius:\"6px\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",marginRight:\"12px\",fontSize:\"16px\",fontWeight:\"bold\",color:\"white\",backgroundColor:l.bg}},l.text)})(),r.a.createElement(\"div\",{style:{flex:1,minWidth:0}},r.a.createElement(\"div\",{style:{fontSize:\"14px\",fontWeight:\"600\",color:\"#212529\",marginBottom:\"2px\",overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\"}},(()=>{let a=e.body||\"Documento\";if(e.body&&e.body.includes(\".\"))a=e.body;else if(e.mediaUrl){const t=e.mediaUrl.split(\"/\").pop();if(t&&t.includes(\".\")){const e=t.split(\".\");a=e.length>2&&/^\\d+$/.test(e[0])?e.slice(1).join(\".\"):t}}return a})()),r.a.createElement(\"div\",{style:{fontSize:\"12px\",color:\"#6c757d\",display:\"flex\",alignItems:\"center\"}},(a=>{let t=e.body||\"document\";if(e.body&&e.body.includes(\".\"))t=e.body;else if(e.mediaUrl){const a=e.mediaUrl.split(\"/\").pop();if(a&&a.includes(\".\")){const e=a.split(\".\");t=e.length>2&&/^\\d+$/.test(e[0])?e.slice(1).join(\".\"):a}}return`${(null===(a=t.split(\".\").pop())||void 0===a?void 0:a.toUpperCase())||\"DOC\"} \\u2022 ${(e=>{if(0===e)return\"0 B\";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(1))+\" \"+[\"B\",\"kB\",\"MB\",\"GB\"][a]})(e.mediaSize||0)}`})())),r.a.createElement(Fa.a,{size:\"small\",style:{minWidth:\"32px\",width:\"32px\",height:\"32px\",borderRadius:\"50%\",backgroundColor:\"#f8f9fa\",border:\"1px solid #dee2e6\",color:\"#6c757d\",padding:0},target:\"_blank\",href:e.mediaUrl},r.a.createElement(nt.a,{style:{fontSize:\"16px\"}})))))},j=(e,a)=>{if(0===a)return r.a.createElement(\"span\",{className:o.dailyTimestamp,key:\"timestamp-\"+e.id},r.a.createElement(\"div\",{className:o.dailyTimestampText},Object(Ca.a)(Object(ka.a)(s[a].createdAt),\"dd/MM/yyyy\")));if(a<s.length-1){let t=Object(ka.a)(s[a].createdAt),n=Object(ka.a)(s[a-1].createdAt);if(!Object(Ta.a)(t,n))return r.a.createElement(\"span\",{className:o.dailyTimestamp,key:\"timestamp-\"+e.id},r.a.createElement(\"div\",{className:o.dailyTimestampText},Object(Ca.a)(Object(ka.a)(s[a].createdAt),\"dd/MM/yyyy\")))}return a===s.length-1?r.a.createElement(\"div\",{key:\"ref-\"+e.createdAt,ref:E,style:{float:\"left\",clear:\"both\"}}):void 0},N=(e,a)=>{if(a<s.length&&a>0){if(e.ticketId!==s[a-1].ticketId)return r.a.createElement(\"center\",null,r.a.createElement(\"div\",{className:o.ticketNunberClosed},\"Conversa encerrada: \",Object(Ca.a)(Object(ka.a)(s[a-1].createdAt),\"dd/MM/yyyy HH:mm:ss\")),r.a.createElement(\"div\",{className:o.ticketNunberOpen},\"Conversa iniciada: \",Object(Ca.a)(Object(ka.a)(e.createdAt),\"dd/MM/yyyy HH:mm:ss\")))}},M=(e,a)=>{if(a<s.length&&a>0){if(s[a].fromMe!==s[a-1].fromMe)return r.a.createElement(\"span\",{style:{marginTop:16},key:\"divider-\"+e.id})}},P=e=>{var a,t,n,l,s;return r.a.createElement(\"div\",{className:Object(R.a)(o.quotedContainerLeft,{[o.quotedContainerRight]:e.fromMe})},r.a.createElement(\"span\",{className:Object(R.a)(o.quotedSideColorLeft,{[o.quotedSideColorRight]:null===(a=e.quotedMsg)||void 0===a?void 0:a.fromMe})}),r.a.createElement(\"div\",{className:o.quotedMsg},!(null===(t=e.quotedMsg)||void 0===t?void 0:t.fromMe)&&r.a.createElement(\"span\",{className:o.messageContactName},null===(n=e.quotedMsg)||void 0===n||null===(l=n.contact)||void 0===l?void 0:l.name),\"audio\"===e.quotedMsg.mediaType&&r.a.createElement(\"div\",{className:o.downloadMedia},r.a.createElement(\"audio\",{controls:!0},r.a.createElement(\"source\",{src:e.quotedMsg.mediaUrl,type:\"audio/mp3\"}))),\"video\"===e.quotedMsg.mediaType&&r.a.createElement(\"video\",{className:o.messageMedia,src:e.quotedMsg.mediaUrl,controls:!0}),\"application\"===e.quotedMsg.mediaType&&r.a.createElement(\"div\",{className:o.downloadMedia},r.a.createElement(Fa.a,{startIcon:r.a.createElement(nt.a,null),color:\"primary\",variant:\"outlined\",target:\"_blank\",href:e.quotedMsg.mediaUrl},\"Download\")),\"image\"===e.quotedMsg.mediaType?r.a.createElement(ut,{imageUrl:e.quotedMsg.mediaUrl}):null===(s=e.quotedMsg)||void 0===s?void 0:s.body))};return r.a.createElement(\"div\",{className:o.messagesListWrapper},r.a.createElement(Yt,{message:b,anchorEl:h,menuOpen:x,handleClose:e=>{y(null)}}),r.a.createElement(\"div\",{id:\"messagesList\",className:o.messagesList,onScroll:e=>{if(!m)return;const{scrollTop:a}=e.currentTarget;0===a&&(document.getElementById(\"messagesList\").scrollTop=1),p||a<50&&d(e=>e+1)}},s.length>0?(()=>{if(s.length>0){return s.map((e,a)=>{var t,n,s,i,c,d,m;return\"call_log\"===e.mediaType?r.a.createElement(r.a.Fragment,{key:e.id},j(e,a),N(e,a),M(e,a),r.a.createElement(\"div\",{className:o.messageCenter},l&&r.a.createElement(\"span\",{className:o.messageContactName},null===(t=e.contact)||void 0===t?void 0:t.name),r.a.createElement(\"div\",null,r.a.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 17\",width:\"20\",height:\"17\"},r.a.createElement(\"path\",{fill:\"#df3333\",d:\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"})),\" \",r.a.createElement(\"span\",null,\"Chamada de voz/v\\xeddeo perdida \\xe0s \",Object(Ca.a)(Object(ka.a)(e.createdAt),\"HH:mm\"))))):e.fromMe?r.a.createElement(r.a.Fragment,{key:e.id},j(e,a),N(e,a),M(e,a),r.a.createElement(\"div\",{className:o.messageRight,onDoubleClick:a=>k(0,e)},O&&r.a.createElement(rn,{message:e}),e.isForwarded&&r.a.createElement(\"div\",null,r.a.createElement(\"span\",{className:o.forwardMessage},r.a.createElement(st.a,{style:{color:\"grey\",transform:\"scaleX(-1)\"}}),\" Encaminhada\"),r.a.createElement(\"br\",null)),(e.mediaUrl||\"locationMessage\"===e.mediaType||\"vcard\"===e.mediaType||\"contactMessage\"===e.mediaType)&&I(e),r.a.createElement(\"div\",{className:Object(R.a)(o.textContentItem,{[o.textContentItemDeleted]:e.isDeleted})},e.isDeleted&&r.a.createElement(it.a,{color:\"disabled\",fontSize:\"small\",className:o.deletedIcon}),e.quotedMsg&&P(e),\"reactionMessage\"!==e.mediaType&&\"locationMessage\"!==e.mediaType&&\"application\"!==e.mediaType&&\"document\"!==e.mediaType&&\"text\"!==e.mediaType&&e.body&&r.a.createElement(Ka,{message:e},e.body),e.quotedMsg&&\"reactionMessage\"===e.mediaType&&e.body&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"span\",{style:{marginLeft:\"0px\",display:\"flex\",alignItems:\"center\"}},r.a.createElement(Ka,{message:e},\"_*\"+(e.fromMe?Fe.a.t(\"messagesList.reactions.you\"):null!==(n=null===e||void 0===e||null===(s=e.contact)||void 0===s?void 0:s.name)&&void 0!==n?n:Fe.a.t(\"messagesList.reactions.contact\"))+\"*_ \"+Fe.a.t(\"messagesList.reactions.reacted\")+\" \"),r.a.createElement(re.a,{className:o.badge,overlap:\"circular\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},badgeContent:r.a.createElement(\"span\",{style:{fontSize:\"1.2em\",marginTop:\"0\",marginLeft:\"5px\"}},e.body)}))),r.a.createElement(\"span\",{className:o.timestamp},Object(Ca.a)(Object(ka.a)(e.createdAt),\"HH:mm\"),(e=>0===e.ack?r.a.createElement(rt.a,{fontSize:\"small\",className:o.ackIcons}):1===e.ack||2===e.ack?r.a.createElement(lt.a,{fontSize:\"small\",className:o.ackIcons}):3===e.ack?r.a.createElement(ot.a,{fontSize:\"small\",className:o.ackIcons}):4===e.ack||5===e.ack?r.a.createElement(ot.a,{fontSize:\"small\",className:o.ackDoneAllIcon,style:{color:\"#0377FC\"}}):void 0)(e),r.a.createElement(W.a,{size:\"small\",id:\"messageActionsButton\",disabled:e.isDeleted,onClick:a=>T(a,e),style:{marginLeft:\"8px\",padding:\"2px\",color:\"#999\",fontSize:\"12px\"}},r.a.createElement(ct.a,{style:{fontSize:\"16px\"}})))))):r.a.createElement(r.a.Fragment,{key:e.id},j(e,a),N(e,a),M(e,a),r.a.createElement(\"div\",{className:o.messageLeft,title:e.queueId&&(null===(i=e.queue)||void 0===i?void 0:i.name),onDoubleClick:a=>k(0,e)},O&&r.a.createElement(rn,{message:e}),e.isForwarded&&r.a.createElement(\"div\",null,r.a.createElement(\"span\",{className:o.forwardMessage},r.a.createElement(st.a,{style:{color:\"grey\",transform:\"scaleX(-1)\"}}),\" Encaminhada\"),r.a.createElement(\"br\",null)),l&&r.a.createElement(\"span\",{className:o.messageContactName},null===(c=e.contact)||void 0===c?void 0:c.name),e.isDeleted&&r.a.createElement(\"div\",null,r.a.createElement(\"span\",{className:\"message-deleted\"},\"Essa mensagem foi apagada pelo contato \\xa0\",r.a.createElement(it.a,{color:\"error\",fontSize:\"small\",className:o.deletedIcon}))),(e.mediaUrl||\"locationMessage\"===e.mediaType||\"vcard\"===e.mediaType||\"contactMessage\"===e.mediaType)&&I(e),r.a.createElement(\"div\",{className:o.textContentItem},e.quotedMsg&&P(e),\"reactionMessage\"!==e.mediaType&&r.a.createElement(Ka,{message:e},\"locationMessage\"===e.mediaType||\"contactMessage\"===e.mediaType?null:e.body),e.quotedMsg&&\"reactionMessage\"===e.mediaType&&e.body&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"span\",{style:{marginLeft:\"0px\",display:\"flex\",alignItems:\"center\"}},r.a.createElement(Ka,{message:e},\"_*\"+(e.fromMe?Fe.a.t(\"messagesList.reactions.you\"):null!==(d=null===e||void 0===e||null===(m=e.contact)||void 0===m?void 0:m.name)&&void 0!==d?d:Fe.a.t(\"messagesList.reactions.contact\"))+\"*_ \"+Fe.a.t(\"messagesList.reactions.reacted\")+\" \"),r.a.createElement(re.a,{className:o.badge,overlap:\"circular\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},badgeContent:r.a.createElement(\"span\",{style:{fontSize:\"1.2em\",marginTop:\"0\",marginLeft:\"5px\"}},e.body)}))),r.a.createElement(\"span\",{className:o.timestamp},Object(Ca.a)(Object(ka.a)(e.createdAt),\"HH:mm\"),r.a.createElement(W.a,{size:\"small\",id:\"messageActionsButton\",disabled:e.isDeleted,onClick:a=>T(a,e),style:{marginLeft:\"8px\",padding:\"2px\",color:\"#999\",fontSize:\"12px\"}},r.a.createElement(ct.a,{style:{fontSize:\"16px\"}}))))))})}return r.a.createElement(\"div\",null,Fe.a.t(\"hardcodedElements.sayHelloToNewContact\"))})():[]),p&&r.a.createElement(\"div\",null,r.a.createElement(Ba.a,{className:o.circleLoading})))},cn=t(1109),dn=t(1110),mn=t(1111);const un=Object(D.a)(e=>({ticketHeader:{display:\"flex\",backgroundColor:\"#eee\",flex:\"none\",borderBottom:\"1px solid rgba(0, 0, 0, 0.12)\"}}));var pn=()=>{const e=un();return r.a.createElement(cn.a,{square:!0,className:e.ticketHeader},r.a.createElement(dn.a,{titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:r.a.createElement(mn.a,{animation:\"wave\",variant:\"circle\"},r.a.createElement(Ia.a,{alt:\"contact_image\"})),title:r.a.createElement(mn.a,{animation:\"wave\",width:80}),subheader:r.a.createElement(mn.a,{animation:\"wave\",width:140})}))};const gn=Object(D.a)(e=>({ticketHeader:{display:\"flex\",backgroundColor:e.palette.tabHeaderBackground,flex:\"none\",borderBottom:\"1px solid rgba(0, 0, 0, 0.12)\",[e.breakpoints.down(\"sm\")]:{flexWrap:\"wrap\"}}}));var En=e=>{let{loading:a,children:t}=e;const n=gn();return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(pn,null):r.a.createElement(cn.a,{square:!0,className:n.ticketHeader},t))},bn=function(e){if(!e)return\"\";var a=e.split(\" \"),t=a[0].substring(0,1).toUpperCase();return a.length>1&&(t+=a[a.length-1].substring(0,1).toUpperCase()),t};function fn(e,a,t){return.299*e+.587*a+.114*t}function hn(e){const a=function(e){if(!e)return 8355711;let a=0;for(let t=0;t<e.length;t++){a=(a<<5)-a+e.charCodeAt(t),a|=0}return a}(e),{r:t,g:n,b:r}=function(e){const a=Math.abs(e)%16777215;return{r:(16711680&a)>>16,g:(65280&a)>>8,b:255&a}}(a),l=fn(t,n,r);return l<50||l>200?function(e,a,t){const n=fn(e,a,t);return n<50?(e=Math.min(255,e+50),a=Math.min(255,a+50),t=Math.min(255,t+50)):n>200&&(e=Math.max(0,e-50),a=Math.max(0,a-50),t=Math.max(0,t-50)),`rgb(${e}, ${a}, ${t})`}(t,n,r):`rgb(${t}, ${n}, ${r})`}var vn=e=>{let{contact:a,ticket:t,onClick:l}=e;const{user:o}=t,[s,i]=Object(n.useState)(\"\"),[c,d]=Object(n.useState)(\"\");return Object(n.useEffect)(()=>{if(a&&(d(a.name),document.body.offsetWidth<600&&a.name.length>10)){const e=a.name.substring(0,10)+\"...\";d(e)}o&&a&&(i(`${Fe.a.t(\"messagesList.header.assignedTo\")} ${o.name}`),document.body.offsetWidth<600&&i(\"\"+o.name))},[]),r.a.createElement(dn.a,{onClick:l,style:{cursor:\"pointer\"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:r.a.createElement(Ia.a,{style:{backgroundColor:hn(null===a||void 0===a?void 0:a.number),color:\"white\",fontWeight:\"bold\"},src:a.profilePicUrl,alt:\"contact_image\"},bn(null===a||void 0===a?void 0:a.name)),title:`${c} #${t.id}`,subheader:t.user&&\"\"+s})};const yn=Object(D.a)(e=>({root:{display:\"flex\",height:\"100%\",position:\"relative\",overflow:\"hidden\"},mainWrapper:{flex:1,height:\"100%\",display:\"flex\",flexDirection:\"column\",overflow:\"hidden\",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:\"0\",marginRight:-320,transition:e.transitions.create(\"margin\",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create(\"margin\",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));function xn(e){let{open:a,handleClose:t,ticketId:l}=e;const o=Object(M.useHistory)(),s=yn(),{user:i}=Object(n.useContext)(ra),[,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!0),[u,p]=Object(n.useState)({}),[g,E]=Object(n.useState)({}),b=Object(n.useContext)(v);Object(n.useEffect)(()=>{let e=null;return a&&(m(!0),e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/tickets/\"+l),{queueId:a}=e,{queues:t,profile:n}=i;if(void 0===t.find(e=>e.id===a)&&\"admin\"!==n)return P.b.error(\"Acesso n\\xe3o permitido\"),void o.push(\"/tickets\");p(e.contact),E(e),m(!1)}catch(e){m(!1),Xe(e)}})()},500)),()=>{null!==e&&clearTimeout(e)}},[l,i,o,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\");if(a){const a=b.getSocket(e);a.on(\"ready\",()=>a.emit(\"joinChatBox\",\"\"+g.id)),a.on(`company-${e}-ticket`,e=>{\"update\"===e.action&&e.ticket.id===g.id&&E(e.ticket),\"delete\"===e.action&&e.ticketId===g.id&&o.push(\"/tickets\")}),a.on(`company-${e}-contact`,e=>{\"update\"===e.action&&p(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?{...a,...e.contact}:a})})}return()=>{0}},[l,g,o,a,b]);const f=()=>{c(!0)};return r.a.createElement(at.a,{maxWidth:\"md\",onClose:t,open:a},r.a.createElement(En,{loading:d},(()=>{if(void 0!==g.user)return r.a.createElement(vn,{contact:u,ticket:g,onClick:f})})()),r.a.createElement(yt,null,r.a.createElement(ja.a,{className:s.root},r.a.createElement(sn,{ticket:g,ticketId:g.id,isGroup:g.isGroup}))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:t,color:\"primary\"},\"Fechar\")))}var Cn=t(524),An=t(720);var Sn=()=>({findAll:async()=>{const{data:e}=await Qe.get(\"/queue\");return e}});const On=Object(D.a)(e=>({maxWidth:{width:\"100%\"}}));var wn=e=>{let{modalOpen:a,onClose:t,ticketid:l}=e;j.transferModal.debug(\"\\ud83c\\udfaf TransferTicketModalCustom renderizado - modalOpen:\",a);const o=Object(M.useHistory)(),[s,i]=Object(n.useState)([]),[c,d]=Object(n.useState)([]),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(\"\"),[f,h]=Object(n.useState)(null),[v,y]=Object(n.useState)(\"\"),[x,C]=Object(n.useState)(!1),A=On(),{findAll:S}=Sn(),O=Object(n.useRef)(!0),[w,k]=Object(n.useState)([]),[T,I]=Object(n.useState)(\"\"),{user:N}=Object(n.useContext)(ra),{companyId:P,whatsappId:R}=N;Object(n.useEffect)(()=>()=>{O.current=!1},[]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{null!==R&&void 0!==R&&I(R),1===N.queues.length&&y(N.queues[0].id),(async()=>{Qe.get(\"/whatsapp\",{params:{companyId:P,session:0}}).then(e=>{let{data:a}=e;return k(a)})})(),g(!1)},500);return()=>clearTimeout(e)},[P,N.queues,R]),Object(n.useEffect)(()=>{if(O.current){(async()=>{const e=await S();u(e),d(e)})()}},[]),Object(n.useEffect)(()=>{if(!a)return void g(!1);j.transferModal.debug(\"\\ud83d\\ude80 Modal abierto, cargando usuarios...\"),(async()=>{g(!0);try{j.transferModal.debug(\"\\ud83d\\udd0d Buscando usuarios...\");const{data:e}=await Qe.get(\"/users/\",{params:{searchParam:E||\"\",limit:10}});j.transferModal.debug(\"\\u2705 Usuarios encontrados:\",e.users),i(e.users),g(!1)}catch(e){j.transferModal.error(\"\\u274c Error al buscar usuarios:\",e),g(!1),Xe(e)}})()},[a,E]),Object(n.useEffect)(()=>{if(!a)return;const e=setTimeout(()=>{(async()=>{g(!0);try{j.transferModal.debug(\"\\ud83d\\udd0d Buscando usuarios con par\\xe1metro:\",E);const{data:e}=await Qe.get(\"/users/\",{params:{searchParam:E||\"\",limit:10}});j.transferModal.debug(\"\\u2705 Usuarios encontrados en b\\xfasqueda:\",e.users),i(e.users),g(!1)}catch(e){j.transferModal.error(\"\\u274c Error en b\\xfasqueda:\",e),g(!1),Xe(e)}})()},300);return()=>clearTimeout(e)},[E,a]);const D=()=>{t(),b(\"\"),h(null),C(!1),i([])};return r.a.createElement(at.a,{open:a,onClose:D,maxWidth:\"lg\",scroll:\"paper\"},r.a.createElement(\"form\",{onSubmit:async e=>{if(e.preventDefault(),l&&v&&\"\"!==v){g(!0);try{let e={};f&&(e.userId=f.id),v&&null!==v&&(e.queueId=v,f||(e.status=\"pending\",e.userId=null)),T&&(e.whatsappId=T),await Qe.put(\"/tickets/\"+l,e),o.push(\"/tickets\")}catch(a){g(!1),Xe(a)}}}},r.a.createElement(bt.a,{id:\"form-dialog-title\"},Fe.a.t(\"transferTicketModal.title\")),r.a.createElement(Et.a,{dividers:!0},r.a.createElement(qt.a,{style:{width:400,marginBottom:20},getOptionLabel:e=>(null===e||void 0===e?void 0:e.name)||\"\",value:f||null,onChange:(e,a)=>{j.transferModal.debug(\"\\ud83d\\udc64 Usuario seleccionado:\",a),h(a),null!=a&&Array.isArray(a.queues)?d(a.queues):(d(m),y(\"\"))},options:s,filterOptions:(e,a)=>{let{inputValue:t}=a;return j.transferModal.debug(\"\\ud83d\\udd0d Filtrando opciones, inputValue:\",t),t&&\"\"!==t.trim()?e.filter(e=>{var a,n;const r=t.toLowerCase();return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(r))||(null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes(r))}):e},freeSolo:!1,autoHighlight:!0,noOptionsText:Fe.a.t(\"transferTicketModal.noOptions\"),loading:p,open:x,onOpen:()=>{j.transferModal.debug(\"\\ud83d\\udcf1 Autocomplete abierto, options.length:\",s.length),C(!0),0===s.length&&(j.transferModal.debug(\"\\ud83d\\udd04 Cargando usuarios desde onOpen...\"),b(\"\"))},onClose:()=>{j.transferModal.debug(\"\\ud83d\\udcf1 Autocomplete cerrado\"),C(!1)},ListboxProps:{style:{maxHeight:200}},renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{label:Fe.a.t(\"transferTicketModal.fieldLabel\"),variant:\"outlined\",autoFocus:!0,onChange:e=>{const a=e.target.value;j.transferModal.debug(\"\\u270f\\ufe0f Input cambiado:\",a),b(a),a&&\"\"!==a.trim()||j.transferModal.debug(\"\\ud83d\\udd04 Campo vac\\xedo, actualizando lista...\")},placeholder:\"Click aqu\\xed para ver usuarios disponibles\",InputProps:{...e.InputProps,endAdornment:r.a.createElement(r.a.Fragment,null,p?r.a.createElement(Ba.a,{color:\"inherit\",size:20}):null,e.InputProps.endAdornment)}})),renderOption:e=>r.a.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",padding:\"8px 0\"}},r.a.createElement(\"div\",{style:{fontWeight:\"bold\"}},e.name),e.email&&r.a.createElement(\"div\",{style:{fontSize:\"12px\",color:\"#666\",marginTop:\"2px\"}},e.email))}),r.a.createElement(Cn.a,{variant:\"outlined\",className:A.maxWidth},r.a.createElement(An.a,null,Fe.a.t(\"transferTicketModal.fieldQueueLabel\")),r.a.createElement(Zt.a,{value:v,onChange:e=>y(e.target.value),label:Fe.a.t(\"transferTicketModal.fieldQueuePlaceholder\")},c.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name)))),r.a.createElement(ht.a,{container:!0,spacing:2,style:{marginTop:\"15px\"}},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Zt.a,{required:!0,fullWidth:!0,displayEmpty:!0,variant:\"outlined\",value:T,onChange:e=>{I(e.target.value)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(\"\"===T)return\"Selecione uma Conex\\xe3o\";return w.find(e=>e.id===T).name}},(null===w||void 0===w?void 0:w.length)>0&&w.map((e,a)=>r.a.createElement(G.a,{dense:!0,key:a,value:e.id},r.a.createElement(te.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"}},e.name,\" \\xa0 \",r.a.createElement(\"p\",{className:\"CONNECTED\"===e.status?A.online:A.offline},\"(\",e.status,\")\")))}))))))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:D,color:\"secondary\",disabled:p,variant:\"outlined\"},Fe.a.t(\"transferTicketModal.buttons.cancel\")),r.a.createElement(Ua,{variant:\"contained\",type:\"submit\",color:\"primary\",loading:p},Fe.a.t(\"transferTicketModal.buttons.ok\")))))};const kn=Object(D.a)(e=>({ticket:{position:\"relative\"},pendingTicket:{cursor:\"unset\"},queueTag:{background:\"#FCFCFC\",color:\"#000\",marginRight:1,padding:1,fontWeight:\"bold\",paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:\"0.8em\",whiteSpace:\"nowrap\"},noTicketsDiv:{display:\"flex\",height:\"100px\",margin:40,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"},newMessagesCount:{position:\"absolute\",alignSelf:\"center\",marginRight:8,marginLeft:\"auto\",top:\"10px\",left:\"20px\",borderRadius:0},noTicketsText:{textAlign:\"center\",color:\"rgb(104, 121, 146)\",fontSize:\"14px\",lineHeight:\"1.4\"},connectionTag:{background:\"green\",color:\"#FFF\",marginRight:1,padding:1,fontWeight:\"bold\",paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:\"0.8em\",whiteSpace:\"nowrap\"},noTicketsTitle:{textAlign:\"center\",fontSize:\"16px\",fontWeight:\"600\",margin:\"0px\"},contactNameWrapper:{display:\"flex\",justifyContent:\"space-between\",marginLeft:\"5px\"},lastMessageTime:{justifySelf:\"flex-end\",textAlign:\"right\",position:\"relative\",top:-5,background:\"#333333\",color:\"#ffffff\",border:\"1px solid #3a3b6c\",borderRadius:5,padding:1,paddingLeft:5,paddingRight:5,fontSize:\"0.9em\",zIndex:10,marginRight:120},closedBadge:{alignSelf:\"center\",justifySelf:\"flex-end\",marginRight:32,marginLeft:\"auto\"},contactLastMessage:{paddingRight:\"0%\",marginLeft:\"5px\"},badgeStyle:{color:\"white\",backgroundColor:Pa.a[500]},acceptButton:{position:\"absolute\",right:\"108px\"},ticketQueueColor:{flex:\"none\",width:\"8px\",height:\"100%\",position:\"absolute\",top:\"0%\",left:\"0%\"},ticketInfo:{position:\"relative\",top:-13},secondaryContentSecond:{display:\"flex\",alignItems:\"flex-start\",flexWrap:\"wrap\",flexDirection:\"row\",alignContent:\"flex-start\"},ticketInfo1:{position:\"relative\",top:13,right:0},Radiusdot:{\"& .MuiBadge-badge\":{borderRadius:2,position:\"inherit\",height:16,margin:2,padding:3},\"& .MuiBadge-anchorOriginTopRightRectangle\":{transform:\"scale(1) translate(0%, -40%)\"}},presence:{color:\"light\"===(null===e||void 0===e?void 0:e.mode)?\"blue\":\"lightgreen\",fontWeight:\"bold\"}}));var Tn=e=>{var a,t,l,o,s,i,c,d,m,u,p,g,E,b,f,h;let{ticket:v}=e;const y=kn(),x=Object(M.useHistory)(),[C,A]=Object(n.useState)(!1),[S,O]=Object(n.useState)([]),[w,k]=Object(n.useState)(null),[T,I]=Object(n.useState)(\"\"),[j,N]=Object(n.useState)(!1),{ticketId:P}=Object(M.useParams)(),D=Object(n.useRef)(!0),{setCurrentTicket:L}=Object(n.useContext)(qa),{user:q}=Object(n.useContext)(ra),{profile:W}=q,[B,z]=Object(n.useState)(!1);Object(n.useEffect)(()=>{var e,a;v.userId&&v.user&&k(null===(e=v.user)||void 0===e||null===(a=e.name)||void 0===a?void 0:a.toUpperCase());return O(null===v||void 0===v?void 0:v.tags),()=>{D.current=!1}},[]);const U=async e=>{O(null===v||void 0===v?void 0:v.tags),A(!0);try{var a;await Qe.put(\"/tickets/\"+e,{status:\"closed\",userId:null===q||void 0===q?void 0:q.id,queueId:null===v||void 0===v||null===(a=v.queue)||void 0===a?void 0:a.id,useIntegration:!1,promptId:null,integrationId:null})}catch(t){A(!1),Xe(t)}D.current&&A(!1),x.push(\"/tickets/\")};Object(n.useEffect)(()=>{const e=()=>{if(!D.current)return;const{labelText:a,labelColor:t}=(()=>{let e=\"\",a=\"\";if(!v.lastMessage)return\"\";const t=Object(ka.a)(v.updatedAt),n=new Date-t,r=Math.floor(n/36e5),l=Math.floor(n/6e4);return l>=3&&l<=10?(a=`(${l} m atr\\xe1s)`,e=\"green\"):l>=30&&l<60?(a=`(${l} m atr\\xe1s)`,e=\"Orange\"):l>60&&r<24?(a=`(${r} h atr\\xe1s)`,e=\"red\"):r>=24&&(a=`(${Math.floor(r/24)} dias atr\\xe1s)`,e=\"red\"),{labelText:a,labelColor:e}})();I(r.a.createElement(re.a,{className:y.lastInteractionLabel,style:{color:t}},a));const n=setTimeout(e,3e4);return()=>clearTimeout(n)},a=e();return()=>{a&&a()}},[v,D,y.lastInteractionLabel]);const V=async e=>{const a={read:1,fromMe:!0,mediaUrl:\"\",body:\"*Mensagem Autom\\xe1tica:*\\n\"+`{{ms}} *{{name}}*, meu nome \\xe9 *${null===q||void 0===q?void 0:q.name}* e agora vou prosseguir com seu\\xa0atendimento!`.trim()};try{await Qe.post(\"/messages/\"+e,a)}catch(t){Xe(t)}},G=()=>{z(!0)};return r.a.createElement(r.a.Fragment,{key:v.id},r.a.createElement(wn,{modalOpen:B,onClose:()=>{D.current&&z(!1)},ticketid:v.id}),r.a.createElement(xn,{open:j,handleClose:()=>N(!1),ticketId:v.id}),r.a.createElement(ee.a,{dense:!0,button:!0,onClick:e=>{\"pending\"!==v.status&&(e=>{const a=Object(La.a)(),{id:t,uuid:n}=e;L({id:t,uuid:n,code:a})})(v)},selected:P&&+P===v.id,className:Object(R.a)(y.ticket,{[y.pendingTicket]:\"pending\"===v.status})},r.a.createElement(Da.a,{arrow:!0,placement:\"right\",title:(null===(a=v.queue)||void 0===a||null===(t=a.name)||void 0===t?void 0:t.toUpperCase())||\"\"},r.a.createElement(\"span\",{style:{backgroundColor:(null===(l=v.queue)||void 0===l?void 0:l.color)||\"#7C7C7C\"},className:y.ticketQueueColor})),r.a.createElement(Na.a,null,\"pending\"!==v.status?r.a.createElement(Ia.a,{style:{marginTop:\"-20px\",marginLeft:\"-3px\",width:\"55px\",height:\"55px\",borderRadius:\"10%\",backgroundColor:hn(null===v||void 0===v||null===(o=v.contact)||void 0===o?void 0:o.number)},src:null===v||void 0===v||null===(s=v.contact)||void 0===s?void 0:s.profilePicUrl},bn((null===v||void 0===v||null===(i=v.contact)||void 0===i?void 0:i.name)||\"\")):r.a.createElement(Ia.a,{style:{marginTop:\"-30px\",marginLeft:\"0px\",width:\"50px\",height:\"50px\",borderRadius:\"10%\",backgroundColor:hn(null===v||void 0===v||null===(c=v.contact)||void 0===c?void 0:c.number)},src:null===v||void 0===v||null===(d=v.contact)||void 0===d?void 0:d.profilePicUrl},bn((null===v||void 0===v||null===(m=v.contact)||void 0===m?void 0:m.name)||\"\"))),r.a.createElement(te.a,{disableTypography:!0,primary:r.a.createElement(\"span\",{className:y.contactNameWrapper},r.a.createElement(H.a,{noWrap:!0,component:\"span\",variant:\"body2\",color:\"textPrimary\"},r.a.createElement(\"strong\",null,v.contact.name,\" \",T),r.a.createElement(Ma.a,null,r.a.createElement(ja.a,{className:y.ticketInfo1},r.a.createElement(r.a.Fragment,null))),\"admin\"===W&&r.a.createElement(Da.a,{title:\"Espiar Conversa\"},r.a.createElement(Ja.a,{onClick:()=>N(!0),fontSize:\"small\",style:{color:Ra.a[700],cursor:\"pointer\",marginLeft:10,verticalAlign:\"middle\"}})))),secondary:r.a.createElement(\"span\",{className:y.contactNameWrapper},r.a.createElement(H.a,{className:y.contactLastMessage,noWrap:!0,component:\"span\",variant:\"body2\",color:\"textSecondary\"},[\"composing\",\"recording\"].includes(null===v||void 0===v?void 0:v.presence)?r.a.createElement(\"span\",{className:y.presence},{composing:\"Digitando...\",recording:\"Gravando...\"}[v.presence]):r.a.createElement(r.a.Fragment,null,v.lastMessage.includes(\"data:image/png;base64\")?r.a.createElement(Ka,null,\" Localiza\\xe7\\xe3o\"):r.a.createElement(Ka,null,v.lastMessage.length>30?v.lastMessage.substring(0,30)+\"...\":v.lastMessage)),r.a.createElement(\"span\",{style:{marginTop:4},className:y.secondaryContentSecond},(null===v||void 0===v||null===(u=v.whatsapp)||void 0===u?void 0:u.name)?r.a.createElement(re.a,{className:y.connectionTag},null===v||void 0===v||null===(p=v.whatsapp)||void 0===p||null===(g=p.name)||void 0===g?void 0:g.toUpperCase()):r.a.createElement(\"br\",null),w?r.a.createElement(re.a,{style:{backgroundColor:\"#000000\"},className:y.connectionTag},w):r.a.createElement(\"br\",null),(null===(E=v.queue)||void 0===E?void 0:E.name)&&r.a.createElement(re.a,{style:{backgroundColor:(null===(b=v.queue)||void 0===b?void 0:b.color)||\"#7c7c7c\"},className:y.connectionTag},null===(f=v.queue)||void 0===f||null===(h=f.name)||void 0===h?void 0:h.toUpperCase()),v.chatbot&&r.a.createElement(Da.a,{title:\"Chatbot\"},r.a.createElement(Ya.a,{fontSize:\"small\",style:{color:Ra.a[600],fontSize:\"16px\",marginLeft:\"5px\",marginTop:\"2px\",cursor:\"pointer\"}}))),r.a.createElement(\"span\",{style:{paddingTop:\"2px\"},className:y.secondaryContentSecond},null===S||void 0===S?void 0:S.map(e=>r.a.createElement(et,{tag:e,key:`ticket-contact-tag-${v.id}-${e.id}`})))),r.a.createElement(re.a,{className:y.newMessagesCount,badgeContent:v.unreadMessages,classes:{badge:y.badgeStyle}}))}),r.a.createElement(Ma.a,null,v.lastMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{className:y.lastMessageTime,component:\"span\",variant:\"body2\",color:\"textSecondary\"},Object(Ta.a)(Object(ka.a)(v.updatedAt),new Date)?r.a.createElement(r.a.Fragment,null,Object(Ca.a)(Object(ka.a)(v.updatedAt),\"HH:mm\")):r.a.createElement(r.a.Fragment,null,Object(Ca.a)(Object(ka.a)(v.updatedAt),\"dd/MM/yyyy\"))),r.a.createElement(\"br\",null)),r.a.createElement(\"span\",{className:y.secondaryContentSecond},\"pending\"===v.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua,{style:{backgroundColor:\"green\",color:\"white\",padding:\"4px 8px\",bottom:\"25px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>(async e=>{A(!0);try{let t;await Qe.put(\"/tickets/\"+e,{status:\"open\",userId:null===q||void 0===q?void 0:q.id});try{const{data:e}=await Qe.get(\"/settings/\");t=e.filter(e=>\"sendGreetingAccepted\"===e.key)}catch(a){Xe(a)}\"enabled\"!==t[0].value||v.isGroup||V(v.id)}catch(a){A(!1),Xe(a)}D.current&&A(!1),x.push(\"/tickets/\"+v.uuid)})(v.id)},Fe.a.t(\"ticketsList.buttons.accept\")),r.a.createElement(Ua,{style:{backgroundColor:\"red\",color:\"white\",padding:\"4px 8px\",bottom:\"0px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>U(v.id)},Fe.a.t(\"ticketsList.buttons.closed\"))),\"attending\"===v.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua,{style:{backgroundColor:\"blue\",color:\"white\",padding:\"4px 8px\",bottom:\"25px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>G()},Fe.a.t(\"ticketsList.buttons.transfer\")),r.a.createElement(Ua,{style:{backgroundColor:\"red\",color:\"white\",padding:\"4px 8px\",bottom:\"0px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>U(v.id)},Fe.a.t(\"ticketsList.buttons.closed\"))),\"closed\"!==v.status&&\"pending\"!==v.status&&\"attending\"!==v.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ua,{style:{backgroundColor:\"blue\",color:\"white\",padding:\"4px 8px\",bottom:\"25px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>G()},Fe.a.t(\"ticketsList.buttons.transfer\")),r.a.createElement(Ua,{style:{backgroundColor:\"red\",color:\"white\",padding:\"4px 8px\",bottom:\"0px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>U(v.id)},Fe.a.t(\"ticketsList.buttons.closed\"))),\"closed\"===v.status&&r.a.createElement(Ua,{style:{backgroundColor:\"red\",color:\"white\",padding:\"4px 8px\",bottom:\"0px\",borderRadius:\"8px\",right:\"8px\",fontSize:\"0.6rem\",width:\"80px\",minWidth:\"80px\",height:\"24px\"},variant:\"contained\",className:y.acceptButton,size:\"small\",loading:C,onClick:e=>(async e=>{A(!0);try{var a;await Qe.put(\"/tickets/\"+e,{status:\"open\",userId:null===q||void 0===q?void 0:q.id,queueId:null===v||void 0===v||null===(a=v.queue)||void 0===a?void 0:a.id})}catch(t){A(!1),Xe(t)}D.current&&A(!1),x.push(\"/tickets/\"+v.uuid)})(v.id)},Fe.a.t(\"ticketsList.buttons.reopen\"))))),r.a.createElement(F.a,{variant:\"inset\",component:\"li\"}))};var In=e=>{let{searchParam:a,tags:t,users:r,pageNumber:l,status:o,date:s,updatedAt:i,showAll:c,queueIds:d,withUnreadMessages:m}=e;const[u,p]=Object(n.useState)(!0),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)([]);return Object(n.useEffect)(()=>{p(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/tickets\",{params:{searchParam:a,pageNumber:l,tags:t,users:r,status:o,date:s,updatedAt:i,showAll:c,queueIds:d,withUnreadMessages:m}});f(e.tickets),E(e.hasMore),p(!1)}catch(e){p(!1),Xe(e)}})()},500);return()=>clearTimeout(e)},[a,t,r,l,o,s,i,c,d,m]),{tickets:b,loading:u,hasMore:g}},jn=t(621),Nn=t.n(jn);const Mn=Object(D.a)(e=>({tabContainer:{overflowY:\"auto\",maxHeight:350,...e.scrollbarStyles},popoverPaper:{width:\"100%\",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down(\"sm\")]:{maxWidth:270}},noShadow:{boxShadow:\"none !important\"}}));var Pn=e=>{const a=Mn(),t=Object(M.useHistory)(),{user:l}=Object(n.useContext)(ra),o=+t.location.pathname.split(\"/\")[2],s=Object(n.useRef)(o),i=Object(n.useRef)(),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[,E]=Object(n.useState)([]),{tickets:b}=In({withUnreadMessages:\"true\"}),[f]=Object(Aa.a)(Nn.a,e),h=Object(n.useRef)(),y=Object(n.useRef)(t),x=Object(n.useContext)(v);Object(n.useEffect)(()=>{(async()=>{try{\"enable\"===l.allTicket&&g(!0)}catch(e){Xe(e)}})()},[l.allTicket]),Object(n.useEffect)(()=>{h.current=f,\"Notification\"in window?Notification.requestPermission():console.log(\"This browser doesn't support notifications\")},[f]),Object(n.useEffect)(()=>{(()=>{if(p)u(b);else{const e=b.filter(e=>\"pending\"!==e.status);u(e)}})()},[p,b]),Object(n.useEffect)(()=>{s.current=o},[o]),Object(n.useEffect)(()=>{const e=x.getSocket(l.companyId);return e.on(\"ready\",()=>e.emit(\"joinNotification\")),e.on(`company-${l.companyId}-ticket`,e=>{\"updateUnread\"!==e.action&&\"delete\"!==e.action||(u(a=>{const t=a.findIndex(a=>a.id===e.ticketId);return-1!==t?(a.splice(t,1),[...a]):a}),E(a=>{const t=a.findIndex(a=>a.tag===String(e.ticketId));return-1!==t?(a[t].close(),a.splice(t,1),[...a]):a}))}),e.on(`company-${l.companyId}-appMessage`,e=>{var a;if(\"create\"===e.action&&!e.message.fromMe&&\"pending\"!==e.ticket.status&&(!e.message.read||\"pending\"===e.ticket.status)&&(e.ticket.userId===(null===l||void 0===l?void 0:l.id)||!e.ticket.userId)&&((null===l||void 0===l||null===(a=l.queues)||void 0===a?void 0:a.some(a=>a.id===e.ticket.queueId))||!e.ticket.queueId)){u(a=>{const t=a.findIndex(a=>a.id===e.ticket.id);return-1!==t?(a[t]=e.ticket,[...a]):[e.ticket,...a]});if(e.message.ticketId===s.current&&\"visible\"===document.visibilityState||e.ticket.userId&&e.ticket.userId!==(null===l||void 0===l?void 0:l.id)||e.ticket.isGroup)return;C(e)}}),()=>{e.disconnect()}},[l,p,x]);const C=e=>{const{message:a,contact:t,ticket:n}=e,r={body:`${a.body} - ${Object(Ca.a)(new Date,\"HH:mm\")}`,icon:t.urlPicture,tag:n.id,renotify:!0},l=new Notification(`${Fe.a.t(\"tickets.notification.message\")} ${t.name}`,r);l.onclick=e=>{e.preventDefault(),window.focus(),y.current.push(\"/tickets/\"+n.uuid)},E(e=>{const a=e.findIndex(e=>e.tag===l.tag);return-1!==a?(e[a]=l,[...e]):[l,...e]}),h.current()},A=()=>{d(!1)},S=e=>{let{children:a}=e;return r.a.createElement(\"div\",{onClick:A},a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{onClick:()=>{d(e=>!e)},ref:i,\"aria-label\":\"Open Notifications\",color:\"inherit\",style:{color:\"white\"}},r.a.createElement(re.a,{overlap:\"rectangular\",badgeContent:m.length,color:\"secondary\"},r.a.createElement(wa.a,null))),r.a.createElement(Sa.a,{disableScrollLock:!0,open:c,anchorEl:i.current,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},classes:{paper:a.popoverPaper},onClose:A},r.a.createElement(B.a,{dense:!0,className:a.tabContainer},0===m.length?r.a.createElement(ee.a,null,r.a.createElement(te.a,null,Fe.a.t(\"notifications.noTickets\"))):m.map(e=>r.a.createElement(S,{key:e.id},r.a.createElement(Tn,{ticket:e}))))))},Rn=t(517),Dn=t.n(Rn),Ln=t(622),qn=t.n(Ln),Wn=t(721);const Fn=Object(D.a)(e=>({tabContainer:{padding:e.spacing(2)},popoverPaper:{width:\"100%\",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down(\"sm\")]:{maxWidth:270}},noShadow:{boxShadow:\"none !important\"},icons:{color:\"#fff\"},customBadge:{backgroundColor:\"#f44336\",color:\"#fff\"}}));var Bn=e=>{let{volume:a,setVolume:t}=e;const l=Fn(),o=Object(n.useRef)(),[s,i]=Object(n.useState)(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{className:l.icons,onClick:()=>{i(e=>!e)},ref:o,\"aria-label\":\"Open Notifications\"},r.a.createElement(Dn.a,{color:\"inherit\"})),r.a.createElement(Sa.a,{disableScrollLock:!0,open:s,anchorEl:o.current,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},classes:{paper:l.popoverPaper},onClose:()=>{i(!1)}},r.a.createElement(B.a,{dense:!0,className:l.tabContainer},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0},r.a.createElement(qn.a,null)),r.a.createElement(ht.a,{item:!0,xs:!0},r.a.createElement(Wn.a,{value:a,\"aria-labelledby\":\"continuous-slider\",step:.1,min:0,max:1,onChange:(e,a)=>(e=>{t(e),localStorage.setItem(\"volume\",e)})(a)})),r.a.createElement(ht.a,{item:!0},r.a.createElement(Dn.a,null))))))},zn=t(975),Un=t(1114),Hn=t(1115),Vn=t(1182);const Gn=Object(D.a)(e=>({chips:{display:\"flex\",flexWrap:\"wrap\"},chip:{margin:2}}));var _n=e=>{let{selectedQueueIds:a,onChange:t,multiple:l=!0,title:o=Fe.a.t(\"queueSelect.inputLabel\")}=e;const s=Gn(),[i,c]=Object(n.useState)([]);Object(n.useEffect)(()=>{d()},[]);const d=async()=>{try{const{data:e}=await Qe.get(\"/queue\");c(e)}catch(e){Xe(e)}};return r.a.createElement(\"div\",null,r.a.createElement(Cn.a,{fullWidth:!0,margin:\"dense\",variant:\"outlined\"},r.a.createElement(An.a,{shrink:!!a},o),r.a.createElement(Zt.a,{label:o,multiple:l,labelWidth:60,value:a,onChange:e=>{t(e.target.value)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:e=>{if(console.log(\"\\ud83d\\udd0d QueueSelect renderValue - selected:\",e,\"multiple:\",l),!e||null===e)return r.a.createElement(\"span\",{style:{color:\"#999\"}},\"Seleccionar...\");if(l)return r.a.createElement(\"div\",{className:s.chips},(null===e||void 0===e?void 0:e.length)>0?e.map(e=>{const a=i.find(a=>a.id===e);return a?r.a.createElement(Vn.a,{key:e,style:{backgroundColor:a.color},variant:\"outlined\",label:a.name,className:s.chip}):null}):null);{const a=i.find(a=>a.id===e);return console.log(\"\\ud83d\\udd0d Queue encontrado:\",a),a?r.a.createElement(Vn.a,{key:e,variant:\"outlined\",style:{backgroundColor:a.color},label:a.name,className:s.chip}):r.a.createElement(\"span\",{style:{color:\"#999\"}},\"Seleccionar...\")}}},!l&&r.a.createElement(G.a,{value:\"\"},\"Ninguna\"),i.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name)))))};const Kn=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Qn=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),password:Wt.d().min(5,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\").required(\"Required\")});var Yn=e=>{let{open:a,onClose:t,userId:l}=e;const o=Kn(),s={name:\"\",email:\"\",password:\"\",profile:\"user\",allTicket:\"desabled\"},{user:i}=Object(n.useContext)(ra),[c,d]=Object(n.useState)(s),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),{loading:f,whatsApps:h}=Ze(),v=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{v.current=!1},[]),Object(n.useEffect)(()=>{v.current&&(async()=>{if(l)try{const{data:a}=await Qe.get(\"/users/\"+l);if(v.current){var e;d(e=>({...e,...a}));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);u(t),g(a.whatsappId?a.whatsappId:\"\")}}catch(a){v.current&&Xe(a)}})()},[l,a]);const y=()=>{t(),d(s)};return r.a.createElement(\"div\",{className:o.root},r.a.createElement(at.a,{open:a,onClose:y,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"userModal.title.edit\"):\"\"+Fe.a.t(\"userModal.title.add\")),r.a.createElement(Ft.e,{initialValues:c,enableReinitialize:!0,validationSchema:Qn,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,whatsappId:p,queueIds:m,allTicket:e.allTicket};try{l?await Qe.put(\"/users/\"+l,a):await Qe.post(\"/users\",a),P.b.success(Fe.a.t(\"userModal.success\"))}catch(t){Xe(t)}y()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:o.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"userModal.form.name\"),autoFocus:!0,name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,name:\"password\",variant:\"outlined\",margin:\"dense\",fullWidth:!0,label:Fe.a.t(\"userModal.form.password\"),error:a.password&&Boolean(t.password),helperText:a.password&&t.password,type:E?\"text\":\"password\",InputProps:{endAdornment:r.a.createElement(zn.a,{position:\"end\"},r.a.createElement(W.a,{\"aria-label\":\"toggle password visibility\",onClick:()=>b(e=>!e)},E?r.a.createElement(Un.a,null):r.a.createElement(Hn.a,null)))}})),r.a.createElement(\"div\",{className:o.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"userModal.form.email\"),name:\"email\",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Cn.a,{variant:\"outlined\",className:o.formControl,margin:\"dense\"},r.a.createElement(ca,{role:i.profile,perform:\"user-modal:editProfile\",yes:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(An.a,{id:\"profile-selection-input-label\"},Fe.a.t(\"userModal.form.profile\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"userModal.form.profile\"),name:\"profile\",labelId:\"profile-selection-label\",id:\"profile-selection\",required:!0},r.a.createElement(G.a,{value:\"admin\"},\"Admin\"),r.a.createElement(G.a,{value:\"user\"},\"User\")))}))),r.a.createElement(ca,{role:i.profile,perform:\"user-modal:editQueues\",yes:()=>r.a.createElement(_n,{selectedQueueIds:m,onChange:e=>u(e)})}),r.a.createElement(ca,{role:i.profile,perform:\"user-modal:editProfile\",yes:()=>r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",className:o.maxWidth,fullWidth:!0},r.a.createElement(An.a,null,Fe.a.t(\"userModal.form.whatsapp\")),r.a.createElement(Ft.b,{as:Zt.a,value:p,onChange:e=>g(e.target.value),label:Fe.a.t(\"userModal.form.whatsapp\")},r.a.createElement(G.a,{value:\"\"},\"\\xa0\"),h.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))}),r.a.createElement(ca,{role:i.profile,perform:\"user-modal:editProfile\",yes:()=>!f&&r.a.createElement(\"div\",{className:o.textField},r.a.createElement(Cn.a,{variant:\"outlined\",className:o.maxWidth,margin:\"dense\",fullWidth:!0},r.a.createElement(r.a.Fragment,null,r.a.createElement(An.a,{id:\"profile-selection-input-label\"},Fe.a.t(\"userModal.form.allTicket\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"allTicket.form.viewTags\"),name:\"allTicket\",labelId:\"allTicket-selection-label\",id:\"allTicket-selection\",required:!0},r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"userModal.form.allTicketEnabled\")),r.a.createElement(G.a,{value:\"desabled\"},Fe.a.t(\"userModal.form.allTicketDesabled\"))))))})),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:y,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"userModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:o.btnWrapper},l?\"\"+Fe.a.t(\"userModal.buttons.okEdit\"):\"\"+Fe.a.t(\"userModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress}))))})))},Xn=t(968);const Jn=Object(D.a)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:\"#fff\"}}));var Zn=()=>{const e=Jn();return r.a.createElement(Xn.a,{className:e.backdrop,open:!0},r.a.createElement(Ba.a,{color:\"inherit\"}))},$n=t(623),er=t.n($n),ar=t(1116);const tr=Object(D.a)(e=>({mainPaper:{flex:1,maxHeight:3e3,maxWidth:5e3,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));function nr(e){let{announcement:a,open:t,handleClose:n}=e;return r.a.createElement(at.a,{open:t,onClose:()=>n(),\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},r.a.createElement(bt.a,{id:\"alert-dialog-title\"},a.title),r.a.createElement(Et.a,null,a.mediaPath&&r.a.createElement(\"div\",{style:{border:\"1px solid #f1f1f1\",margin:\"0 auto 20px\",textAlign:\"center\",width:\"400px\",height:300,backgroundImage:`url(${l=a.mediaPath,\"http://localhost:8080/public/\"+l})`,backgroundRepeat:\"no-repeat\",backgroundSize:\"contain\",backgroundPosition:\"center\"}}),r.a.createElement(ar.a,{id:\"alert-dialog-description\"},a.text)),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:()=>n(),color:\"primary\",autoFocus:!0},Fe.a.t(\"common.close\"))));var l}const rr=(e,a)=>{if(\"LOAD_ANNOUNCEMENTS\"===a.type){const t=a.payload,n=[];return Object(Ye.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_ANNOUNCEMENTS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_ANNOUNCEMENT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]};function lr(){const e=tr(),[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)(null),[s,i]=Object(n.useState)(1),[c,d]=Object(n.useState)(!1),[m]=Object(n.useState)(\"\"),[u,p]=Object(n.useReducer)(rr,[]),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)({}),[h,y]=Object(n.useState)(!1),x=Object(n.useContext)(v);Object(n.useEffect)(()=>{p({type:\"RESET\"}),i(1)},[m]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{C()},500);return()=>clearTimeout(e)},[m,s]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=x.getSocket(e);return a?(a.on(\"company-announcement\",e=>{\"update\"!==e.action&&\"create\"!==e.action||(p({type:\"UPDATE_ANNOUNCEMENTS\",payload:e.record}),E(!1)),\"delete\"===e.action&&p({type:\"DELETE_ANNOUNCEMENT\",payload:+e.id})}),()=>{a.disconnect()}):()=>{}},[x]);const C=async()=>{try{const{data:e}=await Qe.get(\"/announcements/\",{params:{searchParam:m,pageNumber:s}});p({type:\"LOAD_ANNOUNCEMENTS\",payload:e.records}),d(e.hasMore),t(!1)}catch(e){Xe(e)}},A=Boolean(l),S=A?\"simple-popover\":void 0;return r.a.createElement(\"div\",null,r.a.createElement(nr,{announcement:b,open:h,handleClose:()=>y(!1)}),r.a.createElement(W.a,{variant:\"contained\",\"aria-describedby\":S,onClick:e=>{o(e.currentTarget),E(!0)},style:{color:\"white\"}},r.a.createElement(re.a,{color:\"secondary\",variant:\"dot\",invisible:g||u.length<1},r.a.createElement(er.a,null))),r.a.createElement(Sa.a,{id:S,open:A,anchorEl:l,onClose:()=>{o(null)},anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"}},r.a.createElement(xt.a,{variant:\"outlined\",onScroll:e=>{if(!c||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(t+100)<r&&i(e=>e+1)},className:e.mainPaper},r.a.createElement(B.a,{component:\"nav\",\"aria-label\":\"main mailbox folders\",style:{minWidth:300}},Object(Ye.isArray)(u)&&u.map((e,a)=>{return r.a.createElement(ee.a,{key:a,style:{border:\"1px solid #eee\",borderLeft:(n=e.priority,1===n?\"4px solid #b81111\":2===n?\"4px solid orange\":3===n?\"4px solid grey\":void 0),cursor:\"pointer\"},onClick:()=>(f(e),y(!0),void o(null))},e.mediaPath&&r.a.createElement(Na.a,null,r.a.createElement(Ia.a,{alt:e.mediaName,src:(t=e.mediaPath,\"http://localhost:8080/public/\"+t)})),r.a.createElement(te.a,{primary:e.title,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"span\",style:{fontSize:12}},ta()(e.createdAt).format(\"DD/MM/YYYY\")),r.a.createElement(\"span\",{style:{marginTop:5,display:\"block\"}}),r.a.createElement(H.a,{component:\"span\",variant:\"body2\"},e.text))}));var t,n}),Object(Ye.isArray)(u)&&0===u.length&&r.a.createElement(te.a,{primary:Fe.a.t(\"notifications.noRecords\")})))))}var or=t(243),sr=t.n(or);function ir(){return{dateToClient:function(e){return sr()(e).isValid()?sr()(e).format(\"DD/MM/YYYY\"):e},datetimeToClient:function(e){if(sr()(e).isValid()){const a=localStorage.getItem(\"timezone\")||\"America/Lima\";return sr()(e).tz(a).format(\"DD/MM/YYYY HH:mm\")}return e},dateToDatabase:function(e){return sr()(e,\"DD/MM/YYYY\").isValid()?sr()(e).format(\"YYYY-MM-DD HH:mm:ss\"):e}}}var cr=t(624),dr=t.n(cr);const mr=Object(D.a)(e=>({mainPaper:{flex:1,maxHeight:300,maxWidth:500,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}})),ur=(e,a)=>{if(\"LOAD_CHATS\"===a.type){const t=a.payload,n=[];return Object(Ye.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_CHATS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_CHAT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[];if(\"CHANGE_CHAT\"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};function pr(){const e=mr(),{user:a}=Object(n.useContext)(ra),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(null),[i,c]=Object(n.useState)(1),[d,m]=Object(n.useState)(!1),[u]=Object(n.useState)(\"\"),[p,g]=Object(n.useReducer)(ur,[]),[E,b]=Object(n.useState)(!0),{datetimeToClient:f}=ir(),[h]=Object(Aa.a)(dr.a),y=Object(n.useRef)(),x=Object(n.useRef)(!0),C=Object(n.useContext)(v);Object(n.useEffect)(()=>()=>{x.current=!1},[]),Object(n.useEffect)(()=>{y.current=h,\"Notification\"in window?Notification.requestPermission():console.log(\"This browser doesn't support notifications\")},[h]),Object(n.useEffect)(()=>{x.current&&(g({type:\"RESET\"}),c(1))},[u]),Object(n.useEffect)(()=>{if(x.current){l(!0);const e=setTimeout(()=>{x.current&&A()},500);return()=>clearTimeout(e)}},[u,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),t=C.getSocket(e);if(!t)return()=>{};const n=e=>{if(x.current){if(\"new-message\"===e.action){g({type:\"CHANGE_CHAT\",payload:e});e.newMessage.chat.users.map(e=>e.userId).includes(a.id)&&e.newMessage.senderId!==a.id&&y.current()}\"update\"===e.action&&g({type:\"CHANGE_CHAT\",payload:e})}};return t.on(`company-${e}-chat`,n),()=>{t&&x.current&&t.off(`company-${e}-chat`,n)}},[C,a.id]),Object(n.useEffect)(()=>{if(x.current){let e=0;if(p.length>0)for(let t of p)for(let n of t.users)n.userId===a.id&&(e+=n.unreads);b(!(e>0))}},[p,a.id]);const A=async()=>{try{const{data:e}=await Qe.get(\"/chats/\",{params:{searchParam:u,pageNumber:i}});x.current&&(g({type:\"LOAD_CHATS\",payload:e.records}),m(e.hasMore),l(!1))}catch(e){x.current&&Xe(e)}},S=Boolean(o),O=S?\"simple-popover\":void 0;return r.a.createElement(\"div\",null,r.a.createElement(W.a,{\"aria-describedby\":O,variant:\"contained\",color:E?\"default\":\"inherit\",onClick:e=>{s(e.currentTarget),b(!0)},style:{color:\"white\"}},r.a.createElement(re.a,{color:\"secondary\",variant:\"dot\",invisible:E},r.a.createElement(Re.a,null))),r.a.createElement(Sa.a,{id:O,open:S,anchorEl:o,onClose:()=>{s(null)},anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"}},r.a.createElement(xt.a,{variant:\"outlined\",onScroll:e=>{if(!d||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(a+100)<r&&c(e=>e+1)},className:e.mainPaper},r.a.createElement(B.a,{component:\"nav\",\"aria-label\":\"main mailbox folders\",style:{minWidth:300}},Object(Ye.isArray)(p)&&p.map((e,a)=>r.a.createElement(ee.a,{key:a,style:{background:a%2===0?\"#ededed\":\"white\",border:\"1px solid #eee\",cursor:\"pointer\"},onClick:()=>{return a=e,void(window.location.href=\"/chats/\"+a.uuid);var a},button:!0},r.a.createElement(te.a,{primary:e.lastMessage,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"span\",style:{fontSize:12}},f(e.updatedAt)),r.a.createElement(\"span\",{style:{marginTop:5,display:\"block\"}}))}))),Object(Ye.isArray)(p)&&0===p.length&&r.a.createElement(te.a,{primary:Fe.a.t(\"mainDrawer.appBar.notRegister\")})))))}var gr=t(628),Er=t.n(gr),br=t(627),fr=t.n(br);var hr=e=>{const a=Object(n.useRef)(null),t=Object(n.useRef)(null);Object(n.useEffect)(()=>{e&&(t.current=document.activeElement)},[e]);const r=Object(n.useCallback)(()=>{if(a.current){const e=a.current.querySelector(\":focus\");e&&e.blur()}document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),document.body.focus(),document.body.blur()},[]),l=Object(n.useCallback)(()=>{r(),setTimeout(()=>{t.current&&t.current.focus&&document.contains(t.current)&&!t.current.hasAttribute(\"aria-hidden\")?t.current.focus():r()},50)},[r]),o=Object(n.useCallback)(()=>{r(),t.current=null},[r]),s=Object(n.useCallback)(e=>{e&&e.target&&e.target.blur(),r(),setTimeout(()=>{l()},0)},[l,r]);return{modalRef:a,handleClose:s,handleExited:o}};const vr=Object(D.a)(e=>({dialog:{minWidth:400},section:{marginBottom:e.spacing(2)},sectionTitle:{fontWeight:\"bold\",marginBottom:e.spacing(1)},chip:{margin:e.spacing(.5)},status:{display:\"flex\",alignItems:\"center\",marginBottom:e.spacing(2)},statusText:{marginLeft:e.spacing(1)}}));var yr=e=>{let{open:a,onClose:t}=e;const l=vr(),[o,s]=Object(n.useState)({}),[i,c]=Object(n.useState)(!1),{modalRef:d,handleClose:m,handleExited:u}=hr(a);Object(n.useEffect)(()=>{if(a){const e=j.config.get();s(e),c(e.enableConsole),j.debug(\"\\ud83d\\udd27 Modal de configuraci\\xf3n de logs abierto\"),j.sw.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Service Worker\"),j.socket.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Socket\"),j.whatsapp.debug(\"\\ud83e\\uddea LOG DE PRUEBA - WhatsApp\"),j.transferModal.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Transfer Modal\"),j.dashboard.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Dashboard\")}},[a]);const p=e=>{const a={...o,[\"enable\"+e]:!o[\"enable\"+e]};s(a),j.config.set(a),j.debug(`\\ud83d\\udd27 Categor\\xeda ${e} ${a[\"enable\"+e]?\"activada\":\"desactivada\"}`)},g=e=>{m(e),t()};return r.a.createElement(at.a,{ref:d,open:a,onClose:g,className:l.dialog,disableEnforceFocus:!1,disableAutoFocus:!1,disableRestoreFocus:!1,keepMounted:!1,disablePortal:!1,hideBackdrop:!1,disableScrollLock:!1,disableEscapeKeyDown:!1,fullWidth:!1,maxWidth:\"sm\",TransitionProps:{onExited:u},PaperProps:{\"aria-modal\":\"true\",role:\"dialog\",\"aria-labelledby\":\"logger-config-title\"}},r.a.createElement(bt.a,{id:\"logger-config-title\"},\"Configuraci\\xf3n de Logs\"),r.a.createElement(Et.a,null,r.a.createElement(ja.a,{className:l.status},r.a.createElement(Vn.a,{label:(()=>{if(!i)return\"Logs deshabilitados\";const e=Object.keys(o).filter(e=>e.startsWith(\"enable\")&&\"enableConsole\"!==e&&o[e]).length;return 0===e?\"Logs habilitados pero sin categor\\xedas activas\":e+\" categor\\xeda(s) activa(s)\"})(),color:(()=>{if(!i)return\"default\";return 0===Object.keys(o).filter(e=>e.startsWith(\"enable\")&&\"enableConsole\"!==e&&o[e]).length?\"secondary\":\"primary\"})(),size:\"small\"})),r.a.createElement(F.a,{style:{marginBottom:16}}),r.a.createElement(ja.a,{className:l.section},r.a.createElement(H.a,{className:l.sectionTitle},\"Control General\"),r.a.createElement(Gt.a,{control:r.a.createElement(_t.a,{checked:i,onChange:()=>{const e={...o,enableConsole:!i};s(e),c(!i),j.config.set(e)},color:\"primary\"}),label:\"Habilitar logs en consola\"})),r.a.createElement(ja.a,{className:l.section},r.a.createElement(H.a,{className:l.sectionTitle},\"Categor\\xedas de Logs\"),r.a.createElement(Gt.a,{control:r.a.createElement(_t.a,{checked:o.enableServiceWorker||!1,onChange:()=>p(\"ServiceWorker\"),disabled:!i,color:\"primary\"}),label:\"Service Worker\"}),r.a.createElement(Gt.a,{control:r.a.createElement(_t.a,{checked:o.enableSocket||!1,onChange:()=>p(\"Socket\"),disabled:!i,color:\"primary\"}),label:\"Socket/WebSocket\"}),r.a.createElement(Gt.a,{control:r.a.createElement(_t.a,{checked:o.enableWhatsApp||!1,onChange:()=>p(\"WhatsApp\"),disabled:!i,color:\"primary\"}),label:\"WhatsApp\"}),r.a.createElement(Gt.a,{control:r.a.createElement(_t.a,{checked:o.enableTransferModal||!1,onChange:()=>p(\"TransferModal\"),disabled:!i,color:\"primary\"}),label:\"Modal de Transferencia\"}),r.a.createElement(Gt.a,{control:r.a.createElement(_t.a,{checked:o.enableDashboard||!1,onChange:()=>p(\"Dashboard\"),disabled:!i,color:\"primary\"}),label:\"Dashboard\"})),r.a.createElement(ja.a,{className:l.section},r.a.createElement(H.a,{variant:\"body2\",color:\"textSecondary\"},\"Los cambios se aplican inmediatamente. Los logs se guardan en localStorage.\"))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:()=>{localStorage.removeItem(\"loggerConfig\");const e=j.config.get();s(e),c(e.enableConsole),j.debug(\"\\ud83d\\uddd1\\ufe0f localStorage limpiado y configuraci\\xf3n reseteada\")},color:\"secondary\",style:{marginRight:\"auto\"}},\"Limpiar Storage\"),r.a.createElement(Fa.a,{onClick:()=>{j.config.reset();const e=j.config.get();s(e),c(e.enableConsole),j.debug(\"\\ud83d\\udd04 Configuraci\\xf3n reseteada a valores por defecto\")},color:\"secondary\"},\"Restablecer\"),r.a.createElement(Fa.a,{onClick:g,color:\"primary\",autoFocus:!1,tabIndex:-1},\"Cerrar\")))},xr=t(630),Cr=t.n(xr);const Ar=Object(D.a)(e=>({root:{display:\"flex\",height:\"100vh\",[e.breakpoints.down(\"sm\")]:{height:\"calc(100vh - 56px)\"},backgroundColor:e.palette.fancyBackground,\"& .MuiButton-outlinedPrimary\":{color:(e.mode,\"#FFF\"),backgroundColor:\"light\"===e.mode?\"#1e3a8a\":\"#1f2937\"},\"& .MuiTab-textColorPrimary.Mui-selected\":{color:\"light\"===e.mode?\"#1e3a8a\":\"#FFF\"}},avatar:{width:\"100%\"},toolbar:{paddingRight:24,color:e.palette.dark.main,background:e.palette.barraSuperior},toolbarIcon:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",padding:\"0 8px\",minHeight:\"48px\",[e.breakpoints.down(\"sm\")]:{height:\"48px\"}},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create([\"width\",\"margin\"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:\"calc(100% - 240px)\",transition:e.transitions.create([\"width\",\"margin\"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),[e.breakpoints.down(\"sm\")]:{display:\"none\"}},menuButton:{marginRight:36},menuButtonHidden:{display:\"none\"},title:{flexGrow:1,fontSize:14,color:\"white\"},drawerPaper:{position:\"relative\",whiteSpace:\"nowrap\",width:240,transition:e.transitions.create(\"width\",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),[e.breakpoints.down(\"sm\")]:{width:\"100%\"},...e.scrollbarStylesSoft},drawerPaperClose:{overflowX:\"hidden\",transition:e.transitions.create(\"width\",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up(\"sm\")]:{width:e.spacing(9)},[e.breakpoints.down(\"sm\")]:{width:\"100%\"}},appBarSpacer:{minHeight:\"48px\"},content:{flex:1,overflow:\"auto\"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\"},containerWithScroll:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles},NotificationsPopOver:{},logo:{width:\"80%\",height:\"auto\",maxWidth:180,[e.breakpoints.down(\"sm\")]:{width:\"auto\",height:\"80%\",maxWidth:180},logo:e.logo}}));var Sr=e=>{var a,t,l,o;let{children:s,themeToggle:i}=e;const c=Ar(),[d,m]=Object(n.useState)(!1),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(!1),[h,y]=Object(n.useState)(!1),{loading:x}=Object(n.useContext)(ra),[C,A]=Object(n.useState)(!1),[S,O]=Object(n.useState)(\"permanent\"),{user:w}=Object(n.useContext)(ra),k=Object(L.a)(),{colorMode:T}=Object(n.useContext)(p),I=Object(u.a)(k.breakpoints.up(\"sm\")),[j,N]=Object(n.useState)(localStorage.getItem(\"volume\")||1),{dateToClient:M}=ir(),P=Object(n.useContext)(v);Object(n.useEffect)(()=>{document.body.offsetWidth>1200&&A(!0)},[]),Object(n.useEffect)(()=>{document.body.offsetWidth<600?O(\"temporary\"):O(\"permanent\")},[C]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=localStorage.getItem(\"userId\"),t=P.getSocket(e);t.on(`company-${e}-auth`,e=>{e.user.id===+a&&(Xe(\"Sua conta foi acessada em outro computador.\"),setTimeout(()=>{localStorage.clear(),window.location.reload()},1e3))}),t.emit(\"userStatus\");const n=setInterval(()=>{t.emit(\"userStatus\")},3e5);return()=>{t.disconnect(),clearInterval(n)}},[P]);const D=()=>{E(null),f(!1)};if(x)return r.a.createElement(Zn,null);const _=\"http://localhost:8080/public/logotipos/interno.png?r=\"+Math.random();return r.a.createElement(\"div\",{className:c.root},r.a.createElement(q.a,{variant:S,className:C?c.drawerPaper:c.drawerPaperClose,classes:{paper:Object(R.a)(c.drawerPaper,!C&&c.drawerPaperClose)},open:C},r.a.createElement(\"div\",{className:c.toolbarIcon},r.a.createElement(\"img\",{src:_,style:{margin:\"0 auto\",width:\"50%\"},alt:\"\"+Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:\"http://localhost:8080\"}).REACT_APP_NAME_SYSTEM}),r.a.createElement(W.a,{onClick:()=>A(!C)},r.a.createElement(Y.a,null))),r.a.createElement(F.a,null),r.a.createElement(B.a,{className:c.containerWithScroll},r.a.createElement(xa,{drawerClose:()=>{document.body.offsetWidth<600&&A(!1)},collapsed:!C})),r.a.createElement(F.a,null)),r.a.createElement(Yn,{open:d,onClose:()=>m(!1),userId:null===w||void 0===w?void 0:w.id}),r.a.createElement(yr,{open:h,onClose:()=>y(!1)}),r.a.createElement(z.a,{position:\"absolute\",className:Object(R.a)(c.appBar,C&&c.appBarShift),color:\"primary\"},r.a.createElement(U.a,{variant:\"dense\",className:c.toolbar},r.a.createElement(W.a,{edge:\"start\",variant:\"contained\",\"aria-label\":\"open drawer\",onClick:()=>A(!C),className:Object(R.a)(c.menuButton,C&&c.menuButtonHidden)},r.a.createElement(K.a,null)),r.a.createElement(H.a,{component:\"h2\",variant:\"h6\",color:\"inherit\",noWrap:!0,className:c.title},I&&\"admin\"===(null===w||void 0===w?void 0:w.profile)&&(null===w||void 0===w||null===(a=w.company)||void 0===a?void 0:a.dueDate)?r.a.createElement(r.a.Fragment,null,\"\\xa1Hola \",r.a.createElement(\"b\",null,w.name),\", Bienvenido a \",r.a.createElement(\"b\",null,null===w||void 0===w||null===(t=w.company)||void 0===t?void 0:t.name),\"! (Activo hasta \",M(null===w||void 0===w||null===(l=w.company)||void 0===l?void 0:l.dueDate),\")\"):r.a.createElement(r.a.Fragment,null,\"\\xa1Hola \",r.a.createElement(\"b\",null,w.name),\", Bienvenido a \",r.a.createElement(\"b\",null,null===w||void 0===w||null===(o=w.company)||void 0===o?void 0:o.name),\"!\")),r.a.createElement(W.a,{edge:\"start\",onClick:()=>{T.toggleColorMode()}},\"dark\"===k.mode?r.a.createElement(fr.a,{style:{color:\"white\"}}):r.a.createElement(Er.a,{style:{color:\"white\"}})),r.a.createElement(Bn,{setVolume:N,volume:j}),r.a.createElement(W.a,{onClick:()=>{window.location.reload(!1)},\"aria-label\":Fe.a.t(\"mainDrawer.appBar.refresh\"),color:\"inherit\"},r.a.createElement($.a,{style:{color:\"white\"}})),r.a.createElement(W.a,{onClick:()=>y(!0),\"aria-label\":\"Configuraci\\xf3n de Logs\",color:\"inherit\",title:\"Configuraci\\xf3n de Logs\"},r.a.createElement(Cr.a,{style:{color:\"white\"}})),w.id&&r.a.createElement(Pn,{volume:j}),r.a.createElement(lr,null),r.a.createElement(pr,null),r.a.createElement(\"div\",null,r.a.createElement(W.a,{\"aria-label\":\"account of current user\",\"aria-controls\":\"menu-appbar\",\"aria-haspopup\":\"true\",onClick:e=>{E(e.currentTarget),f(!0)},variant:\"contained\",style:{color:\"white\"}},r.a.createElement(J.a,null)),r.a.createElement(V.a,{id:\"menu-appbar\",anchorEl:g,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:b,onClose:D},r.a.createElement(G.a,{onClick:()=>{m(!0),D()}},Fe.a.t(\"mainDrawer.appBar.user.profile\")))))),r.a.createElement(\"main\",{className:c.content},r.a.createElement(\"div\",{className:c.appBarSpacer}),s||null))},Or=t(1140),wr=t(716),kr=t(636),Tr=t.n(kr),Ir=t(637),jr=t.n(Ir),Nr=t(638),Mr=t.n(Nr),Pr=t(640),Rr=t.n(Pr),Dr=t(639),Lr=t.n(Dr),qr=t(641),Wr=t.n(qr),Fr=t(642),Br=t.n(Fr),zr=t(466),Ur=t(1122),Hr=t(1124),Vr=t(1120),Gr=t(1121),_r=t(1123),Kr=t(1119),Qr=t(467),Yr=t(399),Xr=t.n(Yr),Jr=t(1188);const Zr=Object(D.a)(e=>({on:{color:Pa.a[600],fontSize:\"20px\"},off:{color:Qr.a[600],fontSize:\"20px\"},pointer:{cursor:\"pointer\"}}));function $r(e){let{rating:a}=e;const t=null===a?0:Math.trunc(a);return r.a.createElement(Jr.a,{defaultValue:t,max:3,readOnly:!0})}function el(e){const{loading:a,attendants:t}=e,n=Zr();return a?r.a.createElement(mn.a,{variant:\"rect\",height:150}):r.a.createElement(Gr.a,{component:xt.a},r.a.createElement(Ur.a,null,r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,null,Fe.a.t(\"dashboard.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"dashboard.table.assessments\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"dashboard.table.avgServiceTime\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"dashboard.table.status\")))),r.a.createElement(Hr.a,null,t.map((e,a)=>{return r.a.createElement(Kr.a,{key:a},r.a.createElement(Vr.a,null,e.name),r.a.createElement(Vr.a,{align:\"center\",title:\"1 - Insatisfeito, 2 - Satisfeito, 3 - Muito Satisfeito\",className:n.pointer},r.a.createElement($r,{rating:e.rating})),r.a.createElement(Vr.a,{align:\"center\"},(t=e.avgSupportTime,ta()().startOf(\"day\").add(t,\"minutes\").format(\"HH[h] mm[m]\"))),r.a.createElement(Vr.a,{align:\"center\"},e.online?r.a.createElement(wt.a,{className:n.on}):r.a.createElement(Xr.a,{className:n.off})));var t}))))}var al=()=>({find:async e=>{const{data:a}=await Qe.request({url:\"/dashboard\",method:\"GET\",params:e});return a},getReport:async e=>{const{data:a}=await Qe.request({url:\"/ticket/reports\",method:\"GET\",params:e});return a}});var tl=e=>{let{searchParam:a,pageNumber:t,date:r,dateStart:l,dateEnd:o}=e;const[s,i]=Object(n.useState)(!0),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(0);return Object(n.useEffect)(()=>{i(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/contacts\",{params:{searchParam:a,pageNumber:t,date:r,dateStart:l,dateEnd:o}});u(e.contacts),d(e.hasMore),g(e.count),i(!1)}catch(e){i(!1),Xe(e)}})()},500);return()=>clearTimeout(e)},[a,t,r,l,o]),{contacts:m,loading:s,hasMore:c,count:p}},nl=t(57),rl=t(443),ll=t(704),ol=t(1170),sl=t(292),il=t(634),cl=t(1165),dl=t(1173),ml=t(1166),ul=t(1177);t(573);nl.f.register(nl.e,nl.j,nl.c,nl.p,nl.q,nl.h,ll.a);const pl={responsive:!0,plugins:{legend:{position:\"top\",display:!1},title:{display:!0,text:\"Gr\\xe1fico de Conversas\",position:\"left\"},datalabels:{display:!0,anchor:\"start\",offset:-30,align:\"start\",color:\"#fff\",textStrokeColor:\"#000\",textStrokeWidth:2,font:{size:20,weight:\"bold\"}}}},gl=()=>{const e=new Date;e.setDate(e.getDate()-7);const[a,t]=Object(n.useState)(e),[l,o]=Object(n.useState)(new Date),[s,i]=Object(n.useState)({data:[]}),[c,d]=Object(n.useState)(!1),m=localStorage.getItem(\"companyId\"),u=Object(n.useCallback)(async()=>{try{d(!0);const{data:e}=await Qe.get(`/dashboard/ticketsUsers?initialDate=${Object(Ca.a)(a,\"yyyy-MM-dd\")}&finalDate=${Object(Ca.a)(l,\"yyyy-MM-dd\")}&companyId=${m}`);i(e)}catch(e){console.error(\"Error cargando datos de usuarios:\",e),i({data:[]}),e.response&&404!==e.response.status&&P.b.error(Fe.a.t(\"dashboard.errors.errorGettingConversationInfo\"))}finally{d(!1)}},[a,l,m]);Object(n.useEffect)(()=>{u()},[u]);const p={labels:s&&(null===s||void 0===s?void 0:s.data.length)>0&&(null===s||void 0===s?void 0:s.data.map(e=>e.nome)),datasets:[{data:(null===s||void 0===s?void 0:s.data.length)>0&&(null===s||void 0===s?void 0:s.data.map((e,a)=>e.quantidade)),backgroundColor:\"#2DDD7F\"}]};return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"h2\",variant:\"h6\",color:\"primary\",gutterBottom:!0},Fe.a.t(\"dashboard.cards.totalConversationsByUsers\")),r.a.createElement(dl.a,{direction:\"row\",spacing:2,alignItems:\"center\",sx:{my:2}},r.a.createElement(il.a,{dateAdapter:ol.a,adapterLocale:sl.a},r.a.createElement(cl.a,{value:a,onChange:e=>{t(e)},label:Fe.a.t(\"dashboard.filters.start\"),textField:e=>r.a.createElement(ml.a,Object.assign({fullWidth:!0},e,{sx:{width:\"20ch\"}}))})),r.a.createElement(il.a,{dateAdapter:ol.a,adapterLocale:sl.a},r.a.createElement(cl.a,{value:l,onChange:e=>{o(e)},label:Fe.a.t(\"dashboard.filters.end\"),textField:e=>r.a.createElement(ml.a,Object.assign({fullWidth:!0},e,{sx:{width:\"20ch\"}}))})),r.a.createElement(ul.a,{className:\"buttonHover\",onClick:u,variant:\"contained\"},Fe.a.t(\"dashboard.filters.filter\"))),c?r.a.createElement(\"div\",{style:{textAlign:\"center\",padding:\"20px\"}},r.a.createElement(H.a,null,\"Cargando datos...\")):r.a.createElement(rl.a,{options:pl,data:p,style:{maxWidth:\"100%\",maxHeight:\"280px\"}}))};nl.f.register(nl.e,nl.j,nl.c,nl.p,nl.q,nl.h);const El={responsive:!0,plugins:{legend:{position:\"top\",display:!1},title:{display:!0,text:\"Gr\\xe1fico de Conversas\",position:\"left\"},datalabels:{display:!0,anchor:\"start\",offset:-30,align:\"start\",color:\"#fff\",textStrokeColor:\"#000\",textStrokeWidth:2,font:{size:20,weight:\"bold\"}}}},bl=()=>{const e=new Date;e.setDate(e.getDate()-7);const[a,t]=Object(n.useState)(e),[l,o]=Object(n.useState)(new Date),[s,i]=Object(n.useState)({data:[],count:0}),[c,d]=Object(n.useState)(!1),m=localStorage.getItem(\"companyId\"),u=Object(n.useCallback)(async()=>{try{d(!0);const{data:e}=await Qe.get(`/dashboard/ticketsDay?initialDate=${Object(Ca.a)(a,\"yyyy-MM-dd\")}&finalDate=${Object(Ca.a)(l,\"yyyy-MM-dd\")}&companyId=${m}`);i(e)}catch(e){console.error(\"Error cargando datos por fecha:\",e),i({data:[],count:0}),e.response&&404!==e.response.status&&P.b.error(Fe.a.t(\"dashboard.errors.errorGettingConversationInfo\"))}finally{d(!1)}},[a,l,m]);Object(n.useEffect)(()=>{u()},[u]);const p={labels:s&&(null===s||void 0===s?void 0:s.data.length)>0&&(null===s||void 0===s?void 0:s.data.map(e=>e.hasOwnProperty(\"horario\")?`De ${e.horario}:00 a ${e.horario}:59`:e.data)),datasets:[{data:(null===s||void 0===s?void 0:s.data.length)>0&&(null===s||void 0===s?void 0:s.data.map((e,a)=>e.total)),backgroundColor:\"#2DDD7F\"}]};return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"h2\",variant:\"h6\",color:\"primary\",gutterBottom:!0},Fe.a.t(\"dashboard.cards.totalAttendances\"),\" (\",null===s||void 0===s?void 0:s.count,\")\"),r.a.createElement(dl.a,{direction:\"row\",spacing:2,alignItems:\"center\",sx:{my:2}},r.a.createElement(il.a,{dateAdapter:ol.a,adapterLocale:sl.a},r.a.createElement(cl.a,{value:a,onChange:e=>{t(e)},label:Fe.a.t(\"dashboard.filters.start\"),textField:e=>r.a.createElement(ml.a,Object.assign({fullWidth:!0},e,{sx:{width:\"20ch\"}}))})),r.a.createElement(il.a,{dateAdapter:ol.a,adapterLocale:sl.a},r.a.createElement(cl.a,{value:l,onChange:e=>{o(e)},label:Fe.a.t(\"dashboard.filters.end\"),textField:e=>r.a.createElement(ml.a,Object.assign({fullWidth:!0},e,{sx:{width:\"20ch\"}}))})),r.a.createElement(ul.a,{className:\"buttonHover\",onClick:u,variant:\"contained\"},Fe.a.t(\"dashboard.filters.filter\"))),c?r.a.createElement(\"div\",{style:{textAlign:\"center\",padding:\"20px\"}},r.a.createElement(H.a,null,\"Cargando datos...\")):r.a.createElement(rl.a,{options:El,data:p,style:{maxWidth:\"100%\",maxHeight:\"280px\"}}))},fl=Object(D.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),paddingLeft:e.spacing(1),paddingRight:e.spacing(2)},fixedHeightPaper:{padding:e.spacing(2),display:\"flex\",flexDirection:\"column\",height:240,overflowY:\"auto\",...e.scrollbarStyles},cardAvatar:{fontSize:\"55px\",color:zr.a[500],backgroundColor:\"#ffffff\",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:\"18px\",color:Ra.a[700]},cardSubtitle:{color:zr.a[600],fontSize:\"14px\"},alignRight:{textAlign:\"right\"},fullWidth:{width:\"100%\"},selectContainer:{width:\"100%\",textAlign:\"left\"},iframeDashboard:{width:\"100%\",height:\"calc(100vh - 64px)\",border:\"none\"},customFixedHeightPaper:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:120},customFixedHeightPaperLg:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\"},card0:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card00:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card1:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card2:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card3:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card4:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card5:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card6:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card7:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card8:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},card9:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:\"100%\",backgroundColor:\"#1e3a8a\",color:\"#ffffff\"},fixedHeightPaper2:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\"}}));var hl=()=>{const e=fl(),[a,t]=Object(n.useState)({}),[l,o]=Object(n.useState)([]),[s,i]=Object(n.useState)(0),[c,d]=Object(n.useState)(1),[m,u]=Object(n.useState)(ta()(\"1\",\"D\").format(\"YYYY-MM-DD\")),[p,g]=Object(n.useState)(ta()().format(\"YYYY-MM-DD\")),[E,b]=Object(n.useState)(!1),{find:f}=al(),{user:h}=Object(n.useContext)(ra);async function v(){b(!0);let e={};s>0&&(e={days:s}),!Object(Ye.isEmpty)(m)&&ta()(m).isValid()&&(e={...e,date_from:ta()(m).format(\"YYYY-MM-DD\")}),!Object(Ye.isEmpty)(p)&&ta()(p).isValid()&&(e={...e,date_to:ta()(p).format(\"YYYY-MM-DD\")}),0===Object.keys(e).length&&(e={days:7});try{const a=await f(e);a&&a.counters?t({avgSupportTime:a.counters.avgSupportTime||0,avgWaitTime:a.counters.avgWaitTime||0,supportHappening:a.counters.supportHappening||0,supportPending:a.counters.supportPending||0,supportFinished:a.counters.supportFinished||0,leads:a.counters.leads||0,totalCompanies:a.counters.totalCompanies||0,totalWhatsappSessions:a.counters.totalWhatsappSessions||0}):t({avgSupportTime:0,avgWaitTime:0,supportHappening:0,supportPending:0,supportFinished:0,leads:0,totalCompanies:0,totalWhatsappSessions:0}),Object(Ye.isArray)(null===a||void 0===a?void 0:a.attendants)?o(a.attendants):o([])}catch(a){console.error(\"Error al cargar datos del dashboard:\",a),P.b.error(Fe.a.t(\"dashboard.errors.loadData\")),t({avgSupportTime:0,avgWaitTime:0,supportHappening:0,supportPending:0,supportFinished:0,leads:0,totalCompanies:0,totalWhatsappSessions:0}),o([])}b(!1)}function y(e){return ta()().startOf(\"day\").add(e,\"minutes\").format(\"HH[h] mm[m]\")}Object(n.useEffect)(()=>{setTimeout(()=>{!async function(){if(1===c){const e=ta()().subtract(7,\"days\").format(\"YYYY-MM-DD\"),a=ta()().format(\"YYYY-MM-DD\");u(e),g(a)}else i(7);await v()}()},1e3)},[]);return r.a.createElement(\"div\",null,r.a.createElement(Or.a,{maxWidth:\"lg\",className:e.container},r.a.createElement(ht.a,{container:!0,spacing:3,justifyContent:\"flex-end\"},r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(Cn.a,{className:e.selectContainer},r.a.createElement(An.a,{id:\"period-selector-label\"},Fe.a.t(\"dashboard.filters.filterType\")),r.a.createElement(Zt.a,{labelId:\"period-selector-label\",value:c,onChange:e=>async function(e){d(e),1===e?i(0):(u(\"\"),g(\"\"))}(e.target.value)},r.a.createElement(G.a,{value:1},Fe.a.t(\"dashboard.filters.dateFilter\")),r.a.createElement(G.a,{value:2},Fe.a.t(\"dashboard.filters.periodFilter\"))),r.a.createElement(wr.a,null,Fe.a.t(\"dashboard.filters.selectPeriod\")))),1===c?r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(Dt.a,{label:Fe.a.t(\"dashboard.filters.initialDate\"),type:\"date\",value:m,onChange:e=>u(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}})),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(Dt.a,{label:Fe.a.t(\"dashboard.filters.finalDate\"),type:\"date\",value:p,onChange:e=>g(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}}))):r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(Cn.a,{className:e.selectContainer},r.a.createElement(An.a,{id:\"period-selector-label\"},Fe.a.t(\"dashboard.filters.period\")),r.a.createElement(Zt.a,{labelId:\"period-selector-label\",id:\"period-selector\",value:s,onChange:e=>async function(e){i(e)}(e.target.value)},r.a.createElement(G.a,{value:0},Fe.a.t(\"dashboard.filters.noSelection\")),r.a.createElement(G.a,{value:3},Fe.a.t(\"dashboard.filters.last3Days\")),r.a.createElement(G.a,{value:7},Fe.a.t(\"dashboard.filters.last7Days\")),r.a.createElement(G.a,{value:15},Fe.a.t(\"dashboard.filters.last15Days\")),r.a.createElement(G.a,{value:30},Fe.a.t(\"dashboard.filters.last30Days\")),r.a.createElement(G.a,{value:60},Fe.a.t(\"dashboard.filters.last60Days\")),r.a.createElement(G.a,{value:90},Fe.a.t(\"dashboard.filters.last90Days\"))),r.a.createElement(wr.a,null,Fe.a.t(\"dashboard.filters.selectPeriod\")))),r.a.createElement(ht.a,{item:!0,xs:12,className:e.alignRight},r.a.createElement(Ua,{loading:E,onClick:()=>v(),variant:\"contained\",color:\"primary\"},Fe.a.t(\"dashboard.filters.filter\"))),h.super&&r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card0,style:{overflow:\"hidden\"},elevation:4},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.activeConnections\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},a.totalWhatsappSessions))),r.a.createElement(ht.a,{item:!0,xs:2},r.a.createElement(Tr.a,{style:{fontSize:100,color:\"#fff\"}}))))),h.super&&r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card00,style:{overflow:\"hidden\"},elevation:4},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.companies\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},a.totalCompanies))),r.a.createElement(ht.a,{item:!0,xs:2},r.a.createElement(jr.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card1,style:{overflow:\"hidden\"},elevation:4},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.inConversation\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},a.supportHappening))),r.a.createElement(ht.a,{item:!0,xs:2},r.a.createElement(Mr.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card2,style:{overflow:\"hidden\"},elevation:6},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.waiting\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},a.supportPending))),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(Lr.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card3,style:{overflow:\"hidden\"},elevation:6},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.finished\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},a.supportFinished))),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(wt.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card4,style:{overflow:\"hidden\"},elevation:6},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.newContacts\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},(e=>{let a={};e&&(a={});const{count:t}=tl(a);return t})(!0)))),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(Rr.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card8,style:{overflow:\"hidden\"},elevation:6},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.avgConversationTime\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},y(a.avgSupportTime)))),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(Wr.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6,md:3},r.a.createElement(xt.a,{className:e.card9,style:{overflow:\"hidden\"},elevation:6},r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",paragraph:!0},Fe.a.t(\"dashboard.cards.avgWaitTime\")),r.a.createElement(ht.a,{item:!0},r.a.createElement(H.a,{component:\"h1\",variant:\"h4\"},y(a.avgWaitTime)))),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(Br.a,{style:{fontSize:100,color:\"#fff\"}}))))),r.a.createElement(ht.a,{item:!0,xs:12},l.length?r.a.createElement(el,{attendants:l,loading:E}):null),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(xt.a,{className:e.fixedHeightPaper2},r.a.createElement(gl,null))),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(xt.a,{className:e.fixedHeightPaper2},r.a.createElement(bl,null))))))},vl=t(1145),yl=t(70),xl=t.n(yl),Cl=t(1168),Al=t(1141),Sl=t(643),Ol=t.n(Sl),wl=t(644),kl=t.n(wl),Tl=t(645),Il=t.n(Tl),jl=t(1142);var Nl=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{dense:!0},r.a.createElement(Na.a,null,r.a.createElement(mn.a,{animation:\"wave\",variant:\"circle\",width:40,height:40})),r.a.createElement(te.a,{primary:r.a.createElement(mn.a,{animation:\"wave\",height:20,width:60}),secondary:r.a.createElement(mn.a,{animation:\"wave\",height:20,width:90})})),r.a.createElement(F.a,{variant:\"inset\"}),r.a.createElement(ee.a,{dense:!0},r.a.createElement(Na.a,null,r.a.createElement(mn.a,{animation:\"wave\",variant:\"circle\",width:40,height:40})),r.a.createElement(te.a,{primary:r.a.createElement(mn.a,{animation:\"wave\",height:20,width:70}),secondary:r.a.createElement(mn.a,{animation:\"wave\",height:20,width:120})})),r.a.createElement(F.a,{variant:\"inset\"}),r.a.createElement(ee.a,{dense:!0},r.a.createElement(Na.a,null,r.a.createElement(mn.a,{animation:\"wave\",variant:\"circle\",width:40,height:40})),r.a.createElement(te.a,{primary:r.a.createElement(mn.a,{animation:\"wave\",height:20,width:60}),secondary:r.a.createElement(mn.a,{animation:\"wave\",height:20,width:90})})),r.a.createElement(F.a,{variant:\"inset\"}));const Ml=Object(D.a)(e=>({ticketsListWrapper:{position:\"relative\",display:\"flex\",height:\"100%\",flexDirection:\"column\",overflow:\"hidden\",borderTopRightRadius:0,borderBottomRightRadius:0},ticketsList:{flex:1,maxHeight:\"100%\",overflowY:\"scroll\",...e.scrollbarStyles,borderTop:\"2px solid rgba(0, 0, 0, 0.12)\"},ticketsListHeader:{color:\"rgb(67, 83, 105)\",zIndex:2,backgroundColor:\"white\",borderBottom:\"1px solid rgba(0, 0, 0, 0.12)\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},ticketsCount:{fontWeight:\"normal\",color:\"rgb(104, 121, 146)\",marginLeft:\"8px\",fontSize:\"14px\"},noTicketsText:{textAlign:\"center\",color:\"rgb(104, 121, 146)\",fontSize:\"14px\",lineHeight:\"1.4\"},noTicketsTitle:{textAlign:\"center\",fontSize:\"16px\",fontWeight:\"600\",margin:\"0px\"},noTicketsDiv:{display:\"flex\",height:\"100px\",margin:40,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"}})),Pl=(e,a)=>{if(\"LOAD_TICKETS\"===a.type){return a.payload.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?(e[t]=a,a.unreadMessages>0&&e.unshift(e.splice(t,1)[0])):e.push(a)}),[...e]}if(\"RESET_UNREAD\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&(e[n].unreadMessages=0),[...e]}if(\"UPDATE_TICKET\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.unshift(t),[...e]}if(\"UPDATE_TICKET_UNREAD_MESSAGES\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,e.unshift(e.splice(n,1)[0])):e.unshift(t),[...e]}if(\"UPDATE_TICKET_CONTACT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.contactId===t.id);return-1!==n&&(e[n].contact=t),[...e]}if(\"UPDATE_TICKET_PRESENCE\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.ticketId);return-1!==n&&(e[n].presence=t.presence),[...e]}if(\"DELETE_TICKET\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]};var Rl=e=>{const{status:a,searchParam:t,tags:l,users:o,showAll:s,selectedQueueIds:i,updateCount:c,style:d}=e,m=Ml(),[u,p]=Object(n.useState)(1),[g,E]=Object(n.useReducer)(Pl,[]),{user:b}=Object(n.useContext)(ra),{profile:f,queues:h}=b,y=Object(n.useContext)(v);Object(n.useEffect)(()=>{E({type:\"RESET\"}),p(1)},[a,t,E,s,l,o,i]);const{tickets:x,hasMore:C,loading:A}=In({pageNumber:u,searchParam:t,status:a,showAll:s,tags:JSON.stringify(l),users:JSON.stringify(o),queueIds:JSON.stringify(i)});Object(n.useEffect)(()=>{const e=h.map(e=>e.id),a=x.filter(a=>e.indexOf(a.queueId)>-1);E(\"user\"===f?{type:\"LOAD_TICKETS\",payload:a}:{type:\"LOAD_TICKETS\",payload:x})},[x,a,t,h,f]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),t=y.getSocket(e),n=e=>(!e.userId||e.userId===(null===b||void 0===b?void 0:b.id)||s)&&(!e.queueId||i.indexOf(e.queueId)>-1);return t.on(\"ready\",()=>{a?t.emit(\"joinTickets\",a):t.emit(\"joinNotification\")}),t.on(`company-${e}-ticket`,e=>{var t;\"updateUnread\"===e.action&&E({type:\"RESET_UNREAD\",payload:e.ticketId}),\"update\"===e.action&&n(e.ticket)&&e.ticket.status===a&&E({type:\"UPDATE_TICKET\",payload:e.ticket}),\"update\"===e.action&&((t=e.ticket).queueId&&-1===i.indexOf(t.queueId))&&E({type:\"DELETE_TICKET\",payload:e.ticket.id}),\"delete\"===e.action&&E({type:\"DELETE_TICKET\",payload:e.ticketId})}),t.on(`company-${e}-appMessage`,e=>{var t,r;const l=h.map(e=>e.id);(\"user\"!==f||-1!==l.indexOf(null===(t=e.ticket)||void 0===t||null===(r=t.queue)||void 0===r?void 0:r.id)&&null!==e.ticket.queue)&&(\"create\"!==e.action||!n(e.ticket)||void 0!==a&&e.ticket.status!==a||E({type:\"UPDATE_TICKET_UNREAD_MESSAGES\",payload:e.ticket}))}),t.on(`company-${e}-presence`,e=>{E({type:\"UPDATE_TICKET_PRESENCE\",payload:e})}),t.on(`company-${e}-contact`,e=>{\"update\"===e.action&&E({type:\"UPDATE_TICKET_CONTACT\",payload:e.contact})}),()=>{t&&\"function\"===typeof t.disconnect&&t.disconnect()}},[a,s,b,i,l,o,f,h,y]),Object(n.useEffect)(()=>{\"function\"===typeof c&&c(g.length)},[g]);return r.a.createElement(xt.a,{className:m.ticketsListWrapper,style:d},r.a.createElement(xt.a,{square:!0,name:\"closed\",elevation:0,className:m.ticketsList,onScroll:e=>{if(!C||A)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&p(e=>e+1)}},r.a.createElement(B.a,{style:{paddingTop:0}},0!==g.length||A?r.a.createElement(r.a.Fragment,null,g.map(e=>r.a.createElement(Tn,{ticket:e,key:e.id}))):r.a.createElement(\"div\",{className:m.noTicketsDiv},r.a.createElement(\"span\",{className:m.noTicketsTitle},Fe.a.t(\"ticketsList.noTicketsTitle\")),r.a.createElement(\"p\",{className:m.noTicketsText},Fe.a.t(\"ticketsList.noTicketsMessage\"))),A&&r.a.createElement(Nl,null))))};var Dl=e=>{let{children:a,value:t,name:n,...l}=e;return t===n?r.a.createElement(\"div\",Object.assign({role:\"tabpanel\",id:\"simple-tabpanel-\"+n,\"aria-labelledby\":\"simple-tab-\"+n},l),r.a.createElement(r.a.Fragment,null,a)):null};var Ll=e=>{let{userQueues:a,selectedQueueIds:t=[],onChange:n}=e;return r.a.createElement(\"div\",{style:{width:120,marginTop:-4}},r.a.createElement(Cn.a,{fullWidth:!0,margin:\"dense\"},r.a.createElement(Zt.a,{multiple:!0,displayEmpty:!0,variant:\"outlined\",value:t,onChange:e=>{n(e.target.value)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>Fe.a.t(\"ticketsQueueSelect.placeholder\")},(null===a||void 0===a?void 0:a.length)>0&&a.map(e=>r.a.createElement(G.a,{dense:!0,key:e.id,value:e.id},r.a.createElement(nn.a,{style:{color:e.color},size:\"small\",color:\"primary\",checked:t.indexOf(e.id)>-1}),r.a.createElement(te.a,{primary:e.name}))))))},ql=t(1178);function Wl(e){let{onFiltered:a}=e;const[t,l]=Object(n.useState)([]),[o,s]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await i()}()},[]);const i=async()=>{try{const{data:e}=await Qe.get(\"/tags/list\");l(e)}catch(e){Xe(e)}};return r.a.createElement(ja.a,{style:{padding:10}},r.a.createElement(qt.a,{multiple:!0,size:\"small\",options:t,value:o,onChange:(e,t,n)=>(async e=>{s(e),a(e)})(t),getOptionLabel:e=>e.name,renderTags:(e,a)=>e.map((e,t)=>r.a.createElement(Vn.a,Object.assign({variant:\"outlined\",style:{backgroundColor:e.color||\"#eee\",textShadow:\"1px 1px 1px #000\",color:\"white\"},label:e.name},a({index:t}),{size:\"small\"}))),renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{variant:\"outlined\",placeholder:\"Filtro por Tags\"}))}))}function Fl(e){let{onFiltered:a,initialUsers:t}=e;const[l,o]=Object(n.useState)([]),[s,i]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await c()}()},[]),Object(n.useEffect)(()=>{i([]),Array.isArray(t)&&Array.isArray(l)&&l.length>0&&d(t)},[t,l]);const c=async()=>{try{const{data:e}=await Qe.get(\"/users/list\"),a=e.map(e=>({id:e.id,name:e.name}));o(a)}catch(e){Xe(e)}},d=async e=>{i(e),a(e)};return r.a.createElement(ja.a,{style:{padding:\"0px 10px 10px\"}},r.a.createElement(qt.a,{multiple:!0,size:\"small\",options:l,value:s,onChange:(e,a,t)=>d(a),getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>(null===e||void 0===e?void 0:e.id)===(null===a||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.name.toLowerCase())===(null===a||void 0===a?void 0:a.name.toLowerCase()),renderTags:(e,a)=>e.map((e,t)=>r.a.createElement(Vn.a,Object.assign({variant:\"outlined\",style:{backgroundColor:\"#bfbfbf\",textShadow:\"1px 1px 1px #000\",color:\"white\"},label:e.name},a({index:t}),{size:\"small\"}))),renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{variant:\"outlined\",placeholder:\"Filtro por Users\"}))}))}const Bl=Object(D.a)(e=>({ticketsWrapper:{position:\"relative\",display:\"flex\",height:\"100%\",flexDirection:\"column\",overflow:\"hidden\",borderTopRightRadius:0,borderBottomRightRadius:0,borderRadius:0},tabsHeader:{flex:\"none\",backgroundColor:e.palette.tabHeaderBackground},tabsInternal:{flex:\"none\",backgroundColor:e.palette.tabHeaderBackground},settingsIcon:{alignSelf:\"center\",marginLeft:\"auto\",padding:8},snackbar:{display:\"flex\",justifyContent:\"space-between\",backgroundColor:\"#1e3a8a\",color:\"white\",borderRadius:30,[e.breakpoints.down(\"sm\")]:{fontSize:\"0.8em\"},[e.breakpoints.up(\"md\")]:{fontSize:\"1em\"}},yesButton:{backgroundColor:\"#FFF\",color:\"#10b981\",padding:\"4px 4px\",fontSize:\"1em\",fontWeight:\"bold\",textTransform:\"uppercase\",marginRight:e.spacing(1),\"&:hover\":{backgroundColor:\"#10b981\",color:\"#FFF\"},borderRadius:30},noButton:{backgroundColor:\"#FFF\",color:\"#ef4444\",padding:\"4px 4px\",fontSize:\"1em\",fontWeight:\"bold\",textTransform:\"uppercase\",\"&:hover\":{backgroundColor:\"#ef4444\",color:\"#FFF\"},borderRadius:30},tab:{minWidth:120,width:120},internalTab:{minWidth:120,width:120,padding:5},ticketOptionsBox:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",background:e.palette.optionsBackground,padding:e.spacing(1)},ticketSearchLine:{padding:e.spacing(1)},serachInputWrapper:{flex:1,background:e.palette.total,display:\"flex\",borderRadius:40,padding:4,marginRight:e.spacing(1)},searchIcon:{color:\"grey\",marginLeft:6,marginRight:6,alignSelf:\"center\"},searchInput:{flex:1,border:\"none\",borderRadius:30},insiderTabPanel:{height:\"100%\",marginTop:\"-72px\",paddingTop:\"72px\"},insiderDoubleTabPanel:{display:\"flex\",flexDirection:\"column\",marginTop:\"-72px\",paddingTop:\"72px\",height:\"100%\"},labelContainer:{width:\"auto\",padding:0},iconLabelWrapper:{flexDirection:\"row\",\"& > *:first-child\":{marginBottom:\"3px !important\",marginRight:16}},insiderTabLabel:{[e.breakpoints.down(1600)]:{display:\"none\"}},smallFormControl:{\"& .MuiOutlinedInput-input\":{padding:\"12px 10px\"},\"& .MuiInputLabel-outlined\":{marginTop:\"-6px\"}}}));var zl=()=>{const e=Bl(),a=Object(M.useHistory)(),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(!1),[i,c]=Object(n.useState)(\"\"),[d,m]=Object(n.useState)(\"open\"),[u,p]=Object(n.useState)(\"open\"),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),h=Object(n.useRef)(),{user:v}=Object(n.useContext)(ra),{profile:y}=v,[x,C]=Object(n.useState)(!1),[A,S]=Object(n.useState)(0),[O,w]=Object(n.useState)(0),k=v.queues.map(e=>e.id),[T,I]=Object(n.useState)(k||[]),[j,N]=Object(n.useState)([]),[P,R]=Object(n.useState)([]);let D;Object(n.useEffect)(()=>{\"ADMIN\"===v.profile.toUpperCase()&&f(!0)},[]),Object(n.useEffect)(()=>{\"search\"===d&&h.current.focus()},[d]);const L=e=>{if(u!==e)return{width:0,height:0}},q=()=>{C(!1)};return r.a.createElement(xt.a,{elevation:0,variant:\"outlined\",className:e.ticketsWrapper},r.a.createElement(an,{modalOpen:g,onClose:e=>{(e=>{E(!1),void 0!==e&&void 0!==e.uuid&&a.push(\"/tickets/\"+e.uuid)})(e)}}),r.a.createElement(xt.a,{elevation:0,square:!0,className:e.tabsHeader},r.a.createElement(Cl.a,{value:d,onChange:(e,a)=>{m(a)},variant:\"fullWidth\",indicatorColor:\"primary\",textColor:\"primary\",\"aria-label\":\"icon label tabs example\"},r.a.createElement(Al.a,{value:\"open\",icon:r.a.createElement(Ol.a,null),label:Fe.a.t(\"tickets.tabs.open.title\"),classes:{root:e.tab}}),r.a.createElement(Al.a,{value:\"closed\",icon:r.a.createElement(kl.a,null),label:Fe.a.t(\"tickets.tabs.closed.title\"),classes:{root:e.tab}}),r.a.createElement(Al.a,{value:\"search\",icon:r.a.createElement(xl.a,null),label:Fe.a.t(\"tickets.tabs.search.title\"),classes:{root:e.tab}}))),r.a.createElement(xt.a,{square:!0,elevation:0,className:e.ticketOptionsBox},\"search\"===d?r.a.createElement(\"div\",{className:e.serachInputWrapper},r.a.createElement(xl.a,{className:e.searchIcon}),r.a.createElement(Ct.a,{className:e.searchInput,inputRef:h,placeholder:Fe.a.t(\"tickets.search.placeholder\"),type:\"search\",onChange:e=>{const a=e.target.value.toLowerCase();if(clearTimeout(D),\"\"===a)return c(a),void m(\"open\");D=setTimeout(()=>{c(a)},500)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ql.a,{open:x,onClose:q,message:Fe.a.t(\"tickets.inbox.closedAllTickets\"),ContentProps:{className:e.snackbar},action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Fa.a,{className:e.yesButton,size:\"small\",onClick:async()=>{try{await Qe.post(\"/tickets/closeAll\",{status:u,selectedQueueIds:T}),q()}catch(e){console.log(\"Error: \",e)}}},Fe.a.t(\"tickets.inbox.yes\")),r.a.createElement(Fa.a,{className:e.noButton,size:\"small\",onClick:q},Fe.a.t(\"tickets.inbox.no\")))}),r.a.createElement(re.a,{color:\"primary\",invisible:!t||o||!1,badgeContent:Fe.a.t(\"ticketsManager.buttons.newTicket\"),classes:{badge:e.tabsBadge}},r.a.createElement(W.a,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:e.button,onClick:()=>{E(!0)}},r.a.createElement(jl.a,{className:e.icon}))),\"admin\"===v.profile&&r.a.createElement(re.a,{color:\"primary\",invisible:t||!o||!1,badgeContent:Fe.a.t(\"tickets.inbox.closedAll\"),classes:{badge:e.tabsBadge}},r.a.createElement(W.a,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),className:e.button,onClick:()=>{C(!0)}},r.a.createElement(Il.a,{style:{color:\"green\"}}))),r.a.createElement(ca,{role:v.profile,perform:\"tickets-manager:showall\",yes:()=>r.a.createElement(Gt.a,{label:Fe.a.t(\"tickets.buttons.showAll\"),labelPlacement:\"start\",control:r.a.createElement(_t.a,{size:\"small\",checked:b,onChange:()=>f(e=>!e),name:\"showAllTickets\",color:\"primary\"})})})),r.a.createElement(Ll,{style:{marginLeft:6},selectedQueueIds:T,userQueues:null===v||void 0===v?void 0:v.queues,onChange:e=>I(e)})),r.a.createElement(Dl,{value:d,name:\"open\",className:e.ticketsWrapper},r.a.createElement(Cl.a,{value:u,onChange:(e,a)=>{p(a)},indicatorColor:\"primary\",textColor:\"primary\",variant:\"fullWidth\"},r.a.createElement(Al.a,{label:r.a.createElement(re.a,{className:e.badge,badgeContent:A,color:\"primary\"},Fe.a.t(\"ticketsList.assignedHeader\")),value:\"open\"}),r.a.createElement(Al.a,{label:r.a.createElement(re.a,{className:e.badge,badgeContent:O,color:\"secondary\"},Fe.a.t(\"ticketsList.pendingHeader\")),value:\"pending\"})),r.a.createElement(xt.a,{className:e.ticketsWrapper},r.a.createElement(Rl,{status:\"open\",showAll:b,selectedQueueIds:T,updateCount:e=>S(e),style:L(\"open\")}),r.a.createElement(Rl,{status:\"pending\",selectedQueueIds:T,updateCount:e=>w(e),style:L(\"pending\")}))),r.a.createElement(Dl,{value:d,name:\"closed\",className:e.ticketsWrapper},r.a.createElement(Rl,{status:\"closed\",showAll:!0,selectedQueueIds:T})),r.a.createElement(Dl,{value:d,name:\"search\",className:e.ticketsWrapper},r.a.createElement(Wl,{onFiltered:e=>{const a=e.map(e=>e.id);N(a)}}),\"admin\"===y&&r.a.createElement(Fl,{onFiltered:e=>{const a=e.map(e=>e.id);R(a)}}),r.a.createElement(Rl,{searchParam:i,showAll:!0,tags:j,users:P,selectedQueueIds:T})))},Ul=t(1143),Hl=t(646),Vl=t.n(Hl);var Gl=e=>{let{classes:a}=e;return r.a.createElement(\"div\",{className:a.content},r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:a.contactHeader},r.a.createElement(ht.a,{container:!0},r.a.createElement(ht.a,{item:!0},r.a.createElement(mn.a,{animation:\"wave\",variant:\"circle\",width:60,height:60,className:a.contactAvatar})),r.a.createElement(ht.a,{item:!0},r.a.createElement(mn.a,{animation:\"wave\",height:25,width:90}),r.a.createElement(mn.a,{animation:\"wave\",height:25,width:80}),r.a.createElement(mn.a,{animation:\"wave\",height:25,width:80})))),r.a.createElement(xt.a,{square:!0,className:a.contactDetails},r.a.createElement(H.a,{variant:\"subtitle1\"},Fe.a.t(\"contactDrawer.extraInfo\")),r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:a.contactExtraInfo},r.a.createElement(mn.a,{animation:\"wave\",height:20,width:60}),r.a.createElement(mn.a,{animation:\"wave\",height:20,width:160})),r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:a.contactExtraInfo},r.a.createElement(mn.a,{animation:\"wave\",height:20,width:60}),r.a.createElement(mn.a,{animation:\"wave\",height:20,width:160})),r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:a.contactExtraInfo},r.a.createElement(mn.a,{animation:\"wave\",height:20,width:60}),r.a.createElement(mn.a,{animation:\"wave\",height:20,width:160}))))};const _l=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},textCenter:{backgroundColor:\"red\"}})),Kl=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),number:Wt.d().min(8,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\")});function Ql(e){let{initialContact:a,onSave:t,onCancel:l}=e;const o=_l(),[s,i]=Object(n.useState)(a);Object(n.useEffect)(()=>{i(a)},[a]);return r.a.createElement(Ft.e,{initialValues:s,enableReinitialize:!0,validationSchema:Kl,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(s.id)await Qe.put(\"/contacts/\"+s.id,e);else{const{data:a}=await Qe.post(\"/contacts\",e);t&&t(a)}P.b.success(Fe.a.t(\"contactModal.success\"))}catch(a){Xe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:i}=e;return r.a.createElement(Ft.d,null,r.a.createElement(ht.a,{container:!0,spacing:1},r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.name\"),name:\"name\",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:\"outlined\",margin:\"dense\",className:o.textField,fullWidth:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.number\"),name:\"number\",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:\"5513912344321\",variant:\"outlined\",margin:\"dense\",fullWidth:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.email\"),name:\"email\",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:\"Email address\",fullWidth:!0,margin:\"dense\",variant:\"outlined\"})),r.a.createElement(ht.a,{item:!0,xs:12,spacing:1},r.a.createElement(ht.a,{container:!0,spacing:1},r.a.createElement(ht.a,{xs:6,item:!0},r.a.createElement(Fa.a,{onClick:l,color:\"secondary\",disabled:i,variant:\"outlined\",fullWidth:!0},Fe.a.t(\"contactModal.buttons.cancel\"))),r.a.createElement(ht.a,{classes:o.textCenter,xs:6,item:!0},r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:i,variant:\"contained\",className:o.btnWrapper,fullWidth:!0},s.id?\"\"+Fe.a.t(\"contactModal.buttons.okEdit\"):\"\"+Fe.a.t(\"contactModal.buttons.okAdd\"),i&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress})))))))})}var Yl=t(279),Xl=t.n(Yl);const Jl=Object(D.a)(e=>({inline:{width:\"100%\"}}));function Zl(e){const{note:a,deleteItem:t}=e,n=Jl();return r.a.createElement(ee.a,{alignItems:\"flex-start\"},r.a.createElement(Na.a,null,r.a.createElement(Ia.a,{alt:a.user.name,src:\"/static/images/avatar/1.jpg\"})),r.a.createElement(te.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"span\",variant:\"body2\",className:n.inline,color:\"textPrimary\"},a.note)),secondary:r.a.createElement(r.a.Fragment,null,a.user.name,\", \",ta()(a.createdAt).format(\"DD/MM/YY HH:mm\"))}),r.a.createElement(Ma.a,null,r.a.createElement(W.a,{onClick:()=>{t(a)},edge:\"end\",\"aria-label\":\"delete\"},r.a.createElement(Xl.a,null))))}var $l=()=>({saveNote:async e=>{const{data:a}=await Qe.request({url:\"/ticket-notes\",method:\"POST\",data:e});return a},deleteNote:async e=>{const{data:a}=await Qe.request({url:\"/ticket-notes/\"+e,method:\"DELETE\"});return a},listNotes:async e=>{const{data:a}=await Qe.request({url:\"/ticket-notes/list\",method:\"GET\",params:e});return a}});const eo=Object(D.a)(e=>({root:{\"& .MuiTextField-root\":{margin:e.spacing(1),width:\"350px\"}},list:{width:\"100%\",maxWidth:\"350px\",maxHeight:\"200px\",backgroundColor:e.palette.background.paper,overflow:\"auto\"},inline:{width:\"100%\"}})),ao=Wt.b().shape({note:Wt.d().min(2,\"Too Short!\").required(\"Required\")});function to(e){let{ticket:a}=e;const{id:t,contactId:l}=a,o=eo(),[s,i]=Object(n.useState)({note:\"\"}),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[E,b]=Object(n.useState)([]),{saveNote:f,deleteNote:h,listNotes:v}=$l();Object(n.useEffect)(()=>{!async function(){y(),await A()}()},[]);const y=()=>{i({note:\"\"}),d(!1)},x=e=>{i({note:e.target.value})},C=e=>{g(e),u(!0)},A=async()=>{d(!0);try{const e=await v({ticketId:t,contactId:l});b(e)}catch(e){P.b.error(e)}d(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft,{title:\"Excluir Registro\",open:m,onClose:u,onConfirm:async()=>{d(!0);try{await h(p.id),await A(),g({}),P.b.success(\"Observa\\xe7\\xe3o exclu\\xedda com sucesso!\")}catch(e){P.b.error(e)}d(!1)}},\"Deseja realmente excluir este registro?\"),r.a.createElement(Ft.e,{initialValues:s,enableReinitialize:!0,validationSchema:ao,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{d(!0);try{await f({...e,ticketId:t,contactId:l}),await A(),i({note:\"\"}),P.b.success(\"Observa\\xe7\\xe3o adicionada com sucesso!\")}catch(a){P.b.error(a)}d(!1)})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,setErrors:n}=e;return r.a.createElement(Ft.d,null,r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,name:\"note\",rows:3,label:Fe.a.t(\"ticketOptionsMenu.appointmentsModal.textarea\"),placeholder:Fe.a.t(\"ticketOptionsMenu.appointmentsModal.placeholder\"),multiline:!0,error:a.note&&Boolean(t.note),helperText:a.note&&t.note,variant:\"outlined\",onChange:x,fullWidth:!0})),E.length>0&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(B.a,{className:o.list},E.map(e=>r.a.createElement(Zl,{note:e,key:e.id,deleteItem:C})))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{xs:6,item:!0},r.a.createElement(Fa.a,{onClick:()=>{i(\"\"),n({})},color:\"primary\",variant:\"outlined\",fullWidth:!0},\"Cancelar\")),r.a.createElement(ht.a,{xs:6,item:!0},r.a.createElement(Ua,{loading:c,color:\"primary\",type:\"submit\",variant:\"contained\",autoFocus:!0,fullWidth:!0},\"Salvar\"))))))}))}const no=Object(D.a)(e=>({drawer:{width:320,flexShrink:0},drawerPaper:{width:320,display:\"flex\",borderTop:\"1px solid rgba(0, 0, 0, 0.12)\",borderRight:\"1px solid rgba(0, 0, 0, 0.12)\",borderBottom:\"1px solid rgba(0, 0, 0, 0.12)\",borderTopRightRadius:4,borderBottomRightRadius:4},header:{display:\"flex\",borderBottom:\"1px solid rgba(0, 0, 0, 0.12)\",backgroundColor:e.palette.contactdrawer,alignItems:\"center\",padding:e.spacing(0,1),minHeight:\"73px\",justifyContent:\"flex-start\"},content:{display:\"flex\",backgroundColor:e.palette.contactdrawer,flexDirection:\"column\",padding:\"8px 0px 8px 8px\",height:\"100%\",overflowY:\"scroll\",...e.scrollbarStyles},contactAvatar:{margin:15,width:100,height:100},contactHeader:{display:\"flex\",padding:8,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",\"& > *\":{margin:4}},contactDetails:{marginTop:8,padding:8,display:\"flex\",flexDirection:\"column\"},contactExtraInfo:{marginTop:4,padding:6}}));var ro=e=>{var a;let{open:t,handleDrawerClose:l,contact:o,ticket:s,loading:i}=e;const c=no(),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{p(!1)},[t,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{className:c.drawer,variant:\"persistent\",anchor:\"right\",open:t,PaperProps:{style:{position:\"absolute\"}},BackdropProps:{style:{position:\"absolute\"}},ModalProps:{container:document.getElementById(\"drawer-container\"),style:{position:\"absolute\"}},classes:{paper:c.drawerPaper}},r.a.createElement(\"div\",{className:c.header},r.a.createElement(W.a,{onClick:l},r.a.createElement(St.a,null)),r.a.createElement(H.a,{style:{justifySelf:\"center\"}},Fe.a.t(\"contactDrawer.header\"))),i?r.a.createElement(Gl,{classes:c}):r.a.createElement(\"div\",{className:c.content},r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:c.contactHeader},r.a.createElement(dn.a,{onClick:()=>{},style:{cursor:\"pointer\",width:\"100%\"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:r.a.createElement(Ia.a,{src:o.profilePicUrl,alt:\"contact_image\",style:{width:60,height:60,backgroundColor:hn(null===o||void 0===o?void 0:o.number),color:\"white\",fontWeight:\"bold\"}},bn(null===o||void 0===o?void 0:o.name)),title:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{onClick:()=>p(!0)},o.name,r.a.createElement(Vl.a,{style:{fontSize:16,marginLeft:5}}))),subheader:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{style:{fontSize:12}},r.a.createElement(Ul.a,{href:\"tel:\"+o.number},o.number)),r.a.createElement(H.a,{style:{fontSize:12}},r.a.createElement(Ul.a,{href:\"mailto:\"+o.email},o.email)))}),r.a.createElement(Fa.a,{variant:\"outlined\",color:\"primary\",onClick:()=>m(!u),style:{fontSize:12}},Fe.a.t(\"contactDrawer.buttons.edit\")),o.id&&u&&r.a.createElement(Ql,{initialContact:o,onCancel:()=>p(!1)})),r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:c.contactDetails},r.a.createElement(H.a,{variant:\"subtitle1\",style:{marginBottom:10}},Fe.a.t(\"ticketOptionsMenu.appointmentsModal.title\")),r.a.createElement(to,{ticket:s})),r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:c.contactDetails},r.a.createElement(Vt,{open:d,onClose:()=>m(!1),contactId:o.id}),r.a.createElement(H.a,{variant:\"subtitle1\"},Fe.a.t(\"contactDrawer.extraInfo\")),null===o||void 0===o||null===(a=o.extraInfo)||void 0===a?void 0:a.map(e=>r.a.createElement(xt.a,{key:e.id,square:!0,variant:\"outlined\",className:c.contactExtraInfo},r.a.createElement(An.a,null,e.name),r.a.createElement(H.a,{component:\"div\",noWrap:!0,style:{paddingTop:2}},r.a.createElement(Ka,null,e.value))))))))},lo=(t(892),t(700)),oo=t(647),so=t.n(oo),io=t(130),co=t.n(io),mo=t(649),uo=t.n(mo),po=t(329),go=t.n(po),Eo=t(444),bo=t.n(Eo),fo=t(652),ho=t.n(fo),vo=t(651),yo=t.n(vo),xo=t(650),Co=t.n(xo),Ao=t(518),So=t.n(Ao),Oo=t(653),wo=t.n(Oo);const ko=Object(D.a)(e=>({timerBox:{display:\"flex\",marginLeft:10,marginRight:10,alignItems:\"center\"}}));var To=()=>{const e=ko(),[a,t]=Object(n.useState)({minutes:0,seconds:0});Object(n.useEffect)(()=>{const e=setInterval(()=>t(e=>59===e.seconds?{...e,minutes:e.minutes+1,seconds:0}:{...e,seconds:e.seconds+1}),1e3);return()=>{clearInterval(e)}},[]);const l=e=>e<10?\"0\"+e:e;return r.a.createElement(\"div\",{className:e.timerBox},r.a.createElement(\"span\",null,`${l(a.minutes)}:${l(a.seconds)}`))};var Io=t(648),jo=t.n(Io),No=t(1144);function Mo(e){return n.createElement(ja.a,{sx:{display:\"flex\",alignItems:\"center\"}},n.createElement(ja.a,{sx:{width:\"100%\",mr:1}},n.createElement(No.a,Object.assign({variant:\"determinate\"},e,{style:{position:\"initial\",backgroundColor:\"mediumseagreen\"}}))),n.createElement(ja.a,{sx:{minWidth:35}},n.createElement(H.a,{variant:\"body2\",color:\"textSecondary\",style:{color:\"#fff\",position:\"absolute\"}},Math.round(e.value)+\"%\")))}function Po(e){let{progress:a}=e;return n.useEffect(()=>{},[a]),n.createElement(ja.a,{sx:{width:\"100%\"}},n.createElement(Mo,{value:a,style:{height:50}}))}var Ro=()=>({save:async e=>{const{data:a}=await Qe.request({url:\"/quick-messages\",method:\"POST\",data:e});return a},update:async e=>{const{data:a}=await Qe.request({url:\"/quick-messages/\"+e.id,method:\"PUT\",data:e});return a},deleteRecord:async e=>{const{data:a}=await Qe.request({url:\"/quick-messages/\"+e,method:\"DELETE\"});return a},list:async e=>{const{data:a}=await Qe.request({url:\"/quick-messages/list\",method:\"GET\",params:e});return a}});var Do=()=>{const[e,a]=Object(n.useState)(!1),[t,r]=Object(n.useState)(!1),[l,o]=Object(n.useState)([]);return{files:l,loading:e,hasMore:t,list:async e=>{let{companyId:t,userId:n,searchParam:l=\"\",pageNumber:s=\"1\"}=e;a(!0);try{const{data:e}=await Qe.get(\"/files/\",{params:{searchParam:l,pageNumber:s,companyId:t}}),n=await Promise.all(e.files.map(async e=>{try{const{data:a}=await Qe.get(\"/files/\"+e.id);return a}catch(a){return console.error(`Error cargando detalles de lista ${e.id}:`,a),e}}));return o(n),r(e.hasMore),a(!1),n}catch(i){return a(!1),Xe(i),[]}},show:async e=>{try{const{data:a}=await Qe.get(\"/files/\"+e);return a}catch(a){return Xe(a),null}}}};const Lo=new so.a({bitRate:128}),qo=Object(D.a)(e=>({mainWrapper:{backgroundColor:e.palette.bordabox,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",borderTop:\"1px solid rgba(0, 0, 0, 0.12)\"},newMessageBox:{backgroundColor:e.palette.newmessagebox,width:\"100%\",display:\"flex\",padding:\"7px\",alignItems:\"center\"},messageInputWrapper:{padding:6,marginRight:7,backgroundColor:e.palette.inputdigita,display:\"flex\",borderRadius:20,flex:1},messageInput:{paddingLeft:10,flex:1,border:\"none\"},sendMessageIcons:{color:\"grey\"},ForwardMessageIcons:{color:zr.a[700],transform:\"scaleX(-1)\"},uploadInput:{display:\"none\"},viewMediaInputWrapper:{display:\"flex\",padding:\"10px 13px\",position:\"relative\",justifyContent:\"space-between\",alignItems:\"center\",backgroundColor:\"#eee\",borderTop:\"1px solid rgba(0, 0, 0, 0.12)\"},emojiBox:{position:\"absolute\",bottom:63,width:40,borderTop:\"1px solid #e8e8e8\"},circleLoading:{color:Pa.a[500],opacity:\"70%\",position:\"absolute\",top:\"20%\",left:\"50%\",marginLeft:-12},audioLoading:{color:Pa.a[500],opacity:\"70%\"},recorderWrapper:{display:\"flex\",alignItems:\"center\",alignContent:\"middle\"},cancelAudioIcon:{color:\"red\"},sendAudioIcon:{color:\"green\"},replyginMsgWrapper:{display:\"flex\",width:\"100%\",alignItems:\"center\",justifyContent:\"center\",paddingTop:8,paddingLeft:73,paddingRight:7},replyginMsgContainer:{flex:1,marginRight:5,overflowY:\"hidden\",backgroundColor:\"rgba(0, 0, 0, 0.05)\",borderRadius:\"7.5px\",display:\"flex\",position:\"relative\"},replyginMsgBody:{padding:10,height:\"auto\",display:\"block\",whiteSpace:\"pre-wrap\",overflow:\"hidden\"},replyginContactMsgSideColor:{flex:\"none\",width:\"4px\",backgroundColor:\"#35cd96\"},replyginSelfMsgSideColor:{flex:\"none\",width:\"4px\",backgroundColor:\"#6bcbef\"},messageContactName:{display:\"flex\",color:\"#6bcbef\",fontWeight:500}})),Wo=e=>{const{disabled:a,showEmoji:t,setShowEmoji:n,handleAddEmoji:l}=e,o=qo();return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{\"aria-label\":\"emojiPicker\",component:\"span\",disabled:a,onClick:e=>n(e=>!e)},r.a.createElement(uo.a,{className:o.sendMessageIcons})),t?r.a.createElement(\"div\",{className:o.emojiBox},r.a.createElement(lo.a,{perLine:16,showPreview:!1,showSkinTones:!1,onSelect:l})):null)},Fo=e=>{const{width:a,setSignMessage:t,signMessage:n}=e;return Object(vl.b)(\"md\",a)?r.a.createElement(Gt.a,{style:{marginRight:7,color:\"gray\"},label:Fe.a.t(\"messagesInput.signMessage\"),labelPlacement:\"start\",control:r.a.createElement(_t.a,{size:\"small\",checked:n,onChange:e=>{t(e.target.checked)},name:\"showAllTickets\",color:\"primary\"})}):null},Bo=e=>{const{handleChangeMedias:a,disableOption:t}=e,n=qo();return r.a.createElement(r.a.Fragment,null,r.a.createElement(\"input\",{multiple:!0,type:\"file\",id:\"upload-button\",disabled:t(),className:n.uploadInput,onChange:a,accept:\"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.txt\"}),r.a.createElement(\"label\",{htmlFor:\"upload-button\"},r.a.createElement(W.a,{\"aria-label\":\"upload\",component:\"span\",disabled:t(),title:\"Adjuntar archivos (m\\xfaltiples) - NUEVO\",style:{backgroundColor:\"#e3f2fd\",borderRadius:\"50%\"}},r.a.createElement(co.a,{className:n.sendMessageIcons,style:{color:\"#2196f3\"}}))))},zo=e=>{const{inputMessage:a,loading:t,recording:n,ticketStatus:l,handleSendMessage:o,handleCancelAudio:s,handleUploadAudio:i,handleStartRecording:c,handleOpenModalForward:d,showSelectMessageCheckbox:m}=e,u=qo(),p=()=>{const{setShowSelectMessageCheckbox:a,setSelectedMessages:t}=e;a(!1),t([])};return m?r.a.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"8px\"}},r.a.createElement(W.a,{\"aria-label\":\"cancelSelection\",component:\"span\",onClick:p,disabled:t,style:{color:\"#f44336\"},title:\"Cancelar selecci\\xf3n\"},r.a.createElement(So.a,{className:u.sendMessageIcons})),r.a.createElement(W.a,{\"aria-label\":\"forwardMessage\",component:\"span\",onClick:d,disabled:t},r.a.createElement(st.a,{className:u.ForwardMessageIcons}))):a?r.a.createElement(W.a,{\"aria-label\":\"sendMessage\",component:\"span\",onClick:o,disabled:t},r.a.createElement(go.a,{className:u.sendMessageIcons})):n?r.a.createElement(\"div\",{className:u.recorderWrapper},r.a.createElement(W.a,{\"aria-label\":\"cancelRecording\",component:\"span\",fontSize:\"large\",disabled:t,onClick:s},r.a.createElement(So.a,{className:u.cancelAudioIcon})),t?r.a.createElement(\"div\",null,r.a.createElement(Ba.a,{className:u.audioLoading})):r.a.createElement(To,null),r.a.createElement(W.a,{\"aria-label\":\"sendRecordedAudio\",component:\"span\",onClick:i,disabled:t},r.a.createElement(Co.a,{className:u.sendAudioIcon}))):r.a.createElement(W.a,{\"aria-label\":\"showRecorder\",component:\"span\",disabled:t||\"open\"!==l,onClick:c},r.a.createElement(yo.a,{className:u.sendMessageIcons}))},Uo=e=>{const{loading:a,inputRef:t,ticketStatus:n,inputMessage:l,setInputMessage:o,handleSendMessage:s,handleInputPaste:i,disableOption:c,handleQuickAnswersClick:d,options:m,popupOpen:u}=e,p=qo(),g=e=>{e&&(e.focus(),t.current=e)};return r.a.createElement(\"div\",{className:p.messageInputWrapper},r.a.createElement(qt.a,{freeSolo:!0,open:u,id:\"quick-messages-autocomplete\",value:l,options:m,closeIcon:null,getOptionLabel:e=>Object(Ye.isObject)(e)?e.label:e,onChange:(e,a)=>{Object(Ye.isObject)(a)&&Object(Ye.has)(a,\"value\")&&Object(Ye.isNil)(a.mediaPath)?(o(a.value),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200)):Object(Ye.isObject)(a)&&Object(Ye.has)(a,\"value\")&&!Object(Ye.isNil)(a.mediaPath)&&(d(a),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200))},onInputChange:(e,a,t)=>{\"input\"===t&&o(e.target.value)},onPaste:e=>{\"open\"===n&&i(e)},onKeyPress:e=>{a||e.shiftKey||\"Enter\"===e.key&&s()},style:{width:\"100%\"},renderInput:e=>{const{InputLabelProps:a,InputProps:t,...l}=e;return r.a.createElement(Ct.a,Object.assign({},e.InputProps,l,{disabled:c(),inputRef:g,placeholder:\"open\"===n?Fe.a.t(\"messagesInput.placeholderOpen\")+\" (usa / para respuestas r\\xe1pidas)\":Fe.a.t(\"messagesInput.placeholderClosed\"),multiline:!0,className:p.messageInput,maxRows:5}))}}))};var Ho=Object(vl.a)()(e=>{console.log(\"\\ud83d\\ude80 MessageInputCustom cargado - Versi\\xf3n mejorada con env\\xedo m\\xfaltiple - CAMBIO VISIBLE\");const{ticketStatus:a,ticketId:t}=e,l=qo(),[o,s]=Object(n.useState)(0),[i,c]=Object(n.useState)([]),[d,m]=Object(n.useState)(\"\"),[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,v]=Object(n.useState)([]),[y,x]=Object(n.useState)([]),[C,A]=Object(n.useState)(!1),[S,O]=Object(n.useState)([]),[w,k]=Object(n.useState)([]),[T,I]=Object(n.useState)(null),[N,M]=Object(n.useState)(!1),[P,D]=Object(n.useState)({}),L=Object(n.useRef)(),{setReplyingMessage:q,replyingMessage:F}=Object(n.useContext)(vt),{user:B}=Object(n.useContext)(ra),[z,U]=function(e,a){const[t,r]=Object(n.useState)(()=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):a}catch(t){return Xe(t),a}});return[t,a=>{try{const n=a instanceof Function?a(t):a;r(n),localStorage.setItem(e,JSON.stringify(n))}catch(n){Xe(n)}}]}(\"signOption\",!0),{selectedMessages:H,setForwardMessageModalOpen:_,showSelectMessageCheckbox:K,setShowSelectMessageCheckbox:Q,setSelectedMessages:Y}=Object(n.useContext)(Pt),{list:X}=Ro(),{list:J}=Do();Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem(\"companyId\"),a=(await X({companyId:e,userId:B.id})).map(e=>{let a=e.message;return Object(Ye.isString)(a)&&a.length>35&&(a=e.message.substring(0,35)+\"...\"),{value:e.message,label:`/${e.shortcode} - ${a}`,shortcode:e.shortcode,message:e.message,mediaPath:e.mediaPath}});v(a)}()},[]),Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem(\"companyId\"),a=(await J({companyId:e,userId:B.id})).map(e=>{let a=e.name;return Object(Ye.isString)(a)&&a.length>35&&(a=e.name.substring(0,35)+\"...\"),{value:e,label:\"\\ud83d\\udcc1 \"+a,name:e.name,message:e.message,options:e.options}});O(a)}()},[]),Object(n.useEffect)(()=>{if(Object(Ye.isString)(d)&&!Object(Ye.isEmpty)(d)&&d.startsWith(\"/\"))if(A(!0),\"/\"===d)x(h);else{const e=d.substring(1).toLowerCase(),a=h.filter(a=>a.shortcode.toLowerCase().includes(e)||a.message.toLowerCase().includes(e));x(a)}else A(!1)},[d]),Object(n.useEffect)(()=>{L.current.focus()},[F]),Object(n.useEffect)(()=>(L.current.focus(),()=>{console.log(\"\\ud83e\\uddf9 Limpiando estado al cambiar ticketId:\",t),m(\"\"),p(!1),c([]),q(null)}),[t,q]);const Z=()=>{if(0===H.length)return _(!1),void Xe(Fe.a.t(\"messagesList.header.notMessage\"));_(!0)},$=e=>{let a=e.native;m(e=>e+a)},ee=e=>{if(!e.target.files)return;const a=Array.from(e.target.files);console.log(\"\\ud83c\\udfaf handleChangeMedias ejecutado - Archivos seleccionados:\",a.length),c(e=>{console.log(\"\\ud83d\\udcca Estado anterior de medias:\",e.length,e.map(e=>e.name));const t=[...e,...a];return console.log(\"\\ud83d\\udcc1 Archivos acumulados:\",t.length,t.map(e=>e.name)),t})},ae=e=>{const a=e.clipboardData.items;if(a)for(let t=0;t<a.length;t++){const e=a[t];if(-1!==e.type.indexOf(\"image\")){const a=e.getAsFile();a&&(console.log(\"\\ud83d\\udccb Imagen pegada:\",a.name||\"imagen_pegada\"),c(e=>[...e,a]))}}},te=e=>{e.preventDefault(),e.stopPropagation(),console.log(\"\\ud83c\\udfaf DragOver detectado\"),M(!0)},ne=e=>{e.preventDefault(),e.stopPropagation(),console.log(\"\\ud83c\\udfaf DragEnter detectado\"),M(!0)},re=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||(console.log(\"\\ud83c\\udfaf DragLeave detectado\"),M(!1))},le=e=>{e.preventDefault(),e.stopPropagation(),console.log(\"\\ud83c\\udfaf Drop detectado\"),M(!1);const a=Array.from(e.dataTransfer.files);console.log(\"\\ud83d\\udcc1 Archivos en drop:\",a.length,a.map(e=>e.name)),a.length>0&&c(e=>{console.log(\"\\ud83d\\udcca Estado anterior de medias (drop):\",e.length,e.map(e=>e.name));const t=[...e,...a];return console.log(\"\\ud83d\\uddb1\\ufe0f Archivos arrastrados:\",a.length,a.map(e=>e.name)),console.log(\"\\ud83d\\udcc1 Total archivos:\",t.length,t.map(e=>e.name)),t})},oe=async(e,a)=>{try{j&&j.media&&(j.media.debug(\"Procesando multimedia para env\\xedo, tipo:\",e.type),j.media.debug(\"Nombre original del archivo:\",a));let n=a;if(n&&n.length>50){const e=n.split(\".\").pop(),a=n.substring(0,n.lastIndexOf(\".\"));n=`${a.substring(0,47)+\"...\"}.${e}`,j&&j.media&&j.media.debug(\"Nombre truncado:\",n)}if(!n){const a=e.type.split(\"/\")[1]||\"bin\";n=`${(new Date).getTime()}.${a}`,j&&j.media&&j.media.debug(\"Nombre generado:\",n)}j&&j.media&&j.media.debug(\"Nombre final del archivo:\",n);const r=new FormData;r.append(\"medias\",e,n),r.append(\"body\",n),r.append(\"fromMe\",!0),j&&j.media&&j.media.debug(\"Enviando multimedia al servidor...\"),await Qe.post(\"/messages/\"+t,r),j&&j.media&&j.media.info(\"Multimedia enviada exitosamente\")}catch(n){throw j&&j.media&&j.media.error(\"Error al enviar multimedia:\",n),Xe(n),n}},se=async e=>{if(e.mediaPath){E(!0);try{if(j&&j.media&&(j.media.debug(\"Descargando multimedia desde:\",e.mediaPath),j.media.debug(\"URL completa:\",e.mediaPath)),!e.mediaPath||\"null\"===e.mediaPath||\"undefined\"===e.mediaPath||e.mediaPath.includes(\"undefined\"))return j&&j.media&&j.media.warn(\"URL de multimedia inv\\xe1lida:\",e.mediaPath),Xe(new Error(\"URL de multimedia inv\\xe1lida - Contacte al administrador\")),E(!1),void m(e.value);const{data:a}=await He.a.get(e.mediaPath,{responseType:\"blob\",timeout:1e4});j&&j.media&&j.media.debug(\"Multimedia descargada exitosamente, tama\\xf1o:\",a.size);let t=e.value;if(e.mediaPath){const a=e.mediaPath.split(\"/\"),n=a[a.length-1];n&&n.includes(\".\")&&(t=n,j&&j.media&&j.media.debug(\"Nombre extra\\xeddo desde URL:\",t))}return await oe(a,t),m(\"\"),void E(!1)}catch(a){console.error(\"Error al procesar multimedia de respuesta r\\xe1pida:\",a),console.error(\"URL que fall\\xf3:\",e.mediaPath);let t=\"Error al procesar multimedia\";return a.response?t=404===a.response.status?\"Archivo multimedia no encontrado\":403===a.response.status?\"Sin permisos para acceder al archivo\":\"Error del servidor: \"+a.response.status:\"ECONNABORTED\"===a.code&&(t=\"Tiempo de espera agotado\"),Xe(new Error(t)),E(!1),void m(e.value)}}m(\"\"),m(e.value)},ie=async()=>{if(\"\"===d.trim())return;E(!0);const e={read:1,fromMe:!0,mediaUrl:\"\",body:z?`*${null===B||void 0===B?void 0:B.name}:*\\n${d.trim()}`:d.trim(),quotedMsg:F};try{await Qe.post(\"/messages/\"+t,e)}catch(a){Xe(a)}m(\"\"),p(!1),E(!1),q(null)},ce=async()=>{E(!0);try{await navigator.mediaDevices.getUserMedia({audio:!0}),await Lo.start(),f(!0),E(!1)}catch(e){Xe(e),E(!1)}},de=async()=>{E(!0);try{const[,e]=await Lo.stop().getMp3();if(e.size<1e4)return E(!1),void f(!1);const a=new FormData,n=`audio-record-site-${(new Date).getTime()}.mp3`;a.append(\"medias\",e,n),a.append(\"body\",n),a.append(\"fromMe\",!0),await Qe.post(\"/messages/\"+t,a)}catch(e){Xe(e)}f(!1),E(!1)},me=async()=>{try{await Lo.stop().getMp3(),f(!1)}catch(e){Xe(e)}},ue=()=>{m(\"/\"),setTimeout(()=>{A(!0),x(h)},100),L.current&&L.current.focus()},pe=e=>{I(e.currentTarget),k(S)},ge=()=>{I(null)},Ee=e=>{(async e=>{if(j&&j.media&&j.media.debug(\"Valor recibido en handleFileListClick:\",e),!e.value||!e.value.options||0===e.value.options.length)return j&&j.media&&j.media.warn(\"No hay archivos en la lista. value.value:\",e.value),void Xe(\"Esta lista de archivos no contiene archivos\");E(!0);try{j&&j.media&&(j.media.debug(\"Enviando lista de archivos:\",e.name),j.media.debug(\"Archivos en la lista:\",e.value.options.length));for(const t of e.value.options)try{j&&j.media&&j.media.debug(\"Procesando archivo:\",t.name);const a=`http://localhost:8080/${\"public/fileList\"}/${e.value.id}/${t.path}`;j&&j.media&&j.media.debug(\"URL del archivo:\",a);const n=t.path||t.name||\"documento\";j&&j.media&&j.media.debug(\"Nombre del archivo extra\\xeddo:\",n);const{data:r}=await He.a.get(a,{responseType:\"blob\",timeout:1e4});j&&j.media&&j.media.debug(\"Archivo descargado:\",n,\"tama\\xf1o:\",r.size),await oe(r,n),await new Promise(e=>setTimeout(e,500))}catch(a){j&&j.media&&j.media.error(\"Error procesando archivo:\",t.name,a),Xe(\"Error al procesar archivo: \"+t.name)}j&&j.media&&j.media.info(\"Lista de archivos enviada exitosamente\"),E(!1)}catch(a){j&&j.media&&j.media.error(\"Error al enviar lista de archivos:\",a),Xe(\"Error al enviar lista de archivos\"),E(!1)}})(e),ge()},be=()=>g||b||\"open\"!==a;return i.length>0?r.a.createElement(xt.a,{elevation:0,square:!0,className:l.viewMediaInputWrapper,onDragOver:te,onDragEnter:ne,onDragLeave:re,onDrop:le,style:{border:N?\"2px dashed #2196f3\":\"none\",backgroundColor:N?\"#f0f8ff\":\"#f5f5f5\",transition:\"all 0.3s ease\",position:\"relative\"}},N&&r.a.createElement(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",background:\"rgba(33, 150, 243, 0.9)\",color:\"white\",padding:\"20px\",borderRadius:\"10px\",zIndex:1e3,pointerEvents:\"none\",fontSize:\"16px\",fontWeight:\"bold\",boxShadow:\"0 4px 20px rgba(0,0,0,0.3)\"}},\"\\ud83d\\udcc1 SUELTA AQU\\xcd PARA ADJUNTAR M\\xc1S ARCHIVOS - NUEVO\"),r.a.createElement(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\",gap:\"8px\",marginBottom:\"10px\"}},i.map((e,a)=>{return r.a.createElement(\"div\",{key:a,style:{display:\"flex\",alignItems:\"center\",background:\"#fff\",border:\"1px solid #ddd\",borderRadius:\"8px\",padding:\"6px 10px\",maxWidth:\"200px\",boxShadow:\"0 1px 3px rgba(0,0,0,0.1)\"}},r.a.createElement(\"span\",{style:{fontSize:\"12px\",color:\"#333\",marginRight:\"8px\",overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\",flex:1}},(t=e).type.startsWith(\"image/\")?\"\\ud83d\\uddbc\\ufe0f\":t.type.startsWith(\"video/\")?\"\\ud83c\\udfa5\":t.type.startsWith(\"audio/\")?\"\\ud83c\\udfb5\":t.type.includes(\"pdf\")?\"\\ud83d\\udcc4\":t.type.includes(\"document\")||t.type.includes(\"word\")?\"\\ud83d\\udcdd\":t.type.includes(\"sheet\")||t.type.includes(\"excel\")?\"\\ud83d\\udcca\":\"\\ud83d\\udcce\",\" \",e.name,void 0!==P[a]&&r.a.createElement(\"span\",{style:{color:\"#2196f3\",fontSize:\"10px\"}},\" \",\"(\",P[a],\"%)\")),r.a.createElement(W.a,{\"aria-label\":\"remove-media\",component:\"span\",onClick:()=>{return e=a,void c(a=>a.filter((a,t)=>t!==e));var e},size:\"small\",style:{padding:\"2px\",marginLeft:\"4px\"}},r.a.createElement(St.a,{fontSize:\"small\"})));var t})),r.a.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",padding:\"8px 0\"}},r.a.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"8px\"}},r.a.createElement(W.a,{\"aria-label\":\"cancel-upload\",component:\"span\",onClick:e=>c([])},r.a.createElement(bo.a,{className:l.sendMessageIcons})),r.a.createElement(\"input\",{multiple:!0,type:\"file\",id:\"upload-more-button\",disabled:g||b||\"open\"!==a,className:l.uploadInput,onChange:ee,accept:\"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx,.txt\"}),r.a.createElement(\"label\",{htmlFor:\"upload-more-button\"},r.a.createElement(W.a,{\"aria-label\":\"upload-more\",component:\"span\",disabled:g||b||\"open\"!==a,title:\"Agregar m\\xe1s archivos\",style:{backgroundColor:\"#e8f5e8\",borderRadius:\"50%\"}},r.a.createElement(co.a,{className:l.sendMessageIcons,style:{color:\"#4caf50\"}})))),g?r.a.createElement(\"div\",null,r.a.createElement(Po,{progress:o})):r.a.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",flex:1}},r.a.createElement(\"span\",{style:{fontWeight:\"bold\",color:\"#2196f3\",fontSize:\"14px\"}},\"\\ud83d\\udcc1 \",i.length,\" archivo\",i.length>1?\"s\":\"\",\" seleccionado\",i.length>1?\"s\":\"\"),r.a.createElement(\"span\",{style:{fontSize:\"11px\",color:\"#666\",textAlign:\"center\",maxWidth:\"300px\",overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\"}},i.map(e=>e.name).join(\", \")),r.a.createElement(\"span\",{style:{fontSize:\"10px\",color:\"#4caf50\",textAlign:\"center\",marginTop:\"4px\"}},\"\\ud83d\\udca1 Arrastra m\\xe1s archivos aqu\\xed o usa el bot\\xf3n verde\")),r.a.createElement(W.a,{\"aria-label\":\"send-upload\",component:\"span\",onClick:async e=>{E(!0),e.preventDefault(),console.log(\"\\ud83d\\ude80 Iniciando env\\xedo de\",i.length,\"archivos\");const a=i.length;let n=0,r=0;for(let o=0;o<i.length;o++){const e=i[o],s=o;console.log(`\\ud83d\\udce4 Enviando archivo ${o+1}/${a}:`,e.name);try{if(D(e=>({...e,[s]:0})),\"image\"===(null===e||void 0===e?void 0:e.type.split(\"/\")[0]))await new Promise((l,o)=>{new jo.a(e,{quality:.7,async success(i){try{const r=new FormData;r.append(\"fromMe\",!0),r.append(\"medias\",i),r.append(\"body\",e.name),await Qe.post(\"/messages/\"+t,r,{onUploadProgress:a=>{const t=Math.round(100*a.loaded/a.total);D(e=>({...e,[s]:t})),console.log(`\\ud83d\\udcca ${e.name}: ${t}%`)}}),n++,console.log(`\\u2705 Archivo ${s+1}/${a} enviado:`,e.name),l()}catch(c){console.error(`\\u274c Error enviando ${e.name}:`,c),r++,o(c)}},error(a){console.error(`\\u274c Error comprimiendo ${e.name}:`,a),r++,o(a)}})});else{const r=new FormData;r.append(\"fromMe\",!0),r.append(\"medias\",e),r.append(\"body\",e.name),await Qe.post(\"/messages/\"+t,r,{onUploadProgress:a=>{const t=Math.round(100*a.loaded/a.total);D(e=>({...e,[s]:t})),console.log(`\\ud83d\\udcca ${e.name}: ${t}%`)}}),n++,console.log(`\\u2705 Archivo ${s+1}/${a} enviado:`,e.name)}}catch(l){console.error(`\\u274c Error enviando archivo ${e.name}:`,l),r++,Xe(l)}}E(!1),c([]),D({}),console.log(`\\ud83c\\udf89 Env\\xedo completado: ${n}/${a} archivos enviados, ${r} fallidos`)},disabled:g},r.a.createElement(go.a,{className:l.sendMessageIcons})))):r.a.createElement(xt.a,{square:!0,elevation:0,className:l.mainWrapper},F&&(e=>{var t;return r.a.createElement(\"div\",{className:l.replyginMsgWrapper},r.a.createElement(\"div\",{className:l.replyginMsgContainer},r.a.createElement(\"span\",{className:Object(R.a)(l.replyginContactMsgSideColor,{[l.replyginSelfMsgSideColor]:!e.fromMe})}),r.a.createElement(\"div\",{className:l.replyginMsgBody},!e.fromMe&&r.a.createElement(\"span\",{className:l.messageContactName},null===(t=e.contact)||void 0===t?void 0:t.name),e.body)),r.a.createElement(W.a,{\"aria-label\":\"showRecorder\",component:\"span\",disabled:g||\"open\"!==a,onClick:()=>q(null)},r.a.createElement(ho.a,{className:l.sendMessageIcons})))})(F),r.a.createElement(\"div\",{className:l.newMessageBox,onDragOver:te,onDragEnter:ne,onDragLeave:re,onDrop:le,style:{border:N?\"2px dashed #2196f3\":\"none\",backgroundColor:N?\"#f0f8ff\":\"transparent\",transition:\"all 0.3s ease\",position:\"relative\"}},N&&r.a.createElement(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",background:\"rgba(33, 150, 243, 0.9)\",color:\"white\",padding:\"20px\",borderRadius:\"10px\",zIndex:1e3,pointerEvents:\"none\",fontSize:\"16px\",fontWeight:\"bold\",boxShadow:\"0 4px 20px rgba(0,0,0,0.3)\"}},\"\\ud83d\\udcc1 SUELTA AQU\\xcd PARA ADJUNTAR ARCHIVOS - NUEVO\"),r.a.createElement(Wo,{disabled:be(),handleAddEmoji:$,showEmoji:u,setShowEmoji:p}),r.a.createElement(Bo,{disableOption:be,handleChangeMedias:ee}),r.a.createElement(W.a,{\"aria-label\":\"quickReplies\",component:\"span\",disabled:be(),onClick:ue,title:\"Respuestas R\\xe1pidas\"},r.a.createElement(ye.a,{className:l.sendMessageIcons})),r.a.createElement(W.a,{\"aria-label\":\"fileLists\",component:\"span\",disabled:be(),onClick:pe,title:\"Listas de Archivos\"},r.a.createElement(wo.a,{className:l.sendMessageIcons})),r.a.createElement(V.a,{anchorEl:T,open:Boolean(T),onClose:ge,PaperProps:{style:{maxHeight:300,width:300}}},w.map(e=>r.a.createElement(G.a,{key:e.value.id,onClick:()=>Ee(e),style:{display:\"flex\",alignItems:\"center\",fontSize:\"14px\",padding:\"8px 16px\"}},e.label)),0===w.length&&r.a.createElement(G.a,{disabled:!0},\"No hay listas de archivos disponibles\")),r.a.createElement(Fo,{width:e.width,setSignMessage:U,signMessage:z}),r.a.createElement(Uo,{loading:g,inputRef:L,ticketStatus:a,inputMessage:d,setInputMessage:m,handleSendMessage:ie,handleInputPaste:ae,disableOption:be,replyingMessage:F,handleQuickAnswersClick:se,options:y,popupOpen:C}),r.a.createElement(zo,{inputMessage:d,loading:g,recording:b,ticketStatus:a,handleSendMessage:ie,handleCancelAudio:me,handleUploadAudio:de,handleStartRecording:ce,handleOpenModalForward:Z,showSelectMessageCheckbox:K,setShowSelectMessageCheckbox:Q,setSelectedMessages:Y})))});function Vo(e){let{ticket:a}=e;const[t,l]=Object(n.useState)([]),[o,s]=Object(n.useState)([]),i=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{i.current=!1},[]),Object(n.useEffect)(()=>{i.current&&d().then(()=>{Array.isArray(a.tags)?s(a.tags):s([])})},[a]);const c=async e=>{try{const{data:a}=await Qe.post(\"/tags\",e);return a}catch(a){Xe(a)}},d=async()=>{try{const{data:e}=await Qe.get(\"/tags/list\");l(e)}catch(e){Xe(e)}},m=async(e,t)=>{let n=[];if(\"create-option\"===t){if(Object(Ye.isArray)(e))for(let a of e)if(Object(Ye.isString)(a)){const e=await c({name:a});n.push(e)}else n.push(a);await d()}else n=e;s(n),await(async e=>{try{const{data:a}=await Qe.post(\"/tags/sync\",e);return a}catch(a){Xe(a)}})({ticketId:a.id,tags:n})};return r.a.createElement(xt.a,{style:{padding:12}},r.a.createElement(qt.a,{multiple:!0,size:\"small\",options:t,value:o,freeSolo:!0,onChange:(e,a,t)=>m(a,t),getOptionLabel:e=>e.name,renderTags:(e,a)=>e.map((e,t)=>r.a.createElement(Vn.a,Object.assign({variant:\"outlined\",style:{background:e.color||\"#eee\",color:\"#FFF\",marginRight:1,fontWeight:600,borderRadius:3,fontSize:\"0.8em\",whiteSpace:\"nowrap\"},label:e.name.toUpperCase()},a({index:t}),{size:\"small\"}))),renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{variant:\"outlined\",placeholder:\"Tags\"})),PaperComponent:e=>{let{children:a}=e;return r.a.createElement(xt.a,{style:{width:400,marginLeft:12}},a)}}))}var Go=t(1146),_o=t(1148);const Ko=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Qo=Wt.b().shape({body:Wt.d().min(5,\"Mensaje muy corto\").required(\"Obligatorio\"),contactId:Wt.a().required(\"Obligatorio\"),whatsappId:Wt.a().required(\"Obligatorio\"),sendAt:Wt.d().required(\"Obligatorio\")});var Yo=e=>{let{open:a,onClose:t,scheduleId:l,contactId:o,cleanContact:s,reload:i,ticketId:c}=e;const d=Ko(),m=Object(M.useHistory)(),{user:u}=Object(n.useContext)(ra),p={body:\"\",contactId:\"\",whatsappId:\"\",sendAt:ta()().add(1,\"hour\").format(\"YYYY-MM-DDTHH:mm\"),sentAt:\"\"},g={id:\"\",name:\"\"},[E,b]=Object(n.useState)(p),[f,h]=Object(n.useState)(g),[v,y]=Object(n.useState)([g]),[x,C]=Object(n.useState)([]),[A,S]=Object(n.useState)(null),[O,w]=Object(n.useState)(null),k=Object(n.useRef)(null),[T,I]=Object(n.useState)(!1),[N,R]=Object(n.useState)(!1),D=Object(n.useRef)();Object(n.useEffect)(()=>{if(o&&v.length){const e=v.find(e=>e.id===o);e&&h(e)}},[o,v]),Object(n.useEffect)(()=>{const{companyId:e}=u;if(a)try{(async()=>{const{data:a}=await Qe.get(\"/contacts/list\",{params:{companyId:e}});let t=a.map(e=>({id:e.id,name:e.name}));Object(Ye.isArray)(t)&&y([{id:\"\",name:\"\"},...t]);const{data:n}=await Qe.get(\"/whatsapp\",{params:{companyId:e}});if(Object(Ye.isArray)(n)&&C(n),o&&b(e=>({...e,contactId:o})),c)try{const{data:e}=await Qe.get(\"/tickets/\"+c);e&&e.whatsappId&&(b(a=>({...a,whatsappId:e.whatsappId})),S(x.find(a=>a.id===e.whatsappId)),j.dashboard.debug(\"[ScheduleModal] Usando WhatsApp del ticket: \"+e.whatsappId))}catch(s){j.dashboard.error(\"[ScheduleModal] Error obteniendo ticket: \"+s.message)}if(!l)return;const{data:r}=await Qe.get(\"/schedules/\"+l);b(e=>({...e,...r,sendAt:ta()(r.sendAt).format(\"YYYY-MM-DDTHH:mm\")})),h(r.contact)})()}catch(t){Xe(t)}},[l,o,a,u,c,x]);const L=()=>{t(),w(null),b(p)};return r.a.createElement(\"div\",{className:d.root},r.a.createElement(ft,{title:Fe.a.t(\"scheduleModal.confirmationModal.deleteTitle\"),open:T,onClose:()=>I(!1),onConfirm:async()=>{O&&(w(null),k.current.value=null),E.mediaPath&&(await Qe.delete(`/schedules/${E.id}/media-upload`),b(e=>({...e,mediaPath:null})),P.b.success(Fe.a.t(\"scheduleModal.toasts.deleted\")),\"function\"==typeof i&&(j.dashboard.debug(\"Reload function:\",i),j.dashboard.debug(\"Executing reload\"),i()))}},Fe.a.t(\"scheduleModal.confirmationModal.deleteMessage\")),r.a.createElement(ft,{title:\"Cancelar Reuni\\xf3n\",open:N,onClose:()=>R(!1),onConfirm:async()=>{try{await Qe.post(`/schedules/${l}/cancel-reminder`),P.b.success(\"Reuni\\xf3n cancelada exitosamente\"),\"function\"==typeof i&&i(),window.location.reload()}catch(e){Xe(e)}R(!1)}},\"\\xbfEst\\xe1 seguro que desea cancelar esta reuni\\xf3n? Se enviar\\xe1 un mensaje de cancelaci\\xf3n al contacto.\"),r.a.createElement(at.a,{open:a,onClose:L,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},\"ERRO\"===E.status?\"Error de Env\\xedo\":\"Mensaje \"+Object(Ye.capitalize)(E.status)),r.a.createElement(\"div\",{style:{display:\"none\"}},r.a.createElement(\"input\",{type:\"file\",accept:\".png,.jpg,.jpeg\",ref:k,onChange:e=>(e=>{const a=Object(Ye.head)(e.target.files);a&&w(a)})(e)})),r.a.createElement(Ft.e,{initialValues:E,enableReinitialize:!0,validationSchema:Qo,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,userId:u.id};try{if(l){const e=await Qe.put(\"/schedules/\"+l,a);if(null!=O){const e=new FormData;e.append(\"file\",O),await Qe.post(`/schedules/${l}/media-upload`,e)}if(e.data&&e.data.isReminderSystem)return P.b.success(\"Reuni\\xf3n reprogramada exitosamente\"),void window.location.reload()}else{const{data:e}=await Qe.post(\"/schedules\",a);if(null!=O){const a=new FormData;a.append(\"file\",O),await Qe.post(`/schedules/${e.id}/media-upload`,a)}}P.b.success(Fe.a.t(\"scheduleModal.success\")),\"function\"==typeof i&&i(),o&&\"function\"===typeof s&&(s(),m.push(\"/schedules\"))}catch(t){Xe(t)}h(g),b(p),L()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o,setFieldValue:s}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:d.multFieldLine},r.a.createElement(Cn.a,{variant:\"outlined\",fullWidth:!0},r.a.createElement(qt.a,{fullWidth:!0,value:f,options:v,onChange:(e,a)=>{const t=a?a.id:\"\";b({...E,contactId:t}),h(a||g)},getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>a.id===e.id,renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{variant:\"outlined\",placeholder:\"Contacto\"}))}))),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:d.multFieldLine},r.a.createElement(Cn.a,{variant:\"outlined\",fullWidth:!0},r.a.createElement(qt.a,{fullWidth:!0,value:A,options:x,onChange:(e,a)=>{const t=a?a.id:\"\";b({...E,whatsappId:t}),S(a||null)},getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>a&&a.id===e.id,renderInput:e=>r.a.createElement(Dt.a,Object.assign({},e,{variant:\"outlined\",placeholder:\"Conexi\\xf3n WhatsApp\"}))}))),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:d.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,rows:9,multiline:!0,label:Fe.a.t(\"scheduleModal.form.body\"),name:\"body\",inputRef:D,error:a.body&&Boolean(t.body),helperText:a.body&&t.body,variant:\"outlined\",margin:\"dense\",fullWidth:!0})),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:d.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"scheduleModal.form.sendAt\"),type:\"datetime-local\",name:\"sendAt\",InputLabelProps:{shrink:!0},error:a.sendAt&&Boolean(t.sendAt),helperText:a.sendAt&&t.sendAt,variant:\"outlined\",fullWidth:!0})),(E.mediaPath||O)&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fa.a,{startIcon:r.a.createElement(co.a,null)},O?O.name:E.mediaName),r.a.createElement(W.a,{onClick:()=>I(!0),color:\"secondary\"},r.a.createElement(zt.a,{color:\"secondary\"})))),r.a.createElement(tt.a,null,!O&&!E.mediaPath&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>k.current.click(),disabled:n,variant:\"outlined\"},\"ADJUNTAR\"),l&&E.isReminderSystem&&r.a.createElement(Fa.a,{onClick:()=>R(!0),color:\"secondary\",disabled:n,variant:\"outlined\"},\"CANCELAR\"),r.a.createElement(Fa.a,{onClick:L,color:\"secondary\",disabled:n,variant:\"outlined\"},\"SALIR\"),(null===E.sentAt||\"\"===E.sentAt)&&!l||l&&ta()(E.sendAt).isAfter(ta()())?r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:d.btnWrapper},l?\"\"+Fe.a.t(\"scheduleModal.buttons.okEdit\"):\"\"+Fe.a.t(\"scheduleModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:d.buttonProgress})):null))})))};var Xo=e=>{let{ticket:a,menuOpen:t,handleClose:l,anchorEl:o}=e;const[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),m=Object(n.useRef)(!0),{user:u}=Object(n.useContext)(ra),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(null);Object(n.useEffect)(()=>()=>{m.current=!1},[]);const f=e=>{i(!0),l()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{id:\"menu-appbar\",anchorEl:o,getContentAnchorEl:null,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},keepMounted:!0,transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:t,onClose:l},r.a.createElement(G.a,{onClick:()=>{l(),b(a.contact.id),g(!0)}},Fe.a.t(\"ticketOptionsMenu.schedule\")),r.a.createElement(G.a,{onClick:e=>{d(!0),l()}},Fe.a.t(\"ticketOptionsMenu.transfer\")),r.a.createElement(ca,{role:u.profile,perform:\"ticket-options:deleteTicket\",yes:()=>r.a.createElement(G.a,{onClick:f},Fe.a.t(\"ticketOptionsMenu.delete\"))})),r.a.createElement(ft,{title:`${Fe.a.t(\"ticketOptionsMenu.confirmationModal.title\")}${a.id} ${Fe.a.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${a.contact.name}?`,open:s,onClose:i,onConfirm:async()=>{try{await Qe.delete(\"/tickets/\"+a.id)}catch(e){Xe(e)}}},Fe.a.t(\"ticketOptionsMenu.confirmationModal.message\")),r.a.createElement(wn,{modalOpen:c,onClose:()=>{m.current&&d(!1)},ticketid:a.id}),r.a.createElement(Yo,{open:p,onClose:()=>{g(!1),b(null)},\"aria-labelledby\":\"form-dialog-title\",contactId:E,ticketId:a.id}))},Jo=t(654),Zo=t.n(Jo);const $o=Object(D.a)(e=>({actionButtons:{marginRight:6,flex:\"none\",alignSelf:\"center\",marginLeft:\"auto\",\"& > *\":{margin:e.spacing(.5)}}}));var es=e=>{let{ticket:a}=e;const t=$o(),l=Object(M.useHistory)(),[o,s]=Object(n.useState)(null),[i,c]=Object(n.useState)(!1),u=Boolean(o),{user:p}=Object(n.useContext)(ra),{setCurrentTicket:g}=Object(n.useContext)(qa),E=Object(d.a)({palette:{primary:Pa.a}}),b=async(e,t,n)=>{c(!0);try{await Qe.put(\"/tickets/\"+a.id,{status:t,userId:n||null,useIntegration:\"closed\"!==t&&a.useIntegration,promptId:\"closed\"!==t&&a.promptId,integrationId:\"closed\"!==t&&a.integrationId}),c(!1),\"open\"===t?g({...a,code:\"#open\"}):(g({id:null,code:null}),l.push(\"/tickets\"))}catch(r){c(!1),Xe(r)}};return r.a.createElement(\"div\",{className:t.actionButtons},\"closed\"===a.status&&r.a.createElement(Ua,{loading:i,startIcon:r.a.createElement(Go.a,null),size:\"small\",onClick:e=>b(0,\"open\",null===p||void 0===p?void 0:p.id)},Fe.a.t(\"messagesList.header.buttons.reopen\")),\"open\"===a.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Da.a,{title:Fe.a.t(\"messagesList.header.buttons.return\")},r.a.createElement(W.a,{onClick:e=>b(0,\"pending\",null)},r.a.createElement(Zo.a,null))),r.a.createElement(m.a,{theme:E},r.a.createElement(Da.a,{title:Fe.a.t(\"messagesList.header.buttons.resolve\")},r.a.createElement(W.a,{onClick:e=>b(0,\"closed\",null===p||void 0===p?void 0:p.id),color:\"primary\"},r.a.createElement(wt.a,null)))),r.a.createElement(W.a,{onClick:e=>{s(e.currentTarget)}},r.a.createElement(_o.a,null)),r.a.createElement(Xo,{ticket:a,anchorEl:o,menuOpen:u,handleClose:e=>{s(null)}})),\"pending\"===a.status&&r.a.createElement(Ua,{loading:i,size:\"small\",variant:\"contained\",color:\"primary\",onClick:e=>b(0,\"open\",null===p||void 0===p?void 0:p.id)},Fe.a.t(\"messagesList.header.buttons.accept\")))};const as=Object(D.a)(e=>({root:{display:\"flex\",height:\"100%\",position:\"relative\",overflow:\"hidden\"},mainWrapper:{flex:1,height:\"100%\",display:\"flex\",flexDirection:\"column\",overflow:\"hidden\",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:\"0\",marginRight:-320,transition:e.transitions.create(\"margin\",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create(\"margin\",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));var ts=()=>{const{ticketId:e}=Object(M.useParams)(),a=Object(M.useHistory)(),t=as(),{user:l}=Object(n.useContext)(ra),[o,s]=Object(n.useState)(!1),[i,c]=Object(n.useState)(!0),[d,m]=Object(n.useState)({}),[u,p]=Object(n.useState)({}),g=Object(n.useContext)(v);Object(n.useEffect)(()=>{c(!0);const t=setTimeout(()=>{(async()=>{try{const{data:t}=await Qe.get(\"/tickets/u/\"+e),{queueId:n}=t,{queues:r,profile:o}=l;if(void 0===r.find(e=>e.id===n)&&\"admin\"!==o)return P.b.error(\"Acesso n\\xe3o permitido\"),void a.push(\"/tickets\");m(t.contact),p(t),c(!1)}catch(t){c(!1),Xe(t)}})()},500);return()=>clearTimeout(t)},[e,l,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),t=g.getSocket(e);return t.on(\"ready\",()=>t.emit(\"joinChatBox\",\"\"+u.id)),t.on(`company-${e}-ticket`,e=>{\"update\"===e.action&&e.ticket.id===u.id&&p(e.ticket),\"delete\"===e.action&&e.ticketId===u.id&&a.push(\"/tickets\")}),t.on(`company-${e}-contact`,e=>{\"update\"===e.action&&m(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?{...a,...e.contact}:a})}),()=>{t.disconnect()}},[e,u,a,g]);const E=()=>{s(!0)};return r.a.createElement(\"div\",{className:t.root,id:\"drawer-container\"},r.a.createElement(xt.a,{variant:\"outlined\",elevation:0,className:Object(R.a)(t.mainWrapper,{[t.mainWrapperShift]:o})},r.a.createElement(En,{loading:i},(()=>{if(void 0!==u.user)return r.a.createElement(vn,{contact:d,ticket:u,onClick:E})})(),r.a.createElement(es,{ticket:u})),r.a.createElement(xt.a,null,r.a.createElement(Vo,{ticket:u})),r.a.createElement(yt,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(sn,{ticket:u,ticketId:u.id,isGroup:u.isGroup}),r.a.createElement(Ho,{ticketId:u.id,ticketStatus:u.status})))),r.a.createElement(ro,{open:o,handleDrawerClose:()=>{s(!1)},contact:d,loading:i,ticket:u}))};const ns=Object(D.a)(e=>({chatContainer:{flex:1,padding:e.spacing(0),height:\"calc(100% - 48px)\",overflowY:\"hidden\"},chatPapper:{display:\"flex\",height:\"100%\"},contactsWrapper:{display:\"flex\",height:\"100%\",flexDirection:\"column\",overflowY:\"hidden\"},messagesWrapper:{display:\"flex\",height:\"100%\",flexDirection:\"column\"},welcomeMsg:{backgroundColor:e.palette.boxticket,display:\"flex\",justifyContent:\"space-evenly\",alignItems:\"center\",height:\"100%\",textAlign:\"center\"}})),rs=\"http://localhost:8080/public/logotipos/login.png?r=\"+Math.random();var ls=()=>{const e=ns(),{ticketId:a}=Object(M.useParams)();return r.a.createElement(\"div\",{className:e.chatContainer},r.a.createElement(\"div\",{className:e.chatPapper},r.a.createElement(ht.a,{container:!0,spacing:0},r.a.createElement(ht.a,{item:!0,xs:4,className:e.contactsWrapper},r.a.createElement(zl,null)),r.a.createElement(ht.a,{item:!0,xs:8,className:e.messagesWrapper},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(ts,null)):r.a.createElement(xt.a,{square:!0,variant:\"outlined\",className:e.welcomeMsg},r.a.createElement(\"div\",null,r.a.createElement(\"center\",null,r.a.createElement(\"img\",{style:{margin:\"0 auto\",width:\"80%\"},src:rs,alt:\"\"+Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:\"http://localhost:8080\"}).REACT_APP_NAME_SYSTEM}))))))))},os=t(1149),ss=t(1150),is=t(655),cs=t.n(is),ds=t(705);var ms=Object(ds.a)(xt.a)({height:\"calc(100% - 48px)\",display:\"grid\",gridTemplateRows:\"56px 1fr\"});const us=Object(D.a)(e=>({header:{},content:{overflow:\"auto\"},placeholderContainer:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",height:\"100%\",backgroundColor:e.palette.boxticket},placeholderItem:{}}));var ps=e=>{const a=us(),{ticketId:t}=Object(M.useParams)(),[l,o]=Object(n.useState)(0),{currentTicket:s,setCurrentTicket:i}=Object(n.useContext)(qa);Object(n.useEffect)(()=>(null!==s.id&&i({id:s.id,code:\"#open\"}),t||o(1),()=>{i({id:null,code:null})}),[]),Object(n.useEffect)(()=>{null!==s.id&&o(0)},[s]);const c=\"http://localhost:8080/public/logotipos/login.png?r=\"+Math.random();return r.a.createElement(ms,null,r.a.createElement(ja.a,{className:a.header},r.a.createElement(os.a,{value:l,onChange:(e,a)=>{o(a)},showLabels:!0,className:a.root},r.a.createElement(ss.a,{label:\"Ticket\",icon:r.a.createElement(wa.a,null)}),r.a.createElement(ss.a,{label:\"Atendimentos\",icon:r.a.createElement(cs.a,null)}))),r.a.createElement(ja.a,{className:a.content},0===l?t?r.a.createElement(ts,null):r.a.createElement(ja.a,{className:a.placeholderContainer},r.a.createElement(\"div\",null,r.a.createElement(\"center\",null,r.a.createElement(\"img\",{style:{margin:\"0 auto\",width:\"80%\"},src:c,alt:\"\"+Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:\"http://localhost:8080\"}).REACT_APP_NAME_SYSTEM}))),r.a.createElement(\"br\",null),r.a.createElement(Fa.a,{onClick:()=>o(1),variant:\"contained\",color:\"primary\"},\"Selecionar Ticket\")):r.a.createElement(zl,null)))};var gs=Object(vl.a)()((function(e){return Object(vl.b)(\"md\",e.width)?r.a.createElement(ls,null):r.a.createElement(ps,null)})),Es=t(445),bs=t.n(Es);const fs=Object(D.a)(e=>({paper:{marginTop:e.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:\"100%\",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})),hs=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),password:Wt.d().min(5,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\").required(\"Required\")});var vs=()=>{const e=fs(),a=Object(M.useHistory)(),[t,l]=Object(n.useState)(\"enabled\"),[o,i]=Object(n.useState)(\"3\");Object(n.useEffect)(()=>{d(),c()},[]);const c=async()=>{try{const e=(await Qe.get(\"/settings/trial\")).data.value;i(e)}catch(e){console.error(\"Error retrieving trial\",e)}},d=async()=>{try{const e=(await Qe.get(\"/settings/allowregister\")).data.value;l(e)}catch(e){console.error(\"Error retrieving allowregister\",e)}};\"disabled\"===t&&a.push(\"/login\");const[m]=Object(n.useState)({name:\"\",email:\"\",phone:\"\",password:\"\",planId:\"disabled\"}),u=ta()().add(o,\"day\").format(),[p,g]=Object(n.useState)([]),{register:E}=ba();Object(n.useEffect)(()=>{let e=!0;return async function(){try{const a=await E();e&&g(a)}catch(a){e&&console.error(\"Error fetching plans:\",a)}}(),()=>{e=!1}},[E]);const b=`${window.location.origin+\"/public/logotipos/signup.png\"}?r=${Math.random()}`;return r.a.createElement(Or.a,{component:\"main\",maxWidth:\"xs\"},r.a.createElement(s.a,null),r.a.createElement(\"div\",{className:e.paper},r.a.createElement(\"div\",null,r.a.createElement(\"img\",{style:{margin:\"0 auto\",width:\"80%\"},src:b,alt:\"Whaticket\"})),r.a.createElement(Ft.e,{initialValues:m,enableReinitialize:!0,validationSchema:hs,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{Object.assign(e,{recurrence:\"MENSAL\"}),Object.assign(e,{dueDate:u}),Object.assign(e,{status:\"t\"}),Object.assign(e,{campaignsEnabled:!0});try{await Ke.post(\"/companies/cadastro\",e),P.b.success(Fe.a.t(\"signup.toasts.success\")),a.push(\"/login\")}catch(t){console.log(t),Xe(t)}})(e),t.setSubmitting(!1)},400)}},a=>{let{touched:t,errors:n,isSubmitting:l}=a;return r.a.createElement(Ft.d,{className:e.form},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,autoComplete:\"name\",name:\"name\",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:\"outlined\",fullWidth:!0,id:\"name\",label:\"Nome da Empresa\"})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,id:\"email\",label:Fe.a.t(\"signup.form.email\"),name:\"email\",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:\"email\",required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{name:\"phone\"},e=>{let{field:a,form:l}=e;return r.a.createElement(bs.a,Object.assign({mask:\"(99) 99999-9999\"},a,{onChange:e=>{a.onChange(e),l.setFieldValue(\"phone\",e.target.value)}}),()=>r.a.createElement(Dt.a,Object.assign({},a,{variant:\"outlined\",fullWidth:!0,id:\"phone\",label:\"DDD988888888\",error:t.phone&&Boolean(n.phone),helperText:t.phone&&n.phone,autoComplete:\"phone\",required:!0,inputProps:{maxLength:11}})))})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,name:\"password\",error:t.password&&Boolean(n.password),helperText:t.password&&n.password,label:Fe.a.t(\"signup.form.password\"),type:\"password\",id:\"password\",autoComplete:\"current-password\",required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(An.a,{htmlFor:\"plan-selection\"},\"Plano\"),r.a.createElement(Ft.b,{as:Zt.a,variant:\"outlined\",fullWidth:!0,id:\"plan-selection\",label:\"Plano\",name:\"planId\",required:!0},r.a.createElement(G.a,{value:\"disabled\",disabled:!0},r.a.createElement(\"em\",null,\"Selecione seu plano de assinatura\")),p.map((e,a)=>r.a.createElement(G.a,{key:a,value:e.id},e.name,\" - \",e.connections,\" WhatsApps - \",e.users,\" Usuarios - $ \",e.value.toLocaleString(\"en-US\",{minimumFractionDigits:2})))))),r.a.createElement(Fa.a,{type:\"submit\",fullWidth:!0,variant:\"contained\",color:\"primary\",className:e.submit},Fe.a.t(\"signup.buttons.submit\")),r.a.createElement(ht.a,{container:!0,justify:\"flex-end\"},r.a.createElement(ht.a,{item:!0},r.a.createElement(Ul.a,{href:\"#\",variant:\"body2\",component:N.b,to:\"/login\"},Fe.a.t(\"signup.buttons.login\")))))})),r.a.createElement(ja.a,{mt:5}))},ys=t(656);const xs=()=>r.a.createElement(H.a,{variant:\"body2\",style:{color:\"white\"},align:\"center\"},\"Copyright \",r.a.createElement(Ul.a,{style:{color:\"white\"},href:\"#\"},ys.a),\" \",(new Date).getFullYear(),\".\",r.a.createElement(\"br\",null),r.a.createElement(\"span\",{style:{backgroundColor:\"#FFD700\",color:\"#000\",padding:\"4px 8px\",borderRadius:\"4px\",fontSize:\"12px\",fontWeight:\"bold\",display:\"inline-block\",minWidth:\"60px\",textAlign:\"center\",marginTop:\"8px\"}},\"BASIC\")),Cs=Object(D.a)(e=>({root:{width:\"100vw\",height:\"100vh\",background:\"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e40af 100%)\",backgroundRepeat:\"no-repeat\",backgroundSize:\"100% 100%\",backgroundPosition:\"center\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\"},paper:{backgroundColor:e.palette.login,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",padding:\"55px 30px\",borderRadius:\"12.5px\"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:\"100%\",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},powered:{color:\"white\"}}));var As=()=>{const e=Cs(),[a,t]=Object(n.useState)({email:\"\",password:\"\"}),{handleLogin:l}=Object(n.useContext)(ra),[o,i]=Object(n.useState)(\"disabled\"),c=e=>{t({...a,[e.target.name]:e.target.value})};Object(n.useEffect)(()=>{d()},[]);const d=async()=>{try{var e;const a=new AbortController,t=setTimeout(()=>a.abort(),5e3),n=await Qe.get(\"/settings/viewregister\",{signal:a.signal});clearTimeout(t);const r=null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.value;i(r)}catch(a){console.error(\"Error retrieving viewregister\",a),i(\"disabled\")}},m=\"http://localhost:8080/public/logotipos/login.png?r=\"+Math.random();return r.a.createElement(\"div\",{className:e.root},r.a.createElement(Or.a,{component:\"main\",maxWidth:\"xs\"},r.a.createElement(s.a,null),r.a.createElement(\"div\",{className:e.paper},r.a.createElement(\"div\",null,r.a.createElement(\"img\",{style:{margin:\"0 auto\",width:\"80%\"},src:m,alt:\"\"+(Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:\"http://localhost:8080\"}).REACT_APP_NAME_SYSTEM||\"Whaticket\")})),r.a.createElement(\"form\",{className:e.form,noValidate:!0,onSubmit:e=>{e.preventDefault(),l(a)}},r.a.createElement(Dt.a,{variant:\"outlined\",margin:\"normal\",required:!0,fullWidth:!0,id:\"email\",label:Fe.a.t(\"login.form.email\"),name:\"email\",value:a.email,onChange:c,autoComplete:\"email\",autoFocus:!0}),r.a.createElement(Dt.a,{variant:\"outlined\",margin:\"normal\",required:!0,fullWidth:!0,name:\"password\",label:Fe.a.t(\"login.form.password\"),type:\"password\",id:\"password\",value:a.password,onChange:c,autoComplete:\"current-password\"}),r.a.createElement(ht.a,{container:!0,justifyContent:\"flex-end\"},r.a.createElement(ht.a,{item:!0,xs:6,style:{textAlign:\"right\"}},r.a.createElement(Ul.a,{component:N.b,to:\"/forgetpsw\",variant:\"body2\"},Fe.a.t(\"login.forgotPassword\")))),r.a.createElement(Fa.a,{type:\"submit\",fullWidth:!0,variant:\"contained\",color:\"primary\",className:e.submit},Fe.a.t(\"login.buttons.submit\")),\"enabled\"===o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{container:!0},r.a.createElement(ht.a,{item:!0},r.a.createElement(Ul.a,{href:\"#\",variant:\"body2\",component:N.b,to:\"/signup\"},Fe.a.t(\"login.buttons.register\"))))))),r.a.createElement(ja.a,{mt:8},r.a.createElement(xs,null))))},Ss=t(1152),Os=t(1153),ws=t(1154),ks=t(1155),Ts=t(1156),Is=t(1157),js=t(1158);const Ns=Object(D.a)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:\"calc(100% - 48px)\"},contentWrapper:{height:\"100%\",overflowY:\"hidden\",display:\"flex\",flexDirection:\"column\"}}));var Ms=e=>{let{children:a}=e;const t=Ns();return r.a.createElement(Or.a,{className:t.mainContainer},r.a.createElement(\"div\",{className:t.contentWrapper},a))};const Ps=Object(D.a)(e=>({contactsHeader:{display:\"flex\",alignItems:\"center\",padding:\"0px 6px 6px 6px\"}}));var Rs=e=>{let{children:a}=e;const t=Ps();return r.a.createElement(\"div\",{className:t.contactsHeader},a)};const Ds=Object(D.a)(e=>({MainHeaderButtonsWrapper:{flex:\"none\",marginLeft:\"auto\",\"& > *\":{margin:e.spacing(1)}}}));var Ls=e=>{let{children:a}=e;const t=Ds();return r.a.createElement(\"div\",{className:t.MainHeaderButtonsWrapper},a)};function qs(e){return r.a.createElement(H.a,{variant:\"h5\",color:\"primary\",gutterBottom:!0},e.children)}const Ws=Object(D.a)(e=>({customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}}));var Fs=e=>{let{avatar:a,columns:t}=e;const n=Ws();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kr.a,null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Vr.a,{style:{paddingRight:0}},r.a.createElement(mn.a,{animation:\"wave\",variant:\"circle\",width:40,height:40})),r.a.createElement(Vr.a,null,r.a.createElement(mn.a,{animation:\"wave\",height:30,width:80}))),Array.from({length:t},(e,a)=>r.a.createElement(Vr.a,{align:\"center\",key:a},r.a.createElement(\"div\",{className:n.customTableCell},r.a.createElement(mn.a,{align:\"center\",animation:\"wave\",height:30,width:80}))))))};const Bs=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}})),zs=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\")});var Us=r.a.memo(e=>{let{open:a,onClose:t,whatsAppId:l,onSave:o}=e;const s=Bs(),i={name:\"\",greetingMessage:\"\",complationMessage:\"\",outOfHoursMessage:\"\",ratingMessage:\"\",isDefault:!1,token:\"\",provider:\"beta\",expiresInactiveMessage:\"\",expiresTicket:0,timeUseBotQueues:0,maxUseBotQueues:3},[c,d]=Object(n.useState)(i),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)([]),[E,b]=Object(n.useState)(null),[f,h]=Object(n.useState)(null),[v,y]=Object(n.useState)([]),[x,C]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(async()=>{if(l)try{var e;C(!0),console.log(\"\\ud83d\\udd04 CARGANDO DATOS DE WHATSAPP ID:\",l);const{data:a}=await Qe.get(`whatsapp/${l}?session=0`);console.log(\"\\ud83d\\udccb DATOS CARGADOS:\",a),d(a);const t=(null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id))||[];console.log(\"\\ud83d\\udccb DEPARTAMENTOS CARGADOS:\",t);const n=t.length>0?t[0]:null;console.log(\"\\ud83d\\udccb DEPARTAMENTO \\xdaNICO SELECCIONADO:\",n),u(n),b(a.transferQueueId),a.promptId?(console.log(\"\\ud83d\\udccb PROMPT ID CARGADO:\",a.promptId),h(a.promptId)):(console.log(\"\\ud83d\\udccb NO HAY PROMPT ID CONFIGURADO\"),h(null))}catch(a){console.error(\"\\u274c ERROR AL CARGAR DATOS:\",a),Xe(a)}finally{C(!1)}})()},[l]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/prompt\");y(e.prompts),console.log(\"\\ud83d\\udccb PROMPTS CARGADOS:\",e.prompts.length)}catch(e){Xe(e)}})()},[l]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/queue\");g(e),console.log(\"\\ud83d\\udccb DEPARTAMENTOS DISPONIBLES:\",e.length)}catch(e){Xe(e)}})()},[]);const A=e=>{console.log(\"\\ud83d\\udd04 CAMBIANDO PROMPT:\",e.target.value),e.target.value&&null!==e.target.value&&(console.log(\"\\u2705 PROMPT SELECCIONADO - LIMPIANDO DEPARTAMENTO\"),u(null)),h(e.target.value)},S=()=>{console.log(\"\\ud83d\\udd04 CERRANDO MODAL...\"),t(),d(i),b(null),u([]),h(null),C(!1)};return Object(n.useEffect)(()=>{console.log(\"\\ud83d\\udd0d WhatsAppModal Debug - selectedPrompt:\",f),console.log(\"\\ud83d\\udd0d WhatsAppModal Debug - whatsAppId:\",l),console.log(\"\\ud83d\\udd0d WhatsAppModal Debug - prompts disponibles:\",v.length),console.log(\"\\ud83d\\udd0d WhatsAppModal Debug - selectedQueueIds:\",m),console.log(\"\\ud83d\\udd0d WhatsAppModal Debug - queues disponibles:\",p.length)},[f,l,v,m,p]),r.a.createElement(\"div\",{className:s.root},r.a.createElement(at.a,{open:a,onClose:S,maxWidth:\"md\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,null,l?Fe.a.t(\"whatsappModal.title.edit\"):Fe.a.t(\"whatsappModal.title.add\")),r.a.createElement(Ft.e,{initialValues:c,enableReinitialize:!0,validationSchema:zs,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{C(!0);const a=m&&null!==m&&\"\"!==m,t=f&&null!==f;if(a&&t)return P.b.error(\"\\u274c Error: No puedes seleccionar departamento y prompt simult\\xe1neamente. Selecciona solo uno.\"),void C(!1);if(!a&&!t)return P.b.error(\"\\u274c Error: Debes seleccionar un departamento o un prompt.\"),void C(!1);console.log(\"\\ud83d\\udd04 GUARDANDO WHATSAPP...\"),console.log(\"\\ud83d\\udccb DATOS A GUARDAR:\",{...e,queueIds:m,transferQueueId:E,promptId:f||null});const n={...e,queueIds:m?[m]:[],transferQueueId:E,promptId:f||null};delete n.queues,delete n.session,l?(console.log(\"\\ud83d\\udd04 ACTUALIZANDO WHATSAPP EXISTENTE...\"),await Qe.put(\"/whatsapp/\"+l,n),console.log(\"\\u2705 WHATSAPP ACTUALIZADO EXITOSAMENTE\")):(console.log(\"\\ud83d\\udd04 CREANDO NUEVO WHATSAPP...\"),await Qe.post(\"/whatsapp\",n),console.log(\"\\u2705 WHATSAPP CREADO EXITOSAMENTE\")),P.b.success(Fe.a.t(\"whatsappModal.success\")),o&&(console.log(\"\\ud83d\\udd04 EJECUTANDO CALLBACK DE REFRESCO...\"),o()),S()}catch(a){console.error(\"\\u274c ERROR AL GUARDAR:\",a),Xe(a)}finally{C(!1)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,touched:t,errors:n,isSubmitting:o}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"whatsappModal.form.name\"),autoFocus:!0,name:\"name\",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:\"outlined\",margin:\"dense\",className:s.textField})),r.a.createElement(ht.a,{style:{paddingTop:15},item:!0},r.a.createElement(Gt.a,{control:r.a.createElement(Ft.b,{as:_t.a,color:\"primary\",name:\"isDefault\",checked:a.isDefault}),label:Fe.a.t(\"whatsappModal.form.default\")})))),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.greetingMessage\"),type:\"greetingMessage\",multiline:!0,rows:4,fullWidth:!0,name:\"greetingMessage\",error:t.greetingMessage&&Boolean(n.greetingMessage),helperText:t.greetingMessage&&n.greetingMessage,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.complationMessage\"),type:\"complationMessage\",multiline:!0,rows:4,fullWidth:!0,name:\"complationMessage\",error:t.complationMessage&&Boolean(n.complationMessage),helperText:t.complationMessage&&n.complationMessage,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.outOfHoursMessage\"),type:\"outOfHoursMessage\",multiline:!0,rows:4,fullWidth:!0,name:\"outOfHoursMessage\",error:t.outOfHoursMessage&&Boolean(n.outOfHoursMessage),helperText:t.outOfHoursMessage&&n.outOfHoursMessage,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.ratingMessage\"),type:\"ratingMessage\",multiline:!0,rows:4,fullWidth:!0,name:\"ratingMessage\",error:t.ratingMessage&&Boolean(n.ratingMessage),helperText:t.ratingMessage&&n.ratingMessage,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.token\"),type:\"token\",fullWidth:!0,name:\"token\",variant:\"outlined\",margin:\"dense\"})),r.a.createElement(_n,{selectedQueueIds:m,onChange:e=>{return a=e,console.log(\"\\ud83d\\udd04 CAMBIANDO DEPARTAMENTOS:\",a),a&&null!==a&&(console.log(\"\\u2705 DEPARTAMENTO SELECCIONADO - LIMPIANDO PROMPT\"),h(null)),void u(a);var a},multiple:!1,title:\"Departamentos\"}),r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,null,Fe.a.t(\"whatsappModal.form.prompt\")),r.a.createElement(Zt.a,{labelId:\"dialog-select-prompt-label\",id:\"dialog-select-prompt\",name:\"promptId\",value:f||\"\",onChange:A,label:Fe.a.t(\"whatsappModal.form.prompt\"),fullWidth:!0,MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null}},r.a.createElement(G.a,{value:\"\"},\"Ninguna\"),v.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name)))),r.a.createElement(\"div\",null,r.a.createElement(\"h3\",null,Fe.a.t(\"whatsappModal.form.queueRedirection\")),r.a.createElement(\"p\",null,Fe.a.t(\"whatsappModal.form.queueRedirectionDesc\")),r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0,sm:6},r.a.createElement(Ft.b,{fullWidth:!0,type:\"number\",as:Dt.a,label:Fe.a.t(\"whatsappModal.form.timeToTransfer\"),name:\"timeToTransfer\",error:t.timeToTransfer&&Boolean(n.timeToTransfer),helperText:t.timeToTransfer&&n.timeToTransfer,variant:\"outlined\",margin:\"dense\",className:s.textField,InputLabelProps:{shrink:!!a.timeToTransfer}})),r.a.createElement(ht.a,{item:!0,sm:6},r.a.createElement(_n,{selectedQueueIds:E,onChange:e=>{b(e)},multiple:!1,title:Fe.a.t(\"whatsappModal.form.transferQueue\")}))),r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,md:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"whatsappModal.form.expiresTicket\"),fullWidth:!0,name:\"expiresTicket\",variant:\"outlined\",margin:\"dense\",error:t.expiresTicket&&Boolean(n.expiresTicket),helperText:t.expiresTicket&&n.expiresTicket}))),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"whatsappModal.form.expiresInactiveMessage\"),multiline:!0,rows:4,fullWidth:!0,name:\"expiresInactiveMessage\",error:t.expiresInactiveMessage&&Boolean(n.expiresInactiveMessage),helperText:t.expiresInactiveMessage&&n.expiresInactiveMessage,variant:\"outlined\",margin:\"dense\"})))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:S,color:\"secondary\",disabled:o||x,variant:\"outlined\"},Fe.a.t(\"whatsappModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:o||x,variant:\"contained\",className:s.btnWrapper},l?Fe.a.t(\"whatsappModal.buttons.okEdit\"):Fe.a.t(\"whatsappModal.buttons.okAdd\"),(o||x)&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))}),Hs=t(657),Vs=t.n(Hs);var Gs=r.a.memo(e=>{let{open:a,onClose:t,whatsAppId:l}=e;const[o,s]=Object(n.useState)(\"\"),i=Object(n.useContext)(v);return Object(n.useEffect)(()=>{(async()=>{if(l)try{const{data:e}=await Qe.get(\"/whatsapp/\"+l);s(e.qrcode)}catch(e){Xe(e)}})()},[l]),Object(n.useEffect)(()=>{if(!l)return;const e=localStorage.getItem(\"companyId\"),a=i.getSocket(e);return a.on(`company-${e}-whatsappSession`,e=>{\"update\"===e.action&&e.session.id===l&&s(e.session.qrcode),\"update\"===e.action&&\"\"===e.session.qrcode&&t()}),()=>{a.disconnect()}},[l,t,i]),r.a.createElement(at.a,{open:a,onClose:t,maxWidth:\"lg\",scroll:\"paper\"},r.a.createElement(Et.a,null,r.a.createElement(xt.a,{elevation:0,style:{display:\"flex\",alignItems:\"center\"}},r.a.createElement(\"div\",{style:{marginRight:\"20px\"}},r.a.createElement(H.a,{variant:\"h2\",component:\"h2\",color:\"textPrimary\",gutterBottom:!0,style:{fontFamily:\"Montserrat\",fontWeight:\"bold\",fontSize:\"20px\"}},\"Utilize o Whaticket com seu WhatsApp:\"),r.a.createElement(H.a,{variant:\"body1\",color:\"textPrimary\",gutterBottom:!0},\"1 - Abra o WhatsApp no seu celular\"),r.a.createElement(H.a,{variant:\"body1\",color:\"textPrimary\",gutterBottom:!0},\"2 - Toque em Mais op\\xe7\\xf5es no Android \",r.a.createElement(\"svg\",{class:\"MuiSvgIcon-root\",focusable:\"false\",viewBox:\"0 0 24 24\",\"aria-hidden\":\"true\"},r.a.createElement(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})),\" ou em Configura\\xe7\\xf5es \",r.a.createElement(\"svg\",{class:\"MuiSvgIcon-root\",focusable:\"false\",viewBox:\"0 0 24 24\",\"aria-hidden\":\"true\"},r.a.createElement(\"path\",{d:\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"})),\" no iPhone\"),r.a.createElement(H.a,{variant:\"body1\",color:\"textPrimary\",gutterBottom:!0},\"3 - Toque em Dispositivos conectados e, em seguida, em Conectar dispositivos\"),r.a.createElement(H.a,{variant:\"body1\",color:\"textPrimary\",gutterBottom:!0},\"4 - Aponte seu celular para essa tela para capturar o QR Code\")),r.a.createElement(\"div\",null,o?r.a.createElement(Vs.a,{value:o,size:256}):r.a.createElement(\"span\",null,\"Waiting for QR Code\")))))});const _s=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:\"scroll\",...e.scrollbarStyles},customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},tooltip:{backgroundColor:\"#f5f5f9\",color:\"rgba(0, 0, 0, 0.87)\",fontSize:e.typography.pxToRem(14),border:\"1px solid #dadde9\",maxWidth:450},tooltipPopper:{textAlign:\"center\"},buttonProgress:{color:Pa.a[500]},tableCell:{padding:e.spacing(1.5),fontSize:\"14px\"},avatarCell:{padding:e.spacing(1),textAlign:\"center\"},tokenCell:{padding:e.spacing(1),minWidth:\"220px\",maxWidth:\"250px\"},instanceCell:{padding:e.spacing(1),minWidth:\"100px\"}})),Ks=e=>{let{title:a,content:t,children:n}=e;const l=_s();return r.a.createElement(Da.a,{arrow:!0,classes:{tooltip:l.tooltip,popper:l.tooltipPopper},title:r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{gutterBottom:!0,color:\"inherit\"},a),t&&r.a.createElement(H.a,null,t))},n)};var Qs=()=>{const e=_s(),{user:a}=Object(n.useContext)(ra),{whatsApps:t,loading:l}=Object(n.useContext)($e),[o,s]=Object(n.useState)(!1),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(!1),g={action:\"\",title:\"\",message:\"\",whatsAppId:\"\",open:!1},[E,b]=Object(n.useState)(g),f=async()=>{try{await Qe.post(\"/whatsapp-restart/\"),P.b.warn(Fe.a.t(\"Aguarde... reiniciando...\"))}catch(e){Xe(e)}},h=()=>{m(null),s(!0)},v=Object(n.useCallback)(()=>{s(!1),m(null)},[m,s]),y=Object(n.useCallback)(()=>{m(null),c(!1)},[c,m]),x=(e,a)=>{\"disconnect\"===e&&b({action:e,title:Fe.a.t(\"connections.confirmationModal.disconnectTitle\"),message:Fe.a.t(\"connections.confirmationModal.disconnectMessage\"),whatsAppId:a}),\"delete\"===e&&b({action:e,title:Fe.a.t(\"connections.confirmationModal.deleteTitle\"),message:Fe.a.t(\"connections.confirmationModal.deleteMessage\"),whatsAppId:a}),p(!0)},C=e=>r.a.createElement(r.a.Fragment,null,\"qrcode\"===e.status&&r.a.createElement(Fa.a,{size:\"small\",variant:\"contained\",color:\"primary\",onClick:()=>(e=>{m(e),c(!0)})(e)},Fe.a.t(\"connections.buttons.qrcode\")),\"DISCONNECTED\"===e.status&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Fa.a,{size:\"small\",variant:\"outlined\",color:\"primary\",onClick:()=>(async e=>{try{await Qe.post(\"/whatsappsession/\"+e)}catch(a){Xe(a)}})(e.id)},Fe.a.t(\"connections.buttons.tryAgain\")),\" \",r.a.createElement(Fa.a,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>(async e=>{try{await Qe.put(\"/whatsappsession/\"+e)}catch(a){Xe(a)}})(e.id)},Fe.a.t(\"connections.buttons.newQr\"))),(\"CONNECTED\"===e.status||\"PAIRING\"===e.status||\"TIMEOUT\"===e.status)&&r.a.createElement(Fa.a,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>{x(\"disconnect\",e.id)}},Fe.a.t(\"connections.buttons.disconnect\")),\"OPENING\"===e.status&&r.a.createElement(Fa.a,{size:\"small\",variant:\"outlined\",disabled:!0,color:\"default\"},Fe.a.t(\"connections.buttons.connecting\")));return r.a.createElement(Ms,null,r.a.createElement(ft,{title:E.title,open:u,onClose:p,onConfirm:async()=>{if(\"disconnect\"===E.action)try{await Qe.delete(\"/whatsappsession/\"+E.whatsAppId)}catch(e){Xe(e)}if(\"delete\"===E.action)try{await Qe.delete(\"/whatsapp/\"+E.whatsAppId),P.b.success(Fe.a.t(\"connections.toasts.deleted\"))}catch(e){Xe(e)}b(g)}},E.message),r.a.createElement(Gs,{open:i,onClose:y,whatsAppId:!o&&(null===d||void 0===d?void 0:d.id)}),r.a.createElement(Us,{open:o,onClose:v,whatsAppId:!i&&(null===d||void 0===d?void 0:d.id),onSave:()=>{window.location.reload()}}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"connections.title\")),r.a.createElement(Ls,null,r.a.createElement(ca,{role:a.profile,perform:\"connections-page:addConnection\",yes:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:h},Fe.a.t(\"connections.buttons.add\")),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:f},Fe.a.t(\"connections.buttons.restart\")))}))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\"},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"connections.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"connections.table.number\")),r.a.createElement(Vr.a,{align:\"center\"},\"Avatar\"),r.a.createElement(Vr.a,{align:\"center\"},\"Instancia\"),r.a.createElement(Vr.a,{align:\"center\"},\"Token\"),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"connections.table.status\")),r.a.createElement(ca,{role:a.profile,perform:\"connections-page:actionButtons\",yes:()=>r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"connections.table.session\"))}),r.a.createElement(Vr.a,{align:\"center\"},\"Fecha\"),r.a.createElement(Vr.a,{align:\"center\"},\"Default\"),r.a.createElement(ca,{role:a.profile,perform:\"connections-page:editOrDeleteConnection\",yes:()=>r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"connections.table.actions\"))}))),r.a.createElement(Hr.a,null,l?r.a.createElement(Fs,null):r.a.createElement(r.a.Fragment,null,(null===t||void 0===t?void 0:t.length)>0&&t.map(t=>r.a.createElement(Kr.a,{key:t.id},r.a.createElement(Vr.a,{align:\"center\"},t.name),r.a.createElement(Vr.a,{align:\"center\"},t.number?r.a.createElement(\"span\",{style:{fontFamily:\"monospace\",fontSize:\"13px\",fontWeight:\"bold\",color:\"#1976d2\",backgroundColor:\"#e3f2fd\",padding:\"4px 8px\",borderRadius:\"4px\",border:\"1px solid #1976d2\"}},t.number):\"-\"),r.a.createElement(Vr.a,{align:\"center\",className:e.avatarCell},t.avatar?r.a.createElement(\"img\",{src:t.avatar,alt:\"Avatar\",style:{width:45,height:45,borderRadius:\"50%\",border:\"3px solid #ddd\",boxShadow:\"0 2px 4px rgba(0,0,0,0.1)\"},onError:e=>{e.target&&(e.target.style.display=\"none\",e.target.nextSibling&&(e.target.nextSibling.style.display=\"block\"))}}):r.a.createElement(\"div\",{style:{width:45,height:45,borderRadius:\"50%\",backgroundColor:\"#1976d2\",color:\"white\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontWeight:\"bold\",fontSize:\"18px\",boxShadow:\"0 2px 4px rgba(0,0,0,0.1)\"}},t.name?t.name.charAt(0).toUpperCase():\"?\")),r.a.createElement(Vr.a,{align:\"center\",className:e.instanceCell},t.instance?r.a.createElement(\"span\",{style:{fontFamily:\"monospace\",fontSize:\"13px\",backgroundColor:\"#f5f5f5\",padding:\"6px 10px\",borderRadius:\"6px\",border:\"1px solid #757575\",fontWeight:\"bold\",color:\"#424242\"}},t.instance.replace(\"whatsapp_\",\"\").replace(\"_\",\"\")):\"-\"),r.a.createElement(Vr.a,{align:\"center\",className:e.tokenCell},t.token?r.a.createElement(Da.a,{title:t.token,placement:\"top\"},r.a.createElement(\"span\",{style:{fontFamily:\"monospace\",fontSize:\"11px\",backgroundColor:\"#e3f2fd\",padding:\"6px 10px\",borderRadius:\"6px\",cursor:\"pointer\",border:\"1px solid #2196f3\",fontWeight:\"bold\",color:\"#1565c0\",maxWidth:\"200px\",overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\",display:\"inline-block\"}},t.token)):\"-\"),r.a.createElement(Vr.a,{align:\"center\"},(a=>r.a.createElement(\"div\",{className:e.customTableCell},\"DISCONNECTED\"===a.status&&r.a.createElement(Ks,{title:Fe.a.t(\"connections.toolTips.disconnected.title\"),content:Fe.a.t(\"connections.toolTips.disconnected.content\")},r.a.createElement(Ss.a,{color:\"secondary\"})),\"OPENING\"===a.status&&r.a.createElement(Ba.a,{size:24,className:e.buttonProgress}),\"qrcode\"===a.status&&r.a.createElement(Ks,{title:Fe.a.t(\"connections.toolTips.qrcode.title\"),content:Fe.a.t(\"connections.toolTips.qrcode.content\")},r.a.createElement(Os.a,null)),\"CONNECTED\"===a.status&&r.a.createElement(Ks,{title:Fe.a.t(\"connections.toolTips.connected.title\")},r.a.createElement(ws.a,{style:{color:Pa.a[500]}})),(\"TIMEOUT\"===a.status||\"PAIRING\"===a.status)&&r.a.createElement(Ks,{title:Fe.a.t(\"connections.toolTips.timeout.title\"),content:Fe.a.t(\"connections.toolTips.timeout.content\")},r.a.createElement(ks.a,{color:\"secondary\"}))))(t)),r.a.createElement(ca,{role:a.profile,perform:\"connections-page:actionButtons\",yes:()=>r.a.createElement(Vr.a,{align:\"center\"},C(t))}),r.a.createElement(Vr.a,{align:\"center\"},Object(Ca.a)(Object(ka.a)(t.updatedAt),\"dd/MM/yy HH:mm\")),r.a.createElement(Vr.a,{align:\"center\"},t.isDefault&&r.a.createElement(\"div\",{className:e.customTableCell},r.a.createElement(Ts.a,{style:{color:Pa.a[500]}}))),r.a.createElement(ca,{role:a.profile,perform:\"connections-page:editOrDeleteConnection\",yes:()=>r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(\"div\",{style:{display:\"flex\",gap:\"8px\",justifyContent:\"center\"}},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{m(e),s(!0)})(t),style:{backgroundColor:\"#e3f2fd\",border:\"1px solid #2196f3\",margin:\"0 2px\"}},r.a.createElement(Is.a,{style:{fontSize:\"18px\",color:\"#1976d2\"}})),r.a.createElement(W.a,{size:\"small\",onClick:e=>{x(\"delete\",t.id)},style:{backgroundColor:\"#ffebee\",border:\"1px solid #f44336\",margin:\"0 2px\"}},r.a.createElement(js.a,{style:{fontSize:\"18px\",color:\"#d32f2f\"}}))))}))))))))},Ys=t(519);const Xs=Object(D.a)(e=>({root:{width:\"100%\"},fullWidth:{width:\"100%\"},textfield:{width:\"100%\"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:\"right\",padding:e.spacing(1)}}));var Js=function(e){const{initialValues:a,onSubmit:t,loading:l,labelSaveButton:o}=e,s=Xs(),[i,c]=Object(n.useState)([{weekday:\"Lunes\",weekdayEn:\"monday\",startTime:\"\",endTime:\"\"},{weekday:\"Martes\",weekdayEn:\"tuesday\",startTime:\"\",endTime:\"\"},{weekday:\"Mi\\xe9rcoles\",weekdayEn:\"wednesday\",startTime:\"\",endTime:\"\"},{weekday:\"Jueves\",weekdayEn:\"thursday\",startTime:\"\",endTime:\"\"},{weekday:\"Viernes\",weekdayEn:\"friday\",startTime:\"\",endTime:\"\"},{weekday:\"S\\xe1bado\",weekdayEn:\"saturday\",startTime:\"\",endTime:\"\"},{weekday:\"Domingo\",weekdayEn:\"sunday\",startTime:\"\",endTime:\"\"}]);return Object(n.useEffect)(()=>{Object(Ye.isArray)(a)&&a.length>0&&c(a)},[a]),r.a.createElement(Ft.e,{enableReinitialize:!0,className:s.fullWidth,initialValues:{schedules:i},onSubmit:e=>{let{schedules:a}=e;return setTimeout(()=>{t(a)},500)}},e=>{let{values:a}=e;return r.a.createElement(Ft.d,{className:s.fullWidth},r.a.createElement(Ft.c,{name:\"schedules\",render:e=>r.a.createElement(ht.a,{spacing:4,container:!0},a.schedules.map((e,a)=>r.a.createElement(Or.a,null,r.a.createElement(Ft.a,{as:Dt.a,label:Fe.a.t(\"schedules.form.weekday\"),name:`schedules[${a}].weekday`,disabled:!0,variant:\"outlined\",style:{marginRight:\"3.2%\",width:\"30%\"},margin:\"dense\"}),r.a.createElement(Ft.a,{name:`schedules[${a}].startTime`},e=>{let{field:a}=e;return r.a.createElement(Ys.a,Object.assign({label:Fe.a.t(\"schedules.form.startTime\")},a,{variant:\"outlined\",margin:\"dense\",customInput:Dt.a,format:\"##:##\",style:{marginRight:\"3.2%\",width:\"30%\"}}))}),r.a.createElement(Ft.a,{name:`schedules[${a}].endTime`},e=>{let{field:a}=e;return r.a.createElement(Ys.a,Object.assign({label:Fe.a.t(\"schedules.form.endTime\")},a,{variant:\"outlined\",margin:\"dense\",customInput:Dt.a,format:\"##:##\",style:{marginRight:\"3.2%\",width:\"30%\"}}))}))))}),r.a.createElement(\"div\",{style:{textAlign:\"center\",marginTop:\"2%\"},className:s.buttonContainer},r.a.createElement(Ua,{loading:l,type:\"submit\",color:\"primary\",variant:\"contained\"},null!==o&&void 0!==o?o:Fe.a.t(\"schedules.form.save\"))))})};var Zs=()=>({save:async e=>{const{data:a}=await Qe.request({url:\"/companies\",method:\"POST\",data:e});return a},update:async e=>{const{data:a}=await Qe.request({url:\"/companies/\"+e.id,method:\"PUT\",data:e});return a},remove:async e=>{const{data:a}=await Qe.request({url:\"/companies/\"+e,method:\"DELETE\"});return a},list:async e=>{const{data:a}=await Qe.request({url:\"/companies/list\",method:\"GET\"});return a},find:async e=>{const{data:a}=await Qe.request({url:\"/companies/\"+e,method:\"GET\"});return a},finding:async e=>{const{data:a}=await Qe.request({url:\"/companies/\"+e,method:\"GET\"});return a},findAll:async e=>{const{data:a}=await Qe.request({url:\"/companies\",method:\"GET\"});return a},updateSchedules:async e=>{const{data:a}=await Qe.request({url:`/companies/${e.id}/schedules`,method:\"PUT\",data:e});return a}});const $s=Object(D.a)(e=>({chips:{display:\"flex\",flexWrap:\"wrap\"},chip:{margin:2}}));var ei=e=>{let{selectedQueueIds:a,companyId:t,onChange:l}=e;const o=$s(),[s,i]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/queue\",{params:{companyId:t}});i(e)}catch(e){Xe(e)}})()},[t]);return r.a.createElement(\"div\",{style:{marginTop:6}},r.a.createElement(Cn.a,{fullWidth:!0,margin:\"dense\",variant:\"outlined\"},r.a.createElement(An.a,null,Fe.a.t(\"queueSelect.inputLabel\")),r.a.createElement(Zt.a,{multiple:!0,labelWidth:60,value:a,onChange:e=>{l(e.target.value)},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:e=>r.a.createElement(\"div\",{className:o.chips},(null===e||void 0===e?void 0:e.length)>0&&e.map(e=>{const a=s.find(a=>a.id===e);return a?r.a.createElement(Vn.a,{key:e,style:{backgroundColor:a.color},variant:\"outlined\",label:a.name,className:o.chip}):null}))},s.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name)))))};const ai=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),ti=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),password:Wt.d().min(5,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\").required(\"Required\")});var ni=e=>{let{open:a,onClose:t,userId:l,companyId:o}=e;const s=ai(),i={name:\"\",email:\"\",password:\"\",profile:\"user\"},{user:c}=Object(n.useContext)(ra),[d,m]=Object(n.useState)(i),[u,p]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{if(l&&a)try{var e;const{data:a}=await Qe.get(\"/users/\"+l);m(e=>({...e,...a}));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);p(t)}catch(t){Xe(t)}})()},[l,a]);const g=()=>{t(),m(i)};return r.a.createElement(\"div\",{className:s.root},r.a.createElement(at.a,{open:a,onClose:g,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"userModal.title.edit\"):\"\"+Fe.a.t(\"userModal.title.add\")),r.a.createElement(Ft.e,{initialValues:d,enableReinitialize:!0,validationSchema:ti,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,companyId:o,queueIds:u};try{l?await Qe.put(\"/users/\"+l,a):await Qe.post(\"/users\",a),P.b.success(Fe.a.t(\"userModal.success\"))}catch(t){Xe(t)}g()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"userModal.form.name\"),autoFocus:!0,name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"userModal.form.password\"),type:\"password\",name:\"password\",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:\"outlined\",margin:\"dense\",fullWidth:!0})),r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"userModal.form.email\"),name:\"email\",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Cn.a,{variant:\"outlined\",className:s.formControl,margin:\"dense\"},r.a.createElement(ca,{role:c.profile,perform:\"user-modal:editProfile\",yes:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(An.a,{id:\"profile-selection-input-label\"},Fe.a.t(\"userModal.form.profile\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"userModal.form.profile\"),name:\"profile\",labelId:\"profile-selection-label\",id:\"profile-selection\",required:!0},r.a.createElement(G.a,{value:\"admin\"},\"Admin\"),r.a.createElement(G.a,{value:\"user\"},\"User\")))}))),r.a.createElement(ca,{role:c.profile,perform:\"user-modal:editQueues\",yes:()=>r.a.createElement(ei,{companyId:o,selectedQueueIds:u,onChange:e=>p(e)})})),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:g,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"userModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:s.btnWrapper},l?\"\"+Fe.a.t(\"userModal.buttons.okEdit\"):\"\"+Fe.a.t(\"userModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))};const ri=Object(D.a)(e=>({root:{width:\"100%\"},mainPaper:{width:\"100%\",flex:1,padding:e.spacing(2)},fullWidth:{width:\"100%\"},tableContainer:{width:\"100%\",overflowX:\"scroll\",...e.scrollbarStyles},textfield:{width:\"100%\"},textRight:{textAlign:\"right\"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:\"right\",padding:e.spacing(1)}}));function li(e){const{onSubmit:a,onDelete:t,onCancel:l,initialValue:o,loading:s}=e,i=ri(),[c,d]=Object(n.useState)([]),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[E,b]=Object(n.useState)({name:\"\",email:\"\",phone:\"\",planId:\"\",status:!0,campaignsEnabled:!1,dueDate:\"\",recurrence:\"\",...o}),{list:f}=ba();Object(n.useEffect)(()=>{!async function(){const e=await f();d(e)}()},[]),Object(n.useEffect)(()=>{b(e=>(ta()(o).isValid()&&(o.dueDate=ta()(o.dueDate).format(\"YYYY-MM-DD\")),{...e,...o}))},[o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ni,{userId:p.id,companyId:o.id,open:m,onClose:()=>{g({}),u(!1)}}),r.a.createElement(Ft.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:E,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{\"\"!==e.dueDate&&!1!==ta()(e.dueDate).isValid()||(e.dueDate=null),a(e),b({...o,dueDate:\"\"})})(e),n()},500)}},(e,a)=>r.a.createElement(Ft.d,{className:i.fullWidth},r.a.createElement(ht.a,{spacing:2,justifyContent:\"flex-end\",container:!0},r.a.createElement(ht.a,{xs:12,sm:6,md:4,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"companies.form.name\"),name:\"name\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"companies.form.email\"),name:\"email\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\",required:!0})),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"companies.form.phone\"),name:\"phone\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"plan-selection\"},Fe.a.t(\"companies.form.plan\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"plan-selection\",label:Fe.a.t(\"companies.form.plan\"),labelId:\"plan-selection-label\",name:\"planId\",margin:\"dense\",required:!0},c.map((e,a)=>r.a.createElement(G.a,{key:a,value:e.id},e.name))))),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"status-selection\"},Fe.a.t(\"companies.form.status\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"status-selection\",label:Fe.a.t(\"companies.form.status\"),labelId:\"status-selection-label\",name:\"status\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"companies.values.yes\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"companies.values.no\"))))),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"status-selection\"},Fe.a.t(\"companies.form.campaigns\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"campaigns-selection\",label:Fe.a.t(\"companies.form.campaigns\"),labelId:\"campaigns-selection-label\",name:\"campaignsEnabled\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"companies.values.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"companies.values.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",fullWidth:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"companies.form.dueDate\"),type:\"date\",name:\"dueDate\",InputLabelProps:{shrink:!0},variant:\"outlined\",fullWidth:!0,margin:\"dense\"}))),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"recorrencia-selection\"},Fe.a.t(\"companies.form.recurrence\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"companies.form.recurrence\"),labelId:\"recorrencia-selection-label\",id:\"recurrence\",name:\"recurrence\",margin:\"dense\"},r.a.createElement(G.a,{value:\"MENSAL\"},Fe.a.t(\"companies.values.monthly\"))))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(ht.a,{justifyContent:\"flex-end\",spacing:1,container:!0},r.a.createElement(ht.a,{xs:4,md:1,item:!0},r.a.createElement(Ua,{className:i.fullWidth,style:{marginTop:7},loading:s,onClick:()=>l(),variant:\"contained\"},Fe.a.t(\"companies.buttons.clear\"))),void 0!==E.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{xs:6,md:1,item:!0},r.a.createElement(Ua,{style:{marginTop:7},className:i.fullWidth,loading:s,onClick:()=>t(E),variant:\"contained\",color:\"secondary\"},Fe.a.t(\"companies.buttons.delete\"))),r.a.createElement(ht.a,{xs:6,md:2,item:!0},r.a.createElement(Ua,{style:{marginTop:7},className:i.fullWidth,loading:s,onClick:()=>(()=>{const e={...E};if(\"\"!==e.dueDate&&null!==e.dueDate)switch(e.recurrence){case\"MENSAL\":e.dueDate=ta()(e.dueDate).add(1,\"month\").format(\"YYYY-MM-DD\");break;case\"BIMESTRAL\":e.dueDate=ta()(e.dueDate).add(2,\"month\").format(\"YYYY-MM-DD\");break;case\"TRIMESTRAL\":e.dueDate=ta()(e.dueDate).add(3,\"month\").format(\"YYYY-MM-DD\");break;case\"SEMESTRAL\":e.dueDate=ta()(e.dueDate).add(6,\"month\").format(\"YYYY-MM-DD\");break;case\"ANUAL\":e.dueDate=ta()(e.dueDate).add(12,\"month\").format(\"YYYY-MM-DD\")}b(e)})(),variant:\"contained\",color:\"primary\"},Fe.a.t(\"companies.buttons.addDueDate\"))),r.a.createElement(ht.a,{xs:6,md:1,item:!0},r.a.createElement(Ua,{style:{marginTop:7},className:i.fullWidth,loading:s,onClick:()=>(async()=>{try{const{data:e}=await Qe.get(\"/users/list\",{params:{companyId:o.id}});Object(Ye.isArray)(e)&&e.length&&g(Object(Ye.head)(e)),u(!0)}catch(e){P.b.error(e)}})(),variant:\"contained\",color:\"primary\"},Fe.a.t(\"companies.buttons.user\")))):null,r.a.createElement(ht.a,{xs:6,md:1,item:!0},r.a.createElement(Ua,{className:i.fullWidth,style:{marginTop:7},loading:s,type:\"submit\",variant:\"contained\",color:\"primary\"},Fe.a.t(\"companies.buttons.save\")))))))))}function oi(e){const{records:a,onSelect:t}=e,n=ri(),{dateToClient:l}=ir(),o=e=>{if(ta()(e.dueDate).isValid()){const a=ta()(),t=ta()(e.dueDate).diff(a,\"days\");if(t>=1&&t<=5)return{backgroundColor:\"#fffead\"};if(t<=0)return{backgroundColor:\"#fa8c8c\"}}return{}};return r.a.createElement(xt.a,{className:n.tableContainer},r.a.createElement(Ur.a,{className:n.fullWidth,size:\"small\",\"aria-label\":\"a dense table\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\",style:{width:\"1%\"}},\"#\"),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.name\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.email\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.phone\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.plan\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.campaigns\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.status\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.createdAt\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"companies.table.dueDate\")))),r.a.createElement(Hr.a,null,a.map((e,a)=>r.a.createElement(Kr.a,{style:o(e),key:a},r.a.createElement(Vr.a,{align:\"center\",style:{width:\"1%\"}},r.a.createElement(W.a,{onClick:()=>t(e),\"aria-label\":\"delete\"},r.a.createElement(Is.a,null))),r.a.createElement(Vr.a,{align:\"left\"},e.name||\"-\"),r.a.createElement(Vr.a,{align:\"left\"},e.email||\"-\"),r.a.createElement(Vr.a,{align:\"left\"},e.phone||\"-\"),r.a.createElement(Vr.a,{align:\"left\"},(e=>null!==e.planId?e.plan.name:\"-\")(e)),r.a.createElement(Vr.a,{align:\"left\"},(e=>{if(Object(Ye.has)(e,\"settings\")&&Object(Ye.isArray)(e.settings)&&e.settings.length>0){const a=e.settings.find(e=>\"campaignsEnabled\"===e.key);if(a)return\"true\"===a.value?Fe.a.t(\"companies.values.enabled\"):Fe.a.t(\"companies.values.disabled\")}return Fe.a.t(\"companies.values.disabled\")})(e)),r.a.createElement(Vr.a,{align:\"left\"},(e=>!1===e.status?Fe.a.t(\"companies.values.no\"):Fe.a.t(\"companies.values.yes\"))(e)),r.a.createElement(Vr.a,{align:\"left\"},l(e.createdAt)),r.a.createElement(Vr.a,{align:\"left\"},l(e.dueDate),r.a.createElement(\"br\",null),r.a.createElement(\"span\",null,e.recurrence)))))))}function si(){const e=ri(),{list:a,save:t,update:l,remove:o}=Zs(),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:\"\",email:\"\",phone:\"\",planId:\"\",status:!0,campaignsEnabled:!1,dueDate:\"\",recurrence:\"\"});Object(n.useEffect)(()=>{E()},[]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){P.b.error(Fe.a.t(\"companies.messages.loadError\"))}d(!1)},b=()=>{g(e=>({...e,name:\"\",email:\"\",phone:\"\",planId:\"\",status:!0,campaignsEnabled:!1,dueDate:\"\",recurrence:\"\"}))};return r.a.createElement(xt.a,{className:e.mainPaper,elevation:0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(li,{initialValue:p,onDelete:()=>{i(!0)},onSubmit:async e=>{d(!0);try{void 0!==e.id?await l(e):await t(e),await E(),b(),P.b.success(Fe.a.t(\"companies.messages.saveSuccess\"))}catch(a){P.b.error(Fe.a.t(\"companies.messages.saveError\"))}d(!1)},onCancel:b,loading:c})),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(oi,{records:m,onSelect:e=>{let a=!1;const t=e.settings.find(e=>e.key.indexOf(\"campaignsEnabled\")>-1);t&&(a=\"true\"===t.value||\"enabled\"===t.value),g(t=>({...t,id:e.id,name:e.name||\"\",phone:e.phone||\"\",email:e.email||\"\",planId:e.planId||\"\",status:!1!==e.status,campaignsEnabled:a,dueDate:e.dueDate||\"\",recurrence:e.recurrence||\"\"}))}}))),r.a.createElement(ft,{title:Fe.a.t(\"companies.messages.deleteTitle\"),open:s,onClose:()=>i(!1),onConfirm:()=>(async()=>{d(!0);try{await o(p.id),await E(),b(),P.b.success(Fe.a.t(\"companies.messages.deleteSuccess\"))}catch(e){P.b.error(Fe.a.t(\"companies.messages.deleteError\"))}d(!1)})()},Fe.a.t(\"companies.messages.deleteMessage\")))}const ii=Object(D.a)(e=>({root:{width:\"100%\"},mainPaper:{width:\"100%\",flex:1,padding:e.spacing(2)},fullWidth:{width:\"100%\"},tableContainer:{width:\"100%\",overflowX:\"scroll\",...e.scrollbarStyles},textfield:{width:\"100%\"},textRight:{textAlign:\"right\"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:\"right\",padding:e.spacing(1)}}));function ci(e){const{onSubmit:a,onDelete:t,onCancel:l,initialValue:o,loading:s}=e,i=ii(),[c,d]=Object(n.useState)({name:\"\",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0,useInternal:!0});Object(n.useEffect)(()=>{d(o)},[o]);return r.a.createElement(Ft.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:c,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{a(e)})(e),n()},500)}},e=>r.a.createElement(Ft.d,{className:i.fullWidth},r.a.createElement(ht.a,{spacing:1,justifyContent:\"flex-start\",container:!0},r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"plans.form.name\"),name:\"name\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:1,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"plans.form.users\"),name:\"users\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\",type:\"number\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:1,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"plans.form.connections\"),name:\"connections\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\",type:\"number\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:1,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"plans.form.queues\"),name:\"queues\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\",type:\"number\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:1,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"plans.form.value\"),name:\"value\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\",type:\"text\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useCampaigns-selection\"},Fe.a.t(\"plans.form.campaigns\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useCampaigns-selection\",label:Fe.a.t(\"plans.form.campaigns\"),labelId:\"useCampaigns-selection-label\",name:\"useCampaigns\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:8,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useSchedules-selection\"},Fe.a.t(\"plans.form.schedules\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useSchedules-selection\",label:Fe.a.t(\"plans.form.schedules\"),labelId:\"useSchedules-selection-label\",name:\"useSchedules\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:8,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useInternalChat-selection\"},Fe.a.t(\"plans.form.internalChat\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useInternalChat-selection\",label:Fe.a.t(\"plans.form.internalChat\"),labelId:\"useInternalChat-selection-label\",name:\"useInternalChat\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:8,md:4,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useExternalApi-selection\"},Fe.a.t(\"plans.form.externalApi\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useExternalApi-selection\",label:Fe.a.t(\"plans.form.externalApi\"),labelId:\"useExternalApi-selection-label\",name:\"useExternalApi\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:8,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useKanban-selection\"},Fe.a.t(\"plans.form.kanban\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useKanban-selection\",label:Fe.a.t(\"plans.form.kanban\"),labelId:\"useKanban-selection-label\",name:\"useKanban\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:8,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useOpenAi-selection\"},Fe.a.t(\"plans.form.openAi\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useOpenAi-selection\",label:Fe.a.t(\"plans.form.openAi\"),labelId:\"useOpenAi-selection-label\",name:\"useOpenAi\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:8,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useIntegrations-selection\"},Fe.a.t(\"plans.form.integrations\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useIntegrations-selection\",label:Fe.a.t(\"plans.form.integrations\"),labelId:\"useIntegrations-selection-label\",name:\"useIntegrations\",margin:\"dense\"},r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.enabled\")),r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.disabled\"))))),r.a.createElement(ht.a,{xs:12,sm:6,md:2,item:!0},r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,{htmlFor:\"useInternal-selection\"},Fe.a.t(\"plans.form.internalUse\")),r.a.createElement(Ft.b,{as:Zt.a,id:\"useInternal-selection\",label:Fe.a.t(\"plans.form.internalUse\"),labelId:\"useInternal-selection-label\",name:\"useInternal\",margin:\"dense\"},r.a.createElement(G.a,{value:!1},Fe.a.t(\"plans.form.yes\")),r.a.createElement(G.a,{value:!0},Fe.a.t(\"plans.form.no\")))))),r.a.createElement(ht.a,{spacing:2,justifyContent:\"flex-end\",container:!0},r.a.createElement(ht.a,{sm:3,md:2,item:!0},r.a.createElement(Ua,{className:i.fullWidth,loading:s,onClick:()=>l(),variant:\"contained\"},Fe.a.t(\"plans.form.clear\"))),void 0!==c.id?r.a.createElement(ht.a,{sm:3,md:2,item:!0},r.a.createElement(Ua,{className:i.fullWidth,loading:s,onClick:()=>t(c),variant:\"contained\",color:\"secondary\"},Fe.a.t(\"plans.form.delete\"))):null,r.a.createElement(ht.a,{sm:3,md:2,item:!0},r.a.createElement(Ua,{className:i.fullWidth,loading:s,type:\"submit\",variant:\"contained\",color:\"primary\"},Fe.a.t(\"plans.form.save\"))))))}function di(e){const{records:a,onSelect:t}=e,n=ii();return r.a.createElement(xt.a,{className:n.tableContainer},r.a.createElement(Ur.a,{className:n.fullWidth,padding:\"none\",\"aria-label\":\"a dense table\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\",style:{width:\"1%\"}},\"#\"),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"plans.form.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.users\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.connections\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.queues\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.value\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.campaigns\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.schedules\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.internalChat\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.externalApi\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.kanban\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.openAi\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.integrations\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.internalPlan\")))),r.a.createElement(Hr.a,null,a.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\",style:{width:\"1%\"}},r.a.createElement(W.a,{onClick:()=>t(e),\"aria-label\":\"delete\"},r.a.createElement(Is.a,null))),r.a.createElement(Vr.a,{align:\"left\"},e.name||\"-\"),r.a.createElement(Vr.a,{align:\"center\"},e.users||\"-\"),r.a.createElement(Vr.a,{align:\"center\"},e.connections||\"-\"),r.a.createElement(Vr.a,{align:\"center\"},e.queues||\"-\"),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"plans.form.money\"),\" \",e.value?e.value.toLocaleString(\"pt-br\",{minimumFractionDigits:2}):\"00.00\"),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useCampaigns?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useSchedules?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useInternalChat?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useExternalApi?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useKanban?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useOpenAi?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useIntegrations?\"\"+Fe.a.t(\"plans.form.no\"):\"\"+Fe.a.t(\"plans.form.yes\"))(e)),r.a.createElement(Vr.a,{align:\"center\"},(e=>!1===e.useInternal?Fe.a.t(\"plans.form.yes\"):Fe.a.t(\"plans.form.no\"))(e)))))))}function mi(){const e=ii(),{list:a,save:t,update:l,remove:o}=ba(),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:\"\",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0,useInternal:!0});Object(n.useEffect)(()=>{!async function(){await E()}()},[p]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){P.b.error(Fe.a.t(\"plans.messages.loadError\"))}d(!1)},b=()=>{g({id:void 0,name:\"\",users:0,connections:0,queues:0,value:0,useCampaigns:!0,useSchedules:!0,useInternalChat:!0,useExternalApi:!0,useKanban:!0,useOpenAi:!0,useIntegrations:!0,useInternal:!0})};return r.a.createElement(xt.a,{className:e.mainPaper,elevation:0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(ci,{initialValue:p,onDelete:()=>{i(!0)},onSubmit:async e=>{d(!0),console.log(e);try{void 0!==e.id?await l(e):await t(e),await E(),b(),P.b.success(Fe.a.t(\"plans.messages.saveSuccess\"))}catch(a){P.b.error(Fe.a.t(\"plans.messages.saveError\"))}d(!1)},onCancel:b,loading:c})),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(di,{records:m,onSelect:e=>{var a;let t=!1!==e.useCampaigns,n=!1!==e.useSchedules,r=!1!==e.useInternalChat,l=!1!==e.useExternalApi,o=!1!==e.useKanban,s=!1!==e.useOpenAi,i=!1!==e.useIntegrations,c=!0===e.useInternal;g({id:e.id,name:e.name||\"\",users:e.users||0,connections:e.connections||0,queues:e.queues||0,value:(null===(a=e.value)||void 0===a?void 0:a.toLocaleString(\"pt-br\",{minimumFractionDigits:0}))||0,useCampaigns:t,useSchedules:n,useInternalChat:r,useExternalApi:l,useKanban:o,useOpenAi:s,useIntegrations:i,useInternal:c})}}))),r.a.createElement(ft,{title:Fe.a.t(\"plans.messages.deleteTitle\"),open:s,onClose:()=>i(!1),onConfirm:()=>(async()=>{d(!0);try{await o(p.id),await E(),b(),P.b.success(Fe.a.t(\"plans.messages.deleteSuccess\"))}catch(e){P.b.error(Fe.a.t(\"plans.messages.deleteError\"))}d(!1)})()},Fe.a.t(\"plans.messages.deleteMessage\")))}var ui=()=>({findAll:async e=>{const{data:a}=await Qe.request({url:\"/helps\",method:\"GET\",params:e});return a},list:async e=>{const{data:a}=await Qe.request({url:\"/helps/list\",method:\"GET\",params:e});return a},save:async e=>{const{data:a}=await Qe.request({url:\"/helps\",method:\"POST\",data:e});return a},update:async e=>{const{data:a}=await Qe.request({url:\"/helps/\"+e.id,method:\"PUT\",data:e});return a},remove:async e=>{const{data:a}=await Qe.request({url:\"/helps/\"+e,method:\"DELETE\"});return a}});const pi=Object(D.a)(e=>({root:{width:\"100%\"},mainPaper:{width:\"100%\",flex:1,padding:e.spacing(2)},fullWidth:{width:\"100%\"},tableContainer:{width:\"100%\",overflowX:\"scroll\",...e.scrollbarStyles},textfield:{width:\"100%\"},textRight:{textAlign:\"right\"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:\"right\",padding:e.spacing(1)}}));function gi(e){const{onSubmit:a,onDelete:t,onCancel:l,initialValue:o,loading:s}=e,i=pi(),[c,d]=Object(n.useState)(o);Object(n.useEffect)(()=>{d(o)},[o]);return r.a.createElement(Ft.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:c,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{a(e)})(e),n()},500)}},e=>r.a.createElement(Ft.d,{className:i.fullWidth},r.a.createElement(ht.a,{spacing:2,justifyContent:\"flex-end\",container:!0},r.a.createElement(ht.a,{xs:12,sm:6,md:3,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"helps.form.title\"),name:\"title\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\"})),r.a.createElement(ht.a,{xs:12,sm:6,md:3,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"helps.form.videoCode\"),name:\"video\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\"})),r.a.createElement(ht.a,{xs:12,sm:12,md:6,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"helps.form.description\"),name:\"description\",variant:\"outlined\",className:i.fullWidth,margin:\"dense\"})),r.a.createElement(ht.a,{sm:3,md:1,item:!0},r.a.createElement(Ua,{className:i.fullWidth,loading:s,onClick:()=>l(),variant:\"contained\"},Fe.a.t(\"helps.buttons.clear\"))),void 0!==c.id?r.a.createElement(ht.a,{sm:3,md:1,item:!0},r.a.createElement(Ua,{className:i.fullWidth,loading:s,onClick:()=>t(c),variant:\"contained\",color:\"secondary\"},Fe.a.t(\"helps.buttons.delete\"))):null,r.a.createElement(ht.a,{sm:3,md:1,item:!0},r.a.createElement(Ua,{className:i.fullWidth,loading:s,type:\"submit\",variant:\"contained\",color:\"primary\"},Fe.a.t(\"helps.buttons.save\"))))))}function Ei(e){const{records:a,onSelect:t}=e,n=pi();return r.a.createElement(xt.a,{className:n.tableContainer},r.a.createElement(Ur.a,{className:n.fullWidth,size:\"small\",\"aria-label\":\"a dense table\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\",style:{width:\"1%\"}},\"#\"),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"helps.table.title\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"helps.table.description\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"helps.table.video\")))),r.a.createElement(Hr.a,null,a.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\",style:{width:\"1%\"}},r.a.createElement(W.a,{onClick:()=>t(e),\"aria-label\":\"delete\"},r.a.createElement(Is.a,null))),r.a.createElement(Vr.a,{align:\"left\"},e.title||\"-\"),r.a.createElement(Vr.a,{align:\"left\"},e.description||\"-\"),r.a.createElement(Vr.a,{align:\"left\"},e.video||\"-\"))))))}function bi(){const e=pi(),{list:a,save:t,update:l,remove:o}=ui(),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({title:\"\",description:\"\",video:\"\"});Object(n.useEffect)(()=>{!async function(){await E()}()},[]);const E=async()=>{d(!0);try{const e=await a();u(e)}catch(e){P.b.error(Fe.a.t(\"helps.messages.loadError\"))}d(!1)},b=()=>{g({title:\"\",description:\"\",video:\"\"})};return r.a.createElement(xt.a,{className:e.mainPaper,elevation:0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(gi,{initialValue:p,onDelete:()=>{i(!0)},onSubmit:async e=>{d(!0);try{void 0!==e.id?await l(e):await t(e),await E(),b(),P.b.success(Fe.a.t(\"helps.messages.saveSuccess\"))}catch(a){P.b.error(Fe.a.t(\"helps.messages.saveError\"))}d(!1)},onCancel:b,loading:c})),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ei,{records:m,onSelect:e=>{g({id:e.id,title:e.title||\"\",description:e.description||\"\",video:e.video||\"\"})}}))),r.a.createElement(ft,{title:Fe.a.t(\"helps.messages.deleteTitle\"),open:s,onClose:()=>i(!1),onConfirm:()=>(async()=>{d(!0);try{await o(p.id),await E(),b(),P.b.success(Fe.a.t(\"helps.messages.deleteSuccess\"))}catch(e){P.b.error(Fe.a.t(\"helps.messages.deleteError\"))}d(!1)})()},Fe.a.t(\"helps.messages.deleteMessage\")))}var fi=()=>({getAll:async e=>{const{data:a}=await Qe.request({url:\"/settings\",method:\"GET\",params:e});return a},update:async e=>{const{data:a}=await Qe.request({url:\"/settings/\"+e.key,method:\"PUT\",data:e});return a}});const hi=e=>{let{user:a,yes:t,no:n}=e;return a.super?t():n()};hi.defaultProps={user:{},yes:()=>null,no:()=>null};var vi=hi;const yi=Object(D.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:240},tab:{backgroundColor:e.palette.options,borderRadius:4,width:\"100%\",\"& .MuiTab-wrapper\":{color:e.palette.fontecor},\"& .MuiTabs-flexContainer\":{justifyContent:\"center\"}},paper:{padding:e.spacing(2),display:\"flex\",alignItems:\"center\",marginBottom:12,width:\"100%\"},cardAvatar:{fontSize:\"55px\",color:zr.a[500],backgroundColor:\"#ffffff\",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:\"18px\",color:Ra.a[700]},cardSubtitle:{color:zr.a[600],fontSize:\"14px\"},alignRight:{textAlign:\"right\"},fullWidth:{width:\"100%\"},selectContainer:{width:\"100%\",textAlign:\"left\"}}));function xi(e){const{settings:a,scheduleTypeChanged:t}=e,l=yi(),[o,s]=Object(n.useState)({}),{getCurrentUserInfo:i}=na();Object(n.useEffect)(()=>{!async function(){try{const e=await i();s(e)}catch(e){P.b.error(e)}}()},[]);const[c,d]=Object(n.useState)(\"disabled\"),[m,u]=Object(n.useState)(\"disabled\"),[p,g]=Object(n.useState)(\"enabled\"),[E,b]=Object(n.useState)(\"\"),[f,h]=Object(n.useState)(\"enabled\"),[v,y]=Object(n.useState)(!1),[x,C]=Object(n.useState)(!1),[A,S]=Object(n.useState)(!1),[O,w]=Object(n.useState)(!1),[k,T]=Object(n.useState)(!1),[I,j]=Object(n.useState)(\"America/Lima\"),[N,M]=Object(n.useState)(!1),[R,D]=Object(n.useState)(\"3\"),[L,q]=Object(n.useState)(!1),[W,F]=Object(n.useState)(\"disabled\"),[B,z]=Object(n.useState)(!1),[U,H]=Object(n.useState)(\"disabled\"),[V,_]=Object(n.useState)(!1),[K,Q]=Object(n.useState)(\"disabled\"),[Y,X]=Object(n.useState)(!1),[J,Z]=Object(n.useState)(\"disabled\"),[$,ee]=Object(n.useState)(!1),[ae,te]=Object(n.useState)(\"disabled\"),[ne,re]=Object(n.useState)(!1),[le,oe]=Object(n.useState)(\"\"),[se,ie]=Object(n.useState)(!1),{update:ce}=fi();return Object(n.useEffect)(()=>{if(Array.isArray(a)&&a.length){const e=a.find(e=>\"userRating\"===e.key);e&&d(e.value);const t=a.find(e=>\"scheduleType\"===e.key);t&&u(t.value);const n=a.find(e=>\"call\"===e.key);n&&g(n.value);const r=a.find(e=>\"CheckMsgIsGroup\"===e.key);r&&h(r.value);const l=a.find(e=>\"allowregister\"===e.key);l&&H(l.value);const o=a.find(e=>\"sendGreetingAccepted\"===e.key);o&&Q(o.value);const s=a.find(e=>\"sendMsgTransfTicket\"===e.key);s&&Z(s.value);const i=a.find(e=>\"viewregister\"===e.key);i&&F(i.value);const c=a.find(e=>\"sendGreetingMessageOneQueues\"===e.key);c&&te(c.value);const m=a.find(e=>\"hubToken\"===e.key);m&&oe(m.value);const p=a.find(e=>\"chatBotType\"===e.key);p&&b(p.value);const E=a.find(e=>\"trial\"===e.key);E&&D(E.value);const f=a.find(e=>\"timezone\"===e.key);f?(j(f.value),localStorage.setItem(\"timezone\",f.value)):(j(\"America/Lima\"),localStorage.setItem(\"timezone\",\"America/Lima\"))}},[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{spacing:3,container:!0},r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"ratings-label\"},Fe.a.t(\"settings.options.userRating\")),r.a.createElement(Zt.a,{labelId:\"ratings-label\",value:c,onChange:async e=>{!async function(e){d(e),y(!0),await ce({key:\"userRating\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),y(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.disabled\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.enabled\"))),r.a.createElement(wr.a,null,v&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"schedule-type-label\"},Fe.a.t(\"settings.options.scheduleType\")),r.a.createElement(Zt.a,{labelId:\"schedule-type-label\",value:m,onChange:async e=>{!async function(e){u(e),C(!0),await ce({key:\"scheduleType\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),C(!1),t(e)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.disabled\")),r.a.createElement(G.a,{value:\"queue\"},Fe.a.t(\"settings.states.queue\")),r.a.createElement(G.a,{value:\"company\"},Fe.a.t(\"settings.states.company\"))),r.a.createElement(wr.a,null,x&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"group-type-label\"},Fe.a.t(\"settings.options.ignoreGroupMessages\")),r.a.createElement(Zt.a,{labelId:\"group-type-label\",value:f,onChange:async e=>{!async function(e){h(e),T(!0),await ce({key:\"CheckMsgIsGroup\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),T(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.deactivated\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.activated\"))),r.a.createElement(wr.a,null,k&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"call-type-label\"},Fe.a.t(\"settings.options.acceptCall\")),r.a.createElement(Zt.a,{labelId:\"call-type-label\",value:p,onChange:async e=>{!async function(e){g(e),S(!0),await ce({key:\"call\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),S(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.notAccept\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.accept\"))),r.a.createElement(wr.a,null,A&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"chatbot-type-label\"},Fe.a.t(\"settings.options.chatbotType\")),r.a.createElement(Zt.a,{labelId:\"chatbot-type-label\",value:E,onChange:async e=>{!async function(e){b(e),w(!0),await ce({key:\"chatBotType\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),w(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"text\"},Fe.a.t(\"settings.states.text\"))),r.a.createElement(wr.a,null,O&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"sendGreetingAccepted-label\"},Fe.a.t(\"settings.options.sendGreetingAccepted\")),r.a.createElement(Zt.a,{labelId:\"sendGreetingAccepted-label\",value:K,onChange:async e=>{!async function(e){Q(e),X(!0),await ce({key:\"sendGreetingAccepted\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),X(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.disabled\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.enabled\"))),r.a.createElement(wr.a,null,Y&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"sendMsgTransfTicket-label\"},Fe.a.t(\"settings.options.sendTransferMessage\")),r.a.createElement(Zt.a,{labelId:\"sendMsgTransfTicket-label\",value:J,onChange:async e=>{!async function(e){Z(e),ee(!0),await ce({key:\"sendMsgTransfTicket\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),ee(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.disabled\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.enabled\"))),r.a.createElement(wr.a,null,$&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"sendGreetingMessageOneQueues-label\"},Fe.a.t(\"settings.options.sendGreetingOneQueue\")),r.a.createElement(Zt.a,{labelId:\"sendGreetingMessageOneQueues-label\",value:ae,onChange:async e=>{!async function(e){te(e),re(!0),await ce({key:\"sendGreetingMessageOneQueues\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),re(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.disabled\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.enabled\"))),r.a.createElement(wr.a,null,ne&&Fe.a.t(\"settings.states.updating\"))))),r.a.createElement(vi,{user:o,yes:()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{spacing:3,container:!0},r.a.createElement(Cl.a,{value:0,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",className:l.tab,style:{marginBottom:20,marginTop:20}},r.a.createElement(Al.a,{label:Fe.a.t(\"settings.options.globalSettings\")}))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"allowregister-label\"},Fe.a.t(\"settings.options.registrationAllowed\")),r.a.createElement(Zt.a,{labelId:\"allowregister-label\",value:U,onChange:async e=>{!async function(e){H(e),_(!0),await ce({key:\"allowregister\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),_(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.no\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.yes\"))),r.a.createElement(wr.a,null,V&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"viewregister-label\"},Fe.a.t(\"settings.options.registrationVisible\")),r.a.createElement(Zt.a,{labelId:\"viewregister-label\",value:W,onChange:async e=>{!async function(e){F(e),z(!0),await ce({key:\"viewregister\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),z(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"disabled\"},Fe.a.t(\"settings.states.no\")),r.a.createElement(G.a,{value:\"enabled\"},Fe.a.t(\"settings.states.yes\"))),r.a.createElement(wr.a,null,B&&Fe.a.t(\"settings.states.updating\")))),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"trial-label\"},Fe.a.t(\"settings.options.trialTime\")),r.a.createElement(Zt.a,{labelId:\"trial-label\",value:R,onChange:async e=>{!async function(e){D(e),q(!0),await ce({key:\"trial\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),q(!1)}(e.target.value)}},r.a.createElement(G.a,{value:\"1\"},\"1\"),r.a.createElement(G.a,{value:\"2\"},\"2\"),r.a.createElement(G.a,{value:\"3\"},\"3\"),r.a.createElement(G.a,{value:\"4\"},\"4\"),r.a.createElement(G.a,{value:\"5\"},\"5\"),r.a.createElement(G.a,{value:\"6\"},\"6\"),r.a.createElement(G.a,{value:\"7\"},\"7\")),r.a.createElement(wr.a,null,L&&\"Atualizando...\"))))}),r.a.createElement(ht.a,{spacing:3,container:!0,style:{marginBottom:10}},r.a.createElement(Cl.a,{value:0,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",className:l.tab},r.a.createElement(Al.a,{label:\"ZONA HORARIA\"})),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(An.a,{id:\"timezone-label\"},\"Zona Horaria para Campa\\xf1as\"),r.a.createElement(Zt.a,{labelId:\"timezone-label\",id:\"timezone\",name:\"timezone\",value:I,onChange:async e=>{!async function(e){j(e),M(!0),await ce({key:\"timezone\",value:e}),localStorage.setItem(\"timezone\",e),P.b.success(Fe.a.t(\"settings.success\")),M(!1)}(e.target.value)},variant:\"outlined\"},r.a.createElement(G.a,{value:\"America/Lima\"},\"Per\\xfa (America/Lima)\"),r.a.createElement(G.a,{value:\"America/Sao_Paulo\"},\"Brasil (America/Sao_Paulo)\"),r.a.createElement(G.a,{value:\"America/Argentina/Buenos_Aires\"},\"Argentina (America/Argentina/Buenos_Aires)\"),r.a.createElement(G.a,{value:\"America/Santiago\"},\"Chile (America/Santiago)\"),r.a.createElement(G.a,{value:\"America/Bogota\"},\"Colombia (America/Bogota)\"),r.a.createElement(G.a,{value:\"America/Mexico_City\"},\"M\\xe9xico (America/Mexico_City)\"),r.a.createElement(G.a,{value:\"America/New_York\"},\"Estados Unidos - Este (America/New_York)\"),r.a.createElement(G.a,{value:\"America/Los_Angeles\"},\"Estados Unidos - Oeste (America/Los_Angeles)\"),r.a.createElement(G.a,{value:\"Europe/Madrid\"},\"Espa\\xf1a (Europe/Madrid)\"),r.a.createElement(G.a,{value:\"Europe/London\"},\"Reino Unido (Europe/London)\"),r.a.createElement(G.a,{value:\"Asia/Tokyo\"},\"Jap\\xf3n (Asia/Tokyo)\"),r.a.createElement(G.a,{value:\"UTC\"},\"UTC (Tiempo Universal)\")),r.a.createElement(wr.a,null,N?\"Actualizando...\":\"Selecciona tu zona horaria para campa\\xf1as masivas\")))),r.a.createElement(ht.a,{spacing:3,container:!0,style:{marginBottom:10}},r.a.createElement(Cl.a,{value:0,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",className:l.tab},r.a.createElement(Al.a,{label:\"HUB NOTIFICAME\"})),r.a.createElement(ht.a,{xs:12,sm:12,md:12,item:!0},r.a.createElement(Cn.a,{className:l.selectContainer},r.a.createElement(Dt.a,{id:\"HubNotificaMe\",name:\"HubNotificaMe\",margin:\"dense\",label:\"Token Account\",variant:\"outlined\",value:le,onChange:async e=>{!async function(e){oe(e),36===e.length&&(ie(!0),await ce({key:\"hubToken\",value:e}),P.b.success(Fe.a.t(\"settings.success\")),ie(!1))}(e.target.value)}}),r.a.createElement(wr.a,null,se&&\"Actualizando...\")))))}const Ci=Object(D.a)(e=>({root:{width:\"100%\"},mainPaper:{width:\"100%\",flex:1,padding:e.spacing(2)},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\",height:240},tab:{background:\"#f3f4f6\",borderRadius:4,width:\"100%\",\"& .MuiTab-wrapper\":{color:\"#1e3a8a\"},\"& .MuiTabs-flexContainer\":{justifyContent:\"center\"}},paper:{padding:e.spacing(2),display:\"flex\",alignItems:\"center\",marginBottom:12,width:\"100%\"},cardAvatar:{fontSize:\"55px\",color:zr.a[500],backgroundColor:\"#ffffff\",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:\"18px\",color:Ra.a[700]},cardSubtitle:{color:zr.a[600],fontSize:\"14px\"},alignRight:{textAlign:\"right\"},fullWidth:{width:\"100%\"},selectContainer:{width:\"100%\",textAlign:\"left\"},buttonContainer:{textAlign:\"right\",padding:e.spacing(1)},fileInput:{background:\"red\"},fileInputLabel:{display:\"inline-block\",backgroundColor:\"#1e3a8a\",color:\"#fff\",padding:\"8px 16px\",borderRadius:\"4px\",cursor:\"pointer\",\"& input\":{display:\"none\"}}}));var Ai=()=>{const[e,a]=Object(n.useState)(null),[t,l]=Object(n.useState)(\"\"),o=Ci(),{user:s}=Object(n.useContext)(ra),i=Object(M.useHistory)(),[c,d]=Object(n.useState)(\"\");Object(n.useEffect)(()=>{!async function(){s.super||(P.b.error(Fe.a.t(\"uploader.messages.noPermission\")),setTimeout(()=>{i.push(\"/\")},500))}()},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{spacing:3,container:!0},r.a.createElement(Cl.a,{value:0,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",className:o.tab,style:{marginBottom:20,marginTop:20}},r.a.createElement(Al.a,{label:Fe.a.t(\"uploader.title\")})),r.a.createElement(\"form\",{onSubmit:async a=>{if(a.preventDefault(),!e)return void P.b.warn(Fe.a.t(\"uploader.messages.chooseFile\"));if(!t)return void P.b.warn(Fe.a.t(\"uploader.messages.chooseDestination\"));const n=new FormData;n.append(\"file\",e);try{\"Arquivo Anexado\"===(await Qe.post(\"/settings/media-upload?ref=\"+t,n)).data.mensagem&&(P.b.success(Fe.a.t(\"uploader.messages.fileSent\")),window.location.reload())}catch(r){console.log(r)}},className:o.fullWidth},r.a.createElement(ht.a,{item:!0,xs:12,sm:12,md:12,style:{display:\"flex\"}},r.a.createElement(Cn.a,{className:o.selectContainer},r.a.createElement(An.a,{id:\"selectOption-label\"},Fe.a.t(\"uploader.selectOption\")),r.a.createElement(Zt.a,{labelId:\"selectOption-label\",value:t,onChange:e=>{l(e.target.value)},style:{marginTop:15,marginBottom:15}},r.a.createElement(G.a,{value:\"signup\"},Fe.a.t(\"uploader.options.signup\")),r.a.createElement(G.a,{value:\"login\"},Fe.a.t(\"uploader.options.login\")),r.a.createElement(G.a,{value:\"interno\"},Fe.a.t(\"uploader.options.internal\")),r.a.createElement(G.a,{value:\"favicon\"},Fe.a.t(\"uploader.options.favicon\")),r.a.createElement(G.a,{value:\"favicon-256x256\"},Fe.a.t(\"uploader.options.favicon256\")),r.a.createElement(G.a,{value:\"apple-touch-icon\"},Fe.a.t(\"uploader.options.appleTouch\"))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:12,md:12,style:{display:\"flex\"}},r.a.createElement(Cn.a,{className:o.fullWidth},r.a.createElement(\"label\",{className:o.fileInputLabel},r.a.createElement(\"input\",{type:\"file\",onChange:e=>{const t=e.target.files[0];t&&[\"image/png\",\"image/x-icon\",\"image/svg+xml\"].includes(t.type)?(a(t),d(t.name)):(a(null),d(null),P.b.error(Fe.a.t(\"uploader.messages.invalidFormat\")))},className:o.fileInput,style:{marginTop:15,marginBottom:15}}),c||Fe.a.t(\"uploader.fileInput\")))),r.a.createElement(ht.a,{item:!0,xs:12,sm:12,md:12,style:{display:\"flex\"}},r.a.createElement(Ua,{type:\"submit\",className:`${o.fullWidth} ${o.button}`,style:{marginTop:15,marginBottom:15},variant:\"contained\",color:\"primary\"},Fe.a.t(\"uploader.sendFile\"))))))};const Si=Object(D.a)(e=>({paper:{marginTop:e.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:\"100%\",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})),Oi=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),password:Wt.d().min(5,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\").required(\"Required\")});var wi=()=>{const e=Si(),a=Object(M.useHistory)(),[t]=Object(n.useState)({name:\"\",email:\"\",phone:\"\",password:\"\",planId:\"\"}),l=ta()().add(3,\"day\").format(),[o,i]=Object(n.useState)([]),{list:c}=ba();return Object(n.useEffect)(()=>{!async function(){const e=await c();i(e)}()},[c]),r.a.createElement(Or.a,{component:\"main\",maxWidth:\"xs\"},r.a.createElement(s.a,null),r.a.createElement(\"div\",{className:e.paper},r.a.createElement(\"div\",null,r.a.createElement(\"img\",{style:{margin:\"0 auto\",height:\"80px\",width:\"100%\"},src:\"http://localhost:8080/public/logotipos/login.png\",alt:\"Whats\"})),r.a.createElement(Ft.e,{initialValues:t,enableReinitialize:!0,validationSchema:Oi,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{Object.assign(e,{recurrence:\"MENSAL\"}),Object.assign(e,{dueDate:l}),Object.assign(e,{status:\"t\"}),Object.assign(e,{campaignsEnabled:!0});try{await Ke.post(\"/companies/cadastro\",e),P.b.success(Fe.a.t(\"signup.toasts.success\")),a.push(\"/login\")}catch(t){console.log(t),Xe(t)}})(e),t.setSubmitting(!1)},400)}},a=>{let{touched:t,errors:n,isSubmitting:l}=a;return r.a.createElement(Ft.d,{className:e.form},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,autoComplete:\"name\",name:\"name\",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:\"outlined\",fullWidth:!0,id:\"name\",label:\"Nome da Empresa\"})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,id:\"email\",label:Fe.a.t(\"signup.form.email\"),name:\"email\",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:\"email\",required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:bs.a,mask:\"(99) 99999-9999\",variant:\"outlined\",fullWidth:!0,id:\"phone\",name:\"phone\",error:t.phone&&Boolean(n.phone),helperText:t.phone&&n.phone,autoComplete:\"phone\",required:!0},e=>{let{field:a}=e;return r.a.createElement(Dt.a,Object.assign({},a,{variant:\"outlined\",fullWidth:!0,label:\"DDD988888888\",inputProps:{maxLength:11}}))})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,name:\"password\",error:t.password&&Boolean(n.password),helperText:t.password&&n.password,label:Fe.a.t(\"signup.form.password\"),type:\"password\",id:\"password\",autoComplete:\"current-password\",required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(An.a,{htmlFor:\"plan-selection\"},\"Plano\"),r.a.createElement(Ft.b,{as:Zt.a,variant:\"outlined\",fullWidth:!0,id:\"plan-selection\",label:\"Plano\",name:\"planId\",required:!0},o.map((e,a)=>r.a.createElement(G.a,{key:a,value:e.id},e.name,\" - Atendentes: \",e.users,\" - WhatsApp: \",e.connections,\" - Filas: \",e.queues,\" - $ \",e.value))))),r.a.createElement(Fa.a,{type:\"submit\",fullWidth:!0,variant:\"contained\",color:\"primary\",className:e.submit},Fe.a.t(\"signup.buttons.submit\")))})))};const ki=Object(D.a)(e=>({root:{flex:1,backgroundColor:e.palette.background.paper},mainPaper:{...e.scrollbarStyles,overflowY:\"scroll\",flex:1},tab:{backgroundColor:e.palette.options,borderRadius:4},paper:{...e.scrollbarStyles,overflowY:\"scroll\",padding:e.spacing(2),display:\"flex\",alignItems:\"center\",width:\"100%\"},container:{width:\"100%\",maxHeight:\"100%\"},control:{padding:e.spacing(1)},textfield:{width:\"100%\"}}));var Ti=()=>{const e=ki(),[a,t]=Object(n.useState)(\"options\"),[l,o]=Object(n.useState)([]),[s,i]=Object(n.useState)({}),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)({}),[p,g]=Object(n.useState)({}),[E,b]=Object(n.useState)(!1),{getCurrentUserInfo:f}=na(),{find:h,updateSchedules:v}=Zs(),{getAll:y}=fi();Object(n.useEffect)(()=>{!async function(){d(!0);try{const e=localStorage.getItem(\"companyId\"),a=await h(e),t=await y();if(i(a),o(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>\"scheduleType\"===e.key);e&&b(\"company\"===e.value)}const n=await f();u(n)}catch(e){P.b.error(e)}d(!1)}()},[]);const x=()=>m.super;return r.a.createElement(Ms,{className:e.root},r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"settings.title\"))),r.a.createElement(xt.a,{className:e.mainPaper,elevation:1},r.a.createElement(Cl.a,{value:a,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",onChange:(e,a)=>{!async function(){d(!0);try{const e=localStorage.getItem(\"companyId\"),a=await h(e),t=await y();if(i(a),o(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>\"scheduleType\"===e.key);e&&b(\"company\"===e.value)}const n=await f();u(n)}catch(e){P.b.error(e)}d(!1)}(),t(a)},className:e.tab},r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.options\"),value:\"options\"}),E&&r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.schedules\"),value:\"schedules\"}),x()?r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.logo\"),value:\"uploader\"}):null,x()?r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.companies\"),value:\"companies\"}):null,x()?r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.registerCompany\"),value:\"newcompanie\"}):null,x()?r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.plans\"),value:\"plans\"}):null,x()?r.a.createElement(Al.a,{label:Fe.a.t(\"settings.tabs.help\"),value:\"helps\"}):null),r.a.createElement(xt.a,{className:e.paper,elevation:0},r.a.createElement(Dl,{className:e.container,value:a,name:\"schedules\"},r.a.createElement(Js,{loading:c,onSubmit:async e=>{d(!0);try{o(e),await v({id:s.id,schedules:e}),P.b.success(Fe.a.t(\"settings.schedules.success\"))}catch(a){P.b.error(a)}d(!1)},initialValues:l})),r.a.createElement(vi,{user:m,yes:()=>r.a.createElement(Dl,{className:e.container,value:a,name:\"companies\"},r.a.createElement(si,null))}),r.a.createElement(vi,{user:m,yes:()=>r.a.createElement(Dl,{className:e.container,value:a,name:\"newcompanie\"},r.a.createElement(wi,null))}),r.a.createElement(vi,{user:m,yes:()=>r.a.createElement(Dl,{className:e.container,value:a,name:\"plans\"},r.a.createElement(mi,null))}),r.a.createElement(vi,{user:m,yes:()=>r.a.createElement(Dl,{className:e.container,value:a,name:\"helps\"},r.a.createElement(bi,null))}),r.a.createElement(vi,{user:m,yes:()=>r.a.createElement(Dl,{className:e.container,value:a,name:\"uploader\"},r.a.createElement(Ai,null))}),r.a.createElement(Dl,{className:e.container,value:a,name:\"options\"},r.a.createElement(xi,{settings:p,scheduleTypeChanged:e=>b(\"company\"===e)})))))},Ii=t(1184),ji=t(1161),Ni=t(1176);function Mi(e){const{errorText:a,...t}=e,[n,l]=Object(Ft.f)(e);return r.a.createElement(Dt.a,Object.assign({type:\"text\",error:l.touched&&l.error&&!0,helperText:function(){const[e,a]=Object(Ye.at)(l,\"touched\",\"error\");if(e&&a)return a}()},n,t))}function Pi(e){const{label:a,data:t,...n}=e,[l,o]=Object(Ft.f)(e),{value:s}=l,[i,c]=Object(Ye.at)(o,\"touched\",\"error\"),d=i&&c&&!0;return r.a.createElement(Cn.a,Object.assign({},n,{error:d}),r.a.createElement(An.a,null,a),r.a.createElement(Zt.a,Object.assign({},l,{value:s||\"\"}),t.map((e,a)=>r.a.createElement(G.a,{key:a,value:e.value},e.label))),function(){if(d)return r.a.createElement(wr.a,null,c)}())}Pi.defaultProps={data:[]};var Ri=Pi;t(105),t(1167),t(707);const Di=[{value:\"BR\",label:\"Brasil\"},{value:\"usa\",label:\"United States\"}];function Li(e){const{user:a}=Object(n.useContext)(ra),[t,l]=Object(n.useState)(a.company.billingName),[o,s]=Object(n.useState)(a.company.addressZipCode),[i,c]=Object(n.useState)(a.company.addressStreet),[d,m]=Object(n.useState)(a.company.addressState),[u,p]=Object(n.useState)(a.company.addressCity),[g,E]=Object(n.useState)(a.company.addressDistrict),{formField:{firstName:b,address1:f,city:h,state:v,zipcode:y,country:x},setFieldValue:C}=e;return Object(n.useEffect)(()=>{C(\"firstName\",t),C(\"zipcode\",o),C(\"address2\",i),C(\"state\",d),C(\"city\",u),C(\"country\",g)},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{variant:\"h6\",gutterBottom:!0},\"Vamos precisar de algumas informa\\xe7\\xf5es\"),r.a.createElement(ht.a,{container:!0,spacing:3},r.a.createElement(ht.a,{item:!0,xs:6,sm:6},r.a.createElement(Mi,{name:b.name,label:b.label,fullWidth:!0,value:t,onChange:e=>{l(e.target.value),C(\"firstName\",e.target.value)}})),r.a.createElement(ht.a,{item:!0,xs:6,sm:6},r.a.createElement(Ri,{name:x.name,label:x.label,data:Di,fullWidth:!0,value:g,onChange:e=>{E(e.target.value),C(\"country\",e.target.value)}})),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(Mi,{name:y.name,label:y.label,fullWidth:!0,value:o,onChange:e=>{s(e.target.value),C(\"zipcode\",e.target.value)}})),r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(Mi,{name:f.name,label:f.label,fullWidth:!0,value:i,onChange:e=>{c(e.target.value),C(\"address2\",e.target.value)}})),r.a.createElement(ht.a,{item:!0,xs:4},r.a.createElement(Mi,{name:v.name,label:v.label,fullWidth:!0,value:d,onChange:e=>{m(e.target.value),C(\"state\",e.target.value)}})),r.a.createElement(ht.a,{item:!0,xs:8},r.a.createElement(Mi,{name:h.name,label:h.label,fullWidth:!0,value:u,onChange:e=>{p(e.target.value),C(\"city\",e.target.value)}}))))}var qi=t(1160),Wi=t(1159),Fi=t(658),Bi=t.n(Fi);const zi=Object(D.a)(e=>({\"@global\":{ul:{margin:0,padding:0,listStyle:\"none\"}},margin:{margin:e.spacing(1)},cardHeader:{backgroundColor:\"light\"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:\"flex\",justifyContent:\"center\",alignItems:\"baseline\",marginBottom:e.spacing(2)},footer:{borderTop:\"1px solid \"+e.palette.divider,marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),[e.breakpoints.up(\"sm\")]:{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)}},customCard:{display:\"flex\",marginTop:\"16px\",alignItems:\"center\",flexDirection:\"column\"},custom:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"}}));function Ui(e){const{setFieldValue:a,setActiveStep:t,activeStep:l}=e,{finder:o}=ba(),{find:s}=Zs(),i=zi(),[c,d]=r.a.useState([]),m=localStorage.getItem(\"companyId\");Object(n.useEffect)(()=>{(async()=>{try{const e=await s(m);await(async e=>{try{const a=await o(e),t=[];t.push({title:a.name,planId:a.id,price:a.value,description:[a.users+\" Usu\\xe1rios\",a.connections+\" Conex\\xe3o\",a.queues+\" Filas\"],users:a.users,connections:a.connections,queues:a.queues,buttonText:\"SELECIONAR\",buttonVariant:\"outlined\"}),d(t)}catch(a){console.log(a)}})(e.planId)}catch(e){console.log(e)}})()},[m,s,o]);const u=c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{container:!0,spacing:3},u.map(e=>r.a.createElement(ht.a,{item:!0,key:e.title,xs:12,sm:(e.title,12),md:12},r.a.createElement(cn.a,null,r.a.createElement(dn.a,{title:e.title,subheader:e.subheader,titleTypographyProps:{align:\"center\"},subheaderTypographyProps:{align:\"center\"},action:\"Pro\"===e.title?r.a.createElement(Bi.a,null):null,className:i.cardHeader}),r.a.createElement(Wi.a,null,r.a.createElement(\"div\",{className:i.cardPricing},r.a.createElement(H.a,{component:\"h2\",variant:\"h3\",color:\"textPrimary\"},r.a.createElement(r.a.Fragment,null,\"$\",e.price.toLocaleString(\"en-US\",{minimumFractionDigits:2}))),r.a.createElement(H.a,{variant:\"h6\",color:\"textSecondary\"},\"/m\\xeas\")),r.a.createElement(\"ul\",null,e.description.map(e=>r.a.createElement(H.a,{component:\"li\",variant:\"subtitle1\",align:\"center\",key:e},e)))),r.a.createElement(qi.a,null,r.a.createElement(Fa.a,{fullWidth:!0,variant:e.buttonVariant,color:\"primary\",onClick:()=>{e.custom?a(\"plan\",JSON.stringify({users:3,connections:3,price:49})):a(\"plan\",JSON.stringify(e)),t(l+1)}},e.buttonText)))))))}var Hi=Object(D.a)(e=>({listItem:{padding:e.spacing(1,0)},total:{fontWeight:\"700\"},title:{marginTop:e.spacing(2)}}));var Vi=function(e){const{formValues:a}=e,t=Hi(),{plan:n}=a,l=JSON.parse(n),{users:o,connections:s,price:i}=l;return r.a.createElement(ht.a,{item:!0,xs:12,sm:12},r.a.createElement(H.a,{variant:\"h6\",gutterBottom:!0,className:t.title},\"Detalhes do plano\"),r.a.createElement(H.a,{gutterBottom:!0},\"Usu\\xe1rios: \",o),r.a.createElement(H.a,{gutterBottom:!0},\"Whatsapps: \",s),r.a.createElement(H.a,{gutterBottom:!0},\"Cobran\\xe7a: Mensal\"),r.a.createElement(H.a,{gutterBottom:!0},\"Total: $\",i.toLocaleString(\"en-US\",{minimumFractionDigits:2})))};var Gi=function(){const{values:e}=Object(Ft.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{variant:\"h6\",gutterBottom:!0},\"Resumo da assinatura\"),r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(Vi,{formValues:e})))},_i=t(659),Ki=t.n(_i),Qi=t(330);Qi.a.div`\n  footer {\n    margin-top: 30px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n\n    @media (max-width: 768px) {\n      flex-direction: column;\n      .checkout-buttons {\n        display: flex;\n        flex-direction: column-reverse;\n        width: 100%;\n\n        button {\n          width: 100%;\n          margin-top: 16px;\n          margin-left: 0;\n        }\n      }\n    }\n\n    button {\n      margin-left: 16px;\n    }\n  }\n`;const Yi=Qi.a.div`\n  display: flex;\n  align-items: baseline;\n\n  span {\n    color: #333;\n    font-weight: bold;\n  }\n\n  strong {\n    color: #333;\n    font-size: 28px;\n    margin-left: 5px;\n  }\n\n  @media (max-width: 768px) {\n    min-width: 100%;\n    justify-content: space-between;\n  }\n`,Xi=Qi.a.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  > h2 {\n    text-align: center;\n  }\n\n  > svg {\n    margin-top: 16px;\n  }\n\n  > span {\n    margin-top: 24px;\n    text-align: center;\n  }\n\n  > p,\n  strong {\n    margin-top: 8px;\n    font-size: 9px;\n    color: #999;\n  }\n\n  .copy-button {\n    font-size: 14px;\n    cursor: pointer;\n    text-align: center;\n    user-select: none;\n    min-height: 56px;\n    display: inline-flex;\n    -webkit-box-pack: center;\n    justify-content: center;\n    -webkit-box-align: center;\n    align-items: center;\n    background-color: #f9f9f9;\n    color: #000;\n    -webkit-appearance: none !important;\n    outline: none;\n    margin-top: 16px;\n    width: 256px;\n    font-weight: 600;\n    text-transform: uppercase;\n    border: none;\n\n    > span {\n      margin-right: 8px;\n    }\n  }\n`;Qi.a.div`\n  width: 100%;\n  margin: 0 auto 0;\n  max-width: 1110px;\n  display: flex;\n  flex-direction: column;\n  -webkit-box-align: center;\n  align-items: center;\n  padding: 50px 95px;\n  background: #fff;\n  @media (max-width: 768px) {\n    padding: 16px 24px;\n`;var Ji=t(663);var Zi=function(e){const{pix:a}=e,[t]=Object(n.useState)(a.qrcode.qrcode),[l,o]=Object(n.useState)(!1),s=Object(M.useHistory)(),{dateToClient:i}=ir(),c=Object(n.useContext)(v);return Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\");c.getSocket(e).on(`company-${e}-payment`,e=>{\"CONCLUIDA\"===e.action&&(P.b.success(`Sua licen\\xe7a foi renovada at\\xe9 ${i(e.company.dueDate)}!`),setTimeout(()=>{s.push(\"/\")},4e3))})},[i,s,c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Yi,null,r.a.createElement(\"span\",null,\"TOTAL\"),r.a.createElement(\"strong\",null,\"$\",a.valor.original.toLocaleString(\"en-US\",{minimumFractionDigits:2}))),r.a.createElement(Xi,null,r.a.createElement(Ki.a,{value:t}),r.a.createElement(Ji.CopyToClipboard,{text:t,onCopy:()=>{setTimeout(()=>{o(!1)},1e3),o(!0)}},r.a.createElement(\"button\",{className:\"copy-button\",type:\"button\"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement(\"span\",null,\"Copiado\"),r.a.createElement(fa.b,{size:18})):r.a.createElement(r.a.Fragment,null,r.a.createElement(\"span\",null,\"Copiar c\\xf3digo QR\"),r.a.createElement(fa.c,{size:18})))),r.a.createElement(\"span\",null,\"Para finalizar, basta realizar o pagamento escaneando ou colando o c\\xf3digo Pix acima :)\")))},$i={formId:\"checkoutForm\",formField:{firstName:{name:\"firstName\",label:\"Nome completo*\",requiredErrorMsg:\"O nome completo \\xe9 obrigat\\xf3rio\"},lastName:{name:\"lastName\",label:\"Last name*\",requiredErrorMsg:\"Last name is required\"},address1:{name:\"address2\",label:\"Endere\\xe7o*\",requiredErrorMsg:\"O Endere\\xe7o \\xe9 obrigat\\xf3rio\"},city:{name:\"city\",label:\"Cidade*\",requiredErrorMsg:\"Cidade \\xe9 obrigat\\xf3ria\"},state:{name:\"state\",label:\"Estado*\",requiredErrorMsg:\"Cidade \\xe9 obrigat\\xf3ria\"},zipcode:{name:\"zipcode\",label:\"CEP*\",requiredErrorMsg:\"CEP \\xe9 obrigat\\xf3rio\",invalidErrorMsg:\"Formato de CEP inv\\xe1lido\"},country:{name:\"country\",label:\"Pa\\xeds*\",requiredErrorMsg:\"Pa\\xeds \\xe9 obrigat\\xf3rio\"},useAddressForPaymentDetails:{name:\"useAddressForPaymentDetails\",label:\"Use this address for payment details\"},invoiceId:{name:\"invoiceId\",label:\"Use this invoiceId\"},nameOnCard:{name:\"nameOnCard\",label:\"Name on card*\",requiredErrorMsg:\"Name on card is required\"},cardNumber:{name:\"cardNumber\",label:\"Card number*\",requiredErrorMsg:\"Card number is required\",invalidErrorMsg:\"Card number is not valid (e.g. 4111111111111)\"},expiryDate:{name:\"expiryDate\",label:\"Expiry date*\",requiredErrorMsg:\"Expiry date is required\",invalidErrorMsg:\"Expiry date is not valid\"},cvv:{name:\"cvv\",label:\"CVV*\",requiredErrorMsg:\"CVV is required\",invalidErrorMsg:\"CVV is invalid (e.g. 357)\"}}};const{formField:{firstName:ec,address1:ac,city:tc,zipcode:nc,country:rc}}=$i;var lc=[Wt.b().shape({[ec.name]:Wt.d().required(\"\"+ec.requiredErrorMsg),[ac.name]:Wt.d().required(\"\"+ac.requiredErrorMsg),[tc.name]:Wt.d().nullable().required(\"\"+tc.requiredErrorMsg),[nc.name]:Wt.d().required(\"\"+nc.requiredErrorMsg),[rc.name]:Wt.d().nullable().required(\"\"+rc.requiredErrorMsg)})];const{formField:{firstName:oc,lastName:sc,address1:ic,city:cc,state:dc,zipcode:mc,country:uc,useAddressForPaymentDetails:pc,nameOnCard:gc,cardNumber:Ec,invoiceId:bc,cvv:fc}}=$i;var hc={[oc.name]:\"\",[sc.name]:\"\",[ic.name]:\"\",[cc.name]:\"\",[dc.name]:\"\",[mc.name]:\"\",[uc.name]:\"\",[pc.name]:!1,[gc.name]:\"\",[Ec.name]:\"\",[bc.name]:\"\",[fc.name]:\"\"},vc=Object(D.a)(e=>({stepper:{padding:e.spacing(3,0,5)},buttons:{display:\"flex\",justifyContent:\"flex-end\"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:\"relative\"},buttonProgress:{position:\"absolute\",top:\"50%\",left:\"50%\"}}));var yc=function(e){const a=[\"Dados\",\"Personalizar\",\"Revisar\"],{formId:t,formField:l}=$i,o=vc(),[s,i]=Object(n.useState)(1),[c,d]=Object(n.useState)(null),[m]=Object(n.useState)(e.Invoice.id),u=lc[s],p=s===a.length-1,{user:g}=Object(n.useContext)(ra);function E(){i(s-1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{component:\"h1\",variant:\"h4\",align:\"center\"},\"Falta pouco!\"),r.a.createElement(Ii.a,{activeStep:s,className:o.stepper},a.map(e=>r.a.createElement(ji.a,{key:e},r.a.createElement(Ni.a,null,e)))),r.a.createElement(r.a.Fragment,null,s===a.length?r.a.createElement(Zi,{pix:c}):r.a.createElement(Ft.e,{initialValues:{...g,...hc},validationSchema:u,onSubmit:function(e,a){p?async function(e,a){try{const t=JSON.parse(e.plan),n={firstName:e.firstName,lastName:e.lastName,address2:e.address2,city:e.city,state:e.state,zipcode:e.zipcode,country:e.country,useAddressForPaymentDetails:e.useAddressForPaymentDetails,nameOnCard:e.nameOnCard,cardNumber:e.cardNumber,cvv:e.cvv,plan:e.plan,price:t.price,users:t.users,connections:t.connections,invoiceId:m},{data:r}=await Qe.post(\"/subscription\",n);d(r),a.setSubmitting(!1),i(s+1),P.b.success(\"Assinatura realizada com sucesso!, aguardando a realiza\\xe7\\xe3o do pagamento\")}catch(t){Xe(t)}}(e,a):(i(s+1),a.setTouched({}),a.setSubmitting(!1))}},e=>{let{isSubmitting:a,setFieldValue:n,values:c}=e;return r.a.createElement(Ft.d,{id:t},function(e,a,t,n){switch(e){case 0:return r.a.createElement(Li,{formField:l,values:n,setFieldValue:a});case 1:return r.a.createElement(Ui,{formField:l,setFieldValue:a,setActiveStep:t,activeStep:e,invoiceId:m,values:n});case 2:return r.a.createElement(Gi,null);default:return r.a.createElement(\"div\",null,\"Not Found\")}}(s,n,i,c),r.a.createElement(\"div\",{className:o.buttons},1!==s&&r.a.createElement(Fa.a,{onClick:E,className:o.button},\"VOLTAR\"),r.a.createElement(\"div\",{className:o.wrapper},1!==s&&r.a.createElement(Fa.a,{disabled:a,type:\"submit\",variant:\"contained\",color:\"primary\",className:o.button},p?\"PAGAR\":\"PR\\xd3XIMO\"),a&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress}))))})))};const xc=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}}));var Cc=e=>{let{open:a,onClose:t,Invoice:l,contactId:o,initialValues:s,onSave:i}=e;const c=xc(),d=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{d.current=!1},[]);return r.a.createElement(\"div\",{className:c.root},r.a.createElement(at.a,{open:a,onClose:()=>{t()},maxWidth:\"md\",scroll:\"paper\"},r.a.createElement(Et.a,{dividers:!0},r.a.createElement(yc,{Invoice:l}))))};const Ac=(e,a)=>{if(\"LOAD_INVOICES\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_USERS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_USER\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Sc=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var Oc=()=>{const e=Sc(),[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)(1),[s,i]=Object(n.useState)(!1),[c]=Object(n.useState)(\"\"),[d,m]=Object(n.useReducer)(Ac,[]),[u,p]=r.a.useState([]),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(!1);Object(n.useEffect)(()=>{m({type:\"RESET\"}),o(1)},[c]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/invoices/all\",{params:{searchParam:c,pageNumber:l}});m({type:\"LOAD_INVOICES\",payload:e}),i(e.hasMore),t(!1)}catch(e){Xe(e)}})()},500);return()=>clearTimeout(e)},[c,l]);const h=e=>{const a=ta()(ta()()).format(\"DD/MM/yyyy\"),t=ta()(e.dueDate).format(\"DD/MM/yyyy\");var n=ta()(t,\"DD/MM/yyyy\").diff(ta()(a,\"DD/MM/yyyy\"));if(ta.a.duration(n).asDays()<0&&\"paid\"!==e.status)return{backgroundColor:\"#ffbcbc9c\"}},v=e=>{const a=ta()(ta()()).format(\"DD/MM/yyyy\"),t=ta()(e.dueDate).format(\"DD/MM/yyyy\");var n=ta()(t,\"DD/MM/yyyy\").diff(ta()(a,\"DD/MM/yyyy\")),r=ta.a.duration(n).asDays();return\"paid\"===e.status?Fe.a.t(\"financial.status.paid\"):r<0?Fe.a.t(\"financial.status.overdue\"):Fe.a.t(\"financial.status.open\")};return r.a.createElement(Ms,null,r.a.createElement(Cc,{open:b,onClose:()=>{E(null),f(!1)},\"aria-labelledby\":\"form-dialog-title\",Invoice:u,contactId:g}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"financial.title\"))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!s||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(t+100)<r&&o(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"financial.table.id\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"financial.table.details\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"financial.table.value\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"financial.table.dueDate\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"financial.table.status\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"financial.table.action\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,d.map(e=>r.a.createElement(Kr.a,{style:h(e),key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.id),r.a.createElement(Vr.a,{align:\"center\"},e.detail),r.a.createElement(Vr.a,{style:{fontWeight:\"bold\"},align:\"center\"},e.value.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})),r.a.createElement(Vr.a,{align:\"center\"},ta()(e.dueDate).format(\"DD/MM/YYYY\")),r.a.createElement(Vr.a,{style:{fontWeight:\"bold\"},align:\"center\"},v(e)),r.a.createElement(Vr.a,{align:\"center\"},v(e)!==Fe.a.t(\"financial.status.paid\")?r.a.createElement(Fa.a,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>(e=>{p(e),E(null),f(!0)})(e)},Fe.a.t(\"financial.buttons.pay\")):r.a.createElement(Fa.a,{size:\"small\",variant:\"outlined\"},Fe.a.t(\"financial.buttons.paid\"))))),a&&r.a.createElement(Fs,{columns:4}))))))},wc=t(66),kc=t.n(wc);const Tc=Object(D.a)(e=>({on:{color:Pa.a[600],fontSize:\"20px\"},off:{color:Qr.a[600],fontSize:\"20px\"}}));var Ic=e=>{let{user:a}=e;const t=Tc();return a.online?r.a.createElement(wt.a,{className:t.on}):r.a.createElement(Xr.a,{className:t.off})};const jc=(e,a)=>{if(\"LOAD_USERS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_USERS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_USER\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Nc=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var Mc=()=>{const e=Nc(),[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)(1),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(\"\"),[y,x]=Object(n.useReducer)(jc,[]),C=Object(n.useContext)(v);Object(n.useEffect)(()=>{x({type:\"RESET\"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/users/\",{params:{searchParam:f,pageNumber:l}});x({type:\"LOAD_USERS\",payload:e.users}),i(e.hasMore),t(!1)}catch(e){Xe(e)}})()},500);return()=>clearTimeout(e)},[f,l]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=C.getSocket(e);return a.on(`company-${e}-user`,e=>{\"update\"!==e.action&&\"create\"!==e.action||x({type:\"UPDATE_USERS\",payload:e.user}),\"delete\"===e.action&&x({type:\"DELETE_USER\",payload:+e.userId})}),()=>{a.disconnect()}},[C]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:m&&`${Fe.a.t(\"users.confirmationModal.deleteTitle\")} ${m.name}?`,open:E,onClose:b,onConfirm:()=>(async e=>{try{await Qe.delete(\"/users/\"+e),P.b.success(Fe.a.t(\"users.toasts.deleted\"))}catch(a){Xe(a)}u(null),h(\"\"),o(1)})(m.id)},Fe.a.t(\"users.confirmationModal.deleteMessage\")),r.a.createElement(Yn,{open:p,onClose:()=>{d(null),g(!1)},\"aria-labelledby\":\"form-dialog-title\",userId:c&&c.id}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"users.title\")),r.a.createElement(Ls,null,r.a.createElement(Dt.a,{placeholder:Fe.a.t(\"contacts.searchPlaceholder\"),type:\"search\",value:f,onChange:e=>{h(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}}),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{d(null),g(!0)}},Fe.a.t(\"users.buttons.add\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!s||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(t+100)<r&&o(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.id\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.status\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.email\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.profile\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.department\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"users.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,y.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.id),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(Ic,{user:e})),r.a.createElement(Vr.a,{align:\"center\"},e.name),r.a.createElement(Vr.a,{align:\"center\"},e.email),r.a.createElement(Vr.a,{align:\"center\"},e.profile),r.a.createElement(Vr.a,{align:\"center\"},e.queues&&e.queues.length>0?r.a.createElement(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\",gap:\"4px\",justifyContent:\"center\"}},e.queues.map((e,a)=>r.a.createElement(\"span\",{key:e.id,style:{backgroundColor:e.color||\"#1976d2\",color:\"white\",padding:\"2px 8px\",borderRadius:\"12px\",fontSize:\"12px\",fontWeight:\"bold\"}},e.name))):r.a.createElement(\"span\",{style:{color:\"#999\",fontSize:\"12px\"}},\"Sin departamento\")),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{d(e),g(!0)})(e)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:a=>{b(!0),u(e)}},r.a.createElement(zt.a,null))))),a&&r.a.createElement(Fs,{columns:4}))))))},Pc=t(446),Rc=t.n(Pc);const Dc=(e,a)=>{if(\"LOAD_CONTACTS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_CONTACTS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_CONTACT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Lc=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var qc=()=>{const e=Lc(),a=Object(M.useHistory)(),{user:t}=Object(n.useContext)(ra),[l,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(1),[c,d]=Object(n.useState)(\"\"),[m,u]=Object(n.useReducer)(Dc,[]),[p,g]=Object(n.useState)(null),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(!1),[y,x]=Object(n.useState)({}),[C,A]=Object(n.useState)(null),[S,O]=Object(n.useState)(!1),[w,k]=Object(n.useState)(!1),T=Object(n.useRef)(null),[I,j]=Object(n.useState)([]),[N,R]=Object(n.useState)(!1),[D,L]=Object(n.useState)(\"\"),[q,F]=Object(n.useState)(0),B=Object(n.useContext)(v);Object(n.useEffect)(()=>{u({type:\"RESET\"}),i(1)},[c]),Object(n.useEffect)(()=>{o(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/contacts/\",{params:{searchParam:c,pageNumber:s}});u({type:\"LOAD_CONTACTS\",payload:e.contacts}),k(e.hasMore),o(!1)}catch(e){Xe(e)}})()},500);return()=>clearTimeout(e)},[c,s]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=B.getSocket(e);return a.on(`company-${e}-contact`,e=>{\"update\"!==e.action&&\"create\"!==e.action||u({type:\"UPDATE_CONTACTS\",payload:e.contact}),\"delete\"===e.action&&u({type:\"DELETE_CONTACT\",payload:+e.contactId})}),()=>{a.disconnect()}},[B]);const z=async()=>{try{if(T.current.files[0]){const e=new FormData;e.append(\"file\",T.current.files[0]),await Qe.request({url:\"/contacts/upload\",method:\"POST\",data:e})}else q>50&&P.b.info(Fe.a.t(\"contacts.messages.importingContacts\").replace(\"{count}\",q)),await Qe.post(\"/contacts/import\"),P.b.success(Fe.a.t(\"contacts.messages.importSuccess\"));a.go(0)}catch(e){Xe(e)}};return r.a.createElement(Ms,{className:e.mainContainer},r.a.createElement(an,{modalOpen:f,initialContact:y,onClose:e=>{(e=>{h(!1),void 0!==e&&void 0!==e.uuid&&a.push(\"/tickets/\"+e.uuid)})(e)}}),r.a.createElement(Vt,{open:E,onClose:()=>{g(null),b(!1)},\"aria-labelledby\":\"form-dialog-title\",contactId:p}),r.a.createElement(ft,{title:C?`${Fe.a.t(\"contacts.confirmationModal.deleteTitle\")} ${C.name}?`:\"export\"===D&&I.length>0?I.length===m.length?\"Exportar todos los contactos\":`Exportar ${I.length} contacto${I.length>1?\"s\":\"\"}`:\"import\"===D&&q>0?\"\"+Fe.a.t(\"contacts.confirmationModal.importTitle\"):I.length>0?I.length===m.length?\"\"+Fe.a.t(\"contacts.confirmationModal.deleteAllTitle\"):`Eliminar ${I.length} contacto${I.length>1?\"s\":\"\"}`:\"\"+Fe.a.t(\"contacts.confirmationModal.importTitle\"),open:S,onClose:()=>{O(!1),L(\"\"),F(0)},onConfirm:e=>{C?(async e=>{o(!0);try{await Qe.delete(\"/contacts/\"+e),P.b.success(Fe.a.t(\"contacts.toasts.deleted\"))}catch(a){Xe(a)}o(!1),O(!1),A(null)})(C.id):\"export\"===D&&I.length>0?(()=>{if(0===I.length)return;const e=m.filter(e=>I.includes(e.id));I.length>50&&P.b.info(Fe.a.t(\"contacts.messages.processingExport\").replace(\"{count}\",I.length)),setTimeout(()=>{try{const a=e.map(e=>({name:e.name||\"\",number:e.number||\"\",email:e.email||\"\"})),t=\"name;number;email\\n\",n=a.map(e=>`\"${e.name.replace(/\"/g,'\"\"')}\";\"${e.number}\";\"${e.email}\"`).join(\"\\n\"),r=new Blob([\"\\ufeff\"+t+n],{type:\"text/csv;charset=utf-8;\"}),l=document.createElement(\"a\"),o=URL.createObjectURL(r);l.setAttribute(\"href\",o),l.setAttribute(\"download\",`whaticket_${I.length}_contacts_${(new Date).toISOString().split(\"T\")[0]}.csv`),l.style.visibility=\"hidden\",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o),P.b.success(Fe.a.t(\"contacts.messages.exportSuccess\"))}catch(a){console.error(\"Error al exportar:\",a),P.b.error(Fe.a.t(\"contacts.messages.exportError\"))}O(!1)},100)})():\"import\"===D&&q>0?z():I.length>0?(async()=>{if(0!==I.length){o(!0);try{await Qe.delete(\"/contacts/\",{data:{contactIds:I}}),P.b.success(Fe.a.t(\"contacts.toasts.deletedAll\")),j([]),R(!1)}catch(e){Xe(e)}o(!1),O(!1)}})():z()}},C?\"\"+Fe.a.t(\"contacts.confirmationModal.deleteMessage\"):\"export\"===D&&I.length>0?I.length===m.length?\"\\xbfEst\\xe1 seguro que desea exportar todos los contactos?\":`\\xbfEst\\xe1 seguro que desea exportar ${I.length} contacto${I.length>1?\"s\":\"\"}?`:\"import\"===D&&q>0?Fe.a.t(\"contacts.confirmationModal.importAgendaMessage\").replace(\"{count}\",q):I.length>0?I.length===m.length?\"\"+Fe.a.t(\"contacts.confirmationModal.deleteAllMessage\"):`\\xbfSeguro que desea eliminar ${I.length} contacto${I.length>1?\"s\":\"\"}? Se perder\\xe1n todos los tickets relacionados.`:\"\"+Fe.a.t(\"contacts.confirmationModal.importMessage\")),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"contacts.title\")),r.a.createElement(Ls,null,r.a.createElement(Dt.a,{placeholder:Fe.a.t(\"contacts.searchPlaceholder\"),type:\"search\",value:c,onChange:e=>{d(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}}),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",disabled:!0,onClick:async()=>{try{P.b.info(Fe.a.t(\"contacts.messages.checkingAgenda\"));const{data:e}=await Qe.get(\"/contacts/count\"),a=e.count;if(0===a)return void P.b.warning(Fe.a.t(\"contacts.messages.agendaEmpty\"));F(a),L(\"import\"),O(!0)}catch(e){Xe(e)}},title:\"Funci\\xf3n temporalmente deshabilitada - En desarrollo\"},Fe.a.t(\"contacts.buttons.import\")),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{T.current.value=null,T.current.click()}},Fe.a.t(\"contacts.buttons.importSheet\")),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{g(null),b(!0)}},Fe.a.t(\"contacts.buttons.add\")),r.a.createElement(Fa.a,{variant:\"contained\",color:\"secondary\",disabled:0===I.length,onClick:()=>{L(\"delete\"),O(!0)}},Fe.a.t(\"contacts.buttons.delete\")),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{0!==I.length?(L(\"export\"),O(!0)):P.b.error(Fe.a.t(\"contacts.messages.selectToExport\"))}},Fe.a.t(\"contacts.buttons.export\")),r.a.createElement(W.a,{color:\"primary\",onClick:()=>{try{const e=document.createElement(\"a\");e.href=\"/files/plantilla-watoolx-contact.xlsx\",e.download=\"plantilla-watoolx-contact.xlsx\",document.body.appendChild(e),e.click(),document.body.removeChild(e),P.b.success(\"Plantilla descargada correctamente\")}catch(e){console.error(\"Error al descargar plantilla:\",e),P.b.error(\"Error al descargar la plantilla\")}},title:Fe.a.t(\"contacts.buttons.downloadTemplate\"),style:{marginLeft:\"8px\"}},r.a.createElement(Rc.a,null)))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!w||l)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&i(e=>e+1)}},r.a.createElement(r.a.Fragment,null,r.a.createElement(\"input\",{style:{display:\"none\"},id:\"upload\",name:\"file\",type:\"file\",accept:\".xls,.xlsx\",onChange:()=>{O(!0)},ref:T})),r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{padding:\"checkbox\"},r.a.createElement(nn.a,{checked:N,onChange:()=>{N?(j([]),R(!1)):(j(m.map(e=>e.id)),R(!0))},indeterminate:I.length>0&&I.length<m.length})),r.a.createElement(Vr.a,null,\"PERFIL\"),r.a.createElement(Vr.a,null,Fe.a.t(\"contacts.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contacts.table.whatsapp\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contacts.table.email\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contacts.table.lastInteraction\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contacts.table.status\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contacts.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,m.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{style:{paddingRight:0}},r.a.createElement(nn.a,{checked:I.includes(e.id),onChange:()=>{return a=e.id,void j(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a]);var a}})),r.a.createElement(Vr.a,{style:{paddingRight:0}},r.a.createElement(Ia.a,{style:{backgroundColor:hn(null===e||void 0===e?void 0:e.number),fontWeight:\"bold\",color:\"white\"},src:e.profilePicUrl},bn(null===e||void 0===e?void 0:e.name))),r.a.createElement(Vr.a,null,e.name),r.a.createElement(Vr.a,{align:\"center\"},e.number),r.a.createElement(Vr.a,{align:\"center\"},e.email),r.a.createElement(Vr.a,{align:\"center\"},function(e){if(!e)return null;if(!e.tickets)return null;if(e.tickets.length>0){const a=new Date(e.tickets[e.tickets.length-1].updatedAt);return`${a.getDate()>9?a.getDate():\"0\"+a.getDate()}/${a.getMonth()+1>9?a.getMonth()+1:\"0\"+(a.getMonth()+1)}/${a.getFullYear().toString().slice(-2)} ${a.getHours()>9?a.getHours():\"0\"+a.getHours()}:${a.getMinutes()>9?a.getMinutes():\"0\"+a.getMinutes()}`}return null}(e)),r.a.createElement(Vr.a,{align:\"center\"},e.active?r.a.createElement(wt.a,{style:{color:\"green\"},fontSize:\"small\"}):r.a.createElement(bo.a,{style:{color:\"red\"},fontSize:\"small\"})),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>{x(e),h(!0)}},r.a.createElement(ie.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:()=>{return a=e.id,g(a),void b(!0);var a}},r.a.createElement(kc.a,null)),r.a.createElement(ca,{role:t.profile,perform:\"contacts-page:deleteContact\",yes:()=>r.a.createElement(W.a,{size:\"small\",onClick:a=>{O(!0),A(e)}},r.a.createElement(zt.a,null))})))),l&&r.a.createElement(Fs,{avatar:!0,columns:3}))))))},Wc=t(699);var Fc=e=>{let{onChange:a,currentColor:t,handleClose:l,open:o}=e;const[s,i]=Object(n.useState)(t);return r.a.createElement(at.a,{onClose:l,\"aria-labelledby\":\"simple-dialog-title\",open:o},r.a.createElement(Wc.a,{width:\"100%\",triangle:\"hide\",color:s,colors:[\"#B80000\",\"#DB3E00\",\"#FCCB00\",\"#008B02\",\"#006B76\",\"#1273DE\",\"#004DCF\",\"#5300EB\",\"#EB9694\",\"#FAD0C3\",\"#FEF3BD\",\"#C1E1C5\",\"#BEDADC\",\"#C4DEF6\",\"#BED3F3\",\"#D4C4FB\",\"#4D4D4D\",\"#999999\",\"#F44E3B\",\"#FE9200\",\"#FCDC00\",\"#DBDF00\",\"#A4DD00\",\"#68CCCA\",\"#73D8FF\",\"#AEA1FF\",\"#FDA1FF\",\"#333333\",\"#808080\",\"#cccccc\",\"#D33115\",\"#E27300\",\"#FCC400\",\"#B0BC00\",\"#68BC00\",\"#16A5A5\",\"#009CE0\",\"#7B64FF\",\"#FA28FF\",\"#666666\",\"#B3B3B3\",\"#9F0500\",\"#C45100\",\"#FB9E00\",\"#808900\",\"#194D33\",\"#0C797D\",\"#0062B1\",\"#653294\",\"#AB149E\"],onChange:e=>{i(e.hex),l()},onChangeComplete:e=>a(e.hex)}))},Bc=t(1162),zc=t(1185),Uc=t(666),Hc=t.n(Uc);const Vc=Object(D.a)(e=>({root:{width:\"100%\",[e.breakpoints.down(\"sm\")]:{maxHeight:\"20vh\"}},button:{marginRight:e.spacing(1)},input:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},addButton:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}));function Gc(e){let{queueId:a,options:t,updateOptions:l}=e;const o=Vc(),[s,i]=Object(n.useState)(-1),[c,d]=Object(n.useState)(null),m=Object(n.useRef)(null),u=e=>async()=>{i(e);const n=t[e];if(void 0!==n&&void 0!==n.id)try{const{data:e}=await Qe.request({url:\"/queue-options\",method:\"GET\",params:{queueId:a,parentId:n.id}}),t=e.map(e=>({...e,children:[],edition:!1}));n.children=t,l()}catch(r){Xe(r)}},p=async e=>{try{if(e.id){if(await Qe.request({url:\"/queue-options/\"+e.id,method:\"PUT\",data:e}),null!=c){const a=new FormData;a.append(\"file\",c),await Qe.post(`/queue-options/${e.id}/media-upload`,a)}}else{const{data:a}=await Qe.request({url:\"/queue-options\",method:\"POST\",data:e});if(null!=c){const a=new FormData;a.append(\"file\",c),await Qe.post(`/queue-options/${e.id}/media-upload`,a)}e.id=a.id}e.edition=!1,l()}catch(a){Xe(a)}},g=e=>{t[e].edition=!t[e].edition,l()},E=e=>{const a=t[e];return a.edition?r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{value:a.title,onChange:a=>((e,a)=>{t[a].title=e.target.value,l()})(a,e),size:\"small\",className:o.input,placeholder:Fe.a.t(\"queueOptions.placeholder.title\")}),r.a.createElement(\"div\",{style:{display:\"none\"}},r.a.createElement(\"input\",{type:\"file\",ref:m,onChange:e=>(e=>{const a=Object(Ye.head)(e.target.files);a&&d(a)})(e)})),a.edition&&r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{color:\"primary\",variant:\"outlined\",size:\"small\",className:o.button,onClick:()=>p(a)},r.a.createElement(Hc.a,null)),r.a.createElement(W.a,{variant:\"outlined\",color:\"secondary\",size:\"small\",className:o.button,onClick:()=>(async e=>{const a=t[e];if(void 0!==a&&void 0!==a.id)try{await Qe.request({url:\"/queue-options/\"+a.id,method:\"DELETE\"})}catch(n){Xe(n)}t.splice(e,1),t.forEach(async(e,a)=>{e.option=a+1,await p(e)}),l()})(e)},r.a.createElement(zt.a,null)),!c&&!a.mediaPath&&r.a.createElement(W.a,{variant:\"outlined\",color:\"primary\",size:\"small\",className:o.button,onClick:()=>m.current.click()},r.a.createElement(Ea.a,null)),(a.mediaPath||c)&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fa.a,{startIcon:r.a.createElement(Ea.a,null)},null!=c?c.name:a.mediaName),r.a.createElement(W.a,{color:\"secondary\"},r.a.createElement(js.a,null))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,null,\"\"!==a.title?a.title:Fe.a.t(\"queueOptions.undefinedTitle\"),r.a.createElement(W.a,{variant:\"outlined\",size:\"small\",className:o.button,onClick:()=>g(e)},r.a.createElement(kc.a,null))))},b=e=>{const a=t[e];return a.edition?r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt.a,{style:{width:\"100%\"},multiline:!0,value:a.message,onChange:a=>((e,a)=>{t[a].message=e.target.value,l()})(a,e),size:\"small\",className:o.input,placeholder:Fe.a.t(\"queueOptions.placeholder.message\")})):r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{onClick:()=>g(e)},a.message))},f=(e,n)=>r.a.createElement(ji.a,{key:n},r.a.createElement(Ni.a,{style:{cursor:\"pointer\"},onClick:u(n)},E(n)),r.a.createElement(zc.a,null,b(n),void 0!==e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Fa.a,{color:\"primary\",size:\"small\",onClick:()=>(e=>{const n=t[e].children.length+1;t[e].children.push({title:\"\",message:\"\",edition:!1,option:n,queueId:a,parentId:t[e].id,children:[]}),l()})(n),startIcon:r.a.createElement(gt.a,null),variant:\"outlined\",className:o.addButton},Fe.a.t(\"queueOptions.add\"))),r.a.createElement(Gc,{queueId:a,options:e.children,updateOptions:l})));return r.a.createElement(Ii.a,{style:{marginBottom:0,paddingBottom:0},nonLinear:!0,activeStep:s,orientation:\"vertical\"},t.map((e,a)=>f(e,a)))}function _c(e){let{queueId:a}=e;const t=Vc(),[l,o]=Object(n.useState)([]);Object(n.useEffect)(()=>{if(a){(async()=>{try{const{data:e}=await Qe.request({url:\"/queue-options\",method:\"GET\",params:{queueId:a,parentId:-1}}),t=e.map(e=>({...e,children:[],edition:!1}));o(t)}catch(e){Xe(e)}})()}},[]);const s=()=>{o([...l])};return r.a.createElement(\"div\",{className:t.root},r.a.createElement(\"br\",null),r.a.createElement(H.a,null,Fe.a.t(\"queueOptions.title\"),r.a.createElement(Fa.a,{color:\"primary\",size:\"small\",onClick:()=>{const e={title:\"\",message:\"\",edition:!1,option:l.length+1,queueId:a,parentId:null,children:[]};o([...l,e])},startIcon:r.a.createElement(gt.a,null),style:{marginLeft:10},variant:\"outlined\"},Fe.a.t(\"queueOptions.add\"))),(()=>{if(l.length>0)return r.a.createElement(Gc,{queueId:a,updateOptions:s,options:l})})())}const Kc=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:e.spacing(1),flex:1},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Qc=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),color:Wt.d().min(3,\"Too Short!\").max(9,\"Too Long!\").required(),greetingMessage:Wt.d()});var Yc=e=>{let{open:a,onClose:t,queueId:l}=e;const o=Kc(),s={name:\"\",color:\"\",greetingMessage:\"\",outOfHoursMessage:\"\",orderQueue:\"\",integrationId:\"\",promptId:\"\"},[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(s),[u,p]=Object(n.useState)(0),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(null),h=Object(n.useRef)(null),v=Object(n.useRef)(),[y,x]=Object(n.useState)([]),[C,A]=Object(n.useState)(!1),[S,O]=Object(n.useState)([{weekday:\"Lunes\",weekdayEn:\"monday\",startTime:\"08:00\",endTime:\"18:00\"},{weekday:\"Martes\",weekdayEn:\"tuesday\",startTime:\"08:00\",endTime:\"18:00\"},{weekday:\"Mi\\xe9rcoles\",weekdayEn:\"wednesday\",startTime:\"08:00\",endTime:\"18:00\"},{weekday:\"Jueves\",weekdayEn:\"thursday\",startTime:\"08:00\",endTime:\"18:00\"},{weekday:\"Viernes\",weekdayEn:\"friday\",startTime:\"08:00\",endTime:\"18:00\"},{weekday:\"S\\xe1bado\",weekdayEn:\"saturday\",startTime:\"08:00\",endTime:\"12:00\"},{weekday:\"Domingo\",weekdayEn:\"sunday\",startTime:\"00:00\",endTime:\"00:00\"}]),[w,k]=Object(n.useState)(null),[T,I]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/prompt\");I(e.prompts)}catch(e){Xe(e)}})()},[]),Object(n.useEffect)(()=>{Qe.get(\"/settings\").then(e=>{let{data:a}=e;if(Array.isArray(a)){const e=a.find(e=>\"scheduleType\"===e.key);e&&E(\"queue\"===e.value)}})},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/queueIntegration\");x(e.queueIntegrations)}catch(e){Xe(e)}})()},[]),Object(n.useEffect)(()=>((async()=>{if(l)try{const{data:e}=await Qe.get(\"/queue/\"+l);m(a=>({...a,...e})),e.promptId?k(e.promptId):k(null),O(e.schedules)}catch(e){Xe(e)}})(),()=>{m({name:\"\",color:\"\",greetingMessage:\"\",outOfHoursMessage:\"\",orderQueue:\"\",integrationId:\"\"})}),[l,a]);const j=()=>{t(),m(s)},N=e=>{k(e.target.value)};return r.a.createElement(\"div\",{className:o.root},r.a.createElement(ft,{title:Fe.a.t(\"queueModal.confirmationModal.deleteTitle\"),open:C,onClose:()=>A(!1),onConfirm:async()=>{b&&(f(null),h.current.value=null),d.mediaPath&&(await Qe.delete(`/queue/${d.id}/media-upload`),m(e=>({...e,mediaPath:null,mediaName:null})),P.b.success(Fe.a.t(\"queueModal.toasts.deleted\")))}}),r.a.createElement(at.a,{maxWidth:\"md\",fullWidth:!0,open:a,onClose:j,scroll:\"paper\"},r.a.createElement(bt.a,null,l?\"\"+Fe.a.t(\"queueModal.title.edit\"):\"\"+Fe.a.t(\"queueModal.title.add\"),r.a.createElement(\"div\",{style:{display:\"none\"}},r.a.createElement(\"input\",{type:\"file\",ref:h,onChange:e=>(e=>{const a=Object(Ye.head)(e.target.files);a&&f(a)})(e)}))),r.a.createElement(Cl.a,{value:u,indicatorColor:\"primary\",textColor:\"primary\",onChange:(e,a)=>p(a),\"aria-label\":\"disabled tabs example\"},r.a.createElement(Al.a,{label:Fe.a.t(\"queueModal.tabs.queueData\")}),g&&r.a.createElement(Al.a,{label:Fe.a.t(\"queueModal.tabs.serviceHours\")})),0===u&&r.a.createElement(xt.a,null,r.a.createElement(Ft.e,{initialValues:d,enableReinitialize:!0,validationSchema:Qc,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(l){if(await Qe.put(\"/queue/\"+l,{...e,schedules:S,promptId:w||null}),null!=b){const e=new FormData;e.append(\"file\",b),await Qe.post(`/queue/${l}/media-upload`,e)}}else if(await Qe.post(\"/queue\",{...e,schedules:S,promptId:w||null}),null!=b){const e=new FormData;e.append(\"file\",b),await Qe.post(`/queue/${l}/media-upload`,e)}P.b.success(Fe.a.t(\"queues.success\")),j()}catch(a){Xe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:s}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.name\"),autoFocus:!0,name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",className:o.textField}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.color\"),name:\"color\",id:\"color\",onFocus:()=>{c(!0),v.current.focus()},error:a.color&&Boolean(t.color),helperText:a.color&&t.color,InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(\"div\",{style:{backgroundColor:s.color},className:o.colorAdorment})),endAdornment:r.a.createElement(W.a,{size:\"small\",color:\"default\",onClick:()=>c(!0)},r.a.createElement(Bc.a,null))},variant:\"outlined\",margin:\"dense\",className:o.textField}),r.a.createElement(Fc,{open:i,handleClose:()=>c(!1),onChange:e=>{s.color=e,m(()=>({...s,color:e}))}}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.orderQueue\"),name:\"orderQueue\",type:\"orderQueue\",error:a.orderQueue&&Boolean(t.orderQueue),helperText:a.orderQueue&&t.orderQueue,variant:\"outlined\",margin:\"dense\",className:o.textField1}),r.a.createElement(\"div\",null,r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",className:o.FormControl,fullWidth:!0},r.a.createElement(An.a,{id:\"integrationId-selection-label\"},Fe.a.t(\"queueModal.form.integrationId\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"queueModal.form.integrationId\"),name:\"integrationId\",id:\"integrationId\",placeholder:Fe.a.t(\"queueModal.form.integrationId\"),labelId:\"integrationId-selection-label\",value:s.integrationId||\"\"},r.a.createElement(G.a,{value:\"\"},Fe.a.t(\"queueModal.form.noIntegration\")),y.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name)))),r.a.createElement(Cn.a,{margin:\"dense\",variant:\"outlined\",fullWidth:!0},r.a.createElement(An.a,null,Fe.a.t(\"queueModal.form.prompt\")),r.a.createElement(Zt.a,{labelId:\"dialog-select-prompt-label\",id:\"dialog-select-prompt\",name:\"promptId\",value:w||\"\",onChange:N,label:Fe.a.t(\"queueModal.form.prompt\"),fullWidth:!0,MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null}},T.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))),r.a.createElement(\"div\",{style:{marginTop:5}},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.greetingMessage\"),type:\"greetingMessage\",multiline:!0,inputRef:v,rows:5,fullWidth:!0,name:\"greetingMessage\",error:a.greetingMessage&&Boolean(t.greetingMessage),helperText:a.greetingMessage&&t.greetingMessage,variant:\"outlined\",margin:\"dense\"}),g&&r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueModal.form.outOfHoursMessage\"),type:\"outOfHoursMessage\",multiline:!0,inputRef:v,rows:5,fullWidth:!0,name:\"outOfHoursMessage\",error:a.outOfHoursMessage&&Boolean(t.outOfHoursMessage),helperText:a.outOfHoursMessage&&t.outOfHoursMessage,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(_c,{queueId:l}),(d.mediaPath||b)&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fa.a,{startIcon:r.a.createElement(Ea.a,null)},null!=b?b.name:d.mediaName),r.a.createElement(W.a,{onClick:()=>A(!0),color:\"secondary\"},r.a.createElement(js.a,null)))),r.a.createElement(tt.a,null,!b&&!d.mediaPath&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>h.current.click(),disabled:n,variant:\"outlined\"},Fe.a.t(\"queueModal.buttons.attach\")),r.a.createElement(Fa.a,{onClick:j,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"queueModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:o.btnWrapper},l?\"\"+Fe.a.t(\"queueModal.buttons.okEdit\"):\"\"+Fe.a.t(\"queueModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress}))))})),1===u&&r.a.createElement(xt.a,{style:{padding:20}},r.a.createElement(Js,{loading:!1,onSubmit:async e=>{P.b.success(Fe.a.t(\"queueModal.schedules.saveSuccess\")),O(e),p(0)},initialValues:S,labelSaveButton:Fe.a.t(\"queueModal.schedules.saveButton\")}))))};const Xc=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles},customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}})),Jc=(e,a)=>{if(\"LOAD_QUEUES\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_QUEUES\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_QUEUE\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]};var Zc=()=>{const e=Xc(),[a,t]=Object(n.useReducer)(Jc,[]),[l,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(!1),p=Object(n.useContext)(v);Object(n.useEffect)(()=>{(async()=>{o(!0);try{const{data:e}=await Qe.get(\"/queue\");t({type:\"LOAD_QUEUES\",payload:e}),o(!1)}catch(e){Xe(e),o(!1)}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=p.getSocket(e);return a.on(`company-${e}-queue`,e=>{\"update\"!==e.action&&\"create\"!==e.action||t({type:\"UPDATE_QUEUES\",payload:e.queue}),\"delete\"===e.action&&t({type:\"DELETE_QUEUE\",payload:e.queueId})}),()=>{a.disconnect()}},[p]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:c&&`${Fe.a.t(\"queues.confirmationModal.deleteTitle\")} ${c.name}?`,open:m,onClose:()=>{u(!1),d(null)},onConfirm:()=>(async e=>{try{await Qe.delete(\"/queue/\"+e),P.b.success(Fe.a.t(\"Queue deleted successfully!\"))}catch(a){Xe(a)}d(null)})(c.id)},Fe.a.t(\"queues.confirmationModal.deleteMessage\")),r.a.createElement(Yc,{open:s,onClose:()=>{i(!1),d(null)},queueId:null===c||void 0===c?void 0:c.id}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"queues.title\")),r.a.createElement(Ls,null,r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{i(!0),d(null)}},Fe.a.t(\"queues.buttons.add\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\"},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queues.table.id\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queues.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queues.table.color\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queues.table.orderQueue\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queues.table.greeting\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queues.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,a.map(a=>r.a.createElement(Kr.a,{key:a.id},r.a.createElement(Vr.a,{align:\"center\"},a.id),r.a.createElement(Vr.a,{align:\"center\"},a.name),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(\"div\",{className:e.customTableCell},r.a.createElement(\"span\",{style:{backgroundColor:a.color,width:60,height:20,alignSelf:\"center\"}}))),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(\"div\",{className:e.customTableCell},r.a.createElement(H.a,{style:{width:300,align:\"center\"},noWrap:!0,variant:\"body2\"},a.orderQueue))),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(\"div\",{className:e.customTableCell},r.a.createElement(H.a,{style:{width:300,align:\"center\"},noWrap:!0,variant:\"body2\"},a.greetingMessage))),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{d(e),i(!0)})(a)},r.a.createElement(Is.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:()=>{d(a),u(!0)}},r.a.createElement(js.a,null))))),l&&r.a.createElement(Fs,{columns:4}))))))},$c=t(667);const ed=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),ad=Wt.b().shape({name:Wt.d().min(3,\"Mensagem muito curta\").required(\"Obrigat\\xf3rio\")});var td=e=>{let{open:a,onClose:t,tagId:l,reload:o}=e;const s=ed(),{user:i}=Object(n.useContext)(ra),[c,d]=Object(n.useState)(!1),m={name:\"\",color:\"\",kanban:0},[u,p]=Object(n.useState)(m),[g,E]=Object(n.useState)(0);Object(n.useEffect)(()=>{try{(async()=>{if(!l)return;const{data:e}=await Qe.get(\"/tags/\"+l);E(e.kanban),p(a=>({...a,...e}))})()}catch(e){Xe(e)}},[l,a]);const b=()=>{p(m),d(!1),t()},f=e=>{E(e.target.checked?1:0)};return r.a.createElement(\"div\",{className:s.root},r.a.createElement(at.a,{open:a,onClose:b,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"tagModal.title.edit\"):\"\"+Fe.a.t(\"tagModal.title.add\")),r.a.createElement(Ft.e,{initialValues:u,enableReinitialize:!0,validationSchema:ad,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,userId:i.id,kanban:g};try{l?await Qe.put(\"/tags/\"+l,a):await Qe.post(\"/tags\",a),P.b.success(Fe.a.t(\"tagModal.success\")),\"function\"==typeof o&&o()}catch(t){Xe(t)}b()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"tagModal.form.name\"),name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",onChange:e=>p(a=>({...a,name:e.target.value})),fullWidth:!0})),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,fullWidth:!0,label:Fe.a.t(\"tagModal.form.color\"),name:\"color\",id:\"color\",error:a.color&&Boolean(t.color),helperText:a.color&&t.color,InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(\"div\",{style:{backgroundColor:o.color},className:s.colorAdorment})),endAdornment:r.a.createElement(W.a,{size:\"small\",color:\"default\",onClick:()=>d(!c)},r.a.createElement(Bc.a,null))},variant:\"outlined\",margin:\"dense\"})),(\"admin\"===i.profile||\"supervisor\"===i.profile)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Gt.a,{control:r.a.createElement(nn.a,{checked:1===g,onChange:f,value:g,color:\"primary\"}),label:\"Kanban\",labelPlacement:\"start\"})),r.a.createElement(\"br\",null)),c&&r.a.createElement(\"div\",null,r.a.createElement($c.a,{disableAlpha:!0,hslGradient:!1,style:{margin:\"20px auto 0\"},value:u.color,onChange:e=>{p(a=>({...a,color:\"#\"+e.hex}))}}))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:b,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"tagModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:s.btnWrapper},l?\"\"+Fe.a.t(\"tagModal.buttons.okEdit\"):\"\"+Fe.a.t(\"tagModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))};const nd=(e,a)=>{if(\"LOAD_TAGS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_TAGS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_TAG\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},rd=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var ld=()=>{const e=rd(),{user:a}=Object(n.useContext)(ra),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(\"\"),[h,y]=Object(n.useReducer)(nd,[]),[x,C]=Object(n.useState)(!1),A=Object(n.useCallback)(async()=>{try{const{data:e}=await Qe.get(\"/tags/\",{params:{searchParam:b,pageNumber:o}});y({type:\"LOAD_TAGS\",payload:e.tags}),c(e.hasMore),l(!1)}catch(e){Xe(e)}},[b,o]),S=Object(n.useContext)(v);Object(n.useEffect)(()=>{y({type:\"RESET\"}),s(1)},[b]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{A()},500);return()=>clearTimeout(e)},[b,o,A]),Object(n.useEffect)(()=>{const e=S.getSocket(a.companyId);return e.on(\"user\",e=>{\"update\"!==e.action&&\"create\"!==e.action||y({type:\"UPDATE_TAGS\",payload:e.tags}),\"delete\"===e.action&&y({type:\"DELETE_USER\",payload:+e.tagId})}),()=>{e.disconnect()}},[S,a]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:u&&\"\"+Fe.a.t(\"tags.confirmationModal.deleteTitle\"),open:g,onClose:E,onConfirm:()=>(async e=>{try{await Qe.delete(\"/tags/\"+e),P.b.success(Fe.a.t(\"tags.toasts.deleted\"))}catch(a){Xe(a)}p(null),f(\"\"),s(1),y({type:\"RESET\"}),s(1),await A()})(u.id)},Fe.a.t(\"tags.confirmationModal.deleteMessage\")),r.a.createElement(td,{open:x,onClose:()=>{m(null),C(!1)},reload:A,\"aria-labelledby\":\"form-dialog-title\",tagId:d&&d.id}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"tags.title\")),r.a.createElement(Ls,null,r.a.createElement(Dt.a,{placeholder:Fe.a.t(\"contacts.searchPlaceholder\"),type:\"search\",value:b,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}}),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{m(null),C(!0)}},Fe.a.t(\"tags.buttons.add\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(a+100)<r&&s(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"tags.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"tags.table.tickets\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"tags.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,h.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(Vn.a,{variant:\"outlined\",style:{backgroundColor:e.color,textShadow:\"1px 1px 1px #000\",color:\"white\"},label:e.name,size:\"small\"})),r.a.createElement(Vr.a,{align:\"center\"},e.ticketsCount),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{m(e),C(!0)})(e)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:a=>{E(!0),p(e)}},r.a.createElement(zt.a,null))))),t&&r.a.createElement(Fs,{columns:4}))))))};const od=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),paddingBottom:100},mainHeader:{marginTop:e.spacing(1)},elementMargin:{padding:e.spacing(2)},formContainer:{maxWidth:500},textRight:{textAlign:\"right\"}}));var sd=()=>{const e=od(),a=Object(M.useHistory)(),{user:t}=Object(n.useContext)(ra),l=null===t||void 0===t?void 0:t.companyId,[o]=Object(n.useState)({token:\"\",number:\"\",body:\"\"}),[s]=Object(n.useState)({token:\"\",number:\"\",medias:\"\"}),[i,c]=Object(n.useState)({}),{getPlanCompany:d}=ba();Object(n.useEffect)(()=>{!async function(){if(l){(await d(void 0,l)).plan.useExternalApi||(P.b.error(Fe.a.t(\"messagesAPI.messages.noPermission\")),setTimeout(()=>{a.push(\"/\")},1e3))}}()},[]);return r.a.createElement(xt.a,{className:e.mainPaper,style:{marginLeft:\"5px\"},variant:\"outlined\"},r.a.createElement(H.a,{variant:\"h5\"},Fe.a.t(\"messagesAPI.documentation.title\")),r.a.createElement(H.a,{variant:\"h6\",color:\"primary\",className:e.elementMargin},Fe.a.t(\"messagesAPI.documentation.methods\")),r.a.createElement(H.a,{component:\"div\"},r.a.createElement(\"ol\",null,r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.documentation.textMessages\")),r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.documentation.mediaMessages\")))),r.a.createElement(H.a,{variant:\"h6\",color:\"primary\",className:e.elementMargin},Fe.a.t(\"messagesAPI.documentation.instructions\")),r.a.createElement(H.a,{className:e.elementMargin,component:\"div\"},r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.importantNotes\")),r.a.createElement(\"br\",null),r.a.createElement(\"ul\",null,r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.instructions.tokenRequired\")),r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.instructions.numberFormat\"),r.a.createElement(\"ul\",null,r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.instructions.countryCode\")),r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.instructions.areaCode\")),r.a.createElement(\"li\",null,Fe.a.t(\"messagesAPI.instructions.number\")))))),r.a.createElement(H.a,{variant:\"h6\",color:\"primary\",className:e.elementMargin},\"1. \",Fe.a.t(\"messagesAPI.documentation.textMessages\")),r.a.createElement(ht.a,{container:!0},r.a.createElement(ht.a,{item:!0,xs:12,sm:6},r.a.createElement(H.a,{className:e.elementMargin,component:\"div\"},r.a.createElement(\"p\",null,Fe.a.t(\"messagesAPI.apiInfo.textMessageInfo\")),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.endpoint\"),\": \"),\" \",\"http://localhost:8080/api/messages/send\",\" \",r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.method\"),\": \"),\" POST \",r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.headers\"),\": \"),\" \",Fe.a.t(\"messagesAPI.apiInfo.authorization\"),\" \",r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.body\"),\": \"),\" \",Fe.a.t(\"messagesAPI.apiInfo.exampleBody\"))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6},r.a.createElement(H.a,{className:e.elementMargin},r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.testSend\"))),r.a.createElement(Ft.e,{initialValues:o,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{const{number:a,body:t}=e,n={number:a,body:t};try{await He.a.request({url:\"http://localhost:8080/api/messages/send\",method:\"POST\",data:n,headers:{\"Content-type\":\"application/json\",Authorization:\"Bearer \"+e.token}}),P.b.success(Fe.a.t(\"messagesAPI.messages.success\"))}catch(r){Xe(r)}})(e),a.setSubmitting(!1),a.resetForm()},400)},className:e.elementMargin},a=>{let{isSubmitting:t}=a;return r.a.createElement(Ft.d,{className:e.formContainer},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0,xs:12,md:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"messagesAPI.textMessage.token\"),name:\"token\",autoFocus:!0,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:e.textField,required:!0})),r.a.createElement(ht.a,{item:!0,xs:12,md:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"messagesAPI.textMessage.number\"),name:\"number\",autoFocus:!0,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:e.textField,required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"messagesAPI.textMessage.body\"),name:\"body\",autoFocus:!0,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:e.textField,required:!0})),r.a.createElement(ht.a,{item:!0,xs:12,className:e.textRight},r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",variant:\"contained\",className:e.btnWrapper},t?r.a.createElement(Ba.a,{size:24,className:e.buttonProgress}):\"Enviar\"))))}))),r.a.createElement(H.a,{variant:\"h6\",color:\"primary\",className:e.elementMargin},\"2. \",Fe.a.t(\"messagesAPI.documentation.mediaMessages\")),r.a.createElement(ht.a,{container:!0},r.a.createElement(ht.a,{item:!0,xs:12,sm:6},r.a.createElement(H.a,{className:e.elementMargin,component:\"div\"},r.a.createElement(\"p\",null,Fe.a.t(\"messagesAPI.apiInfo.mediaMessageInfo\")),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.endpoint\"),\": \"),\" \",\"http://localhost:8080/api/messages/send\",\" \",r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.method\"),\": \"),\" POST \",r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.headers\"),\": \"),\" \",Fe.a.t(\"messagesAPI.apiInfo.multipartForm\"),\" \",r.a.createElement(\"br\",null),r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.formData\"),\": \"),\" \",r.a.createElement(\"br\",null),r.a.createElement(\"ul\",null,r.a.createElement(\"li\",null,r.a.createElement(\"b\",null,\"number: \"),\" \",Fe.a.t(\"messagesAPI.apiInfo.exampleNumber\")),r.a.createElement(\"li\",null,r.a.createElement(\"b\",null,\"medias: \"),\" \",Fe.a.t(\"messagesAPI.apiInfo.exampleFile\"))))),r.a.createElement(ht.a,{item:!0,xs:12,sm:6},r.a.createElement(H.a,{className:e.elementMargin},r.a.createElement(\"b\",null,Fe.a.t(\"messagesAPI.documentation.testSend\"))),r.a.createElement(Ft.e,{initialValues:s,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{try{const a=i[0],t=new FormData;t.append(\"number\",e.number),t.append(\"body\",a.name),t.append(\"medias\",a),await He.a.request({url:\"http://localhost:8080/api/messages/send\",method:\"POST\",data:t,headers:{\"Content-type\":\"multipart/form-data\",Authorization:\"Bearer \"+e.token}}),P.b.success(Fe.a.t(\"messagesAPI.messages.success\"))}catch(a){Xe(a)}})(e),a.setSubmitting(!1),a.resetForm(),document.getElementById(\"medias\").files=null,document.getElementById(\"medias\").value=null},400)},className:e.elementMargin},a=>{let{isSubmitting:t}=a;return r.a.createElement(Ft.d,{className:e.formContainer},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0,xs:12,md:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"messagesAPI.mediaMessage.token\"),name:\"token\",autoFocus:!0,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:e.textField,required:!0})),r.a.createElement(ht.a,{item:!0,xs:12,md:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"messagesAPI.mediaMessage.number\"),name:\"number\",autoFocus:!0,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:e.textField,required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(\"input\",{type:\"file\",name:\"medias\",id:\"medias\",required:!0,onChange:e=>c(e.target.files)})),r.a.createElement(ht.a,{item:!0,xs:12,className:e.textRight},r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",variant:\"contained\",className:e.btnWrapper},t?r.a.createElement(Ba.a,{size:24,className:e.buttonProgress}):Fe.a.t(\"messagesAPI.documentation.send\")))))}))))};const id=Object(D.a)(e=>({mainPaperContainer:{overflowY:\"auto\",maxHeight:\"calc(100vh - 200px)\"},mainPaper:{width:\"100%\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(320px, 1fr))\",gap:e.spacing(3),padding:e.spacing(2),marginBottom:e.spacing(3)},helpPaper:{position:\"relative\",width:\"100%\",minHeight:\"340px\",padding:e.spacing(2),boxShadow:e.shadows[3],borderRadius:e.spacing(1),cursor:\"pointer\",display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",maxWidth:\"340px\"},paperHover:{transition:\"transform 0.3s, box-shadow 0.3s\",\"&:hover\":{transform:\"scale(1.03)\",boxShadow:\"0 0 8px\",color:e.palette.primary.main}},videoThumbnail:{width:\"100%\",height:\"calc(100% - 56px)\",objectFit:\"cover\",borderRadius:`${e.spacing(1)}px ${e.spacing(1)}px 0 0`},videoTitle:{marginTop:e.spacing(1),flex:1},videoDescription:{maxHeight:\"100px\",overflow:\"hidden\"},videoModal:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},videoModalContent:{outline:\"none\",width:\"90%\",maxWidth:1024,aspectRatio:\"16/9\",position:\"relative\",backgroundColor:\"white\",borderRadius:e.spacing(1),overflow:\"hidden\"}}));var cd=()=>{const e=id(),[a,t]=Object(n.useState)([]),{list:l}=ui(),[o,s]=Object(n.useState)(null);Object(n.useEffect)(()=>{!async function(){const e=await l();t(e)}()},[]);const i=()=>{s(null)},c=Object(n.useCallback)(e=>{\"Escape\"===e.key&&i()},[]);Object(n.useEffect)(()=>(document.addEventListener(\"keydown\",c),()=>{document.removeEventListener(\"keydown\",c)}),[c]);return r.a.createElement(Ms,null,r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"helps.title\"),\" (\",a.length,\")\"),r.a.createElement(Ls,null)),r.a.createElement(\"div\",{className:e.mainPaper},r.a.createElement(r.a.Fragment,null,r.a.createElement(\"div\",{className:`${e.mainPaper} ${e.mainPaperContainer}`},a.length?a.map((a,t)=>r.a.createElement(xt.a,{key:t,className:`${e.helpPaper} ${e.paperHover}`,onClick:()=>{return e=a.video,void s(e);var e}},r.a.createElement(\"img\",{src:`https://img.youtube.com/vi/${a.video}/mqdefault.jpg`,alt:\"Thumbnail\",className:e.videoThumbnail}),r.a.createElement(H.a,{variant:\"button\",className:e.videoTitle},a.title),r.a.createElement(H.a,{variant:\"caption\",className:e.videoDescription},a.description))):null))),r.a.createElement(Jt.a,{open:Boolean(o),onClose:i,className:e.videoModal},r.a.createElement(\"div\",{className:e.videoModalContent},o&&r.a.createElement(\"iframe\",{style:{width:\"100%\",height:\"100%\",position:\"absolute\",top:0,left:0},src:\"https://www.youtube.com/embed/\"+o,title:\"YouTube video player\",frameBorder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:!0}))))};const dd=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),md=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\")});var ud=e=>{let{open:a,onClose:t,contactListId:l}=e;const o=dd(),s={name:\"\"},[i,c]=Object(n.useState)(s);Object(n.useEffect)(()=>{(async()=>{if(l)try{const{data:e}=await Qe.get(\"/contact-lists/\"+l);c(a=>({...a,...e}))}catch(e){Xe(e)}})()},[l,a]);const d=()=>{t(),c(s)};return r.a.createElement(\"div\",{className:o.root},r.a.createElement(at.a,{open:a,onClose:d,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"contactLists.dialog.edit\"):\"\"+Fe.a.t(\"contactLists.dialog.add\")),r.a.createElement(Ft.e,{initialValues:i,enableReinitialize:!0,validationSchema:md,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e};try{l?await Qe.put(\"/contact-lists/\"+l,a):await Qe.post(\"/contact-lists\",a),P.b.success(Fe.a.t(\"contactList.dialog\"))}catch(t){Xe(t)}d()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:o.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactLists.dialog.name\"),autoFocus:!0,name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0}))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:d,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"contactLists.dialog.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:o.btnWrapper},l?\"\"+Fe.a.t(\"contactLists.dialog.okEdit\"):\"\"+Fe.a.t(\"contactLists.dialog.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress}))))})))},pd=t(447),gd=t.n(pd);const Ed=(e,a)=>{if(\"LOAD_CONTACTLISTS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_CONTACTLIST\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_CONTACTLIST\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},bd=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var fd=()=>{const e=bd(),a=Object(M.useHistory)(),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,y]=Object(n.useState)(\"\"),[x,C]=Object(n.useReducer)(Ed,[]),A=Object(n.useContext)(v);Object(n.useEffect)(()=>{C({type:\"RESET\"}),s(1)},[h]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/contact-lists/\",{params:{searchParam:h,pageNumber:o}});C({type:\"LOAD_CONTACTLISTS\",payload:e.records}),c(e.hasMore),l(!1)}catch(e){Xe(e)}})()},500);return()=>clearTimeout(e)},[h,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=A.getSocket(e);return a.on(`company-${e}-ContactList`,e=>{\"update\"!==e.action&&\"create\"!==e.action||C({type:\"UPDATE_CONTACTLIST\",payload:e.record}),\"delete\"===e.action&&C({type:\"DELETE_CONTACTLIST\",payload:+e.id})}),()=>{a.disconnect()}},[A]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:u&&`${Fe.a.t(\"contactLists.confirmationModal.deleteTitle\")} ${u.name}?`,open:b,onClose:f,onConfirm:()=>(async e=>{try{await Qe.delete(\"/contact-lists/\"+e),P.b.success(Fe.a.t(\"contactLists.toasts.deleted\"))}catch(a){Xe(a)}p(null),y(\"\"),s(1)})(u.id)},Fe.a.t(\"contactLists.confirmationModal.deleteMessage\")),r.a.createElement(ud,{open:g,onClose:()=>{m(null),E(!1)},\"aria-labelledby\":\"form-dialog-title\",contactListId:d&&d.id}),r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,sm:8,item:!0},r.a.createElement(qs,null,Fe.a.t(\"contactLists.title\"))),r.a.createElement(ht.a,{xs:12,sm:4,item:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:7,sm:6,item:!0},r.a.createElement(Dt.a,{fullWidth:!0,placeholder:Fe.a.t(\"contacts.searchPlaceholder\"),type:\"search\",value:h,onChange:e=>{y(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}})),r.a.createElement(ht.a,{xs:5,sm:6,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",color:\"primary\",onClick:()=>{m(null),E(!0)}},Fe.a.t(\"contactLists.buttons.add\"))))))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(a+100)<r&&s(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contactLists.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contactLists.table.contacts\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contactLists.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,x.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.name),r.a.createElement(Vr.a,{align:\"center\"},e.contactsCount||0),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(\"a\",{href:gd.a,download:\"planilha.xlsx\"},r.a.createElement(W.a,{size:\"small\",title:\"Baixar Planilha Exemplo\"},r.a.createElement(Rc.a,null))),r.a.createElement(W.a,{size:\"small\",onClick:()=>{return t=e.id,void a.push(`/contact-lists/${t}/contacts`);var t}},r.a.createElement(Te.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{m(e),E(!0)})(e)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:a=>{f(!0),p(e)}},r.a.createElement(zt.a,null))))),t&&r.a.createElement(Fs,{columns:3}))))))},hd=t(668),vd=t.n(hd);const yd=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}})),xd=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\"),number:Wt.d().min(8,\"Too Short!\").max(50,\"Too Long!\"),email:Wt.d().email(\"Invalid email\")});var Cd=e=>{let{open:a,onClose:t,contactId:l,initialValues:o,onSave:s}=e;const i=yd(),c=Object(n.useRef)(!0),{user:{companyId:d}}=Object(n.useContext)(ra),{contactListId:m}=Object(M.useParams)(),u={name:\"\",number:\"\",email:\"\"},[p,g]=Object(n.useState)(u);Object(n.useEffect)(()=>()=>{c.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(o&&g(e=>({...e,...o})),l)try{const{data:e}=await Qe.get(\"/contact-list-items/\"+l);c.current&&g(e)}catch(e){Xe(e)}})()},[l,a,o]);const E=()=>{t(),g(u)};return r.a.createElement(\"div\",{className:i.root},r.a.createElement(at.a,{open:a,onClose:E,maxWidth:\"lg\",scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"contactModal.title.edit\"):\"\"+Fe.a.t(\"contactModal.title.add\")),r.a.createElement(Ft.e,{initialValues:p,enableReinitialize:!0,validationSchema:xd,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(l)await Qe.put(\"/contact-list-items/\"+l,{...e,companyId:d,contactListId:m}),E();else{const{data:a}=await Qe.post(\"/contact-list-items\",{...e,companyId:d,contactListId:m});s&&s(a),E()}P.b.success(Fe.a.t(\"contactModal.success\"))}catch(a){Xe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(H.a,{variant:\"subtitle1\",gutterBottom:!0},Fe.a.t(\"contactModal.form.mainInfo\")),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.name\"),name:\"name\",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:\"outlined\",margin:\"dense\",className:i.textField}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.number\"),name:\"number\",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:\"5513912344321\",variant:\"outlined\",margin:\"dense\"}),r.a.createElement(\"div\",null,r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"contactModal.form.email\"),name:\"email\",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:\"Email address\",fullWidth:!0,margin:\"dense\",variant:\"outlined\"}))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:E,color:\"secondary\",disabled:o,variant:\"outlined\"},Fe.a.t(\"contactModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:o,variant:\"contained\",className:i.btnWrapper},l?\"\"+Fe.a.t(\"contactModal.buttons.okEdit\"):\"\"+Fe.a.t(\"contactModal.buttons.okAdd\"),o&&r.a.createElement(Ba.a,{size:24,className:i.buttonProgress}))))})))};var Ad=()=>({findById:async e=>{const{data:a}=await Qe.request({url:\"/contact-lists/\"+e,method:\"GET\"});return a},save:async e=>{const{data:a}=await Qe.request({url:\"/contact-lists\",method:\"POST\",data:e});return a},update:async e=>{const{data:a}=await Qe.request({url:\"/contact-lists/\"+e.id,method:\"PUT\",data:e});return a},deleteRecord:async e=>{const{data:a}=await Qe.request({url:\"/contact-lists/\"+e,method:\"DELETE\"});return a},list:async e=>{const{data:a}=await Qe.request({url:\"/contact-lists/list\",method:\"GET\",params:e});return a}});const Sd=(e,a)=>{if(\"LOAD_CONTACTS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_CONTACTS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_CONTACT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Od=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var wd=()=>{const e=Od(),{user:a}=Object(n.useContext)(ra),{contactListId:t}=Object(M.useParams)(),l=Object(M.useHistory)(),[o,s]=Object(n.useState)(!1),[i,c]=Object(n.useState)(1),[d,m]=Object(n.useState)(\"\"),[u,p]=Object(n.useReducer)(Sd,[]),[g,E]=Object(n.useState)(null),[b,f]=Object(n.useState)(!1),[h,y]=Object(n.useState)(null),[x,C]=Object(n.useState)(!1),[A,S]=Object(n.useState)(!1),[O,w]=Object(n.useState)({}),k=Object(n.useRef)(null),{findById:T}=Ad(),I=Object(n.useContext)(v);Object(n.useEffect)(()=>{T(t).then(e=>{w(e)})},[t]),Object(n.useEffect)(()=>{p({type:\"RESET\"}),c(1)},[d]),Object(n.useEffect)(()=>{s(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"contact-list-items\",{params:{searchParam:d,pageNumber:i,contactListId:t}});p({type:\"LOAD_CONTACTS\",payload:e.contacts}),S(e.hasMore),s(!1)}catch(e){Xe(e)}})()},500);return()=>clearTimeout(e)},[d,i,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=I.getSocket(e);return a.on(`company-${e}-ContactListItem`,e=>{\"update\"!==e.action&&\"create\"!==e.action||p({type:\"UPDATE_CONTACTS\",payload:e.record}),\"delete\"===e.action&&p({type:\"DELETE_CONTACT\",payload:+e.id}),\"reload\"===e.action&&p({type:\"LOAD_CONTACTS\",payload:e.records})}),a.on(`company-${e}-ContactListItem-${t}`,e=>{\"reload\"===e.action&&p({type:\"LOAD_CONTACTS\",payload:e.records})}),()=>{a.disconnect()}},[t,I]);return r.a.createElement(Ms,{className:e.mainContainer},r.a.createElement(Cd,{open:b,onClose:()=>{E(null),f(!1)},\"aria-labelledby\":\"form-dialog-title\",contactId:g}),r.a.createElement(ft,{title:h?`${Fe.a.t(\"contactListItems.confirmationModal.deleteTitle\")} ${h.name}?`:\"\"+Fe.a.t(\"contactListItems.confirmationModal.importTitlte\"),open:x,onClose:C,onConfirm:()=>h?(async e=>{try{await Qe.delete(\"/contact-list-items/\"+e),P.b.success(Fe.a.t(\"contacts.toasts.deleted\"))}catch(a){Xe(a)}y(null),m(\"\"),c(1)})(h.id):(async()=>{try{const e=new FormData;e.append(\"file\",k.current.files[0]),await Qe.request({url:`contact-lists/${t}/upload`,method:\"POST\",data:e})}catch(e){Xe(e)}})()},h?\"\"+Fe.a.t(\"contactListItems.confirmationModal.deleteMessage\"):r.a.createElement(r.a.Fragment,null,Fe.a.t(\"contactListItems.confirmationModal.importMessage\"),r.a.createElement(\"a\",{href:gd.a,download:\"planilha.xlsx\"},\"Clique aqui para baixar planilha exemplo.\"))),r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,sm:5,item:!0},r.a.createElement(qs,null,O.name)),r.a.createElement(ht.a,{xs:12,sm:7,item:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,sm:6,item:!0},r.a.createElement(Dt.a,{fullWidth:!0,placeholder:Fe.a.t(\"contactListItems.searchPlaceholder\"),type:\"search\",value:d,onChange:e=>{m(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}})),r.a.createElement(ht.a,{xs:4,sm:2,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",color:\"primary\",onClick:()=>{l.push(\"/contact-lists\")}},Fe.a.t(\"contactListItems.buttons.lists\"))),r.a.createElement(ht.a,{xs:4,sm:2,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",color:\"primary\",onClick:()=>{k.current.value=null,k.current.click()}},Fe.a.t(\"contactListItems.buttons.import\"))),r.a.createElement(ht.a,{xs:4,sm:2,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",color:\"primary\",onClick:()=>{E(null),f(!0)}},Fe.a.t(\"contactListItems.buttons.add\"))))))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!A||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&c(e=>e+1)}},r.a.createElement(r.a.Fragment,null,r.a.createElement(\"input\",{style:{display:\"none\"},id:\"upload\",name:\"file\",type:\"file\",accept:\".xls,.xlsx\",onChange:()=>{C(!0)},ref:k})),r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\",style:{width:\"0%\"}},\"#\"),r.a.createElement(Vr.a,null,Fe.a.t(\"contactListItems.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contactListItems.table.number\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contactListItems.table.email\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"contactListItems.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,u.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\",style:{width:\"0%\"}},r.a.createElement(W.a,null,e.isWhatsappValid?r.a.createElement(wt.a,{titleAccess:\"Whatsapp V\\xe1lido\",htmlColor:\"green\"}):r.a.createElement(vd.a,{titleAccess:\"Whatsapp Inv\\xe1lido\",htmlColor:\"grey\"}))),r.a.createElement(Vr.a,null,e.name),r.a.createElement(Vr.a,{align:\"center\"},e.number),r.a.createElement(Vr.a,{align:\"center\"},e.email),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>{return a=e.id,E(a),void f(!0);var a}},r.a.createElement(kc.a,null)),r.a.createElement(ca,{role:a.profile,perform:\"contacts-page:deleteContact\",yes:()=>r.a.createElement(W.a,{size:\"small\",onClick:()=>{C(!0),y(e)}},r.a.createElement(zt.a,null))})))),o&&r.a.createElement(Fs,{columns:4}))))))};const kd=e=>{let{inputRef:a,...t}=e;return r.a.createElement(\"div\",t)};var Td=e=>{let{InputProps:a,children:t,InputLabelProps:n,label:l,...o}=e;return r.a.createElement(Dt.a,Object.assign({},o,{variant:\"outlined\",label:l,multiline:!0,InputLabelProps:{shrink:!0,...n},InputProps:{inputComponent:kd,...a},inputProps:{children:t}}))};const Id=Object(D.a)(e=>({chip:{margin:e.spacing(.5),cursor:\"pointer\"}}));var jd=e=>{let{onClick:a,disabled:t}=e;const n=Id(),l=[{name:Fe.a.t(\"messageVariablesPicker.vars.contactFirstName\"),value:\"{{firstName}}\"},{name:Fe.a.t(\"messageVariablesPicker.vars.contactName\"),value:\"{{name}} \"},{name:Fe.a.t(\"messageVariablesPicker.vars.greeting\"),value:\"{{ms}} \"},{name:Fe.a.t(\"messageVariablesPicker.vars.protocolNumber\"),value:\"{{protocol}} \"},{name:Fe.a.t(\"messageVariablesPicker.vars.hour\"),value:\"{{hora}} \"}];return r.a.createElement(Td,{margin:\"dense\",fullWidth:!0,label:Fe.a.t(\"messageVariablesPicker.label\"),disabled:t},l.map(e=>r.a.createElement(Vn.a,{key:e.value,onMouseDown:n=>((e,n)=>{e.preventDefault(),t||a(n)})(n,e.value),label:e.name,size:\"small\",className:n.chip,color:\"primary\"})))};const Nd=t(935),Md=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Pd=Wt.b().shape({shortcode:Wt.d().required(\"Obligatorio\")});var Rd=e=>{let{open:a,onClose:t,quickemessageId:l,reload:o}=e;const s=Md(),{user:i}=Object(n.useContext)(ra),{profile:c}=i,d=Object(n.useRef)(),m={shortcode:\"\",message:\"\",geral:!1,status:!0},[u,p]=Object(n.useState)(!1),[g,E]=Object(n.useState)(m),[b,f]=Object(n.useState)(null),h=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!l)return;const{data:e}=await Qe.get(\"/quick-messages/\"+l);E(a=>({...a,...e}))})()}catch(e){Xe(e)}},[l,a]);const v=()=>{E(m),f(null),t()};return r.a.createElement(\"div\",{className:s.root},r.a.createElement(ft,{title:Fe.a.t(\"quickMessages.confirmationModal.deleteTitle\"),open:u,onClose:()=>p(!1),onConfirm:async()=>{b&&(f(null),h.current.value=null),g.mediaPath&&(await Qe.delete(`/quick-messages/${g.id}/media-upload`),E(e=>({...e,mediaPath:null})),P.b.success(Fe.a.t(\"quickMessages.toasts.deleted\")),\"function\"==typeof o&&o())}},Fe.a.t(\"quickMessages.confirmationModal.deleteMessage\")),r.a.createElement(at.a,{open:a,onClose:v,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"quickMessages.dialog.edit\"):\"\"+Fe.a.t(\"quickMessages.dialog.add\")),r.a.createElement(\"div\",{style:{display:\"none\"}},r.a.createElement(\"input\",{type:\"file\",ref:h,onChange:e=>(e=>{const a=Object(Ye.head)(e.target.files);a&&f(a)})(e)})),r.a.createElement(Ft.e,{initialValues:g,enableReinitialize:!0,validationSchema:Pd,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,isMedia:!0,mediaPath:b?String(b.name).replace(/ /g,\"_\"):e.mediaPath?Nd.basename(e.mediaPath).replace(/ /g,\"_\"):null};try{if(l){if(await Qe.put(\"/quick-messages/\"+l,a),null!=b){const e=new FormData;e.append(\"typeArch\",\"quickMessage\"),e.append(\"file\",b),await Qe.post(`/quick-messages/${l}/media-upload`,e)}}else{const{data:e}=await Qe.post(\"/quick-messages\",a);if(null!=b){const a=new FormData;a.append(\"typeArch\",\"quickMessage\"),a.append(\"file\",b),await Qe.post(`/quick-messages/${e.id}/media-upload`,a)}}P.b.success(Fe.a.t(\"quickMessages.toasts.success\")),\"function\"==typeof o&&o()}catch(t){Xe(t)}v()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,setFieldValue:o,values:i}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,autoFocus:!0,label:Fe.a.t(\"quickMessages.dialog.shortcode\"),name:\"shortcode\",error:a.shortcode&&Boolean(t.shortcode),helperText:a.shortcode&&t.shortcode,variant:\"outlined\",margin:\"dense\",fullWidth:!0})),\"admin\"===c&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",fullWidth:!0},r.a.createElement(An.a,{id:\"geral-selection-label\"},Fe.a.t(\"quickMessages.dialog.geral\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"quickMessages.dialog.geral\"),placeholder:Fe.a.t(\"quickMessages.dialog.geral\"),labelId:\"geral-selection-label\",id:\"geral\",name:\"geral\",error:a.geral&&Boolean(t.geral)},r.a.createElement(G.a,{value:!0},\"Activo\"),r.a.createElement(G.a,{value:!1},\"Inactivo\")))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"quickMessages.dialog.message\"),name:\"message\",inputRef:d,error:a.message&&Boolean(t.message),helperText:a.message&&t.message,variant:\"outlined\",margin:\"dense\",multiline:!0,rows:7,fullWidth:!0})),r.a.createElement(ht.a,{item:!0},r.a.createElement(jd,{disabled:n,onClick:e=>(async(e,a)=>{const t=d.current,n=t.value.substring(0,t.selectionStart),r=t.value.substring(t.selectionEnd),l=t.selectionStart+e.length;a(\"message\",`${n}${e}${r}`),await new Promise(e=>setTimeout(e,100)),d.current.setSelectionRange(l,l)})(e,o)})),(g.mediaPath||b)&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fa.a,{startIcon:r.a.createElement(co.a,null)},b?b.name:g.mediaName),r.a.createElement(W.a,{onClick:()=>p(!0),color:\"secondary\"},r.a.createElement(zt.a,{color:\"secondary\"}))))),r.a.createElement(tt.a,null,!b&&!g.mediaPath&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>h.current.click(),disabled:n,variant:\"outlined\"},Fe.a.t(\"quickMessages.buttons.attach\")),r.a.createElement(Fa.a,{onClick:v,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"quickMessages.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:s.btnWrapper},l?\"\"+Fe.a.t(\"quickMessages.buttons.edit\"):\"\"+Fe.a.t(\"quickMessages.buttons.add\"),n&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))};const Dd=(e,a)=>{if(\"LOAD_QUICKMESSAGES\"===a.type){const t=a.payload,n=[];return Object(Ye.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_QUICKMESSAGES\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_QUICKMESSAGE\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Ld=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var qd=()=>{const e=Ld(),[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)(1),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(\"\"),[y,x]=Object(n.useReducer)(Dd,[]),{user:C}=Object(n.useContext)(ra),{profile:A}=C,S=Object(n.useContext)(v);Object(n.useEffect)(()=>{x({type:\"RESET\"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{O()},500);return()=>clearTimeout(e)},[f,l]),Object(n.useEffect)(()=>{const e=C.companyId,a=S.getSocket(e);return a.on(`company${e}-quickemessage`,e=>{\"update\"!==e.action&&\"create\"!==e.action||x({type:\"UPDATE_QUICKMESSAGES\",payload:e.record}),\"delete\"===e.action&&x({type:\"DELETE_QUICKMESSAGE\",payload:+e.id})}),()=>{a.disconnect()}},[S,C.companyId]);const O=async()=>{try{const e=localStorage.getItem(\"companyId\"),{data:a}=await Qe.get(\"/quick-messages/list\",{params:{companyId:e,userId:C.id}});x({type:\"LOAD_QUICKMESSAGES\",payload:a}),i(a.hasMore),t(!1)}catch(e){Xe(e)}};return r.a.createElement(Ms,null,r.a.createElement(ft,{title:m&&`${Fe.a.t(\"quickMessages.confirmationModal.deleteTitle\")} ${m.shortcode}?`,open:E,onClose:b,onConfirm:()=>(async e=>{try{await Qe.delete(\"/quick-messages/\"+e),P.b.success(Fe.a.t(\"quickemessages.toasts.deleted\"))}catch(a){Xe(a)}u(null),h(\"\"),o(1),O(),x({type:\"RESET\"})})(m.id)},Fe.a.t(\"quickMessages.confirmationModal.deleteMessage\")),r.a.createElement(Rd,{resetPagination:()=>{o(1),O()},open:p,onClose:()=>{d(null),g(!1),O()},\"aria-labelledby\":\"form-dialog-title\",quickemessageId:c&&c.id}),r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,sm:8,item:!0},r.a.createElement(qs,null,Fe.a.t(\"quickMessages.title\"))),r.a.createElement(ht.a,{xs:12,sm:4,item:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:6,sm:6,item:!0},r.a.createElement(Dt.a,{fullWidth:!0,placeholder:Fe.a.t(\"quickMessages.searchPlaceholder\"),type:\"search\",value:f,onChange:e=>{h(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}})),r.a.createElement(ht.a,{xs:6,sm:6,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",onClick:()=>{d(null),g(!0)},color:\"primary\"},Fe.a.t(\"quickMessages.buttons.add\"))))))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!s||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(t+100)<r&&o(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"quickMessages.table.shortcode\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"quickMessages.table.mediaName\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"quickMessages.table.status\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"quickMessages.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,y.map(e=>{var a;return r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.shortcode),r.a.createElement(Vr.a,{align:\"center\"},null!==(a=e.mediaName)&&void 0!==a?a:\"Sin anexo\"),r.a.createElement(Vr.a,{align:\"center\"},!0===e.geral?r.a.createElement(wt.a,{style:{color:\"green\"}}):\"\"),r.a.createElement(Vr.a,{align:\"center\"},(\"admin\"===A||\"supervisor\"===A||\"user\"===A&&!e.geral)&&r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{d(e),g(!0)})(e)},r.a.createElement(kc.a,null)),(\"admin\"===A||\"supervisor\"===A||\"user\"===A&&!e.geral)&&r.a.createElement(W.a,{size:\"small\",onClick:a=>{b(!0),u(e)}},r.a.createElement(zt.a,null))))}),a&&r.a.createElement(Fs,{columns:5}))))))},Wd=t(1163),Fd=t(1164),Bd=t(471);const zd=Object(D.a)(e=>({root:{display:\"flex\",height:\"100%\",padding:e.spacing(2),gap:e.spacing(2)},column:{flex:1,minWidth:300,maxWidth:400,backgroundColor:e.palette.background.paper,borderRadius:e.spacing(1),border:\"1px solid \"+e.palette.divider},columnHeader:{padding:e.spacing(2),borderBottom:\"1px solid \"+e.palette.divider,display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},columnTitle:{fontWeight:\"bold\",fontSize:\"1.1rem\"},columnCount:{backgroundColor:e.palette.primary.main,color:\"white\",borderRadius:\"50%\",width:24,height:24,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:\"0.8rem\",fontWeight:\"bold\"},cardsContainer:{padding:e.spacing(1),maxHeight:\"calc(100vh - 200px)\",minHeight:100},card:{marginBottom:e.spacing(1),cursor:\"grab\",transition:\"all 0.2s ease\",border:\"2px solid \"+e.palette.divider,borderRadius:e.spacing(1),backgroundColor:e.palette.background.paper,\"&:hover\":{transform:\"translateY(-2px)\",boxShadow:e.shadows[4],borderColor:e.palette.primary.main},\"&:active\":{cursor:\"grabbing\"}},cardContent:{padding:e.spacing(1.5),\"&:last-child\":{paddingBottom:e.spacing(1.5)}},cardHeader:{display:\"flex\",alignItems:\"center\",marginBottom:e.spacing(1)},avatar:{width:32,height:32,marginRight:e.spacing(1),backgroundColor:e.palette.primary.main,border:\"2px solid \"+e.palette.divider},contactInfo:{flex:1,minWidth:0},contactName:{fontWeight:\"bold\",fontSize:\"0.9rem\",marginBottom:2,overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\"},contactNumber:{fontSize:\"0.8rem\",color:e.palette.text.secondary},lastMessage:{fontSize:\"0.8rem\",color:e.palette.text.secondary,marginTop:e.spacing(.5),overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\",maxWidth:\"100%\"},quickActions:{display:\"flex\",justifyContent:\"flex-end\",marginTop:e.spacing(1),gap:e.spacing(.5)},actionButton:{padding:4,minWidth:32,height:32,\"&:hover\":{backgroundColor:e.palette.action.hover}},dragIcon:{color:e.palette.text.disabled,fontSize:\"1rem\",marginRight:e.spacing(.5)},tagChip:{marginTop:e.spacing(.5),height:20,fontSize:\"0.7rem\"}}));var Ud=e=>{let{tickets:a,tags:t,onCardMove:l,onCardClick:o}=e;const s=zd(),i=Object(M.useHistory)(),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(a),[E,b]=Object(n.useState)(!1);r.a.useEffect(()=>{g(a)},[a]);const f=p.filter(e=>0===e.tags.length),h=t.find(e=>\"Atenci\\xf3n\"===e.name),v=t.find(e=>\"Cerrado\"===e.name),y=h?p.filter(e=>e.tags.some(e=>e.id===h.id)):[],x=v?p.filter(e=>e.tags.some(e=>e.id===v.id)):[];r.a.useEffect(()=>{j.dashboard.debug(\"\\ud83d\\udd04 Tickets locales actualizados:\",{total:p.length,sinEtiquetas:f.length,atencion:y.length,cerrado:x.length})},[p,f,y,x]);const C=[{id:\"abiertos\",title:\"ABIERTOS\",tickets:f,color:\"#1976d2\"},{id:\"atencion\",title:\"ATENCI\\xd3N\",tickets:y,color:h?h.color:\"#ff9800\"},{id:\"cerrado\",title:\"CERRADO\",tickets:x,color:v?v.color:\"#4caf50\"}],A=e=>{e.target.style.display=\"none\"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bd.a,{onDragEnd:async e=>{if(!e.destination)return;const{source:t,destination:n,draggableId:r}=e;if(t.droppableId!==n.droppableId)try{b(!0);const e=parseInt(r),a=t.droppableId,o=n.droppableId,s=p.find(a=>a.id===e);if(s){j.dashboard.debug(\"\\ud83d\\udd04 Moviendo ticket local:\",{ticketId:e,sourceLaneId:a,targetLaneId:o,etiquetasActuales:s.tags.map(e=>e.name)});const t={...s};\"atencion\"===a&&h?(t.tags=t.tags.filter(e=>e.id!==h.id),j.dashboard.debug(\"\\u2705 Removida etiqueta Atenci\\xf3n\")):\"cerrado\"===a&&v&&(t.tags=t.tags.filter(e=>e.id!==v.id),j.dashboard.debug(\"\\u2705 Removida etiqueta Cerrado\")),\"atencion\"===o&&h?(t.tags=[...t.tags,h],j.dashboard.debug(\"\\u2705 Agregada etiqueta Atenci\\xf3n\")):\"cerrado\"===o&&v&&(t.tags=[...t.tags,v],j.dashboard.debug(\"\\u2705 Agregada etiqueta Cerrado\")),g(a=>{const n=a.map(a=>a.id===e?t:a);return j.dashboard.debug(\"\\ud83d\\udd04 Estado local actualizado:\",{ticketsActualizados:n.length,etiquetasNuevas:t.tags.map(e=>e.name)}),n})}await l(e,a,o),j.dashboard.debug(\"\\u2705 Movimiento completado exitosamente\")}catch(o){j.dashboard.error(\"Error moving card:\",o),g(a)}finally{b(!1)}}},r.a.createElement(\"div\",{className:s.root},C.map(e=>r.a.createElement(xt.a,{key:e.id,className:s.column,elevation:1},r.a.createElement(\"div\",{className:s.columnHeader},r.a.createElement(H.a,{className:s.columnTitle,style:{color:e.color}},e.title),r.a.createElement(\"div\",{className:s.columnCount},e.tickets.length)),r.a.createElement(Bd.c,{droppableId:e.id},(a,t)=>r.a.createElement(\"div\",Object.assign({className:s.cardsContainer,ref:a.innerRef},a.droppableProps),e.tickets.map((e,a)=>r.a.createElement(Bd.b,{key:e.id.toString(),draggableId:e.id.toString(),index:a},(a,t)=>{var n,l,o;return r.a.createElement(\"div\",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps),r.a.createElement(cn.a,{className:s.card,style:{transform:t.isDragging?\"rotate(5deg)\":\"none\",boxShadow:t.isDragging?\"0 5px 10px rgba(0,0,0,0.15)\":\"none\",opacity:E?.6:1,pointerEvents:E?\"none\":\"auto\",transition:\"all 0.3s ease\",border:t.isDragging?\"2px solid #1976d2\":void 0}},r.a.createElement(Wi.a,{className:s.cardContent},r.a.createElement(\"div\",{className:s.cardHeader},r.a.createElement(Wd.a,{className:s.dragIcon}),r.a.createElement(Ia.a,{className:s.avatar,src:(o=e.contact,o.profilePicUrl&&\"\"!==o.profilePicUrl&&!o.profilePicUrl.includes(\"nopicture.png\")?o.profilePicUrl:null),onError:A,style:{backgroundColor:hn(null===(n=e.contact)||void 0===n?void 0:n.number),color:\"white\",fontWeight:\"bold\"}},(l=e.contact.name)?bn(l):\"?\"),r.a.createElement(\"div\",{className:s.contactInfo},r.a.createElement(\"div\",{className:s.contactName},e.contact.name),r.a.createElement(\"div\",{className:s.contactNumber},e.contact.number))),r.a.createElement(\"div\",{className:s.lastMessage},function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length>a?e.substring(0,a)+\"...\":e:\"\"}(e.lastMessage,50)),r.a.createElement(\"div\",{className:s.quickActions},r.a.createElement(W.a,{className:s.actionButton,onClick:a=>((e,a)=>{e.stopPropagation(),u(a),d(!0)})(a,e),title:\"Agendar\"},r.a.createElement(ua.a,{fontSize:\"small\"})),r.a.createElement(W.a,{className:s.actionButton,onClick:a=>{a.stopPropagation(),(e=>{i.push(\"/tickets/\"+e.uuid)})(e)},title:\"Ver conversaci\\xf3n\"},r.a.createElement(Fd.a,{fontSize:\"small\"}))))))})),a.placeholder)))))),m&&r.a.createElement(Yo,{open:c,onClose:()=>{d(!1),u(null)},contactId:m.contactId,ticketId:m.id,reload:()=>{j.dashboard.debug(\"Recargando datos del KANBAN\")}}))};const Hd=Object(D.a)(e=>({root:{display:\"flex\",alignItems:\"center\",padding:e.spacing(1),height:\"100%\"},button:{background:\"#10a110\",border:\"none\",padding:\"10px\",color:\"white\",fontWeight:\"bold\",borderRadius:\"5px\"}}));var Vd=()=>{const e=Hd(),a=Object(M.useHistory)(),[t,l]=Object(n.useState)([]),[o,s]=Object(n.useState)([]),[i,c]=Object(n.useState)(!1),{user:d}=Object(n.useContext)(ra),m=d.queues.map(e=>e.UserQueue.queueId),u=Object(n.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!i)try{c(!0),j.dashboard.debug(\"\\ud83d\\udd04 Cargando tags de Kanban...\");const e=(await Qe.get(\"/tags/kanban\")).data.lista||[];l(e),j.dashboard.debug(\"\\u2705 Tags cargados:\",e.length),await p(m)}catch(t){var a;if(t.response&&(401===t.response.status||403===t.response.status))return void j.dashboard.debug(\"\\ud83d\\udd04 Error de autenticaci\\xf3n silenciado:\",t.response.status);if(j.dashboard.error(\"\\u274c Error cargando tags:\",t),e<3&&(\"ERR_INSUFFICIENT_RESOURCES\"===t.code||(null===(a=t.message)||void 0===a?void 0:a.includes(\"ERR_INSUFFICIENT_RESOURCES\")))){const a=1e3*Math.pow(2,e);return j.dashboard.warn(`\\ud83d\\udd04 Reintentando en ${a}ms (intento ${e+1}/3)`),void setTimeout(()=>{u(e+1)},a)}j.dashboard.warn(\"\\u26a0\\ufe0f Continuando sin tags despu\\xe9s de errores\"),await p(m)}finally{c(!1)}}),[m,i]);Object(n.useEffect)(()=>{const e=setTimeout(()=>{u()},1e3);return()=>clearTimeout(e)},[u]);const p=async e=>{try{var a;j.dashboard.debug(\"\\ud83d\\udd04 Cargando tickets de Kanban...\");const{data:t}=await Qe.get(\"/ticket/kanban\",{params:{queueIds:JSON.stringify(e),teste:!0}});s(t.tickets),j.dashboard.debug(\"\\u2705 Tickets cargados:\",(null===(a=t.tickets)||void 0===a?void 0:a.length)||0)}catch(t){if(j.dashboard.error(\"\\u274c Error cargando tickets:\",t),t.response&&(401===t.response.status||403===t.response.status))return void j.dashboard.warn(\"\\ud83d\\udd04 Error de autenticaci\\xf3n, manejado por interceptor\");s([])}};return r.a.createElement(\"div\",{className:e.root},r.a.createElement(Ud,{tickets:o,tags:t,onCardMove:async(e,a,n)=>{try{if(j.dashboard.debug(\"\\ud83d\\udd04 Moviendo ticket:\",{cardId:e,sourceLaneId:a,targetLaneId:n}),\"abiertos\"===n){if(a&&a!==n)try{t.find(e=>\"atencion\"===a?\"Atenci\\xf3n\"===e.name:\"cerrado\"===a&&\"Cerrado\"===e.name)&&(await Qe.delete(\"/ticket-tags/\"+e),j.dashboard.debug(\"\\u2705 Etiqueta eliminada para mover a ABIERTOS\"))}catch(o){var r;j.dashboard.debug(\"\\u2139\\ufe0f Etiqueta no exist\\xeda en origen:\",null===(r=o.response)||void 0===r?void 0:r.status)}return P.b.success(\"Ticket movido a ABIERTOS exitosamente!\"),j.dashboard.debug(\"\\u2705 Ticket movido a ABIERTOS\"),void setTimeout(()=>{u()},500)}const s=t.find(e=>\"atencion\"===n?\"Atenci\\xf3n\"===e.name:\"cerrado\"===n&&\"Cerrado\"===e.name);if(!s)return j.dashboard.error(\"\\u274c Tag no encontrado para:\",n),void P.b.error(\"Error: Tag no encontrado\");if(a&&a!==n)try{t.find(e=>\"atencion\"===a?\"Atenci\\xf3n\"===e.name:\"cerrado\"===a&&\"Cerrado\"===e.name)&&(await Qe.delete(\"/ticket-tags/\"+e),j.dashboard.debug(\"\\u2705 Tag eliminado del origen\"))}catch(o){var l;j.dashboard.debug(\"\\u2139\\ufe0f Tag no exist\\xeda en origen:\",null===(l=o.response)||void 0===l?void 0:l.status)}s&&(await Qe.put(`/ticket-tags/${e}/${s.id}`),j.dashboard.debug(\"\\u2705 Tag agregado al destino\"),P.b.success(\"Ticket movido exitosamente!\")),j.dashboard.debug(\"\\u2705 Ticket movido exitosamente\"),setTimeout(()=>{u()},500)}catch(s){j.dashboard.error(\"\\u274c Error moviendo ticket:\",s),P.b.error(\"Error al mover el ticket\")}},onCardClick:e=>{a.push(\"/tickets/\"+e.uuid)}}))};var Gd=e=>{let{component:a,isPrivate:t=!1,...l}=e;const{isAuth:o,loading:s}=Object(n.useContext)(ra);return!o&&t?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(Zn,null),r.a.createElement(M.Redirect,{to:{pathname:\"/login\",state:{from:l.location}}})):o&&!t?r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(Zn,null),r.a.createElement(M.Redirect,{to:{pathname:\"/\",state:{from:l.location}}}),\";\"):r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(Zn,null),r.a.createElement(M.Route,Object.assign({},l,{component:a})))},_d=t(521);t(958),t(959),t(960);const Kd={fontSize:\"14px\",overflow:\"hidden\",whiteSpace:\"nowrap\",textOverflow:\"ellipsis\"},Qd=Object(_d.b)(ta.a);var Yd={date:\"Fecha\",time:\"Hora\",event:\"Evento\",allDay:\"D\\xeda Completo\",week:\"Semana\",work_week:\"Agendamientos\",day:\"D\\xeda\",month:\"Mes\",previous:\"Anterior\",next:\"Siguiente\",yesterday:\"Ayer\",tomorrow:\"Ma\\xf1ana\",today:\"Hoy\",agenda:\"Agenda\",noEventsInRange:\"No hay agendamientos en este per\\xedodo.\",showMore:function(e){return\"+\"+e+\" m\\xe1s\"}};const Xd=(e,a)=>{if(\"LOAD_SCHEDULES\"===a.type)return 1===a.payload.pageNumber?a.payload.schedules:[...e,...a.payload.schedules];if(\"UPDATE_SCHEDULES\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_SCHEDULE\"===a.type){const t=a.payload;return e.filter(e=>e.id!==t)}return\"RESET\"===a.type?[]:e},Jd=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var Zd=()=>{const e=Jd(),{user:a}=Object(n.useContext)(ra),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(\"\"),[h,y]=Object(n.useReducer)(Xd,[]),[x,C]=Object(n.useState)(!1),[A,S]=Object(n.useState)((O=\"contactId\",+new URLSearchParams(window.location.search).get(O)));var O;const[w,k]=Object(n.useState)(\"calendar\"),T=Object(n.useCallback)(async()=>{try{const{data:e}=await Qe.get(\"/schedules/\",{params:{searchParam:b,pageNumber:o}});y({type:\"LOAD_SCHEDULES\",payload:{schedules:e.schedules,pageNumber:o}}),c(e.hasMore),l(!1)}catch(e){Xe(e)}},[b,o]),I=Object(n.useCallback)(()=>{A&&N()},[A]),j=Object(n.useContext)(v);Object(n.useEffect)(()=>{y({type:\"RESET\"}),s(1)},[b]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{T()},500);return()=>clearTimeout(e)},[b,o,A,T,I]),Object(n.useEffect)(()=>{I();const e=j.getSocket(a.companyId);return e.on(`company${a.companyId}-schedule`,e=>{\"update\"!==e.action&&\"create\"!==e.action||y({type:\"UPDATE_SCHEDULES\",payload:e.schedule}),\"delete\"===e.action&&y({type:\"DELETE_SCHEDULE\",payload:+e.scheduleId})}),()=>{e.disconnect()}},[I,j,a]);const N=()=>{m(null),C(!0)},M=e=>{m(e),C(!0)};return r.a.createElement(Ms,null,r.a.createElement(ft,{title:u&&(u.isReminderSystem?\"\\xbfCancelar reuni\\xf3n?\":\"\\xbfCancelar agendamiento?\"),open:g,onClose:()=>E(!1),onConfirm:()=>(async e=>{try{const a=h.find(a=>a.id===e);a&&a.isReminderSystem?(await Qe.post(`/schedules/${e}/cancel-reminder`),P.b.success(\"Reuni\\xf3n cancelada exitosamente\")):(await Qe.post(`/schedules/${e}/cancel`),P.b.success(\"Agendamiento cancelado exitosamente\")),p(null),f(\"\"),s(1),y({type:\"RESET\"}),s(1),await T(),window.location.reload()}catch(a){Xe(a)}})(u.id)},u&&u.isReminderSystem?\"\\xbfEst\\xe1s seguro de que deseas cancelar esta reuni\\xf3n? Se eliminar\\xe1n todos los recordatorios asociados.\":\"\\xbfEst\\xe1s seguro de que deseas cancelar este agendamiento? Se enviar\\xe1 un mensaje de cancelaci\\xf3n al contacto.\"),r.a.createElement(Yo,{open:x,onClose:()=>{m(null),C(!1)},reload:T,\"aria-labelledby\":\"form-dialog-title\",scheduleId:d&&d.id,contactId:A,cleanContact:()=>{S(\"\")}}),r.a.createElement(Rs,null,r.a.createElement(qs,null,\"Agendamientos (\",h.length,\")\"),r.a.createElement(Ls,null,r.a.createElement(Dt.a,{placeholder:Fe.a.t(\"contacts.searchPlaceholder\"),type:\"search\",value:b,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}}),r.a.createElement(Fa.a,{variant:\"outlined\",color:\"primary\",onClick:()=>k(\"calendar\"===w?\"table\":\"calendar\"),style:{marginRight:8}},\"calendar\"===w?\"Vista Tabla\":\"Vista Calendario\"),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:N},\"Nuevo Agendamiento\"))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(a+100)<r&&s(e=>e+1)}},\"calendar\"===w?r.a.createElement(_d.a,{messages:Yd,formats:{agendaDateFormat:\"DD/MM ddd\",weekdayFormat:\"dddd\"},localizer:Qd,events:h.map(e=>({title:r.a.createElement(\"div\",{className:\"event-container\"},r.a.createElement(\"div\",{style:Kd},e.contact.name),r.a.createElement(zt.a,{onClick:()=>{p(e),E(!0)},className:\"delete-icon\",style:{opacity:e.sentAt||new Date(e.sendAt)<new Date?.3:1,cursor:e.sentAt||new Date(e.sendAt)<new Date?\"not-allowed\":\"pointer\"}}),r.a.createElement(kc.a,{onClick:()=>{M(e),C(!0)},className:\"edit-icon\",style:{opacity:new Date(e.sendAt)<new Date?.3:1,cursor:new Date(e.sendAt)<new Date?\"not-allowed\":\"pointer\"}})),start:new Date(e.sendAt),end:new Date(e.sendAt)})),startAccessor:\"start\",endAccessor:\"end\",style:{height:500}}):r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},\"Fecha\"),r.a.createElement(Vr.a,{align:\"center\"},\"Hora\"),r.a.createElement(Vr.a,{align:\"center\"},\"Contacto\"),r.a.createElement(Vr.a,{align:\"center\"},\"Conexi\\xf3n\"),r.a.createElement(Vr.a,{align:\"center\"},\"Mensaje\"),r.a.createElement(Vr.a,{align:\"center\"},\"Estado\"),r.a.createElement(Vr.a,{align:\"center\"},\"Acciones\"))),r.a.createElement(Hr.a,null,h.map(e=>{var a,t;const n=(e=>{const a=new Date,t=new Date(e.sendAt);return\"CANCELADO\"===e.status?{text:\"Cancelado\",color:\"gray\"}:e.sentAt?{text:\"Enviado\",color:\"green\"}:t<a?{text:\"Vencido\",color:\"red\"}:{text:\"Pendiente\",color:\"orange\"}})(e),l=new Date(e.sendAt);return r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},l.toLocaleDateString(\"es-ES\",{day:\"2-digit\",month:\"2-digit\",year:\"numeric\"})),r.a.createElement(Vr.a,{align:\"center\"},l.toLocaleTimeString(\"es-ES\",{hour:\"2-digit\",minute:\"2-digit\"})),r.a.createElement(Vr.a,{align:\"center\"},(null===(a=e.contact)||void 0===a?void 0:a.name)||\"N/A\"),r.a.createElement(Vr.a,{align:\"center\"},(null===(t=e.whatsapp)||void 0===t?void 0:t.name)||\"N/A\"),r.a.createElement(Vr.a,{align:\"center\"},(o=e.body,s=50,o.length>s?o.substring(0,s)+\"...\":o)),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(\"span\",{style:{color:n.color,fontWeight:\"bold\",padding:\"4px 8px\",borderRadius:\"4px\",backgroundColor:\"green\"===n.color?\"#e8f5e8\":\"red\"===n.color?\"#ffe8e8\":\"#fff3e0\"}},n.text)),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{onClick:()=>M(e),disabled:l<new Date||\"CANCELADO\"===e.status,size:\"small\"},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{onClick:()=>{p(e),E(!0)},disabled:e.sentAt||l<new Date||\"CANCELADO\"===e.status,size:\"small\",title:\"CANCELADO\"===e.status?\"Ya cancelado\":\"Cancelar agendamiento\"},r.a.createElement(zt.a,null))));var o,s})))))},$d=t(688),em=t.n($d),am=t(686),tm=t.n(am),nm=t(687),rm=t.n(nm);const lm=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\",backgroundColor:\"#fff\"},tabmsg:{backgroundColor:e.palette.campaigntab},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}}));var om=e=>{let{open:a,onClose:t,campaignId:l,initialValues:o,onSave:s,resetPagination:i}=e;const c=lm(),d=Object(n.useRef)(!0),{user:m}=Object(n.useContext)(ra),{companyId:u}=m,[p,g]=Object(n.useState)(null),E={name:\"\",message1:\"\",message2:\"\",message3:\"\",message4:\"\",message5:\"\",confirmationMessage1:\"\",confirmationMessage2:\"\",confirmationMessage3:\"\",confirmationMessage4:\"\",confirmationMessage5:\"\",status:\"INATIVA\",confirmation:!1,scheduledAt:\"\",whatsappId:\"\",contactListId:\"\",tagListId:\"\",companyId:u},[b,f]=Object(n.useState)(E),[h,v]=Object(n.useState)([]),[y,x]=Object(n.useState)([]),[C,A]=Object(n.useState)(0),[S,O]=Object(n.useState)(null),[w,k]=Object(n.useState)(!1),[T,I]=Object(n.useState)(!0),j=Object(n.useRef)(null),[N,M]=Object(n.useState)([]),[R,D]=Object(n.useState)(!1),[L,q]=Object(n.useState)(!1);Object(n.useEffect)(()=>()=>{d.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/files/\",{params:{companyId:u}});g(e.files)}catch(e){Xe(e)}})()},[u]),Object(n.useEffect)(()=>{if(d.current){if(o&&f(e=>({...e,...o})),Qe.get(\"/contact-lists/list\",{params:{companyId:u}}).then(e=>{let{data:a}=e;return x(a)}),Qe.get(\"/whatsapp\",{params:{companyId:u,session:0}}).then(e=>{let{data:a}=e;return v(a)}),Qe.get(\"/tags\",{params:{companyId:u}}).then(e=>{let{data:a}=e;const t=a.tags.map(e=>({id:e.id,name:e.name}));M(t)}).catch(e=>{console.error(\"Error retrieving tags:\",e)}),!l)return;Qe.get(\"/campaigns/\"+l).then(e=>{let{data:a}=e;f(e=>{let t=Object.assign({},e);return Object.entries(a).forEach(e=>{let[a,n]=e;t[a]=\"scheduledAt\"===a&&\"\"!==n&&null!==n?ta()(n).format(\"YYYY-MM-DDTHH:mm\"):null===n?\"\":n}),t})})}},[l,a,o,u]),Object(n.useEffect)(()=>{const e=ta()(),a=ta()(b.scheduledAt),t=!Number.isNaN(a.diff(e))&&a.diff(e,\"hour\")>1,n=\"INATIVA\"===b.status||\"PROGRAMADA\"===b.status&&t;I(n)},[b.status,b.scheduledAt]);const F=()=>{t(),f(E),D(!1),q(!1)},B=(e,a,t,n)=>r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft.b,{as:Dt.a,id:e,name:e,fullWidth:!0,rows:5,label:Fe.a.t(\"campaigns.dialog.form.\"+e),placeholder:Fe.a.t(\"campaigns.dialog.form.messagePlaceholder\"),multiline:!0,variant:\"outlined\",disabled:!T&&\"CANCELADA\"!==b.status,error:t[e]&&Boolean(n[e]),helperText:t[e]&&n[e]}),r.a.createElement(jd,{disabled:!T&&\"CANCELADA\"!==b.status,onClick:e=>((e,a)=>{const t=document.getElementById(\"message\"+(C+1));if(t){const n=t.value.substring(0,t.selectionStart),r=t.value.substring(t.selectionEnd),l=t.selectionStart+e.length;a(\"message\"+(C+1),`${n}${e}${r}`),setTimeout(()=>{t.setSelectionRange(l,l),t.focus()},100)}})(e,a)})),z=e=>r.a.createElement(Ft.b,{as:Dt.a,id:e,name:e,fullWidth:!0,rows:5,label:Fe.a.t(\"campaigns.dialog.form.\"+e),placeholder:Fe.a.t(\"campaigns.dialog.form.messagePlaceholder\"),multiline:!0,variant:\"outlined\",disabled:!T&&\"CANCELADA\"!==b.status});return r.a.createElement(\"div\",{className:c.root},r.a.createElement(ft,{title:Fe.a.t(\"campaigns.confirmationModal.deleteTitle\"),open:w,onClose:()=>k(!1),onConfirm:async()=>{S&&(O(null),j.current.value=null,q(!1)),b.mediaPath&&(await Qe.delete(`/campaigns/${b.id}/media-upload`),f(e=>({...e,mediaPath:null,mediaName:null})),P.b.success(Fe.a.t(\"campaigns.toasts.deleted\")))}},Fe.a.t(\"campaigns.confirmationModal.deleteMessage\")),r.a.createElement(at.a,{open:a,onClose:F,fullWidth:!0,maxWidth:\"md\",scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},T?r.a.createElement(r.a.Fragment,null,l?\"\"+Fe.a.t(\"campaigns.dialog.update\"):\"\"+Fe.a.t(\"campaigns.dialog.new\")):r.a.createElement(r.a.Fragment,null,\"\"+Fe.a.t(\"campaigns.dialog.readonly\"))),r.a.createElement(\"div\",{style:{display:\"none\"}},r.a.createElement(\"input\",{type:\"file\",ref:j,onChange:e=>(e=>{const a=Object(Ye.head)(e.target.files);a&&(O(a),q(!0))})(e)})),r.a.createElement(Ft.e,{initialValues:b,enableReinitialize:!0,validate:e=>{const a={};e.name&&\"\"!==e.name.trim()||(a.name=\"El nombre de la campa\\xf1a es obligatorio\"),e.whatsappId&&\"\"!==e.whatsappId||(a.whatsappId=\"La conexi\\xf3n es obligatoria\"),e.scheduledAt&&\"\"!==e.scheduledAt||(a.scheduledAt=\"La fecha programada es obligatoria\");e.contactListId&&\"\"!==e.contactListId||e.tagListId&&\"\"!==e.tagListId||(a.contactListId=\"Debe seleccionar una lista de contactos o una lista de etiquetas\");return e.message1&&\"\"!==e.message1.trim()||e.message2&&\"\"!==e.message2.trim()||e.message3&&\"\"!==e.message3.trim()||e.message4&&\"\"!==e.message4.trim()||e.message5&&\"\"!==e.message5.trim()||(a.message1=\"Debe ingresar al menos un mensaje\"),console.log(\"Validaci\\xf3n manual:\",{values:e,errors:a}),a},onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{const a={};if(Object.entries(e).forEach(e=>{let[t,n]=e;a[t]=\"scheduledAt\"===t&&\"\"!==n&&null!==n?ta()(n).format(\"YYYY-MM-DD HH:mm:ss\"):\"\"===n?null:n}),l){if(await Qe.put(\"/campaigns/\"+l,a),null!=S){const e=new FormData;e.append(\"file\",S),await Qe.post(`/campaigns/${l}/media-upload`,e)}F()}else{const{data:e}=await Qe.post(\"/campaigns\",a);if(null!=S){const a=new FormData;a.append(\"file\",S),await Qe.post(`/campaigns/${e.id}/media-upload`,a)}s&&s(e),F()}P.b.success(Fe.a.t(\"campaigns.toasts.success\"))}catch(a){console.log(a),Xe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o,setFieldValue:s}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"campaigns.dialog.form.name\"),name:\"name\",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:c.textField,disabled:!T})),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:c.formControl},r.a.createElement(An.a,{id:\"contactList-selection-label\"},Fe.a.t(\"campaigns.dialog.form.contactList\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"campaigns.dialog.form.contactList\"),placeholder:Fe.a.t(\"campaigns.dialog.form.contactList\"),labelId:\"contactList-selection-label\",id:\"contactListId\",name:\"contactListId\",error:n.contactListId&&Boolean(t.contactListId),disabled:Boolean(!T||a.tagListId&&\"\"!==a.tagListId),onChange:e=>((e,a)=>{a(\"contactListId\",e),e&&\"\"!==e&&a(\"tagListId\",\"\")})(e.target.value,s)},r.a.createElement(G.a,{value:\"\"},Fe.a.t(\"campaigns.placeholders.notDefined\")),y&&y.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:c.formControl},r.a.createElement(An.a,{id:\"tagList-selection-label\"},Fe.a.t(\"campaigns.dialog.form.tagList\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"campaigns.dialog.form.tagList\"),placeholder:Fe.a.t(\"campaigns.dialog.form.tagList\"),labelId:\"tagList-selection-label\",id:\"tagListId\",name:\"tagListId\",error:n.tagListId&&Boolean(t.tagListId),disabled:Boolean(!T||a.contactListId&&\"\"!==a.contactListId),onChange:e=>((e,a)=>{a(\"tagListId\",e),e&&\"\"!==e&&a(\"contactListId\",\"\")})(e.target.value,s)},r.a.createElement(G.a,{value:\"\"},Fe.a.t(\"campaigns.placeholders.notDefined\")),Array.isArray(N)&&N.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:c.formControl},r.a.createElement(An.a,{id:\"whatsapp-selection-label\"},Fe.a.t(\"campaigns.dialog.form.whatsapp\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"campaigns.dialog.form.whatsapp\"),placeholder:Fe.a.t(\"campaigns.dialog.form.whatsapp\"),labelId:\"whatsapp-selection-label\",id:\"whatsappId\",name:\"whatsappId\",error:n.whatsappId&&Boolean(t.whatsappId),disabled:!T},r.a.createElement(G.a,{value:\"\"},Fe.a.t(\"campaigns.placeholders.notDefinedMale\")),h&&h.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"campaigns.dialog.form.scheduledAt\"),name:\"scheduledAt\",error:n.scheduledAt&&Boolean(t.scheduledAt),helperText:n.scheduledAt&&t.scheduledAt,variant:\"outlined\",margin:\"dense\",type:\"datetime-local\",InputLabelProps:{shrink:!0},fullWidth:!0,className:c.textField,disabled:!T})),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",className:c.FormControl,fullWidth:!0},r.a.createElement(An.a,{id:\"fileListId-selection-label\"},Fe.a.t(\"campaigns.dialog.form.fileList\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"campaigns.dialog.form.fileList\"),name:\"fileListId\",id:\"fileListId\",placeholder:Fe.a.t(\"campaigns.dialog.form.fileList\"),labelId:\"fileListId-selection-label\",value:a.fileListId||\"\",disabled:Boolean(L),onChange:e=>((e,a)=>{a(\"fileListId\",e),D(e&&\"\"!==e),e&&\"\"!==e&&q(!1)})(e.target.value,s)},r.a.createElement(G.a,{value:\"\"},Fe.a.t(\"campaigns.placeholders.notDefinedMale\")),p.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Cl.a,{value:C,indicatorColor:\"primary\",textColor:\"primary\",className:c.tabmsg,onChange:(e,a)=>A(a),variant:\"fullWidth\",centered:!0,style:{borderRadius:2}},r.a.createElement(Al.a,{label:\"Msg. 1\",index:0}),r.a.createElement(Al.a,{label:\"Msg. 2\",index:1}),r.a.createElement(Al.a,{label:\"Msg. 3\",index:2}),r.a.createElement(Al.a,{label:\"Msg. 4\",index:3}),r.a.createElement(Al.a,{label:\"Msg. 5\",index:4})),r.a.createElement(ja.a,{style:{paddingTop:20,border:\"none\"}},0===C&&r.a.createElement(r.a.Fragment,null,a.confirmation?r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,md:8,item:!0},r.a.createElement(r.a.Fragment,null,B(\"message1\",s,n,t))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(r.a.Fragment,null,z(\"confirmationMessage1\")))):r.a.createElement(r.a.Fragment,null,B(\"message1\",s,n,t))),1===C&&r.a.createElement(r.a.Fragment,null,a.confirmation?r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,md:8,item:!0},r.a.createElement(r.a.Fragment,null,B(\"message2\",s,n,t))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(r.a.Fragment,null,z(\"confirmationMessage2\")))):r.a.createElement(r.a.Fragment,null,B(\"message2\",s,n,t))),2===C&&r.a.createElement(r.a.Fragment,null,a.confirmation?r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,md:8,item:!0},r.a.createElement(r.a.Fragment,null,B(\"message3\",s,n,t))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(r.a.Fragment,null,z(\"confirmationMessage3\")))):r.a.createElement(r.a.Fragment,null,B(\"message3\",s,n,t))),3===C&&r.a.createElement(r.a.Fragment,null,a.confirmation?r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,md:8,item:!0},r.a.createElement(r.a.Fragment,null,B(\"message4\",s,n,t))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(r.a.Fragment,null,z(\"confirmationMessage4\")))):r.a.createElement(r.a.Fragment,null,B(\"message4\",s,n,t))),4===C&&r.a.createElement(r.a.Fragment,null,a.confirmation?r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,md:8,item:!0},r.a.createElement(r.a.Fragment,null,B(\"message5\",s,n,t))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(r.a.Fragment,null,z(\"confirmationMessage5\")))):r.a.createElement(r.a.Fragment,null,B(\"message5\",s,n,t))))),(b.mediaPath||S)&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fa.a,{startIcon:r.a.createElement(co.a,null)},null!=S?S.name:b.mediaName),T&&r.a.createElement(W.a,{onClick:()=>k(!0),color:\"secondary\"},r.a.createElement(zt.a,null))))),r.a.createElement(tt.a,null,\"CANCELADA\"===b.status&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>(async()=>{try{await Qe.post(`/campaigns/${b.id}/restart`),P.b.success(Fe.a.t(\"campaigns.toasts.restart\")),f(e=>({...e,status:\"EM_ANDAMENTO\"})),i()}catch(e){P.b.error(e.message)}})(),variant:\"outlined\"},Fe.a.t(\"campaigns.dialog.buttons.restart\")),\"EM_ANDAMENTO\"===b.status&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>(async()=>{try{await Qe.post(`/campaigns/${b.id}/cancel`),P.b.success(Fe.a.t(\"campaigns.toasts.cancel\")),f(e=>({...e,status:\"CANCELADA\"})),i()}catch(e){P.b.error(e.message)}})(),variant:\"outlined\"},Fe.a.t(\"campaigns.dialog.buttons.cancel\")),!S&&!b.mediaPath&&T&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>{j.current.click(),q(!0),D(!1)},disabled:o||R,variant:\"outlined\"},Fe.a.t(\"campaigns.dialog.buttons.attach\")),r.a.createElement(Fa.a,{onClick:F,color:\"secondary\",disabled:o,variant:\"outlined\"},Fe.a.t(\"campaigns.dialog.buttons.close\")),(T||\"CANCELADA\"===b.status)&&r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:o,variant:\"contained\",className:c.btnWrapper},l?\"\"+Fe.a.t(\"campaigns.dialog.buttons.edit\"):\"\"+Fe.a.t(\"campaigns.dialog.buttons.add\"),o&&r.a.createElement(Ba.a,{size:24,className:c.buttonProgress}))))})))};const sm=(e,a)=>{if(\"LOAD_CAMPAIGNS\"===a.type){const t=a.payload,n=[];return Object(Ye.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_CAMPAIGNS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_CAMPAIGN\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},im=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var cm=()=>{const e=im(),a=Object(M.useHistory)(),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),[h,y]=Object(n.useState)(\"\"),[x,C]=Object(n.useReducer)(sm,[]),{datetimeToClient:A}=ir(),S=Object(n.useContext)(v);Object(n.useEffect)(()=>{C({type:\"RESET\"}),s(1)},[h]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{O()},500);return()=>clearTimeout(e)},[h,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=S.getSocket(e);return a.on(`company-${e}-campaign`,e=>{\"update\"!==e.action&&\"create\"!==e.action||C({type:\"UPDATE_CAMPAIGNS\",payload:e.record}),\"delete\"===e.action&&C({type:\"DELETE_CAMPAIGN\",payload:+e.id})}),()=>{a.disconnect()}},[S]);const O=async()=>{try{const{data:e}=await Qe.get(\"/campaigns/\",{params:{searchParam:h,pageNumber:o}});C({type:\"LOAD_CAMPAIGNS\",payload:e.records}),c(e.hasMore),l(!1)}catch(e){Xe(e)}};return r.a.createElement(Ms,null,r.a.createElement(ft,{title:u&&`${Fe.a.t(\"campaigns.confirmationModal.deleteTitle\")} ${u.name}?`,open:b,onClose:f,onConfirm:()=>(async e=>{try{await Qe.delete(\"/campaigns/\"+e),P.b.success(Fe.a.t(\"campaigns.toasts.deleted\"))}catch(a){Xe(a)}p(null),y(\"\"),s(1)})(u.id)},Fe.a.t(\"campaigns.confirmationModal.deleteMessage\")),r.a.createElement(om,{resetPagination:()=>{s(1),O()},open:g,onClose:()=>{m(null),E(!1)},\"aria-labelledby\":\"form-dialog-title\",campaignId:d&&d.id}),r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,sm:8,item:!0},r.a.createElement(qs,null,Fe.a.t(\"campaigns.title\"))),r.a.createElement(ht.a,{xs:12,sm:4,item:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:6,sm:6,item:!0},r.a.createElement(Dt.a,{fullWidth:!0,placeholder:Fe.a.t(\"campaigns.searchPlaceholder\"),type:\"search\",value:h,onChange:e=>{y(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}})),r.a.createElement(ht.a,{xs:6,sm:6,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",onClick:()=>{m(null),E(!0)},color:\"primary\"},Fe.a.t(\"campaigns.buttons.add\"))))))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(a+100)<r&&s(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.status\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.contactList\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.whatsapp\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.scheduledAt\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.completedAt\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"campaigns.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,x.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.name),r.a.createElement(Vr.a,{align:\"center\"},(e=>{switch(e){case\"INATIVA\":return Fe.a.t(\"campaigns.report.statusValues.inactive\");case\"PROGRAMADA\":return Fe.a.t(\"campaigns.report.statusValues.scheduled\");case\"EM_ANDAMENTO\":return Fe.a.t(\"campaigns.report.statusValues.inProgress\");case\"CANCELADA\":return Fe.a.t(\"campaigns.report.statusValues.cancelled\");case\"FINALIZADA\":return Fe.a.t(\"campaigns.report.statusValues.finished\");default:return e}})(e.status)),r.a.createElement(Vr.a,{align:\"center\"},e.contactListId?e.contactList.name.length>30?e.contactList.name.substring(0,30)+\"...\":e.contactList.name:Fe.a.t(\"campaigns.placeholders.notDefined\")),r.a.createElement(Vr.a,{align:\"center\"},e.whatsappId?e.whatsapp.name:Fe.a.t(\"campaigns.placeholders.notDefinedMale\")),r.a.createElement(Vr.a,{align:\"center\"},e.scheduledAt?A(e.scheduledAt):Fe.a.t(\"campaigns.placeholders.noScheduling\")),r.a.createElement(Vr.a,{align:\"center\"},e.completedAt?A(e.completedAt):Fe.a.t(\"campaigns.placeholders.notCompleted\")),r.a.createElement(Vr.a,{align:\"center\"},\"EM_ANDAMENTO\"===e.status&&r.a.createElement(W.a,{onClick:()=>(async e=>{try{await Qe.post(`/campaigns/${e.id}/cancel`),P.b.success(Fe.a.t(\"campaigns.toasts.cancel\")),s(1),O()}catch(a){P.b.error(a.message)}})(e),title:\"Parar Campanha\",size:\"small\"},r.a.createElement(tm.a,null)),\"CANCELADA\"===e.status&&r.a.createElement(W.a,{onClick:()=>(async e=>{try{await Qe.post(`/campaigns/${e.id}/restart`),P.b.success(Fe.a.t(\"campaigns.toasts.restart\")),s(1),O()}catch(a){P.b.error(a.message)}})(e),title:\"Parar Campanha\",size:\"small\"},r.a.createElement(rm.a,null)),r.a.createElement(W.a,{onClick:()=>a.push(`/campaign/${e.id}/report`),size:\"small\"},r.a.createElement(em.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{m(e),E(!0)})(e)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:a=>{f(!0),p(e)}},r.a.createElement(zt.a,null))))),t&&r.a.createElement(Fs,{columns:8}))))))};const dm=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles},textRight:{textAlign:\"right\"},tabPanelsContainer:{padding:e.spacing(2)}})),mm={messageInterval:20,longerIntervalAfter:20,greaterInterval:60,variables:[]};var um=()=>{const e=dm(),[a,t]=Object(n.useState)(mm),[l,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)({key:\"\",value:\"\"});Object(n.useEffect)(()=>{Qe.get(\"/campaign-settings\").then(e=>{let{data:a}=e;const n=[];Array.isArray(a)&&a.length>0&&(a.forEach(e=>{n.push([e.key,JSON.parse(e.value)])}),t(Object.fromEntries(n)))})},[]);const p=e=>{if(null!==e.target.value){const a={};a[e.target.name]=e.target.value,u(e=>({...e,...a}))}},g=e=>{const a={};a[e.target.name]=e.target.value,t(e=>({...e,...a}))};return r.a.createElement(Ms,null,r.a.createElement(ft,{title:Fe.a.t(\"campaigns.confirmationModal.deleteTitle\"),open:s,onClose:()=>i(!1),onConfirm:()=>{const e=a.variables.filter(e=>e.key!==c);t(a=>({...a,variables:e})),d(null)}},Fe.a.t(\"campaigns.confirmationModal.deleteMessage\")),r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(qs,null,Fe.a.t(\"campaignsConfig.title\"))))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\"},r.a.createElement(ja.a,{className:e.tabPanelsContainer},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(xt.a,{style:{padding:16,marginBottom:16,backgroundColor:\"#e3f2fd\",border:\"1px solid #2196f3\"}},r.a.createElement(H.a,{variant:\"body2\"},r.a.createElement(\"strong\",null,r.a.createElement(\"span\",{role:\"img\",\"aria-label\":\"idea\"},\"\\ud83d\\udca1\"),\" \\xbfPara qu\\xe9 sirve esta configuraci\\xf3n?\"),r.a.createElement(\"br\",null),\"\\u2022 \",r.a.createElement(\"strong\",null,\"Intervalos:\"),\" Controlan el tiempo entre mensajes para evitar bloqueos de WhatsApp\",r.a.createElement(\"br\",null),\"\\u2022 \",r.a.createElement(\"strong\",null,\"Variables:\"),\" Crean atajos personalizados para usar en tus mensajes de campa\\xf1a\"))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",style:{marginBottom:8}},Fe.a.t(\"campaignsConfig.intervals\")),r.a.createElement(H.a,{variant:\"body2\",color:\"textSecondary\",style:{marginBottom:16}},Fe.a.t(\"campaignsConfig.help.intervals\"))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",className:e.formControl,fullWidth:!0},r.a.createElement(An.a,{id:\"messageInterval-label\"},Fe.a.t(\"campaignsConfig.form.randomTriggerInterval\")),r.a.createElement(Zt.a,{name:\"messageInterval\",id:\"messageInterval\",labelId:\"messageInterval-label\",label:Fe.a.t(\"campaignsConfig.form.randomTriggerInterval\"),value:a.messageInterval,onChange:e=>g(e)},r.a.createElement(G.a,{value:0},Fe.a.t(\"campaignsConfig.form.noInterval\")),r.a.createElement(G.a,{value:5},\"5 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:10},\"10 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:15},\"15 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:20},\"20 \",Fe.a.t(\"campaignsConfig.form.seconds\"))))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",className:e.formControl,fullWidth:!0},r.a.createElement(An.a,{id:\"longerIntervalAfter-label\"},Fe.a.t(\"campaignsConfig.form.longerIntervalAfter\")),r.a.createElement(Zt.a,{name:\"longerIntervalAfter\",id:\"longerIntervalAfter\",labelId:\"longerIntervalAfter-label\",label:Fe.a.t(\"campaignsConfig.form.longerIntervalAfter\"),value:a.longerIntervalAfter,onChange:e=>g(e)},r.a.createElement(G.a,{value:0},Fe.a.t(\"campaignsConfig.form.notDefined\")),r.a.createElement(G.a,{value:1},\"1 \",Fe.a.t(\"campaignsConfig.form.second\")),r.a.createElement(G.a,{value:5},\"5 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:10},\"10 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:15},\"15 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:20},\"20 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:30},\"30 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:40},\"40 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:60},\"60 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:80},\"80 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:100},\"100 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:120},\"120 \",Fe.a.t(\"campaignsConfig.form.seconds\"))))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",className:e.formControl,fullWidth:!0},r.a.createElement(An.a,{id:\"greaterInterval-label\"},Fe.a.t(\"campaignsConfig.form.greaterTriggerInterval\")),r.a.createElement(Zt.a,{name:\"greaterInterval\",id:\"greaterInterval\",labelId:\"greaterInterval-label\",label:Fe.a.t(\"campaignsConfig.form.greaterTriggerInterval\"),value:a.greaterInterval,onChange:e=>g(e)},r.a.createElement(G.a,{value:0},Fe.a.t(\"campaignsConfig.form.noInterval\")),r.a.createElement(G.a,{value:1},\"1 \",Fe.a.t(\"campaignsConfig.form.second\")),r.a.createElement(G.a,{value:5},\"5 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:10},\"10 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:15},\"15 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:20},\"20 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:30},\"30 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:40},\"40 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:60},\"60 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:80},\"80 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:100},\"100 \",Fe.a.t(\"campaignsConfig.form.seconds\")),r.a.createElement(G.a,{value:120},\"120 \",Fe.a.t(\"campaignsConfig.form.seconds\"))))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(F.a,{style:{margin:\"24px 0\"}}),r.a.createElement(H.a,{component:\"h3\",variant:\"h6\",style:{marginBottom:8}},\"Variables Personalizadas\"),r.a.createElement(H.a,{variant:\"body2\",color:\"textSecondary\",style:{marginBottom:16}},Fe.a.t(\"campaignsConfig.help.variables\"))),r.a.createElement(ht.a,{xs:12,className:e.textRight,item:!0},r.a.createElement(Fa.a,{onClick:()=>o(!l),color:\"primary\",style:{marginRight:10}},Fe.a.t(\"campaignsConfig.buttons.addVariable\")),r.a.createElement(Fa.a,{onClick:async()=>{await Qe.post(\"/campaign-settings\",{settings:a}),P.b.success(Fe.a.t(\"campaignsConfig.messages.saveSuccess\"))},color:\"primary\",variant:\"contained\"},Fe.a.t(\"campaignsConfig.buttons.saveConfigurations\"))),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(xt.a,{style:{padding:16,marginBottom:16,backgroundColor:\"#e8f5e8\",border:\"1px solid #4caf50\"}},r.a.createElement(H.a,{variant:\"body2\"},r.a.createElement(\"strong\",null,r.a.createElement(\"span\",{role:\"img\",\"aria-label\":\"herramienta\"},\"\\ud83d\\udd27\"),\" Variables Personalizadas\"),r.a.createElement(\"br\",null),Fe.a.t(\"campaignsConfig.help.variables\"),r.a.createElement(\"br\",null),r.a.createElement(\"strong\",null,\"Ejemplo:\"),\" \",Fe.a.t(\"campaignsConfig.help.example\")))),r.a.createElement(ht.a,{xs:12,md:6,item:!0},r.a.createElement(Dt.a,{label:Fe.a.t(\"campaignsConfig.variables.shortcut\"),variant:\"outlined\",value:m.key,name:\"key\",onChange:p,fullWidth:!0,placeholder:\"Ej: empresa\",helperText:\"Palabra clave para usar en mensajes\"})),r.a.createElement(ht.a,{xs:12,md:6,item:!0},r.a.createElement(Dt.a,{label:Fe.a.t(\"campaignsConfig.variables.content\"),variant:\"outlined\",value:m.value,name:\"value\",onChange:p,fullWidth:!0,placeholder:\"Ej: Mi Empresa S.A.\",helperText:\"Valor que reemplazar\\xe1 el atajo\"})),r.a.createElement(ht.a,{xs:12,className:e.textRight,item:!0},r.a.createElement(Fa.a,{onClick:()=>o(!l),color:\"primary\",style:{marginRight:10}},Fe.a.t(\"campaignsConfig.buttons.close\")),r.a.createElement(Fa.a,{onClick:()=>{t(e=>{const t=a.variables.filter(e=>e.key===m.key),n=e.variables;return 0===t.length&&(n.push(Object.assign({},m)),u({key:\"\",value:\"\"})),{...e,variables:n}})},color:\"primary\",variant:\"contained\"},Fe.a.t(\"campaignsConfig.buttons.add\")))),a.variables.length>0&&r.a.createElement(ht.a,{xs:12,className:e.textRight,item:!0},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{style:{width:\"1%\"}}),r.a.createElement(Vr.a,null,Fe.a.t(\"campaignsConfig.variables.shortcut\")),r.a.createElement(Vr.a,null,Fe.a.t(\"campaignsConfig.variables.content\")))),r.a.createElement(Hr.a,null,Array.isArray(a.variables)&&a.variables.map((e,a)=>r.a.createElement(Kr.a,{key:a},r.a.createElement(Vr.a,null,r.a.createElement(W.a,{size:\"small\",onClick:()=>{d(e.key),i(!0)}},r.a.createElement(zt.a,null))),r.a.createElement(Vr.a,null,\"{\"+e.key+\"}\"),r.a.createElement(Vr.a,null,e.value))))))))))};const pm=Object(D.a)(e=>({cardAvatar:{fontSize:\"55px\",color:zr.a[500],backgroundColor:\"#ffffff\",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:\"18px\",color:e.palette.text.primary},cardSubtitle:{color:zr.a[600],fontSize:\"14px\"}}));function gm(e){const{icon:a,title:t,value:n,loading:l}=e,o=pm();return l?r.a.createElement(mn.a,{variant:\"rect\",height:80}):r.a.createElement(cn.a,null,r.a.createElement(dn.a,{avatar:r.a.createElement(Ia.a,{className:o.cardAvatar},a),title:r.a.createElement(H.a,{variant:\"h6\",component:\"h2\",className:o.cardTitle},t),subheader:r.a.createElement(H.a,{variant:\"subtitle1\",component:\"p\",className:o.cardSubtitle},n)}))}var Em=t(689),bm=t.n(Em),fm=t(692),hm=t.n(fm),vm=t(693),ym=t.n(vm),xm=t(690),Cm=t.n(xm),Am=t(691),Sm=t.n(Am);const Om=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),overflowY:\"scroll\",...e.scrollbarStyles},textRight:{textAlign:\"right\"},tabPanelsContainer:{padding:e.spacing(2)}}));var wm=()=>{const e=Om(),{campaignId:a}=Object(M.useParams)(),[t,l]=Object(n.useState)({}),[o,s]=Object(n.useState)(0),[i,c]=Object(n.useState)(0),[d,m]=Object(n.useState)(0),[u,p]=Object(n.useState)(0),[g,E]=Object(n.useState)(0),[b,f]=Object(n.useState)(!1),h=Object(n.useRef)(!0),{datetimeToClient:y}=ir(),x=Object(n.useContext)(v);Object(n.useEffect)(()=>(h.current&&C(),()=>{h.current=!1}),[]),Object(n.useEffect)(()=>{if(h.current&&Object(Ye.has)(t,\"shipping\")){if(Object(Ye.has)(t,\"contactList\")){const e=Object(Ye.get)(t,\"contactList\").contacts.filter(e=>e.isWhatsappValid);s(e.length)}if(Object(Ye.has)(t,\"shipping\")){const e=Object(Ye.get)(t,\"shipping\"),a=e.filter(e=>!Object(Ye.isNull)(e.deliveredAt)),n=e.filter(e=>!Object(Ye.isNull)(e.confirmationRequestedAt)),r=e.filter(e=>!Object(Ye.isNull)(e.deliveredAt)&&!Object(Ye.isNull)(e.confirmationRequestedAt));c(a.length),m(n.length),p(r.length),c(a.length)}}},[t]),Object(n.useEffect)(()=>{E(i/o*100)},[i,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),t=x.getSocket(e);return t.on(`company-${e}-campaign`,e=>{e.record.id===+a&&(l(e.record),\"FINALIZADA\"===e.record.status&&setTimeout(()=>{C()},5e3))}),()=>{t.disconnect()}},[a,x]);const C=async()=>{f(!0);const{data:e}=await Qe.get(\"/campaigns/\"+a);l(e),f(!1)};return r.a.createElement(Ms,null,r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(qs,null,Fe.a.t(\"campaigns.report.title\"),\" \",t.name||\"Campa\\xf1a\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\"},r.a.createElement(H.a,{variant:\"h6\",component:\"h2\"},Fe.a.t(\"campaigns.report.status\"),\": \",(e=>{switch(e){case\"INATIVA\":return Fe.a.t(\"campaigns.report.statusValues.inactive\");case\"PROGRAMADA\":return Fe.a.t(\"campaigns.report.statusValues.scheduled\");case\"EM_ANDAMENTO\":return Fe.a.t(\"campaigns.report.statusValues.inProgress\");case\"CANCELADA\":return Fe.a.t(\"campaigns.report.statusValues.cancelled\");case\"FINALIZADA\":return Fe.a.t(\"campaigns.report.statusValues.finished\");default:return e}})(t.status),\" \",i,\" de \",o),r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(No.a,{variant:\"determinate\",style:{height:15,borderRadius:3,margin:\"20px 0\"},value:g})),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(bm.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.validContacts\"),value:o,loading:b})),t.confirmation&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(Cm.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.confirmationRequested\"),value:d,loading:b})),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(Sm.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.confirmations\"),value:u,loading:b}))),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(wt.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.delivered\"),value:i,loading:b})),t.whatsappId&&r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(ie.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.connection\"),value:t.whatsapp.name,loading:b})),t.contactListId&&r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(je.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.contactList\"),value:t.contactList.name,loading:b})),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(hm.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.scheduling\"),value:y(t.scheduledAt),loading:b})),r.a.createElement(ht.a,{xs:12,md:4,item:!0},r.a.createElement(gm,{icon:r.a.createElement(ym.a,{fontSize:\"inherit\"}),title:Fe.a.t(\"campaigns.report.conclusion\"),value:y(t.completedAt),loading:b})))))};const km=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Tm=Wt.b().shape({title:Wt.d().required(\"Obrigat\\xf3rio\"),text:Wt.d().required(\"Obrigat\\xf3rio\")});var Im=e=>{let{open:a,onClose:t,announcementId:l,reload:o}=e;const s=km(),i={title:\"\",text:\"\",priority:3,status:!0},[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(i),[p,g]=Object(n.useState)(null),E=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!l)return;const{data:e}=await Qe.get(\"/announcements/\"+l);u(a=>({...a,...e}))})()}catch(e){Xe(e)}},[l,a]);const b=()=>{u(i),g(null),t()};return r.a.createElement(\"div\",{className:s.root},r.a.createElement(ft,{title:Fe.a.t(\"announcements.confirmationModal.deleteTitle\"),open:c,onClose:()=>d(!1),onConfirm:async()=>{p&&(g(null),E.current.value=null),m.mediaPath&&(await Qe.delete(`/announcements/${m.id}/media-upload`),u(e=>({...e,mediaPath:null})),P.b.success(Fe.a.t(\"announcements.toasts.deleted\")),\"function\"==typeof o&&o())}},Fe.a.t(\"announcements.confirmationModal.deleteMessage\")),r.a.createElement(at.a,{open:a,onClose:b,maxWidth:\"xs\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"announcements.dialog.edit\"):\"\"+Fe.a.t(\"announcements.dialog.add\")),r.a.createElement(\"div\",{style:{display:\"none\"}},r.a.createElement(\"input\",{type:\"file\",accept:\".png,.jpg,.jpeg\",ref:E,onChange:e=>(e=>{const a=Object(Ye.head)(e.target.files);a&&g(a)})(e)})),r.a.createElement(Ft.e,{initialValues:m,enableReinitialize:!0,validationSchema:Tm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e};try{if(l){if(await Qe.put(\"/announcements/\"+l,a),null!=p){const e=new FormData;e.append(\"file\",p),await Qe.post(`/announcements/${l}/media-upload`,e)}}else{const{data:e}=await Qe.post(\"/announcements\",a);if(null!=p){const a=new FormData;a.append(\"file\",p),await Qe.post(`/announcements/${e.id}/media-upload`,a)}}P.b.success(Fe.a.t(\"announcements.toasts.success\")),\"function\"==typeof o&&o()}catch(t){Xe(t)}b()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"announcements.dialog.form.title\"),name:\"title\",error:a.title&&Boolean(t.title),helperText:a.title&&t.title,variant:\"outlined\",margin:\"dense\",fullWidth:!0})),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"announcements.dialog.form.text\"),name:\"text\",error:a.text&&Boolean(t.text),helperText:a.text&&t.text,variant:\"outlined\",margin:\"dense\",multiline:!0,rows:7,fullWidth:!0})),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",fullWidth:!0},r.a.createElement(An.a,{id:\"status-selection-label\"},Fe.a.t(\"announcements.dialog.form.status\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"announcements.dialog.form.status\"),placeholder:Fe.a.t(\"announcements.dialog.form.status\"),labelId:\"status-selection-label\",id:\"status\",name:\"status\",error:a.status&&Boolean(t.status)},r.a.createElement(G.a,{value:!0},\"Ativo\"),r.a.createElement(G.a,{value:!1},\"Inativo\")))),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Cn.a,{variant:\"outlined\",margin:\"dense\",fullWidth:!0},r.a.createElement(An.a,{id:\"priority-selection-label\"},Fe.a.t(\"announcements.dialog.form.priority\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"announcements.dialog.form.priority\"),placeholder:Fe.a.t(\"announcements.dialog.form.priority\"),labelId:\"priority-selection-label\",id:\"priority\",name:\"priority\",error:a.priority&&Boolean(t.priority)},r.a.createElement(G.a,{value:1},\"Alta\"),r.a.createElement(G.a,{value:2},\"M\\xe9dia\"),r.a.createElement(G.a,{value:3},\"Baixa\")))),(m.mediaPath||p)&&r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fa.a,{startIcon:r.a.createElement(co.a,null)},p?p.name:m.mediaName),r.a.createElement(W.a,{onClick:()=>d(!0),color:\"secondary\"},r.a.createElement(zt.a,null))))),r.a.createElement(tt.a,null,!p&&!m.mediaPath&&r.a.createElement(Fa.a,{color:\"primary\",onClick:()=>E.current.click(),disabled:n,variant:\"outlined\"},Fe.a.t(\"announcements.dialog.buttons.attach\")),r.a.createElement(Fa.a,{onClick:b,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"announcements.dialog.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:s.btnWrapper},l?\"\"+Fe.a.t(\"announcements.dialog.buttons.add\"):\"\"+Fe.a.t(\"announcements.dialog.buttons.edit\"),n&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))};const jm=(e,a)=>{if(\"LOAD_ANNOUNCEMENTS\"===a.type){const t=a.payload,n=[];return Object(Ye.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_ANNOUNCEMENTS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_ANNOUNCEMENT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Nm=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.padding,overflowY:\"scroll\",...e.scrollbarStyles}}));var Mm=()=>{const e=Nm(),a=Object(M.useHistory)(),{user:t}=Object(n.useContext)(ra),[l,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(null),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(!1),[y,x]=Object(n.useState)(\"\"),[C,A]=Object(n.useReducer)(jm,[]),S=Object(n.useContext)(v);Object(n.useEffect)(()=>{!async function(){t.super||(P.b.error(\"Esta empresa n\\xe3o possui permiss\\xe3o para acessar essa p\\xe1gina! Estamos lhe redirecionando.\"),setTimeout(()=>{a.push(\"/\")},1e3))}()},[]),Object(n.useEffect)(()=>{A({type:\"RESET\"}),i(1)},[y]),Object(n.useEffect)(()=>{o(!0);const e=setTimeout(()=>{O()},500);return()=>clearTimeout(e)},[y,s]),Object(n.useEffect)(()=>{const e=t.companyId,a=S.getSocket(e);return a.on(\"company-announcement\",e=>{\"update\"!==e.action&&\"create\"!==e.action||A({type:\"UPDATE_ANNOUNCEMENTS\",payload:e.record}),\"delete\"===e.action&&A({type:\"DELETE_ANNOUNCEMENT\",payload:+e.id})}),()=>{a.disconnect()}},[S,t.companyId]);const O=async()=>{try{const{data:e}=await Qe.get(\"/announcements/\",{params:{searchParam:y,pageNumber:s}});A({type:\"LOAD_ANNOUNCEMENTS\",payload:e.records}),d(e.hasMore),o(!1)}catch(e){Xe(e)}};return r.a.createElement(Ms,null,r.a.createElement(ft,{title:p&&`${Fe.a.t(\"announcements.confirmationModal.deleteTitle\")} ${p.name}?`,open:f,onClose:h,onConfirm:()=>(async e=>{try{e.mediaName&&await Qe.delete(`/announcements/${e.id}/media-upload`),await Qe.delete(\"/announcements/\"+e.id),P.b.success(Fe.a.t(\"announcements.toasts.deleted\"))}catch(a){Xe(a)}g(null),x(\"\"),i(1)})(p)},Fe.a.t(\"announcements.confirmationModal.deleteMessage\")),r.a.createElement(Im,{resetPagination:()=>{i(1),O()},open:E,onClose:()=>{u(null),b(!1)},\"aria-labelledby\":\"form-dialog-title\",announcementId:m&&m.id}),r.a.createElement(Rs,null,r.a.createElement(ht.a,{style:{width:\"99.6%\"},container:!0},r.a.createElement(ht.a,{xs:12,sm:8,item:!0},r.a.createElement(qs,null,Fe.a.t(\"announcements.title\"),\" (\",C.length,\")\")),r.a.createElement(ht.a,{xs:12,sm:4,item:!0},r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:6,sm:6,item:!0},r.a.createElement(Dt.a,{fullWidth:!0,placeholder:Fe.a.t(\"announcements.searchPlaceholder\"),type:\"search\",value:y,onChange:e=>{x(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}})),r.a.createElement(ht.a,{xs:6,sm:6,item:!0},r.a.createElement(Fa.a,{fullWidth:!0,variant:\"contained\",onClick:()=>{u(null),b(!0)},color:\"primary\"},Fe.a.t(\"announcements.buttons.add\"))))))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!c||l)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&i(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"announcements.table.title\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"announcements.table.priority\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"announcements.table.mediaName\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"announcements.table.status\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"announcements.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,C.map(e=>{var a,t;return r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.title),r.a.createElement(Vr.a,{align:\"center\"},1===(t=e.priority)?\"Alta\":2===t?\"M\\xe9dia\":3===t?\"Baixa\":void 0),r.a.createElement(Vr.a,{align:\"center\"},null!==(a=e.mediaName)&&void 0!==a?a:Fe.a.t(\"quickMessages.noAttachment\")),r.a.createElement(Vr.a,{align:\"center\"},e.status?Fe.a.t(\"announcements.active\"):Fe.a.t(\"announcements.inactive\")),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{u(e),b(!0)})(e)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:a=>{h(!0),g(e)}},r.a.createElement(zt.a,null))))}),l&&r.a.createElement(Fs,{columns:5}))))))};const Pm=Object(D.a)(e=>({mainContainer:{display:\"flex\",flexDirection:\"column\",position:\"relative\",flex:1,height:\"calc(100% - 58px)\",overflow:\"hidden\",borderRadius:0,backgroundColor:e.palette.boxlist},chatList:{display:\"flex\",flexDirection:\"column\",position:\"relative\",flex:1,overflowY:\"scroll\",...e.scrollbarStyles},listItem:{cursor:\"pointer\"}}));function Rm(e){let{chats:a,handleSelectChat:t,handleDeleteChat:l,handleEditChat:o,pageInfo:s,loading:i}=e;const c=Pm(),d=Object(M.useHistory)(),{user:m}=Object(n.useContext)(ra),{datetimeToClient:u}=ir(),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)({}),{id:f}=Object(M.useParams)(),h=async e=>{if(v(e)>0)try{await Qe.post(`/chats/${e.id}/read`,{userId:m.id})}catch(a){}f!==e.uuid&&(d.push(\"/chats/\"+e.uuid),t(e))},v=e=>e.users.find(e=>e.userId===m.id).unreads,y=e=>{const a=e.title,t=v(e);return r.a.createElement(r.a.Fragment,null,a,t>0&&r.a.createElement(Vn.a,{size:\"small\",style:{marginLeft:5},label:t,color:\"secondary\"}))},x=e=>\"\"!==e.lastMessage?`${u(e.updatedAt)}: ${e.lastMessage}`:\"\",C=e=>({borderLeft:e.uuid===f?\"6px solid #002d6e\":null,backgroundColor:e.uuid===f?\"theme.palette.chatlist\":null});return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft,{title:\"Excluir Conversa\",open:p,onClose:g,onConfirm:()=>{l(E)}},\"Esta a\\xe7\\xe3o n\\xe3o pode ser revertida, confirmar?\"),r.a.createElement(\"div\",{className:c.mainContainer},r.a.createElement(\"div\",{className:c.chatList},r.a.createElement(B.a,null,Array.isArray(a)&&a.length>0&&a.map((e,a)=>r.a.createElement(ee.a,{onClick:()=>h(e),key:a,className:c.listItem,style:C(e),button:!0},r.a.createElement(te.a,{primary:y(e),secondary:x(e)}),e.ownerId===m.id&&r.a.createElement(Ma.a,null,r.a.createElement(W.a,{onClick:()=>{h(e).then(()=>{o(e)})},edge:\"end\",\"aria-label\":\"delete\",size:\"small\",style:{marginRight:5}},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{onClick:()=>{b(e),g(!0)},edge:\"end\",\"aria-label\":\"delete\",size:\"small\"},r.a.createElement(Xl.a,null)))))))))}var Dm=t(714);const Lm=Object(D.a)(e=>({mainContainer:{display:\"flex\",flexDirection:\"column\",position:\"relative\",flex:1,overflow:\"hidden\",borderRadius:0,height:\"100%\",borderLeft:\"1px solid rgba(0, 0, 0, 0.12)\"},messageList:{position:\"relative\",overflowY:\"auto\",height:\"100%\",...e.scrollbarStyles,backgroundColor:e.palette.chatlist},inputArea:{position:\"relative\",height:\"auto\"},input:{padding:\"20px\"},buttonSend:{margin:e.spacing(1)},boxLeft:{padding:\"10px 10px 5px\",margin:\"10px\",position:\"relative\",backgroundColor:\"#3b82f6\",maxWidth:300,borderRadius:10,borderBottomLeftRadius:0,border:\"1px solid rgba(0, 0, 0, 0.12)\"},boxRight:{padding:\"10px 10px 5px\",margin:\"10px 10px 10px auto\",position:\"relative\",backgroundColor:\"#10b981\",textAlign:\"right\",maxWidth:300,borderRadius:10,borderBottomRightRadius:0,border:\"1px solid rgba(0, 0, 0, 0.12)\"}}));function qm(e){let{chat:a,messages:t,handleSendMessage:l,handleLoadMore:o,scrollToBottomRef:s,pageInfo:i,loading:c}=e;const d=Lm(),{user:m}=Object(n.useContext)(ra),{datetimeToClient:u}=ir(),p=Object(n.useRef)(),[g,E]=Object(n.useState)(\"\"),b=()=>{p.current&&p.current.scrollIntoView({})};Object(n.useEffect)(()=>{if((e=>{if(void 0!==e){return e.users.find(e=>e.userId===m.id).unreads>0}return 0})(a)>0)try{Qe.post(`/chats/${a.id}/read`,{userId:m.id})}catch(e){}s.current=b},[]);return r.a.createElement(xt.a,{className:d.mainContainer},r.a.createElement(\"div\",{onScroll:e=>{const{scrollTop:a}=e.currentTarget;i.hasMore&&!c&&a<600&&o()},className:d.messageList},Array.isArray(t)&&t.map((e,a)=>e.senderId===m.id?r.a.createElement(ja.a,{key:a,className:d.boxRight},r.a.createElement(H.a,{variant:\"subtitle2\"},e.sender.name),e.message,r.a.createElement(H.a,{variant:\"caption\",display:\"block\"},u(e.createdAt))):r.a.createElement(ja.a,{key:a,className:d.boxLeft},r.a.createElement(H.a,{variant:\"subtitle2\"},e.sender.name),e.message,r.a.createElement(H.a,{variant:\"caption\",display:\"block\"},u(e.createdAt)))),r.a.createElement(\"div\",{ref:p})),r.a.createElement(\"div\",{className:d.inputArea},r.a.createElement(Cn.a,{variant:\"outlined\",fullWidth:!0},r.a.createElement(Dm.a,{multiline:!0,value:g,onKeyUp:e=>{\"Enter\"===e.key&&\"\"!==g.trim()&&(l(g),E(\"\"))},onChange:e=>E(e.target.value),className:d.input,endAdornment:r.a.createElement(zn.a,{position:\"end\"},r.a.createElement(W.a,{onClick:()=>{\"\"!==g.trim()&&(l(g),E(\"\"))},className:d.buttonSend},r.a.createElement(go.a,null)))}))))}const Wm=Object(D.a)(e=>({mainContainer:{display:\"flex\",flexDirection:\"column\",position:\"relative\",flex:1,padding:e.spacing(2),height:\"calc(100% - 48px)\",overflowY:\"hidden\",border:\"1px solid rgba(0, 0, 0, 0.12)\"},gridContainer:{flex:1,height:\"100%\",border:\"1px solid rgba(0, 0, 0, 0.12)\",backgroundColor:e.palette.dark},gridItem:{height:\"100%\"},gridItemTab:{height:\"92%\",width:\"100%\"},btnContainer:{textAlign:\"right\",padding:10}}));function Fm(e){let{open:a,chat:t,type:l,handleClose:o,handleLoadNewChat:s}=e;const[i,c]=Object(n.useState)([]),[d,m]=Object(n.useState)(\"\");Object(n.useEffect)(()=>{if(m(\"\"),c([]),\"edit\"===l){const e=t.users.map(e=>({id:e.user.id,name:e.user.name}));c(e),m(t.title)}},[t,a,l]);return r.a.createElement(at.a,{open:a,onClose:o,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},r.a.createElement(bt.a,{id:\"alert-dialog-title\"},\"Conversa\"),r.a.createElement(Et.a,null,r.a.createElement(ht.a,{spacing:2,container:!0},r.a.createElement(ht.a,{xs:12,style:{padding:18},item:!0},r.a.createElement(Dt.a,{label:\"T\\xedtulo\",placeholder:\"T\\xedtulo\",value:d,onChange:e=>m(e.target.value),variant:\"outlined\",size:\"small\",fullWidth:!0})),r.a.createElement(ht.a,{xs:12,item:!0},r.a.createElement(Fl,{onFiltered:e=>c(e),initialUsers:i})))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:o,color:\"primary\"},\"Fechar\"),r.a.createElement(Fa.a,{onClick:async()=>{try{if(!d)return void alert(\"Por favor, preencha o t\\xedtulo da conversa.\");if(!i||0===i.length)return void alert(\"Por favor, selecione pelo menos um usu\\xe1rio.\");if(\"edit\"===l)await Qe.put(\"/chats/\"+t.id,{users:i,title:d});else{const{data:e}=await Qe.post(\"/chats\",{users:i,title:d});s(e)}o()}catch(e){}},color:\"primary\",variant:\"contained\"},\"Salvar\")))}var Bm=Object(vl.a)()((function(e){const a=Wm(),{user:t}=Object(n.useContext)(ra),l=Object(M.useHistory)(),[o,s]=Object(n.useState)(!1),[i,c]=Object(n.useState)(\"new\"),[d,m]=Object(n.useState)({}),[u,p]=Object(n.useState)([]),[g,E]=Object(n.useState)({hasMore:!1}),[b,f]=Object(n.useState)([]),[h,y]=Object(n.useState)({hasMore:!1}),[x,C]=Object(n.useState)(1),[A,S]=Object(n.useState)(!1),[O,w]=Object(n.useState)(0),k=Object(n.useRef)(!0),T=Object(n.useRef)(),{id:I}=Object(M.useParams)(),j=Object(n.useContext)(v);Object(n.useEffect)(()=>()=>{k.current=!1},[]),Object(n.useEffect)(()=>{k.current&&q().then(e=>{const{records:a}=e;if(a.length>0&&(p(a),E(e),I&&a.length)){const e=a.find(e=>e.uuid===I);N(e)}})},[]),Object(n.useEffect)(()=>{Object(Ye.isObject)(d)&&Object(Ye.has)(d,\"id\")&&D(d.id).then(()=>{\"function\"===typeof T.current&&setTimeout(()=>{T.current()},300)})},[d]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=j.getSocket(e);return a.on(`company-${e}-chat-user-${t.id}`,e=>{if(\"create\"===e.action&&p(a=>[e.record,...a]),\"update\"===e.action){const a=u.map(a=>a.id===e.record.id?(m(e.record),{...e.record}):a);p(a)}}),a.on(`company-${e}-chat`,e=>{if(\"delete\"===e.action){const a=u.filter(a=>a.id!==+e.id);p(a),f([]),C(1),y({hasMore:!1}),m({}),l.push(\"/chats\")}}),Object(Ye.isObject)(d)&&Object(Ye.has)(d,\"id\")&&a.on(`company-${e}-chat-${d.id}`,e=>{if(\"new-message\"===e.action){f(a=>[...a,e.newMessage]);const a=u.map(a=>a.id===e.newMessage.chatId?{...e.chat}:a);p(a),T.current()}if(\"update\"===e.action){const a=u.map(a=>a.id===e.chat.id?{...e.chat}:a);p(a),T.current()}}),()=>{a.disconnect()}},[d,j]);const N=e=>{try{f([]),C(1),m(e),w(1)}catch(a){}},P=async e=>{S(!0);try{await Qe.post(`/chats/${d.id}/messages`,{message:e})}catch(a){}S(!1)},R=async e=>{try{await Qe.delete(\"/chats/\"+e.id)}catch(a){}},D=async e=>{S(!0);try{const{data:a}=await Qe.get(`/chats/${e}/messages?pageNumber=${x}`);C(e=>e+1),y(a),f(e=>[...a.records,...e])}catch(a){}S(!1)},L=async()=>{A||D(d.id)},q=async()=>{try{const{data:e}=await Qe.get(\"/chats\");return e}catch(e){console.log(e)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fm,{type:i,open:o,chat:d,handleLoadNewChat:e=>{f([]),C(1),m(e),w(1),l.push(\"/chats/\"+e.uuid)},handleClose:()=>s(!1)}),r.a.createElement(xt.a,{className:a.mainContainer},Object(vl.b)(\"md\",e.width)?r.a.createElement(ht.a,{className:a.gridContainer,container:!0},r.a.createElement(ht.a,{className:a.gridItem,md:3,item:!0},r.a.createElement(\"div\",{className:a.btnContainer},r.a.createElement(Fa.a,{onClick:()=>{c(\"new\"),s(!0)},color:\"primary\",variant:\"contained\"},Fe.a.t(\"chat.buttons.new\"))),r.a.createElement(Rm,{chats:u,pageInfo:g,loading:A,handleSelectChat:e=>N(e),handleDeleteChat:e=>R(e),handleEditChat:()=>{c(\"edit\"),s(!0)}})),r.a.createElement(ht.a,{className:a.gridItem,md:9,item:!0},Object(Ye.isObject)(d)&&Object(Ye.has)(d,\"id\")&&r.a.createElement(qm,{chat:d,scrollToBottomRef:T,pageInfo:h,messages:b,loading:A,handleSendMessage:P,handleLoadMore:L}))):r.a.createElement(ht.a,{className:a.gridContainer,container:!0},r.a.createElement(ht.a,{md:12,item:!0},r.a.createElement(Cl.a,{value:O,indicatorColor:\"primary\",textColor:\"primary\",onChange:(e,a)=>w(a),\"aria-label\":\"disabled tabs example\"},r.a.createElement(Al.a,{label:\"Chats\"}),r.a.createElement(Al.a,{label:\"Mensagens\"}))),0===O&&r.a.createElement(ht.a,{className:a.gridItemTab,md:12,item:!0},r.a.createElement(\"div\",{className:a.btnContainer},r.a.createElement(Fa.a,{onClick:()=>s(!0),color:\"primary\",variant:\"contained\"},Fe.a.t(\"chat.buttons.new\"))),r.a.createElement(Rm,{chats:u,pageInfo:g,loading:A,handleSelectChat:e=>N(e),handleDeleteChat:e=>R(e)})),1===O&&r.a.createElement(ht.a,{className:a.gridItemTab,md:12,item:!0},Object(Ye.isObject)(d)&&Object(Ye.has)(d,\"id\")&&r.a.createElement(qm,{scrollToBottomRef:T,pageInfo:h,messages:b,loading:A,handleSendMessage:P,handleLoadMore:L})))))}));const zm=Object(D.a)({root:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",margin:\"2rem\"},inputContainer:{display:\"flex\",width:\"100%\",marginBottom:\"1rem\"},input:{flexGrow:1,marginRight:\"1rem\"},listContainer:{width:\"100%\",height:\"100%\",marginTop:\"1rem\",backgroundColor:\"#f5f5f5\",borderRadius:\"5px\"},list:{marginBottom:\"5px\"}});var Um=()=>{const e=zm(),[a,t]=Object(n.useState)(\"\"),[l,o]=Object(n.useState)([]),[s,i]=Object(n.useState)(-1);Object(n.useEffect)(()=>{const e=localStorage.getItem(\"tasks\");e&&o(JSON.parse(e))},[]),Object(n.useEffect)(()=>{localStorage.setItem(\"tasks\",JSON.stringify(l))},[l]);return r.a.createElement(\"div\",{className:e.root},r.a.createElement(\"div\",{className:e.inputContainer},r.a.createElement(Dt.a,{className:e.input,label:\"Nueva tarea\",value:a,onChange:e=>{t(e.target.value)},variant:\"outlined\"}),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{if(!a.trim())return;const e=new Date;if(s>=0){const n=[...l];n[s]={text:a,updatedAt:e,createdAt:n[s].createdAt},o(n),t(\"\"),i(-1)}else o([...l,{text:a,createdAt:e,updatedAt:e}]),t(\"\")}},s>=0?\"Guardar\":\"Agregar\")),r.a.createElement(\"div\",{className:e.listContainer},r.a.createElement(B.a,null,l.map((a,n)=>r.a.createElement(ee.a,{key:n,className:e.list},r.a.createElement(te.a,{primary:a.text,secondary:a.updatedAt.toLocaleString()}),r.a.createElement(Ma.a,null,r.a.createElement(W.a,{onClick:()=>(e=>{t(l[e].text),i(e)})(n)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{onClick:()=>(e=>{const a=[...l];a.splice(e,1),o(a)})(n)},r.a.createElement(Xl.a,null))))))))};const Hm=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}})),Vm=e=>{const a=new Date,t=new Date(e),n=Math.abs(a.getTime()-t.getTime());return Math.ceil(n/864e5)};var Gm=()=>{var e,a;const t=Hm(),{user:l}=Object(n.useContext)(ra),[o]=Object(n.useState)(!1),[,s]=Object(n.useState)(1),[i,c]=Object(n.useState)(null),[d,m]=Object(n.useState)(!1),[u]=Object(n.useState)(!1);return r.a.createElement(Ms,{className:t.mainContainer},r.a.createElement(Cc,{open:d,onClose:()=>{c(null),m(!1)},\"aria-labelledby\":\"form-dialog-title\",contactId:i}),r.a.createElement(Rs,null,r.a.createElement(qs,null,\"Assinatura\")),r.a.createElement(ht.a,{item:!0,xs:12,sm:4},r.a.createElement(xt.a,{className:t.mainPaper,variant:\"outlined\",onScroll:e=>{if(!u||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&s(e=>e+1)}},r.a.createElement(\"div\",null,r.a.createElement(Dt.a,{id:\"outlined-full-width\",label:\"Per\\xedodo de teste\",defaultValue:`Seu per\\xedodo de teste termina em ${Vm(null===l||void 0===l||null===(e=l.company)||void 0===e?void 0:e.trialExpiration)} dias!`,fullWidth:!0,margin:\"normal\",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:\"outlined\"})),r.a.createElement(\"div\",null,r.a.createElement(Dt.a,{id:\"outlined-full-width\",label:\"Email de cobran\\xe7a\",defaultValue:null===l||void 0===l||null===(a=l.company)||void 0===a?void 0:a.email,fullWidth:!0,margin:\"normal\",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:\"outlined\"})),r.a.createElement(\"div\",null,r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{c(null),m(!0)},fullWidth:!0},\"Assine Agora!\")))))};const _m=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\",gap:4},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:2e3},colorAdorment:{width:20,height:20}})),Km=Wt.b().shape({name:Wt.d().min(3,\"nome muito curto\").required(\"Obrigat\\xf3rio\"),message:Wt.d().required(\"Obrigat\\xf3rio\")});var Qm=e=>{let{open:a,onClose:t,fileListId:l,reload:o}=e;const s=_m(),{user:i}=Object(n.useContext)(ra),[c,d]=Object(n.useState)([]),m={name:\"\",message:\"\",options:[{name:\"\",path:\"\",mediaType:\"\"}]},[u,p]=Object(n.useState)(m);Object(n.useEffect)(()=>{try{(async()=>{if(!l)return;const{data:e}=await Qe.get(\"/files/\"+l);p(e)})()}catch(e){Xe(e)}},[l,a]);const g=()=>{p(m),t()};return r.a.createElement(\"div\",{className:s.root},r.a.createElement(at.a,{open:a,onClose:g,maxWidth:\"md\",fullWidth:!0,scroll:\"paper\"},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"fileModal.title.edit\"):\"\"+Fe.a.t(\"fileModal.title.add\")),r.a.createElement(Ft.e,{initialValues:u,enableReinitialize:!0,validationSchema:Km,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=async(e,a,t)=>{const n=new FormData;n.append(\"fileId\",t),n.append(\"typeArch\",\"fileList\"),a.forEach((a,t)=>{a.file&&(n.append(\"files\",a.file),n.append(\"mediaType\",a.file.type),n.append(\"name\",e[t].name),n.append(\"id\",e[t].id))});try{const{data:e}=await Qe.post(\"/files/uploadList/\"+t,n);return e}catch(r){Xe(r)}return null},t={...e,userId:i.id};try{if(l){const{data:n}=await Qe.put(\"/files/\"+l,t);n.options.length>0&&a(n.options,e.options,l)}else{const{data:n}=await Qe.post(\"/files\",t);n.options.length>0&&a(n.options,e.options,n.id)}P.b.success(Fe.a.t(\"fileModal.success\")),\"function\"==typeof o&&o()}catch(n){Xe(n)}g()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o,setFieldValue:i}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"fileModal.form.name\"),name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0})),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"fileModal.form.message\"),type:\"message\",multiline:!0,minRows:5,fullWidth:!0,name:\"message\",error:a.message&&Boolean(t.message),helperText:a.message&&t.message,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(H.a,{style:{marginBottom:8,marginTop:12},variant:\"subtitle1\"},Fe.a.t(\"fileModal.form.fileOptions\")),r.a.createElement(Ft.c,{name:\"options\"},e=>{let{push:a,remove:t}=e;return r.a.createElement(r.a.Fragment,null,o.options&&o.options.length>0&&o.options.map((e,a)=>r.a.createElement(\"div\",{className:s.extraAttr,key:a+\"-info\"},r.a.createElement(ht.a,{container:!0,spacing:0},r.a.createElement(ht.a,{xs:6,md:10,item:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"fileModal.form.extraName\"),name:`options[${a}].name`,variant:\"outlined\",margin:\"dense\",multiline:!0,fullWidth:!0,minRows:2,className:s.textField})),r.a.createElement(ht.a,{xs:2,md:2,item:!0,style:{display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\"}},r.a.createElement(\"input\",{type:\"file\",onChange:e=>{const t=e.target.files[0],n=[...o.options];n[a].file=t,i(\"options\",n);const r=[...c];r[a]=t?t.name:\"\",d(r)},style:{display:\"none\"},name:`options[${a}].file`,id:\"file-upload-\"+a}),r.a.createElement(\"label\",{htmlFor:\"file-upload-\"+a},r.a.createElement(W.a,{component:\"span\"},r.a.createElement(co.a,null))),r.a.createElement(W.a,{size:\"small\",onClick:()=>t(a)},r.a.createElement(zt.a,null))),r.a.createElement(ht.a,{xs:12,md:12,item:!0},e.path?e.path:c[a])))),r.a.createElement(\"div\",{className:s.extraAttr},r.a.createElement(Fa.a,{style:{flex:1,marginTop:8},variant:\"outlined\",color:\"primary\",onClick:()=>{a({name:\"\",path:\"\"}),d([...c,\"\"])}},\"+ \"+Fe.a.t(\"fileModal.buttons.fileOptions\"))))})),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:g,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"fileModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:s.btnWrapper},l?\"\"+Fe.a.t(\"fileModal.buttons.okEdit\"):\"\"+Fe.a.t(\"fileModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))};const Ym=(e,a)=>{if(\"LOAD_FILES\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_FILES\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_TAG\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},Xm=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var Jm=()=>{const e=Xm(),{user:a}=Object(n.useContext)(ra),[t,l]=Object(n.useState)(!1),[o,s]=Object(n.useState)(1),[i,c]=Object(n.useState)(!1),[d,m]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[b,f]=Object(n.useState)(\"\"),[h,y]=Object(n.useReducer)(Ym,[]),[x,C]=Object(n.useState)(!1),A=Object(n.useCallback)(async()=>{try{const{data:e}=await Qe.get(\"/files/\",{params:{searchParam:b,pageNumber:o}});y({type:\"LOAD_FILES\",payload:e.files}),c(e.hasMore),l(!1)}catch(e){Xe(e)}},[b,o]),S=Object(n.useContext)(v);Object(n.useEffect)(()=>{y({type:\"RESET\"}),s(1)},[b]),Object(n.useEffect)(()=>{l(!0);const e=setTimeout(()=>{A()},500);return()=>clearTimeout(e)},[b,o,A]),Object(n.useEffect)(()=>{const e=S.getSocket(a.companyId);return e.on(`company-${a.companyId}-file`,e=>{\"update\"!==e.action&&\"create\"!==e.action||y({type:\"UPDATE_FILES\",payload:e.files}),\"delete\"===e.action&&y({type:\"DELETE_USER\",payload:+e.fileId})}),()=>{e.disconnect()}},[S,a]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:u&&\"\"+Fe.a.t(\"files.confirmationModal.deleteTitle\"),open:g,onClose:E,onConfirm:()=>(async e=>{try{await Qe.delete(\"/files/\"+e),P.b.success(Fe.a.t(\"files.toasts.deleted\"))}catch(a){Xe(a)}p(null),f(\"\"),s(1),y({type:\"RESET\"}),s(1),await A()})(u.id)},Fe.a.t(\"files.confirmationModal.deleteMessage\")),r.a.createElement(Qm,{open:x,onClose:()=>{m(null),C(!1)},reload:A,\"aria-labelledby\":\"form-dialog-title\",fileListId:d&&d.id}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"files.title\"),\" (\",h.length,\")\"),r.a.createElement(Ls,null,r.a.createElement(Dt.a,{placeholder:Fe.a.t(\"contacts.searchPlaceholder\"),type:\"search\",value:b,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{style:{color:\"gray\"}}))}}),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{m(null),C(!0)}},Fe.a.t(\"files.buttons.add\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(a+100)<r&&s(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"files.table.name\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"files.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,h.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.name),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{m(e),C(!0)})(e)},r.a.createElement(kc.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:a=>{E(!0),p(e)}},r.a.createElement(zt.a,null))))),t&&r.a.createElement(Fs,{columns:4}))))))};const Zm=Object(D.a)(e=>({formControl:{margin:e.spacing(1),minWidth:120}}));var $m=()=>{const e=Zm(),[a,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/queue\");t(e)}catch(e){Xe(\"QUEUESELETSINGLE >>> \"+e)}})()},[]),r.a.createElement(\"div\",{style:{marginTop:6}},r.a.createElement(Cn.a,{variant:\"outlined\",className:e.FormControl,margin:\"dense\",fullWidth:!0},r.a.createElement(\"div\",null,r.a.createElement(H.a,null,Fe.a.t(\"queueSelect.inputLabel\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"queueSelect.inputLabel\"),name:\"queueId\",labelId:\"queue-selection-label\",id:\"queue-selection\",fullWidth:!0},r.a.createElement(G.a,{value:\"\"},r.a.createElement(\"em\",null,\"Seleccione una cola\")),a.map(e=>r.a.createElement(G.a,{key:e.id,value:e.id},e.name))))))};const eu=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\"},multFieldLine:{display:\"flex\",\"& > *:not(:last-child)\":{marginRight:e.spacing(1)}},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),au={name:\"\",prompt:\"\",voice:\"texto\",voiceKey:\"\",voiceRegion:\"\",maxTokens:100,temperature:1,apiKey:\"\",queueId:\"\",maxMessages:10,provider:\"openrouter-deepseek\"};var tu=e=>{let{open:a,onClose:t,promptId:l,onSave:o}=e;const s=eu(),[i,c]=Object(n.useState)(\"texto\"),[d,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)(\"openrouter-deepseek\"),g=()=>{m(!d)},E=e=>{p(e.target.value)},[b,f]=Object(n.useState)(au);Object(n.useEffect)(()=>{(async()=>{if(l)try{const{data:e}=await Qe.get(\"/prompt/\"+l);f(a=>({...a,...e})),c(e.voice),p(e.provider||\"openrouter-deepseek\")}catch(e){Xe(e)}else f(au)})()},[l,a]);const h=()=>{f(au),c(\"texto\"),p(\"openrouter-deepseek\"),t()},v=e=>{c(e.target.value)};return r.a.createElement(\"div\",{className:s.root},r.a.createElement(at.a,{open:a,onClose:h,maxWidth:\"md\",scroll:\"paper\",fullWidth:!0},r.a.createElement(bt.a,{id:\"form-dialog-title\"},l?\"\"+Fe.a.t(\"promptModal.title.edit\"):\"\"+Fe.a.t(\"promptModal.title.add\")),r.a.createElement(Ft.e,{initialValues:b,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a={...e,voice:i,provider:u};if(e.queueId){try{l?await Qe.put(\"/prompt/\"+l,a):await Qe.post(\"/prompt\",a),P.b.success(Fe.a.t(\"promptModal.success\")),o&&o()}catch(t){Xe(t)}h()}else Xe(\"Informe o setor\")})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return r.a.createElement(Ft.d,{style:{width:\"100%\"}},r.a.createElement(Et.a,{dividers:!0},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.name\"),name:\"name\",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Cn.a,{fullWidth:!0,margin:\"dense\",variant:\"outlined\"},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.apikey\"),name:\"apiKey\",type:d?\"text\":\"password\",error:a.apiKey&&Boolean(t.apiKey),helperText:a.apiKey&&t.apiKey,variant:\"outlined\",margin:\"dense\",fullWidth:!0,InputProps:{endAdornment:r.a.createElement(zn.a,{position:\"end\"},r.a.createElement(W.a,{onClick:g},d?r.a.createElement(Un.a,null):r.a.createElement(Hn.a,null)))}})),r.a.createElement(Cn.a,{fullWidth:!0,margin:\"dense\",variant:\"outlined\"},r.a.createElement(An.a,null,\"Proveedor de IA\"),r.a.createElement(Zt.a,{id:\"provider-select\",labelWidth:120,name:\"provider\",value:u,onChange:E,multiple:!1},r.a.createElement(G.a,{key:\"openrouter-openai\",value:\"openrouter-openai\"},\"OpenRouter (OpenAI GPT-3.5/4)\"),r.a.createElement(G.a,{key:\"openrouter-deepseek\",value:\"openrouter-deepseek\"},\"OpenRouter (DeepSeek)\"),r.a.createElement(G.a,{key:\"openrouter-anthropic\",value:\"openrouter-anthropic\"},\"OpenRouter (Anthropic Claude)\"),r.a.createElement(G.a,{key:\"openrouter-gemini\",value:\"openrouter-gemini\"},\"OpenRouter (Google Gemini Pro)\"),r.a.createElement(G.a,{key:\"openrouter-qwen\",value:\"openrouter-qwen\"},\"OpenRouter (Qwen)\"))),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.prompt\"),name:\"prompt\",error:a.prompt&&Boolean(t.prompt),helperText:a.prompt&&t.prompt,variant:\"outlined\",margin:\"dense\",fullWidth:!0,rows:10,multiline:!0}),r.a.createElement($m,null),r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Cn.a,{fullWidth:!0,margin:\"dense\",variant:\"outlined\"},r.a.createElement(An.a,null,Fe.a.t(\"promptModal.form.voice\")),r.a.createElement(Zt.a,{id:\"type-select\",labelWidth:60,name:\"voice\",value:i,onChange:v,multiple:!1},r.a.createElement(G.a,{key:\"texto\",value:\"texto\"},\"Texto\"),r.a.createElement(G.a,{key:\"pt-BR-FranciscaNeural\",value:\"pt-BR-FranciscaNeural\"},\"Francisa\"),r.a.createElement(G.a,{key:\"pt-BR-AntonioNeural\",value:\"pt-BR-AntonioNeural\"},\"Ant\\xf4nio\"),r.a.createElement(G.a,{key:\"pt-BR-BrendaNeural\",value:\"pt-BR-BrendaNeural\"},\"Brenda\"),r.a.createElement(G.a,{key:\"pt-BR-DonatoNeural\",value:\"pt-BR-DonatoNeural\"},\"Donato\"),r.a.createElement(G.a,{key:\"pt-BR-ElzaNeural\",value:\"pt-BR-ElzaNeural\"},\"Elza\"),r.a.createElement(G.a,{key:\"pt-BR-FabioNeural\",value:\"pt-BR-FabioNeural\"},\"F\\xe1bio\"),r.a.createElement(G.a,{key:\"pt-BR-GiovannaNeural\",value:\"pt-BR-GiovannaNeural\"},\"Giovanna\"),r.a.createElement(G.a,{key:\"pt-BR-HumbertoNeural\",value:\"pt-BR-HumbertoNeural\"},\"Humberto\"),r.a.createElement(G.a,{key:\"pt-BR-JulioNeural\",value:\"pt-BR-JulioNeural\"},\"Julio\"),r.a.createElement(G.a,{key:\"pt-BR-LeilaNeural\",value:\"pt-BR-LeilaNeural\"},\"Leila\"),r.a.createElement(G.a,{key:\"pt-BR-LeticiaNeural\",value:\"pt-BR-LeticiaNeural\"},\"Let\\xedcia\"),r.a.createElement(G.a,{key:\"pt-BR-ManuelaNeural\",value:\"pt-BR-ManuelaNeural\"},\"Manuela\"),r.a.createElement(G.a,{key:\"pt-BR-NicolauNeural\",value:\"pt-BR-NicolauNeural\"},\"Nicolau\"),r.a.createElement(G.a,{key:\"pt-BR-ValerioNeural\",value:\"pt-BR-ValerioNeural\"},\"Val\\xe9rio\"),r.a.createElement(G.a,{key:\"pt-BR-YaraNeural\",value:\"pt-BR-YaraNeural\"},\"Yara\"))),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.voiceKey\"),name:\"voiceKey\",error:a.voiceKey&&Boolean(t.voiceKey),helperText:a.voiceKey&&t.voiceKey,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.voiceRegion\"),name:\"voiceRegion\",error:a.voiceRegion&&Boolean(t.voiceRegion),helperText:a.voiceRegion&&t.voiceRegion,variant:\"outlined\",margin:\"dense\",fullWidth:!0})),r.a.createElement(\"div\",{className:s.multFieldLine},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.temperature\"),name:\"temperature\",error:a.temperature&&Boolean(t.temperature),helperText:a.temperature&&t.temperature,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.max_tokens\"),name:\"maxTokens\",error:a.maxTokens&&Boolean(t.maxTokens),helperText:a.maxTokens&&t.maxTokens,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"promptModal.form.max_messages\"),name:\"maxMessages\",error:a.maxMessages&&Boolean(t.maxMessages),helperText:a.maxMessages&&t.maxMessages,variant:\"outlined\",margin:\"dense\",fullWidth:!0}))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:h,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"promptModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:s.btnWrapper},l?\"\"+Fe.a.t(\"promptModal.buttons.okEdit\"):\"\"+Fe.a.t(\"promptModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:s.buttonProgress}))))})))},nu=t(448);const ru=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles},customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},redBox:{backgroundColor:\"#ffcccc\",padding:e.spacing(2),marginBottom:e.spacing(2)}})),lu=(e,a)=>{if(\"LOAD_PROMPTS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_PROMPTS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_PROMPT\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]};var ou=()=>{const e=ru(),[a,t]=Object(n.useReducer)(lu,[]),[l,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(!1),{user:p}=Object(n.useContext)(ra),{getPlanCompany:g}=ba(),E=Object(nu.useHistory)(),b=p.companyId,f=Object(n.useContext)(v);Object(n.useEffect)(()=>{!async function(){if(b){(await g(void 0,b)).plan.useOpenAi||(P.b.error(Fe.a.t(\"prompts.errors.noPermission\")),setTimeout(()=>{E.push(\"/\")},1e3))}}()},[]),Object(n.useEffect)(()=>{(async()=>{o(!0);try{const{data:e}=await Qe.get(\"/prompt\");t({type:\"LOAD_PROMPTS\",payload:e.prompts}),o(!1)}catch(e){Xe(e),o(!1)}})()},[]),Object(n.useEffect)(()=>{const e=f.getSocket(b);return e.on(`company-${b}-prompt`,e=>{\"update\"!==e.action&&\"create\"!==e.action||t({type:\"UPDATE_PROMPTS\",payload:e.prompt}),\"delete\"===e.action&&t({type:\"DELETE_PROMPT\",payload:e.promptId})}),()=>{e.disconnect()}},[b,f]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:c&&`${Fe.a.t(\"prompts.confirmationModal.deleteTitle\")} ${c.name}?`,open:m,onClose:()=>{u(!1),d(null)},onConfirm:()=>(async e=>{try{const{data:a}=await Qe.delete(\"/prompt/\"+e);P.b.info(Fe.a.t(a.message))}catch(a){Xe(a)}d(null)})(c.id)},Fe.a.t(\"prompts.confirmationModal.deleteMessage\")),r.a.createElement(tu,{open:s,onClose:()=>{i(!1),d(null)},promptId:null===c||void 0===c?void 0:c.id,onSave:async()=>{o(!0);try{const{data:e}=await Qe.get(\"/prompt\");t({type:\"LOAD_PROMPTS\",payload:e.prompts}),o(!1)}catch(e){Xe(e),o(!1)}}}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"prompts.title\")),r.a.createElement(Ls,null,r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{i(!0),d(null)}},Fe.a.t(\"prompts.buttons.add\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\"},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"prompts.table.name\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"prompts.table.queue\")),r.a.createElement(Vr.a,{align:\"left\"},Fe.a.t(\"prompts.table.max_tokens\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"prompts.table.actions\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,a.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"left\"},e.name),r.a.createElement(Vr.a,{align:\"left\"},e.queue.name),r.a.createElement(Vr.a,{align:\"left\"},e.maxTokens),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{d(e),i(!0)})(e)},r.a.createElement(Is.a,null)),r.a.createElement(W.a,{size:\"small\",onClick:()=>{d(e),u(!0)}},r.a.createElement(js.a,null))))),l&&r.a.createElement(Fs,{columns:4}))))))},su=t(694),iu=t.n(su),cu=t(695),du=t.n(cu),mu=t(696),uu=t.n(mu),pu=t(697),gu=t.n(pu);const Eu=Object(D.a)(e=>({root:{display:\"flex\",flexWrap:\"wrap\",gap:4},textField:{marginRight:e.spacing(1),flex:1},btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},btnLeft:{display:\"flex\",marginRight:\"auto\",marginLeft:12},colorAdorment:{width:20,height:20}})),bu=Wt.b().shape({name:Wt.d().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\")});var fu=e=>{let{open:a,onClose:t,integrationId:l}=e;const o=Eu(),s={type:\"typebot\",name:\"\",projectName:\"\",jsonContent:\"\",language:\"\",urlN8N:\"\",typebotDelayMessage:1e3,typebotExpires:1,typebotKeywordFinish:\"\",typebotKeywordRestart:\"\",typebotRestartMessage:\"\",typebotSlug:\"\",typebotUnknownMessage:\"\"},[i,c]=Object(n.useState)(s);Object(n.useEffect)(()=>((async()=>{if(l)try{const{data:e}=await Qe.get(\"/queueIntegration/\"+l);c(a=>({...a,...e}))}catch(e){Xe(e)}})(),()=>{c({type:\"dialogflow\",name:\"\",projectName:\"\",jsonContent:\"\",language:\"\",urlN8N:\"\",typebotDelayMessage:1e3})}),[l,a]);const d=()=>{t(),c(s)};return r.a.createElement(\"div\",{className:o.root},r.a.createElement(at.a,{open:a,onClose:d,fullWidth:!0,maxWidth:\"md\",scroll:\"paper\"},r.a.createElement(bt.a,null,l?\"\"+Fe.a.t(\"queueIntegrationModal.title.edit\"):\"\"+Fe.a.t(\"queueIntegrationModal.title.add\")),r.a.createElement(Ft.e,{initialValues:i,enableReinitialize:!0,validationSchema:bu,onSubmit:(e,a,t)=>{setTimeout(()=>{(async e=>{try{\"n8n\"!==e.type&&\"webhook\"!==e.type&&\"typebot\"!==e.type||(e.projectName=e.name),l?(await Qe.put(\"/queueIntegration/\"+l,e),P.b.success(Fe.a.t(\"queueIntegrationModal.messages.editSuccess\"))):(await Qe.post(\"/queueIntegration\",e),P.b.success(Fe.a.t(\"queueIntegrationModal.messages.addSuccess\"))),d()}catch(a){Xe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:s}=e;return r.a.createElement(Ft.d,null,r.a.createElement(xt.a,{square:!0,className:o.mainPaper,elevation:1},r.a.createElement(Et.a,{dividers:!0},r.a.createElement(ht.a,{container:!0,spacing:1},r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Cn.a,{variant:\"outlined\",className:o.formControl,margin:\"dense\",fullWidth:!0},r.a.createElement(An.a,{id:\"type-selection-input-label\"},Fe.a.t(\"queueIntegrationModal.form.type\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"queueIntegrationModal.form.type\"),name:\"type\",labelId:\"profile-selection-label\",error:a.type&&Boolean(t.type),helpertext:a.type&&t.type,id:\"type\",required:!0},r.a.createElement(G.a,{value:\"dialogflow\"},\"DialogFlow\"),r.a.createElement(G.a,{value:\"n8n\"},\"N8N\"),r.a.createElement(G.a,{value:\"webhook\"},\"WebHooks\"),r.a.createElement(G.a,{value:\"typebot\"},\"Typebot\")))),\"dialogflow\"===s.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.name\"),autoFocus:!0,name:\"name\",fullWidth:!0,error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:\"outlined\",margin:\"dense\",className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Cn.a,{variant:\"outlined\",className:o.formControl,margin:\"dense\",fullWidth:!0},r.a.createElement(An.a,{id:\"language-selection-input-label\"},Fe.a.t(\"queueIntegrationModal.form.language\")),r.a.createElement(Ft.b,{as:Zt.a,label:Fe.a.t(\"queueIntegrationModal.form.language\"),name:\"language\",labelId:\"profile-selection-label\",fullWidth:!0,error:a.language&&Boolean(t.language),helpertext:a.language&&t.language,id:\"language-selection\",required:!0},r.a.createElement(G.a,{value:\"pt-BR\"},\"Portugues\"),r.a.createElement(G.a,{value:\"en\"},\"Ingl\\xeas\"),r.a.createElement(G.a,{value:\"es\"},\"Espa\\xf1ol\")))),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.projectName\"),name:\"projectName\",error:a.projectName&&Boolean(t.projectName),helpertext:a.projectName&&t.projectName,fullWidth:!0,variant:\"outlined\",margin:\"dense\"})),r.a.createElement(ht.a,{item:!0,xs:12,md:12,xl:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.jsonContent\"),type:\"jsonContent\",multiline:!0,maxRows:5,minRows:5,fullWidth:!0,name:\"jsonContent\",error:a.jsonContent&&Boolean(t.jsonContent),helpertext:a.jsonContent&&t.jsonContent,variant:\"outlined\",margin:\"dense\"}))),(\"n8n\"===s.type||\"webhook\"===s.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.name\"),autoFocus:!0,required:!0,name:\"name\",error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:12,xl:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.urlN8N\"),name:\"urlN8N\",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N,variant:\"outlined\",margin:\"dense\",required:!0,fullWidth:!0,className:o.textField}))),\"typebot\"===s.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.name\"),autoFocus:!0,name:\"name\",error:a.name&&Boolean(t.name),helpertext:a.name&&t.name,variant:\"outlined\",margin:\"dense\",required:!0,fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:12,xl:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.urlN8N\"),name:\"urlN8N\",error:a.urlN8N&&Boolean(t.urlN8N),helpertext:a.urlN8N&&t.urlN8N,variant:\"outlined\",margin:\"dense\",required:!0,fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotSlug\"),name:\"typebotSlug\",error:a.typebotSlug&&Boolean(t.typebotSlug),helpertext:a.typebotSlug&&t.typebotSlug,required:!0,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotExpires\"),name:\"typebotExpires\",error:a.typebotExpires&&Boolean(t.typebotExpires),helpertext:a.typebotExpires&&t.typebotExpires,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotDelayMessage\"),name:\"typebotDelayMessage\",error:a.typebotDelayMessage&&Boolean(t.typebotDelayMessage),helpertext:a.typebotDelayMessage&&t.typebotDelayMessage,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotKeywordFinish\"),name:\"typebotKeywordFinish\",error:a.typebotKeywordFinish&&Boolean(t.typebotKeywordFinish),helpertext:a.typebotKeywordFinish&&t.typebotKeywordFinish,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotKeywordRestart\"),name:\"typebotKeywordRestart\",error:a.typebotKeywordRestart&&Boolean(t.typebotKeywordRestart),helpertext:a.typebotKeywordRestart&&t.typebotKeywordRestart,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:6,xl:6},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotUnknownMessage\"),name:\"typebotUnknownMessage\",error:a.typebotUnknownMessage&&Boolean(t.typebotUnknownMessage),helpertext:a.typebotUnknownMessage&&t.typebotUnknownMessage,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})),r.a.createElement(ht.a,{item:!0,xs:12,md:12,xl:12},r.a.createElement(Ft.b,{as:Dt.a,label:Fe.a.t(\"queueIntegrationModal.form.typebotRestartMessage\"),name:\"typebotRestartMessage\",error:a.typebotRestartMessage&&Boolean(t.typebotRestartMessage),helpertext:a.typebotRestartMessage&&t.typebotRestartMessage,variant:\"outlined\",margin:\"dense\",fullWidth:!0,className:o.textField})))))),r.a.createElement(tt.a,null,\"dialogflow\"===s.type&&r.a.createElement(Fa.a,{onClick:e=>(async(e,a)=>{try{const{projectName:e,jsonContent:t,language:n}=a;await Qe.post(\"/queueIntegration/testSession\",{projectName:e,jsonContent:t,language:n}),P.b.success(Fe.a.t(\"queueIntegrationModal.messages.testSuccess\"))}catch(t){Xe(t)}})(0,s),color:\"inherit\",disabled:n,name:\"testSession\",variant:\"outlined\",className:o.btnLeft},Fe.a.t(\"queueIntegrationModal.buttons.test\")),r.a.createElement(Fa.a,{onClick:d,color:\"secondary\",disabled:n,variant:\"outlined\"},Fe.a.t(\"queueIntegrationModal.buttons.cancel\")),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:o.btnWrapper},l?\"\"+Fe.a.t(\"queueIntegrationModal.buttons.okEdit\"):\"\"+Fe.a.t(\"queueIntegrationModal.buttons.okAdd\"),n&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress}))))})))};const hu=(e,a)=>{if(\"LOAD_INTEGRATIONS\"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if(\"UPDATE_INTEGRATIONS\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if(\"DELETE_INTEGRATION\"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if(\"RESET\"===a.type)return[]},vu=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),margin:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles},avatar:{width:\"140px\",height:\"40px\",borderRadius:4}}));var yu=()=>{const e=vu(),[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)(1),[s,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(null),[m,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(\"\"),[y,x]=Object(n.useReducer)(hu,[]),{user:C}=Object(n.useContext)(ra),{getPlanCompany:A}=ba(),S=C.companyId,O=Object(nu.useHistory)(),w=Object(n.useContext)(v);Object(n.useEffect)(()=>{!async function(){if(S){(await A(void 0,S)).plan.useIntegrations||(P.b.error(\"Esta empresa n\\xe3o possui permiss\\xe3o para acessar essa p\\xe1gina! Estamos lhe redirecionando.\"),setTimeout(()=>{O.push(\"/\")},1e3))}}()},[]),Object(n.useEffect)(()=>{x({type:\"RESET\"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Qe.get(\"/queueIntegration/\",{params:{searchParam:f,pageNumber:l}});x({type:\"LOAD_INTEGRATIONS\",payload:e.queueIntegrations}),i(e.hasMore),t(!1)}catch(e){Xe(e)}})()},500);return()=>clearTimeout(e)},[f,l]),Object(n.useEffect)(()=>{const e=localStorage.getItem(\"companyId\"),a=w.getSocket(e);return a.on(`company-${e}-queueIntegration`,e=>{\"update\"!==e.action&&\"create\"!==e.action||x({type:\"UPDATE_INTEGRATIONS\",payload:e.queueIntegration}),\"delete\"===e.action&&x({type:\"DELETE_INTEGRATION\",payload:+e.integrationId})}),()=>{a.disconnect()}},[w]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:m&&`${Fe.a.t(\"queueIntegration.confirmationModal.deleteTitle\")} ${m.name}?`,open:E,onClose:b,onConfirm:()=>(async e=>{try{await Qe.delete(\"/queueIntegration/\"+e),P.b.success(Fe.a.t(\"queueIntegration.toasts.deleted\"))}catch(a){Xe(a)}u(null),h(\"\"),o(1)})(m.id)},Fe.a.t(\"queueIntegration.confirmationModal.deleteMessage\")),r.a.createElement(fu,{open:p,onClose:()=>{d(null),g(!1)},\"aria-labelledby\":\"form-dialog-title\",integrationId:c&&c.id}),r.a.createElement(Rs,null,r.a.createElement(qs,null,Fe.a.t(\"queueIntegration.title\"),\" (\",y.length,\")\"),r.a.createElement(Ls,null,r.a.createElement(Dt.a,{placeholder:Fe.a.t(\"queueIntegration.searchPlaceholder\"),type:\"search\",value:f,onChange:e=>{h(e.target.value.toLowerCase())},InputProps:{startAdornment:r.a.createElement(zn.a,{position:\"start\"},r.a.createElement(xl.a,{color:\"secondary\"}))}}),r.a.createElement(Fa.a,{variant:\"contained\",color:\"primary\",onClick:()=>{d(null),g(!0)}},Fe.a.t(\"queueIntegration.buttons.add\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\",onScroll:e=>{if(!s||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e.currentTarget;n-(t+100)<r&&o(e=>e+1)}},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{padding:\"checkbox\"}),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queueIntegration.table.id\")),r.a.createElement(Vr.a,{align:\"center\"},Fe.a.t(\"queueIntegration.table.name\")))),r.a.createElement(Hr.a,null,r.a.createElement(r.a.Fragment,null,y.map(a=>r.a.createElement(Kr.a,{key:a.id},r.a.createElement(Vr.a,null,\"dialogflow\"===a.type&&r.a.createElement(Ia.a,{src:du.a,className:e.avatar}),\"n8n\"===a.type&&r.a.createElement(Ia.a,{src:iu.a,className:e.avatar}),\"webhook\"===a.type&&r.a.createElement(Ia.a,{src:uu.a,className:e.avatar}),\"typebot\"===a.type&&r.a.createElement(Ia.a,{src:gu.a,className:e.avatar})),r.a.createElement(Vr.a,{align:\"center\"},a.id),r.a.createElement(Vr.a,{align:\"center\"},a.name),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{d(e),g(!0)})(a)},r.a.createElement(Is.a,{color:\"secondary\"})),r.a.createElement(W.a,{size:\"small\",onClick:e=>{b(!0),u(a)}},r.a.createElement(js.a,{color:\"secondary\"}))))),a&&r.a.createElement(Fs,{columns:7}))))))},xu=t(520),Cu=t.n(xu);const Au=Object(D.a)(e=>({root:{width:\"100vw\",height:\"100vh\",background:\"black\",backgroundRepeat:\"no-repeat\",backgroundSize:\"100% 100%\",backgroundPosition:\"center\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\"},paper:{backgroundColor:\"white\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",padding:\"55px 30px\",borderRadius:\"12.5px\"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:\"100%\",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},powered:{color:\"white\"}})),Su=/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;var Ou=()=>{const e=Au(),a=Object(M.useHistory)(),[t,l]=Object(n.useState)(!1),[o,i]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(\"\"),E=()=>{d(!c)},b=()=>{u(!m)},f=o,h=Wt.b().shape({email:Wt.d().email(\"Invalid email\").required(\"Required\"),newPassword:f?Wt.d().required(\"Campo obrigat\\xf3rio\").matches(Su,\"Sua senha precisa ter no m\\xednimo 8 caracteres, sendo uma letra mai\\xfascula, uma min\\xfascula e um n\\xfamero.\"):Wt.d(),confirmPassword:Wt.d().when(\"newPassword\",{is:e=>f&&e,then:Wt.d().oneOf([Wt.c(\"newPassword\"),null],\"As senhas n\\xe3o correspondem\").required(\"Campo obrigat\\xf3rio\"),otherwise:Wt.d()})});return r.a.createElement(\"div\",{className:e.root},r.a.createElement(Or.a,{component:\"main\",maxWidth:\"xs\"},r.a.createElement(s.a,null),r.a.createElement(\"div\",{className:e.paper},r.a.createElement(\"div\",null,r.a.createElement(\"img\",{style:{margin:\"0 auto\",height:\"80px\",width:\"100%\"},src:\"http://localhost:8080/public/logotipos/login.png\",alt:\"Whats\"})),r.a.createElement(H.a,{component:\"h1\",variant:\"h5\"},Fe.a.t(\"Redefinir senha\")),r.a.createElement(Ft.e,{initialValues:{email:\"\",token:\"\",newPassword:\"\",confirmPassword:\"\"},enableReinitialize:!0,validationSchema:h,onSubmit:(e,n)=>{setTimeout(()=>{o?(async e=>{const t=e.email,n=e.token,r=e.newPassword;if(r===e.confirmPassword)try{await Qe.post(`http://localhost:8080/resetpasswords/${t}/${n}/${r}`),g(\"\"),P.b.success(Fe.a.t(\"Senha redefinida com sucesso.\")),a.push(\"/login\")}catch(l){console.log(l)}})(e):(async e=>{const a=e.email;try{const e=await Qe.post(\"http://localhost:8080/forgetpassword/\"+a);console.log(\"API Response:\",e.data),404===e.data.status?P.b.error(\"Email n\\xe3o encontrado\"):P.b.success(Fe.a.t(\"Email enviado com sucesso!\"))}catch(t){console.log(\"API Error:\",t),Xe(t)}})(e),n.setSubmitting(!1),l(!t),i(!t)},400)}},a=>{let{touched:n,errors:l,isSubmitting:s}=a;return r.a.createElement(Ft.d,{className:e.form},r.a.createElement(ht.a,{container:!0,spacing:2},r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,id:\"email\",label:Fe.a.t(\"signup.form.email\"),name:\"email\",error:n.email&&Boolean(l.email),helperText:n.email&&l.email,autoComplete:\"email\",required:!0})),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,id:\"token\",label:\"C\\xf3digo de Verifica\\xe7\\xe3o\",name:\"token\",error:n.token&&Boolean(l.token),helperText:n.token&&l.token,autoComplete:\"off\",required:!0})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,type:c?\"text\":\"password\",id:\"newPassword\",label:\"Nova senha\",name:\"newPassword\",error:n.newPassword&&Boolean(l.newPassword),helperText:n.newPassword&&l.newPassword,autoComplete:\"off\",required:!0,InputProps:{endAdornment:r.a.createElement(zn.a,{position:\"end\"},r.a.createElement(W.a,{onClick:E},c?r.a.createElement(Ja.a,null):r.a.createElement(Cu.a,null)))}})),r.a.createElement(ht.a,{item:!0,xs:12},r.a.createElement(Ft.b,{as:Dt.a,variant:\"outlined\",fullWidth:!0,type:m?\"text\":\"password\",id:\"confirmPassword\",label:\"Confirme a senha\",name:\"confirmPassword\",error:n.confirmPassword&&Boolean(l.confirmPassword),helperText:n.confirmPassword&&l.confirmPassword,autoComplete:\"off\",required:!0,InputProps:{endAdornment:r.a.createElement(zn.a,{position:\"end\"},r.a.createElement(W.a,{onClick:b},m?r.a.createElement(Ja.a,null):r.a.createElement(Cu.a,null)))}})))),o?r.a.createElement(Fa.a,{type:\"submit\",fullWidth:!0,variant:\"contained\",color:\"primary\",className:e.submit},\"Redefinir Senha\"):r.a.createElement(Fa.a,{type:\"submit\",fullWidth:!0,variant:\"contained\",color:\"primary\",className:e.submit},\"Enviar Email\"),r.a.createElement(ht.a,{container:!0,justifyContent:\"flex-end\"},r.a.createElement(ht.a,{item:!0},r.a.createElement(Ul.a,{href:\"#\",variant:\"body2\",component:N.b,to:\"/signup\"},Fe.a.t(\"N\\xe3o tem uma conta? Cadastre-se!\")))),p&&r.a.createElement(H.a,{variant:\"body2\",color:\"error\"},p))})),r.a.createElement(ja.a,{mt:5})))};const wu=Object(D.a)(e=>({btnWrapper:{position:\"relative\"},buttonProgress:{color:Pa.a[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}})),ku=Wt.b().shape({nome:Wt.d().required(\"Nombre es obligatorio\"),token:Wt.d().required(\"Token es obligatorio\"),tipo:Wt.d().oneOf([\"Facebook\",\"Instagram\",\"Webchat\"],\"Tipo inv\\xe1lido\").required(\"Tipo es obligatorio\")});var Tu=e=>{let{open:a,onClose:t,hubnotificameId:l}=e;const o=wu(),s={nome:\"\",token:\"\",tipo:\"\"},[i,c]=Object(n.useState)(s);Object(n.useEffect)(()=>{(async()=>{try{if(!l)return;const{data:e}=await Qe.get(\"/hub-notificame/\"+l);c({nome:e.nome,token:e.token,tipo:e.tipo})}catch(e){Xe(e)}})()},[l,a]);const d=()=>{c(s),t()};return r.a.createElement(at.a,{open:a,onClose:d,maxWidth:\"xs\",fullWidth:!0},r.a.createElement(bt.a,null,\"Agregar Token\"),r.a.createElement(Ft.e,{initialValues:i,enableReinitialize:!0,validationSchema:ku,onSubmit:async e=>{try{await Qe.post(\"/hub-notificame\",e),P.b.success(\"\\xa1Token agregado correctamente!\"),d()}catch(a){Xe(a)}}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return r.a.createElement(Ft.d,null,r.a.createElement(Et.a,{dividers:!0},r.a.createElement(Ft.b,{as:Dt.a,label:\"Nombre\",name:\"nome\",error:a.nome&&Boolean(t.nome),helperText:a.nome&&t.nome,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,label:\"Token\",name:\"token\",error:a.token&&Boolean(t.token),helperText:a.token&&t.token,variant:\"outlined\",margin:\"dense\",fullWidth:!0}),r.a.createElement(Ft.b,{as:Dt.a,select:!0,label:\"Tipo\",name:\"tipo\",error:a.tipo&&Boolean(t.tipo),helperText:a.tipo&&t.tipo,variant:\"outlined\",margin:\"dense\",fullWidth:!0},r.a.createElement(G.a,{value:\"Facebook\"},\"Facebook\"),r.a.createElement(G.a,{value:\"Instagram\"},\"Instagram\"),r.a.createElement(G.a,{value:\"Webchat\"},\"WebChat\"))),r.a.createElement(tt.a,null,r.a.createElement(Fa.a,{onClick:d,color:\"secondary\",disabled:n,variant:\"outlined\"},\"Cancelar\"),r.a.createElement(Fa.a,{type:\"submit\",color:\"primary\",disabled:n,variant:\"contained\",className:o.btnWrapper},\"Agregar\",n&&r.a.createElement(Ba.a,{size:24,className:o.buttonProgress}))))}))},Iu=t(470);const ju=Object(D.a)(e=>({mainPaper:{flex:1,padding:e.spacing(1),overflowY:\"scroll\",...e.scrollbarStyles}}));var Nu=()=>{const e=ju(),[a,t]=Object(n.useState)(!1),[l,o]=Object(n.useState)([]),[s,i]=Object(n.useState)(null),[c,d]=Object(n.useState)(!1),[m,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(null),{user:E}=Object(n.useContext)(ra),b=Object(n.useCallback)(async()=>{try{const e=localStorage.getItem(\"companyId\"),{data:a}=await Qe.get(\"/hub-notificame/list\",{params:{companyId:e,userId:E.id}});o(a),t(!1)}catch(e){Xe(e)}},[E.id]);Object(n.useEffect)(()=>{b()},[b]);return r.a.createElement(Ms,null,r.a.createElement(ft,{title:p&&`\\xbfEliminar token ${p.token}?`,open:m,onClose:()=>{u(!1),g(null)},onConfirm:()=>(async e=>{try{await Qe.delete(\"/hub-notificame/\"+e),P.b.success(\"\\xa1Token eliminado correctamente!\"),b()}catch(a){Xe(a)}g(null)})(p.id)},\"\\xbfEst\\xe1s seguro de que quieres eliminar este token?\"),r.a.createElement(Tu,{open:c,onClose:()=>{i(null),d(!1),b()},hubnotificameId:null===s||void 0===s?void 0:s.id}),r.a.createElement(Rs,null,r.a.createElement(ht.a,{container:!0},r.a.createElement(ht.a,{xs:8,item:!0},r.a.createElement(qs,null,\"Conexiones Meta\")),r.a.createElement(ht.a,{xs:4,item:!0},r.a.createElement(Fa.a,{variant:\"contained\",onClick:()=>{i(null),d(!0)},color:\"primary\"},\"Agregar\")))),r.a.createElement(xt.a,{className:e.mainPaper,variant:\"outlined\"},r.a.createElement(Ur.a,{size:\"small\"},r.a.createElement(_r.a,null,r.a.createElement(Kr.a,null,r.a.createElement(Vr.a,{align:\"center\"},\"Nombre del Canal\"),r.a.createElement(Vr.a,{align:\"center\"},\"Token del Canal - NotificaMe\"),r.a.createElement(Vr.a,{align:\"center\"},\"Canal\"),r.a.createElement(Vr.a,{align:\"center\"},\"Acciones\"))),r.a.createElement(Hr.a,null,l.map(e=>r.a.createElement(Kr.a,{key:e.id},r.a.createElement(Vr.a,{align:\"center\"},e.nome),r.a.createElement(Vr.a,{align:\"center\"},e.token),r.a.createElement(Vr.a,{align:\"center\"},\"Facebook\"===e.tipo?r.a.createElement(Iu.a,{size:32}):\"Instagram\"===e.tipo?r.a.createElement(Iu.b,{size:32}):\"Webchat\"===e.tipo?r.a.createElement(Iu.c,{size:32}):e.tipo),r.a.createElement(Vr.a,{align:\"center\"},r.a.createElement(W.a,{size:\"small\",onClick:()=>(e=>{g(e),u(!0)})(e)},r.a.createElement(zt.a,null))))),a&&r.a.createElement(Fs,{columns:3})))))};var Mu=()=>{const[e,a]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{void 0!==localStorage.getItem(\"cshow\")&&a(!0)},[]),r.a.createElement(N.a,null,r.a.createElement(la,null,r.a.createElement(Rt,null,r.a.createElement(Wa,null,r.a.createElement(M.Switch,null,r.a.createElement(Gd,{exact:!0,path:\"/login\",component:As}),r.a.createElement(Gd,{exact:!0,path:\"/signup\",component:vs}),r.a.createElement(Gd,{exact:!0,path:\"/forgetpsw\",component:Ou}),r.a.createElement(ea,null,r.a.createElement(Sr,null,r.a.createElement(Gd,{exact:!0,path:\"/\",component:hl,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/tickets/:ticketId?\",component:gs,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/connections\",component:Qs,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/quick-messages\",component:qd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/todolist\",component:Um,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/schedules\",component:Zd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/tags\",component:ld,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/contacts\",component:qc,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/helps\",component:cd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/users\",component:Mc,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/files\",component:Jm,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/prompts\",component:ou,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/queue-integration\",component:yu,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/messages-api\",component:sd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/settings\",component:Ti,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/kanban\",component:Vd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/financeiro\",component:Oc,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/queues\",component:Zc,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/announcements\",component:Mm,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/subscription\",component:Gm,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/chats/:id?\",component:Bm,isPrivate:!0}),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Gd,{exact:!0,path:\"/contact-lists\",component:fd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/contact-lists/:contactListId/contacts\",component:wd,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/campaigns\",component:cm,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/campaign/:campaignId/report\",component:wm,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/campaigns-config\",component:um,isPrivate:!0}),r.a.createElement(Gd,{exact:!0,path:\"/hub-notificame\",component:Nu,isPrivate:!0}))))),r.a.createElement(P.a,{autoClose:3e3})))))};const Pu=new i.QueryClient;var Ru=()=>{const[e,a]=Object(n.useState)(),t=Object(u.a)(\"(prefers-color-scheme: dark)\"),l=window.localStorage.getItem(\"preferredTheme\"),[o,s]=Object(n.useState)(l||(t?\"dark\":\"light\"));Object(n.useEffect)(()=>{j.debug(\"\\ud83c\\udfaf App.js cargado - Aplicaci\\xf3n iniciada\"),j.whatsapp.debug(\"\\ud83e\\uddea LOG DE PRUEBA - WhatsApp desde App.js\"),j.socket.debug(\"\\ud83e\\uddea LOG DE PRUEBA - Socket desde App.js\")},[]);const g=r.a.useMemo(()=>({toggleColorMode:()=>{s(e=>\"light\"===e?\"dark\":\"light\")}}),[]),E=Object(d.a)({scrollbarStyles:{\"&::-webkit-scrollbar\":{width:\"8px\",height:\"8px\",borderRadius:\"8px\"},\"&::-webkit-scrollbar-thumb\":{boxShadow:\"inset 0 0 6px rgba(0, 0, 0, 0.3)\",backgroundColor:\"#1e3a8a\",borderRadius:\"8px\"}},scrollbarStylesSoft:{\"&::-webkit-scrollbar\":{width:\"8px\",borderRadius:\"8px\"},\"&::-webkit-scrollbar-thumb\":{backgroundColor:\"light\"===o?\"#F3F4F6\":\"#374151\",borderRadius:\"8px\"}},palette:{type:o,primary:{main:\"light\"===o?\"#1e3a8a\":\"#3b82f6\"},sair:{main:\"light\"===o?\"#1e3a8a\":\"#374151\"},vcard:{main:\"light\"===o?\"#1e3a8a\":\"#6b7280\"},textPrimary:\"light\"===o?\"#1f2937\":\"#f9fafb\",borderPrimary:\"light\"===o?\"#1e3a8a\":\"#3b82f6\",dark:{main:\"light\"===o?\"#374151\":\"#f3f4f6\"},light:{main:\"light\"===o?\"#f9fafb\":\"#374151\"},tabHeaderBackground:\"light\"===o?\"#f3f4f6\":\"#374151\",optionsBackground:\"light\"===o?\"#ffffff\":\"#1f2937\",options:\"light\"===o?\"#ffffff\":\"#374151\",fontecor:\"light\"===o?\"#1e3a8a\":\"#3b82f6\",fancyBackground:\"light\"===o?\"#f9fafb\":\"#111827\",bordabox:\"light\"===o?\"#e5e7eb\":\"#374151\",newmessagebox:\"light\"===o?\"#f3f4f6\":\"#374151\",inputdigita:\"light\"===o?\"#ffffff\":\"#374151\",contactdrawer:\"light\"===o?\"#ffffff\":\"#374151\",announcements:\"light\"===o?\"#f3f4f6\":\"#374151\",login:\"light\"===o?\"#ffffff\":\"#111827\",announcementspopover:\"light\"===o?\"#ffffff\":\"#374151\",chatlist:\"light\"===o?\"#f3f4f6\":\"#374151\",boxlist:\"light\"===o?\"#f3f4f6\":\"#374151\",boxchatlist:\"light\"===o?\"#f3f4f6\":\"#1f2937\",total:\"light\"===o?\"#ffffff\":\"#111827\",messageIcons:\"light\"===o?\"#6b7280\":\"#d1d5db\",inputBackground:\"light\"===o?\"#ffffff\":\"#374151\",barraSuperior:\"light\"===o?\"linear-gradient(to right, #1e3a8a, #3b82f6, #1e3a8a)\":\"#1f2937\",boxticket:\"light\"===o?\"#f3f4f6\":\"#374151\",campaigntab:\"light\"===o?\"#f3f4f6\":\"#374151\",mediainput:\"light\"===o?\"#f3f4f6\":\"#111827\"},mode:o},e);return Object(n.useEffect)(()=>{const e=localStorage.getItem(\"i18nextLng\");\"esES\"===e.substring(0,2)+e.substring(3,5)&&a(c.esES)},[]),Object(n.useEffect)(()=>{window.localStorage.setItem(\"preferredTheme\",o)},[o]),r.a.createElement(p.Provider,{value:{colorMode:g}},r.a.createElement(m.a,{theme:E},r.a.createElement(i.QueryClientProvider,{client:Pu},r.a.createElement(v.Provider,{value:h},r.a.createElement(Mu,null)))))};o.a.render(r.a.createElement(s.a,null,r.a.createElement(Ru,null)),document.getElementById(\"root\"),()=>{window.finishProgress()})}},[[770,1,2]]]);","extractedComments":[]}